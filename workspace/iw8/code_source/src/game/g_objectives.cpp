/*
==============
G_Objectives_Save
==============
*/

void __fastcall G_Objectives_Save(MemoryFile *memFile)
{
  ?G_Objectives_Save@@YAXPEAUMemoryFile@@@Z(memFile);
}

/*
==============
Scr_Objective_RemoveClientFromMask
==============
*/

void __fastcall Scr_Objective_RemoveClientFromMask(scrContext_t *scrContext)
{
  ?Scr_Objective_RemoveClientFromMask@@YAXAEAUscrContext_t@@@Z(scrContext);
}

/*
==============
Scr_Objective_RemoveTeamFromMask
==============
*/

void __fastcall Scr_Objective_RemoveTeamFromMask(scrContext_t *scrContext)
{
  ?Scr_Objective_RemoveTeamFromMask@@YAXAEAUscrContext_t@@@Z(scrContext);
}

/*
==============
Scr_Objective_AddTeamToMask
==============
*/

void __fastcall Scr_Objective_AddTeamToMask(scrContext_t *scrContext)
{
  ?Scr_Objective_AddTeamToMask@@YAXAEAUscrContext_t@@@Z(scrContext);
}

/*
==============
G_Objectives_Init
==============
*/

void G_Objectives_Init(void)
{
  ?G_Objectives_Init@@YAXXZ();
}

/*
==============
ScrCmd_Objective_PinForClient
==============
*/

void __fastcall ScrCmd_Objective_PinForClient(scrContext_t *scrContext)
{
  ?ScrCmd_Objective_PinForClient@@YAXAEAUscrContext_t@@@Z(scrContext);
}

/*
==============
Scr_Objective_RemoveAllFromMask
==============
*/

void __fastcall Scr_Objective_RemoveAllFromMask(scrContext_t *scrContext)
{
  ?Scr_Objective_RemoveAllFromMask@@YAXAEAUscrContext_t@@@Z(scrContext);
}

/*
==============
G_Objectives_Update
==============
*/

void __fastcall G_Objectives_Update(gentity_s *player)
{
  ?G_Objectives_Update@@YAXPEAUgentity_s@@@Z(player);
}

/*
==============
Scr_Objective_HideFromPlayersInMask
==============
*/

void __fastcall Scr_Objective_HideFromPlayersInMask(scrContext_t *scrContext)
{
  ?Scr_Objective_HideFromPlayersInMask@@YAXAEAUscrContext_t@@@Z(scrContext);
}

/*
==============
Scr_Objective_SetProgressTeam
==============
*/

void __fastcall Scr_Objective_SetProgressTeam(scrContext_t *scrContext)
{
  ?Scr_Objective_SetProgressTeam@@YAXAEAUscrContext_t@@@Z(scrContext);
}

/*
==============
G_Objectives_Load
==============
*/

void __fastcall G_Objectives_Load(MemoryFile *memFile)
{
  ?G_Objectives_Load@@YAXPEAUMemoryFile@@@Z(memFile);
}

/*
==============
Scr_Objective_SetOwnerClient
==============
*/

void __fastcall Scr_Objective_SetOwnerClient(scrContext_t *scrContext)
{
  ?Scr_Objective_SetOwnerClient@@YAXAEAUscrContext_t@@@Z(scrContext);
}

/*
==============
Scr_Objective_Ping
==============
*/

void __fastcall Scr_Objective_Ping(scrContext_t *scrContext)
{
  ?Scr_Objective_Ping@@YAXAEAUscrContext_t@@@Z(scrContext);
}

/*
==============
G_Objectives_Get
==============
*/

objective_t *__fastcall G_Objectives_Get(int objectiveIndex)
{
  return ?G_Objectives_Get@@YAPEAUobjective_t@@H@Z(objectiveIndex);
}

/*
==============
Scr_Objective_SetOwnerTeam
==============
*/

void __fastcall Scr_Objective_SetOwnerTeam(scrContext_t *scrContext)
{
  ?Scr_Objective_SetOwnerTeam@@YAXAEAUscrContext_t@@@Z(scrContext);
}

/*
==============
G_Objectives_GetMaxObjectives
==============
*/

int __fastcall G_Objectives_GetMaxObjectives()
{
  return ?G_Objectives_GetMaxObjectives@@YAHXZ();
}

/*
==============
Scr_Objective_SetProgressClient
==============
*/

void __fastcall Scr_Objective_SetProgressClient(scrContext_t *scrContext)
{
  ?Scr_Objective_SetProgressClient@@YAXAEAUscrContext_t@@@Z(scrContext);
}

/*
==============
Scr_Objective_SetPingsForTeam
==============
*/

void __fastcall Scr_Objective_SetPingsForTeam(scrContext_t *scrContext)
{
  ?Scr_Objective_SetPingsForTeam@@YAXAEAUscrContext_t@@@Z(scrContext);
}

/*
==============
Scr_Objective_AddAllToMask
==============
*/

void __fastcall Scr_Objective_AddAllToMask(scrContext_t *scrContext)
{
  ?Scr_Objective_AddAllToMask@@YAXAEAUscrContext_t@@@Z(scrContext);
}

/*
==============
G_Objectives_GetObjectiveIndexFromPSIndex
==============
*/

int __fastcall G_Objectives_GetObjectiveIndexFromPSIndex(const int playerClientNum, const unsigned __int8 localPlayerIndex)
{
  return ?G_Objectives_GetObjectiveIndexFromPSIndex@@YAHHE@Z(playerClientNum, localPlayerIndex);
}

/*
==============
Scr_Objective_SetPings
==============
*/

void __fastcall Scr_Objective_SetPings(scrContext_t *scrContext)
{
  ?Scr_Objective_SetPings@@YAXAEAUscrContext_t@@@Z(scrContext);
}

/*
==============
ScrCmd_Objective_PinForTeam
==============
*/

void __fastcall ScrCmd_Objective_PinForTeam(scrContext_t *scrContext)
{
  ?ScrCmd_Objective_PinForTeam@@YAXAEAUscrContext_t@@@Z(scrContext);
}

/*
==============
Scr_Objective_AddClientToMask
==============
*/

void __fastcall Scr_Objective_AddClientToMask(scrContext_t *scrContext)
{
  ?Scr_Objective_AddClientToMask@@YAXAEAUscrContext_t@@@Z(scrContext);
}

/*
==============
ScrCmd_Objective_UnpinForClient
==============
*/

void __fastcall ScrCmd_Objective_UnpinForClient(scrContext_t *scrContext)
{
  ?ScrCmd_Objective_UnpinForClient@@YAXAEAUscrContext_t@@@Z(scrContext);
}

/*
==============
ScrCmd_Objective_UnpinForTeam
==============
*/

void __fastcall ScrCmd_Objective_UnpinForTeam(scrContext_t *scrContext)
{
  ?ScrCmd_Objective_UnpinForTeam@@YAXAEAUscrContext_t@@@Z(scrContext);
}

/*
==============
Scr_Objective_ShowToPlayersInMask
==============
*/

void __fastcall Scr_Objective_ShowToPlayersInMask(scrContext_t *scrContext)
{
  ?Scr_Objective_ShowToPlayersInMask@@YAXAEAUscrContext_t@@@Z(scrContext);
}

/*
==============
Scr_Objective_Delete
==============
*/
void Scr_Objective_Delete(scrContext_t *scrContext)
{
  int Int; 
  objective_t *v2; 

  Int = Scr_GetInt(scrContext, 0);
  v2 = G_Objectives_Get(Int);
  G_Objectives_Clear(v2);
}

/*
==============
Scr_Objective_State
==============
*/
void Scr_Objective_State(scrContext_t *scrContext)
{
  int Int; 
  objective_t *v3; 
  scr_string_t ConstString; 
  const char *String; 
  const char *v6; 

  Int = Scr_GetInt(scrContext, 0);
  v3 = G_Objectives_Get(Int);
  ConstString = Scr_GetConstString(scrContext, 1u);
  if ( ConstString != scr_const.empty )
  {
    if ( ConstString == scr_const.active )
    {
      v3->state = OBJST_ACTIVE;
      return;
    }
    if ( ConstString == scr_const.invisible )
    {
      v3->state = OBJST_INVISIBLE;
      return;
    }
    if ( ConstString == scr_const.done )
    {
      v3->state = OBJST_DONE;
      return;
    }
    if ( ConstString == scr_const.current )
    {
      v3->state = OBJST_CURRENT;
      return;
    }
    if ( ConstString == scr_const.failed )
    {
      v3->state = OBJST_FAILED;
      return;
    }
    String = Scr_GetString(scrContext, 1u);
    v6 = j_va("Illegal objective state \"%s\". Valid states are \"empty\", \"active\", \"invisible\", \"done\", \"current\", \"failed\"\n", String);
    Scr_Error(COM_ERR_2857, scrContext, v6);
  }
  v3->state = OBJST_EMPTY;
}

/*
==============
Scr_Objective_Icon
==============
*/
void Scr_Objective_Icon(scrContext_t *scrContext)
{
  int Int; 
  objective_t *v3; 
  const char *String; 
  const char *v5; 
  unsigned int outIndex; 

  Int = Scr_GetInt(scrContext, 0);
  v3 = G_Objectives_Get(Int);
  String = Scr_GetString(scrContext, 1u);
  if ( !NetConstStrings_GetIndexPlusOneFromName(NETCONSTSTRINGTYPE_OBJECTIVEICON, String, &outIndex) )
  {
    v5 = j_va("'%s' is not a valid objective image. Please make sure it is included as precache_objectiveicon in zone_source.", String);
    Scr_Error(COM_ERR_6250, scrContext, v5);
  }
  v3->icon = outIndex;
}

/*
==============
Scr_Objective_MLGIcon
==============
*/
void Scr_Objective_MLGIcon(scrContext_t *scrContext)
{
  int Int; 
  objective_t *v3; 
  const char *String; 
  const char *v5; 
  unsigned int outIndex; 

  Int = Scr_GetInt(scrContext, 0);
  v3 = G_Objectives_Get(Int);
  String = Scr_GetString(scrContext, 1u);
  if ( !NetConstStrings_GetIndexPlusOneFromName(NETCONSTSTRINGTYPE_OBJECTIVEICON, String, &outIndex) )
  {
    v5 = j_va("'%s' is not a valid objective image. Please make sure it is included as precache_objectiveicon in zone_source.", String);
    Scr_Error(COM_ERR_6368, scrContext, v5);
  }
  v3->mlgObjectiveData.mlgIcon = outIndex;
}

/*
==============
Scr_Objective_Reset_MLGIcon
==============
*/
void Scr_Objective_Reset_MLGIcon(scrContext_t *scrContext)
{
  int Int; 

  Int = Scr_GetInt(scrContext, 0);
  G_Objectives_Get(Int)->mlgObjectiveData.mlgIcon = 0;
}

/*
==============
Scr_Objective_Current
==============
*/
void Scr_Objective_Current(scrContext_t *scrContext)
{
  int v1; 
  __int64 v4; 
  unsigned int i; 
  int Int; 
  __int64 v7; 
  const char *v8; 
  objectiveState_t *p_state; 
  char v10[128]; 

  v1 = 128;
  memset_0(v10, 0, sizeof(v10));
  if ( !Com_GameMode_SupportsFeature((Com_GameMode_Feature)258) || !G_GameInterface_PlayingBR() )
    v1 = 32;
  v4 = 0i64;
  for ( i = 0; i < Scr_GetNumParam(scrContext); ++i )
  {
    Int = Scr_GetInt(scrContext, i);
    v7 = Int;
    if ( Int < 0 || Int >= v1 )
    {
      v8 = j_va("index %i is an illegal objective index. Valid indexes are 0 to %i\n", (unsigned int)Int, (unsigned int)(v1 - 1));
      Scr_Error(COM_ERR_2860, scrContext, v8);
    }
    v10[v7] = 1;
  }
  p_state = &level.objectives[0].state;
  do
  {
    if ( v10[v4] )
    {
      *p_state = OBJST_CURRENT;
    }
    else if ( *p_state == OBJST_CURRENT )
    {
      *p_state = OBJST_ACTIVE;
    }
    ++v4;
    p_state += 340;
  }
  while ( v4 < (unsigned int)v1 );
}

/*
==============
Scr_Objective_SetLabel
==============
*/
void Scr_Objective_SetLabel(scrContext_t *scrContext)
{
  int Int; 
  objective_t *v3; 
  GConfigStrings *v4; 
  const char *IString; 
  const char *v6; 

  Int = Scr_GetInt(scrContext, 0);
  v3 = G_Objectives_Get(Int);
  if ( !GConfigStrings::ms_gConfigStrings && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\game\\g_configstrings.h", 71, ASSERT_TYPE_ASSERT, "( ms_gConfigStrings )", (const char *)&queryFormat, "ms_gConfigStrings") )
    __debugbreak();
  v4 = GConfigStrings::ms_gConfigStrings;
  if ( Scr_GetType(scrContext, 1u) == VAR_ISTRING )
    IString = Scr_GetIString(scrContext, 1u);
  else
    IString = Scr_GetString(scrContext, 1u);
  v6 = IString;
  v4->SetLocalizedString(v4, IString, &v3->friendlyLabel);
  v4->SetLocalizedString(v4, v6, &v3->enemyLabel);
  v4->SetLocalizedString(v4, v6, &v3->neutralLabel);
}

/*
==============
Scr_Objective_SetFriendlyLabel
==============
*/
void Scr_Objective_SetFriendlyLabel(scrContext_t *scrContext)
{
  int Int; 
  objective_t *v3; 
  GConfigStrings *v4; 
  const char *IString; 

  Int = Scr_GetInt(scrContext, 0);
  v3 = G_Objectives_Get(Int);
  if ( !GConfigStrings::ms_gConfigStrings && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\game\\g_configstrings.h", 71, ASSERT_TYPE_ASSERT, "( ms_gConfigStrings )", (const char *)&queryFormat, "ms_gConfigStrings") )
    __debugbreak();
  v4 = GConfigStrings::ms_gConfigStrings;
  if ( Scr_GetType(scrContext, 1u) == VAR_ISTRING )
    IString = Scr_GetIString(scrContext, 1u);
  else
    IString = Scr_GetString(scrContext, 1u);
  v4->SetLocalizedString(v4, IString, &v3->friendlyLabel);
}

/*
==============
Scr_Objective_SetEnemyLabel
==============
*/
void Scr_Objective_SetEnemyLabel(scrContext_t *scrContext)
{
  int Int; 
  objective_t *v3; 
  GConfigStrings *v4; 
  const char *IString; 

  Int = Scr_GetInt(scrContext, 0);
  v3 = G_Objectives_Get(Int);
  if ( !GConfigStrings::ms_gConfigStrings && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\game\\g_configstrings.h", 71, ASSERT_TYPE_ASSERT, "( ms_gConfigStrings )", (const char *)&queryFormat, "ms_gConfigStrings") )
    __debugbreak();
  v4 = GConfigStrings::ms_gConfigStrings;
  if ( Scr_GetType(scrContext, 1u) == VAR_ISTRING )
    IString = Scr_GetIString(scrContext, 1u);
  else
    IString = Scr_GetString(scrContext, 1u);
  v4->SetLocalizedString(v4, IString, &v3->enemyLabel);
}

/*
==============
Scr_Objective_SetNeutralLabel
==============
*/
void Scr_Objective_SetNeutralLabel(scrContext_t *scrContext)
{
  int Int; 
  objective_t *v3; 
  GConfigStrings *v4; 
  const char *IString; 

  Int = Scr_GetInt(scrContext, 0);
  v3 = G_Objectives_Get(Int);
  if ( !GConfigStrings::ms_gConfigStrings && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\game\\g_configstrings.h", 71, ASSERT_TYPE_ASSERT, "( ms_gConfigStrings )", (const char *)&queryFormat, "ms_gConfigStrings") )
    __debugbreak();
  v4 = GConfigStrings::ms_gConfigStrings;
  if ( Scr_GetType(scrContext, 1u) == VAR_ISTRING )
    IString = Scr_GetIString(scrContext, 1u);
  else
    IString = Scr_GetString(scrContext, 1u);
  v4->SetLocalizedString(v4, IString, &v3->neutralLabel);
}

/*
==============
Scr_GetMaxObjectiveCount
==============
*/
void Scr_GetMaxObjectiveCount(scrContext_t *scrContext)
{
  bool v2; 
  int v3; 

  v2 = Com_GameMode_SupportsFeature((Com_GameMode_Feature)258) && G_GameInterface_PlayingBR();
  v3 = 128;
  if ( !v2 )
    v3 = 32;
  Scr_AddInt(scrContext, v3);
}

/*
==============
Scr_Objective_Position
==============
*/
void Scr_Objective_Position(scrContext_t *scrContext)
{
  int Int; 
  vec3_t vectorValue; 

  Int = Scr_GetInt(scrContext, 0);
  _RDI = G_Objectives_Get(Int);
  Scr_GetVector(scrContext, 1u, &vectorValue);
  _RDI->entNum[0] = 2047;
  __asm
  {
    vmovss  xmm0, dword ptr [rsp+48h+vectorValue]
    vmovss  dword ptr [rdi], xmm0
    vmovss  xmm1, dword ptr [rsp+48h+vectorValue+4]
    vmovss  dword ptr [rdi+4], xmm1
    vmovss  xmm0, dword ptr [rsp+48h+vectorValue+8]
    vmovss  dword ptr [rdi+8], xmm0
  }
  _RDI->validLocations |= 1u;
}

/*
==============
Scr_Objective_OnEntity
==============
*/
void Scr_Objective_OnEntity(scrContext_t *scrContext)
{
  int Int; 
  objective_t *v2; 

  Int = Scr_GetInt(scrContext, 0);
  v2 = G_Objectives_Get(Int);
  v2->entNum[0] = GScr_GetEntity(1u)->s.number;
  *(_QWORD *)v2->origin[0].v = 0i64;
  v2->origin[0].v[2] = 0.0;
  v2->validLocations |= 1u;
}

/*
==============
Scr_Objective_SetLocation
==============
*/
void Scr_Objective_SetLocation(scrContext_t *scrContext)
{
  int Int; 
  unsigned int v4; 
  __int64 v5; 
  const char *v6; 
  const char *v7; 
  const gentity_s *Entity; 
  int v13; 
  int v14; 
  vec3_t vectorValue; 

  Int = Scr_GetInt(scrContext, 0);
  _RSI = G_Objectives_Get(Int);
  v4 = Scr_GetInt(scrContext, 1u);
  v5 = (int)v4;
  if ( v4 > 7 )
  {
    v6 = j_va("Invalid objective location index: %d", v4);
    Scr_Error(COM_ERR_2861, scrContext, v6);
  }
  if ( (int)v5 > 0 && !Com_GameMode_SupportsFeature(WEAPON_SKYDIVE_MID_AIR_DETACH|WEAPON_LADDER_AIM|0x80) )
  {
    v7 = j_va("This game mode does not support more than one objective location. Invalid objective location index: %d", (unsigned int)v5);
    Scr_Error(COM_ERR_2862, scrContext, v7);
  }
  if ( Scr_GetType(scrContext, 2u) == VAR_VECTOR )
  {
    Scr_GetVector(scrContext, 2u, &vectorValue);
    if ( (unsigned int)v5 >= 8 )
    {
      v14 = 8;
      v13 = v5;
      if ( CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\game\\g_objectives.cpp", 907, ASSERT_TYPE_ASSERT, "(unsigned)( index ) < (unsigned)( 8 )", "index doesn't index MAX_OBJECTIVE_LOCATIONS\n\t%i not in [0, %i)", v13, v14) )
        __debugbreak();
    }
    __asm
    {
      vmovss  xmm0, dword ptr [rsp+68h+vectorValue]
      vmovss  xmm1, dword ptr [rsp+68h+vectorValue+4]
    }
    _RCX = 3 * v5;
    _RSI->entNum[v5] = 2047;
    __asm
    {
      vmovss  dword ptr [rsi+rcx*4], xmm0
      vmovss  xmm0, dword ptr [rsp+68h+vectorValue+8]
      vmovss  dword ptr [rsi+rcx*4+8], xmm0
      vmovss  dword ptr [rsi+rcx*4+4], xmm1
    }
    _RSI->validLocations |= 1 << v5;
  }
  else
  {
    Entity = GScr_GetEntity(2u);
    Objective_SetEntity(_RSI, v5, Entity);
  }
}

/*
==============
Scr_Objective_UnsetLocation
==============
*/
void Scr_Objective_UnsetLocation(scrContext_t *scrContext)
{
  int Int; 
  objective_t *v3; 
  unsigned int v4; 
  __int64 v5; 
  const char *v6; 
  __int64 v7; 
  int v8; 
  int v9; 

  Int = Scr_GetInt(scrContext, 0);
  v3 = G_Objectives_Get(Int);
  v4 = Scr_GetInt(scrContext, 1u);
  v5 = (int)v4;
  if ( v4 > 7 )
  {
    v6 = j_va("Invalid objective location index: %d", v4);
    Scr_Error(COM_ERR_2863, scrContext, v6);
  }
  if ( (unsigned int)v5 >= 8 )
  {
    v9 = 8;
    v8 = v5;
    if ( CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\game\\g_objectives.cpp", 925, ASSERT_TYPE_ASSERT, "(unsigned)( index ) < (unsigned)( 8 )", "index doesn't index MAX_OBJECTIVE_LOCATIONS\n\t%i not in [0, %i)", v8, v9) )
      __debugbreak();
  }
  v7 = v5;
  v3->entNum[v5] = 2047;
  *(_QWORD *)v3->origin[v7].v = 0i64;
  v3->origin[v7].v[2] = 0.0;
  v3->validLocations &= ~(1 << v5);
}

/*
==============
Scr_Objective_SetZOffset
==============
*/
void Scr_Objective_SetZOffset(scrContext_t *scrContext)
{
  int Int; 

  Int = Scr_GetInt(scrContext, 0);
  _RBX = G_Objectives_Get(Int);
  *(double *)&_XMM0 = Scr_GetFloat(scrContext, 1u);
  __asm { vmovss  dword ptr [rbx+84h], xmm0 }
}

/*
==============
Scr_Objective_SetDescription
==============
*/
void Scr_Objective_SetDescription(scrContext_t *scrContext)
{
  int Int; 
  objective_t *v3; 
  GConfigStrings *v4; 
  const char *IString; 

  Int = Scr_GetInt(scrContext, 0);
  v3 = G_Objectives_Get(Int);
  if ( !GConfigStrings::ms_gConfigStrings && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\game\\g_configstrings.h", 71, ASSERT_TYPE_ASSERT, "( ms_gConfigStrings )", (const char *)&queryFormat, "ms_gConfigStrings") )
    __debugbreak();
  v4 = GConfigStrings::ms_gConfigStrings;
  if ( Scr_GetType(scrContext, 1u) == VAR_ISTRING )
    IString = Scr_GetIString(scrContext, 1u);
  else
    IString = Scr_GetString(scrContext, 1u);
  v4->SetLocalizedString(v4, IString, &v3->description);
}

/*
==============
Scr_Objective_SetPinned
==============
*/
void Scr_Objective_SetPinned(scrContext_t *scrContext)
{
  int Int; 
  PlayerMask *p_pinned; 

  Int = Scr_GetInt(scrContext, 0);
  p_pinned = &G_Objectives_Get(Int)->pinned;
  if ( Scr_GetInt(scrContext, 1u) )
    G_PlayerMask_AddAll(p_pinned);
  else
    G_PlayerMask_RemoveAll(p_pinned);
}

/*
==============
ScrCmd_Objective_PinForClient
==============
*/
void ScrCmd_Objective_PinForClient(scrContext_t *scrContext)
{
  int Int; 
  objective_t *v3; 
  gentity_s *Entity; 
  gentity_s *v5; 

  Int = Scr_GetInt(scrContext, 0);
  v3 = G_Objectives_Get(Int);
  Entity = GScr_GetEntity(1u);
  v5 = Entity;
  if ( !Entity->client && !Entity->agent )
    Scr_Error(COM_ERR_2864, scrContext, "Entity must be a player or a bot.");
  G_PlayerMask_AddClient(&v3->pinned, v5->s.clientNum);
}

/*
==============
ScrCmd_Objective_PinForTeam
==============
*/
void ScrCmd_Objective_PinForTeam(scrContext_t *scrContext)
{
  int Int; 
  objective_t *v3; 
  scr_string_t ConstString; 
  const char *v5; 
  const char *v6; 
  team_t outTeam; 

  Int = Scr_GetInt(scrContext, 0);
  v3 = G_Objectives_Get(Int);
  ConstString = Scr_GetConstString(scrContext, 1u);
  if ( Com_Teams_TeamFromString(ConstString, &outTeam) )
  {
    G_PlayerMask_AddTeam(&v3->pinned, outTeam);
  }
  else
  {
    v5 = SL_ConvertToString(ConstString);
    v6 = j_va("unknown team '%s'", v5);
    Scr_Error(COM_ERR_2865, scrContext, v6);
  }
}

/*
==============
ScrCmd_Objective_UnpinForClient
==============
*/
void ScrCmd_Objective_UnpinForClient(scrContext_t *scrContext)
{
  int Int; 
  objective_t *v3; 
  gentity_s *Entity; 
  gentity_s *v5; 

  Int = Scr_GetInt(scrContext, 0);
  v3 = G_Objectives_Get(Int);
  Entity = GScr_GetEntity(1u);
  v5 = Entity;
  if ( !Entity->client && !Entity->agent )
    Scr_Error(COM_ERR_2866, scrContext, "Entity must be a player or a bot.");
  G_PlayerMask_RemoveClient(&v3->pinned, v5->s.clientNum);
}

/*
==============
ScrCmd_Objective_UnpinForTeam
==============
*/
void ScrCmd_Objective_UnpinForTeam(scrContext_t *scrContext)
{
  int Int; 
  objective_t *v3; 
  scr_string_t ConstString; 
  const char *v5; 
  const char *v6; 
  team_t outTeam; 

  Int = Scr_GetInt(scrContext, 0);
  v3 = G_Objectives_Get(Int);
  ConstString = Scr_GetConstString(scrContext, 1u);
  if ( Com_Teams_TeamFromString(ConstString, &outTeam) )
  {
    G_PlayerMask_RemoveTeam(&v3->pinned, outTeam);
  }
  else
  {
    v5 = SL_ConvertToString(ConstString);
    v6 = j_va("unknown team '%s'", v5);
    Scr_Error(COM_ERR_2867, scrContext, v6);
  }
}

/*
==============
Scr_Objective_SetHot
==============
*/
void Scr_Objective_SetHot(scrContext_t *scrContext)
{
  int Int; 
  objective_t *v3; 

  Int = Scr_GetInt(scrContext, 0);
  v3 = G_Objectives_Get(Int);
  if ( Scr_GetInt(scrContext, 1u) )
    *(_WORD *)v3->flags |= 0x40u;
  else
    *(_WORD *)v3->flags &= ~0x40u;
}

/*
==============
Scr_Objective_SetPulsate
==============
*/
void Scr_Objective_SetPulsate(scrContext_t *scrContext)
{
  int Int; 
  objective_t *v3; 

  Int = Scr_GetInt(scrContext, 0);
  v3 = G_Objectives_Get(Int);
  if ( Scr_GetInt(scrContext, 1u) )
    *(_WORD *)v3->flags |= 0x100u;
  else
    *(_WORD *)v3->flags &= ~0x100u;
}

/*
==============
Scr_Objective_SetShowDistance
==============
*/
void Scr_Objective_SetShowDistance(scrContext_t *scrContext)
{
  int Int; 
  objective_t *v3; 

  Int = Scr_GetInt(scrContext, 0);
  v3 = G_Objectives_Get(Int);
  if ( Scr_GetInt(scrContext, 1u) )
    *(_WORD *)v3->flags |= 4u;
  else
    *(_WORD *)v3->flags &= ~4u;
}

/*
==============
Scr_Objective_SetPlayIntro
==============
*/
void Scr_Objective_SetPlayIntro(scrContext_t *scrContext)
{
  int Int; 
  objective_t *v3; 

  Int = Scr_GetInt(scrContext, 0);
  v3 = G_Objectives_Get(Int);
  if ( Scr_GetInt(scrContext, 1u) )
    *(_WORD *)v3->flags |= 0x10u;
  else
    *(_WORD *)v3->flags &= ~0x10u;
}

/*
==============
Scr_Objective_SetPlayOutro
==============
*/
void Scr_Objective_SetPlayOutro(scrContext_t *scrContext)
{
  int Int; 
  objective_t *v3; 

  Int = Scr_GetInt(scrContext, 0);
  v3 = G_Objectives_Get(Int);
  if ( Scr_GetInt(scrContext, 1u) )
    *(_WORD *)v3->flags |= 0x20u;
  else
    *(_WORD *)v3->flags &= ~0x20u;
}

/*
==============
Scr_Objective_SetRotateOnMinimap
==============
*/
void Scr_Objective_SetRotateOnMinimap(scrContext_t *scrContext)
{
  int Int; 
  objective_t *v3; 

  Int = Scr_GetInt(scrContext, 0);
  v3 = G_Objectives_Get(Int);
  if ( Scr_GetInt(scrContext, 1u) )
    *(_WORD *)v3->flags |= 1u;
  else
    *(_WORD *)v3->flags &= ~1u;
}

/*
==============
Scr_Objective_SetMinimapIconSize
==============
*/
void Scr_Objective_SetMinimapIconSize(scrContext_t *scrContext)
{
  int Int; 
  objective_t *v3; 
  scr_string_t ConstString; 
  const char *v5; 
  const char *v6; 

  Int = Scr_GetInt(scrContext, 0);
  v3 = G_Objectives_Get(Int);
  ConstString = Scr_GetConstString(scrContext, 1u);
  if ( ConstString == scr_const.icon_large )
  {
    *(_WORD *)v3->flags |= 2u;
    v3->size = OBJ_ICON_SIZE_LARGE;
  }
  else if ( ConstString == scr_const.icon_medium )
  {
    *(_WORD *)v3->flags &= ~2u;
    v3->size = OBJ_ICON_SIZE_MEDIUM;
  }
  else if ( ConstString == scr_const.icon_regular )
  {
    *(_WORD *)v3->flags &= ~2u;
    v3->size = OBJ_ICON_SIZE_REGULAR;
  }
  else if ( ConstString == scr_const.icon_small )
  {
    *(_WORD *)v3->flags &= ~2u;
    v3->size = OBJ_ICON_SIZE_SMALL;
  }
  else
  {
    v5 = SL_ConvertToString(ConstString);
    v6 = j_va("Illegal objective icon size \"%s\" \n", v5);
    Scr_ParamError(COM_ERR_2868, scrContext, 1u, v6);
  }
}

/*
==============
Scr_Objective_SetShowOnCompass
==============
*/
void Scr_Objective_SetShowOnCompass(scrContext_t *scrContext)
{
  int Int; 
  objective_t *v3; 

  Int = Scr_GetInt(scrContext, 0);
  v3 = G_Objectives_Get(Int);
  if ( Scr_GetInt(scrContext, 1u) )
    *(_WORD *)v3->flags |= 0x200u;
  else
    *(_WORD *)v3->flags &= ~0x200u;
}

/*
==============
Scr_Objective_SetSpecialObjectiveDisplay
==============
*/
void Scr_Objective_SetSpecialObjectiveDisplay(scrContext_t *scrContext)
{
  int Int; 
  objective_t *v3; 

  Int = Scr_GetInt(scrContext, 0);
  v3 = G_Objectives_Get(Int);
  if ( Scr_GetInt(scrContext, 1u) )
    *(_WORD *)v3->flags |= 0x2000u;
  else
    *(_WORD *)v3->flags &= ~0x2000u;
}

/*
==============
Scr_Objective_SetHideForMLGSpectator
==============
*/
void Scr_Objective_SetHideForMLGSpectator(scrContext_t *scrContext)
{
  int Int; 
  objective_t *v3; 

  Int = Scr_GetInt(scrContext, 0);
  v3 = G_Objectives_Get(Int);
  if ( Scr_GetInt(scrContext, 1u) )
    *(_WORD *)v3->flags |= 0x4000u;
  else
    *(_WORD *)v3->flags &= ~0x4000u;
}

/*
==============
Scr_Objective_SetShowForMLGSpectator
==============
*/
void Scr_Objective_SetShowForMLGSpectator(scrContext_t *scrContext)
{
  int Int; 
  objective_t *v3; 

  Int = Scr_GetInt(scrContext, 0);
  v3 = G_Objectives_Get(Int);
  if ( Scr_GetInt(scrContext, 1u) )
    *(_WORD *)v3->flags |= 0x8000u;
  else
    *(_WORD *)v3->flags &= ~0x8000u;
}

/*
==============
Scr_Objective_SetBackground
==============
*/
void Scr_Objective_SetBackground(scrContext_t *scrContext)
{
  int Int; 
  objective_t *v3; 
  ObjectiveBackground v4; 
  int v5; 
  int v6; 

  Int = Scr_GetInt(scrContext, 0);
  v3 = G_Objectives_Get(Int);
  v4 = (unsigned __int8)Scr_GetInt(scrContext, 1u);
  if ( (unsigned __int8)v4 >= EASE_OUT_SINE )
  {
    v6 = 8;
    v5 = (unsigned __int8)v4;
    if ( CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\game\\g_objectives.cpp", 1546, ASSERT_TYPE_ASSERT, "(unsigned)( background ) < (unsigned)( ObjectiveBackground::COUNT )", "background doesn't index ObjectiveBackground::COUNT\n\t%i not in [0, %i)", v5, v6) )
      __debugbreak();
  }
  v3->background = v4;
}

/*
==============
Scr_Objective_SetMlgBackground
==============
*/
void Scr_Objective_SetMlgBackground(scrContext_t *scrContext)
{
  int Int; 
  objective_t *v3; 
  ObjectiveBackground v4; 
  int v5; 
  int v6; 

  Int = Scr_GetInt(scrContext, 0);
  v3 = G_Objectives_Get(Int);
  v4 = (unsigned __int8)Scr_GetInt(scrContext, 1u);
  if ( (unsigned __int8)v4 >= EASE_OUT_SINE )
  {
    v6 = 8;
    v5 = (unsigned __int8)v4;
    if ( CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\game\\g_objectives.cpp", 1567, ASSERT_TYPE_ASSERT, "(unsigned)( background ) < (unsigned)( ObjectiveBackground::COUNT )", "background doesn't index ObjectiveBackground::COUNT\n\t%i not in [0, %i)", v5, v6) )
      __debugbreak();
  }
  v3->mlgObjectiveData.mlgBackground = v4;
}

/*
==============
Scr_Objective_SetFadeDisabled
==============
*/
void Scr_Objective_SetFadeDisabled(scrContext_t *scrContext)
{
  int Int; 
  objective_t *v3; 

  Int = Scr_GetInt(scrContext, 0);
  v3 = G_Objectives_Get(Int);
  if ( Scr_GetInt(scrContext, 1u) )
    *(_WORD *)v3->flags |= 0x400u;
  else
    *(_WORD *)v3->flags &= ~0x400u;
}

/*
==============
Scr_Objective_SetHideElevation
==============
*/
void Scr_Objective_SetHideElevation(scrContext_t *scrContext)
{
  int Int; 
  objective_t *v3; 

  Int = Scr_GetInt(scrContext, 0);
  v3 = G_Objectives_Get(Int);
  if ( Scr_GetInt(scrContext, 1u) )
    *(_WORD *)v3->flags |= 0x1000u;
  else
    *(_WORD *)v3->flags &= ~0x1000u;
}

/*
==============
Scr_Objective_SetShowProgress
==============
*/
void Scr_Objective_SetShowProgress(scrContext_t *scrContext)
{
  int Int; 
  PlayerMask *p_progressVisibility; 

  Int = Scr_GetInt(scrContext, 0);
  p_progressVisibility = &G_Objectives_Get(Int)->progressVisibility;
  if ( Scr_GetInt(scrContext, 1u) )
    G_PlayerMask_AddAll(p_progressVisibility);
  else
    G_PlayerMask_RemoveAll(p_progressVisibility);
}

/*
==============
Scr_Objective_ShowProgressForClient
==============
*/
void Scr_Objective_ShowProgressForClient(scrContext_t *scrContext)
{
  int Int; 
  objective_t *v3; 
  gentity_s *Entity; 
  gentity_s *v5; 

  Int = Scr_GetInt(scrContext, 0);
  v3 = G_Objectives_Get(Int);
  Entity = GScr_GetEntity(1u);
  v5 = Entity;
  if ( !Entity->client && !Entity->agent )
    Scr_Error(COM_ERR_2869, scrContext, "Entity must be a player or a bot.");
  G_PlayerMask_AddClient(&v3->progressVisibility, v5->s.clientNum);
}

/*
==============
Scr_Objective_HideProgressForClient
==============
*/
void Scr_Objective_HideProgressForClient(scrContext_t *scrContext)
{
  int Int; 
  objective_t *v3; 
  gentity_s *Entity; 
  gentity_s *v5; 

  Int = Scr_GetInt(scrContext, 0);
  v3 = G_Objectives_Get(Int);
  Entity = GScr_GetEntity(1u);
  v5 = Entity;
  if ( !Entity->client && !Entity->agent )
    Scr_Error(COM_ERR_2870, scrContext, "Entity must be a player or a bot.");
  G_PlayerMask_RemoveClient(&v3->progressVisibility, v5->s.clientNum);
}

/*
==============
Scr_Objective_ShowProgressForTeam
==============
*/
void Scr_Objective_ShowProgressForTeam(scrContext_t *scrContext)
{
  int Int; 
  objective_t *v3; 
  scr_string_t ConstString; 
  const char *v5; 
  const char *v6; 
  team_t outTeam; 

  Int = Scr_GetInt(scrContext, 0);
  v3 = G_Objectives_Get(Int);
  ConstString = Scr_GetConstString(scrContext, 1u);
  if ( Com_Teams_TeamFromString(ConstString, &outTeam) )
  {
    G_PlayerMask_AddTeam(&v3->progressVisibility, outTeam);
  }
  else
  {
    v5 = SL_ConvertToString(ConstString);
    v6 = j_va("unknown team '%s'", v5);
    Scr_Error(COM_ERR_2871, scrContext, v6);
  }
}

/*
==============
Scr_Objective_HideProgressForTeam
==============
*/
void Scr_Objective_HideProgressForTeam(scrContext_t *scrContext)
{
  int Int; 
  objective_t *v3; 
  scr_string_t ConstString; 
  const char *v5; 
  const char *v6; 
  team_t outTeam; 

  Int = Scr_GetInt(scrContext, 0);
  v3 = G_Objectives_Get(Int);
  ConstString = Scr_GetConstString(scrContext, 1u);
  if ( Com_Teams_TeamFromString(ConstString, &outTeam) )
  {
    G_PlayerMask_RemoveTeam(&v3->progressVisibility, outTeam);
  }
  else
  {
    v5 = SL_ConvertToString(ConstString);
    v6 = j_va("unknown team '%s'", v5);
    Scr_Error(COM_ERR_2872, scrContext, v6);
  }
}

/*
==============
Scr_Objective_SetProgress
==============
*/

void __fastcall Scr_Objective_SetProgress(scrContext_t *scrContext, double _XMM1_8)
{
  int Int; 
  char v6; 
  char v7; 

  Int = Scr_GetInt(scrContext, 0);
  _RDI = G_Objectives_Get(Int);
  *(double *)&_XMM0 = Scr_GetFloat(scrContext, 1u);
  __asm
  {
    vxorps  xmm1, xmm1, xmm1
    vcomiss xmm0, xmm1
  }
  if ( v6 )
    goto LABEL_4;
  __asm { vcomiss xmm0, cs:__real@3f800000 }
  if ( !(v6 | v7) )
LABEL_4:
    Scr_Error(COM_ERR_2873, scrContext, "Objective_SetProgress must be called with a progress value within [0.f, 1.f]");
  else
    __asm { vmovss  dword ptr [rdi+9Ch], xmm0 }
}

/*
==============
Scr_Objective_SetOwnerClient
==============
*/
void Scr_Objective_SetOwnerClient(scrContext_t *scrContext)
{
  int Int; 
  objective_t *v3; 
  gentity_s *Entity; 
  gentity_s *v5; 

  Int = Scr_GetInt(scrContext, 0);
  v3 = G_Objectives_Get(Int);
  if ( Scr_GetType(scrContext, 1u) )
  {
    Entity = GScr_GetEntity(1u);
    v5 = Entity;
    if ( !Entity->client && !Entity->agent )
      Scr_Error(COM_ERR_2874, scrContext, "Entity must be a player or a bot.");
    v3->ownerClient = v5->s.clientNum;
  }
  else
  {
    v3->ownerClient = -1;
  }
}

/*
==============
Scr_Objective_SetOwnerTeam
==============
*/
void Scr_Objective_SetOwnerTeam(scrContext_t *scrContext)
{
  int Int; 
  objective_t *v3; 
  scr_string_t ConstString; 
  const char *v5; 
  const char *v6; 

  Int = Scr_GetInt(scrContext, 0);
  v3 = G_Objectives_Get(Int);
  if ( Scr_GetType(scrContext, 1u) )
  {
    ConstString = Scr_GetConstString(scrContext, 1u);
    if ( !Com_Teams_TeamFromString(ConstString, &v3->ownerTeam) )
    {
      v5 = SL_ConvertToString(ConstString);
      v6 = j_va("unknown team '%s'", v5);
      Scr_Error(COM_ERR_2875, scrContext, v6);
    }
  }
  else
  {
    v3->ownerTeam = Com_GameMode_SupportsFeature(WEAPON_SKYDIVE_WEAPON_DROP|0x80) ? TEAM_FOUR : TEAM_ZERO;
  }
}

/*
==============
Scr_Objective_SetProgressClient
==============
*/
void Scr_Objective_SetProgressClient(scrContext_t *scrContext)
{
  int Int; 
  objective_t *v3; 
  gentity_s *Entity; 
  gentity_s *v5; 

  Int = Scr_GetInt(scrContext, 0);
  v3 = G_Objectives_Get(Int);
  if ( Scr_GetType(scrContext, 1u) )
  {
    Entity = GScr_GetEntity(1u);
    v5 = Entity;
    if ( !Entity->client && !Entity->agent )
      Scr_Error(COM_ERR_2876, scrContext, "Entity must be a player or a bot.");
    v3->progressClient = v5->s.clientNum;
  }
  else
  {
    v3->progressClient = -1;
  }
}

/*
==============
Scr_Objective_SetProgressTeam
==============
*/
void Scr_Objective_SetProgressTeam(scrContext_t *scrContext)
{
  int Int; 
  objective_t *v3; 
  scr_string_t ConstString; 
  const char *v5; 
  const char *v6; 

  Int = Scr_GetInt(scrContext, 0);
  v3 = G_Objectives_Get(Int);
  if ( Scr_GetType(scrContext, 1u) )
  {
    ConstString = Scr_GetConstString(scrContext, 1u);
    if ( !Com_Teams_TeamFromString(ConstString, &v3->progressTeam) )
    {
      v5 = SL_ConvertToString(ConstString);
      v6 = j_va("unknown team '%s'", v5);
      Scr_Error(COM_ERR_2877, scrContext, v6);
    }
  }
  else
  {
    v3->progressTeam = Com_GameMode_SupportsFeature(WEAPON_SKYDIVE_WEAPON_DROP|0x80) ? TEAM_FOUR : TEAM_ZERO;
  }
}

/*
==============
Scr_Objective_AddClientToMask
==============
*/
void Scr_Objective_AddClientToMask(scrContext_t *scrContext)
{
  int Int; 
  objective_t *v3; 
  gentity_s *Entity; 
  gentity_s *v5; 

  Int = Scr_GetInt(scrContext, 0);
  v3 = G_Objectives_Get(Int);
  Entity = GScr_GetEntity(1u);
  v5 = Entity;
  if ( !Entity->client && !Entity->agent )
    Scr_Error(COM_ERR_2878, scrContext, "Entity must be a player or a bot.");
  G_PlayerMask_AddClient(&v3->visibility, v5->s.clientNum);
}

/*
==============
Scr_Objective_AddTeamToMask
==============
*/
void Scr_Objective_AddTeamToMask(scrContext_t *scrContext)
{
  int Int; 
  objective_t *v3; 
  scr_string_t ConstString; 
  const char *v5; 
  const char *v6; 
  team_t outTeam; 

  Int = Scr_GetInt(scrContext, 0);
  v3 = G_Objectives_Get(Int);
  ConstString = Scr_GetConstString(scrContext, 1u);
  if ( Com_Teams_TeamFromString(ConstString, &outTeam) )
  {
    G_PlayerMask_AddTeam(&v3->visibility, outTeam);
  }
  else
  {
    v5 = SL_ConvertToString(ConstString);
    v6 = j_va("unknown team '%s'", v5);
    Scr_Error(COM_ERR_2879, scrContext, v6);
  }
}

/*
==============
Scr_Objective_AddAllToMask
==============
*/
void Scr_Objective_AddAllToMask(scrContext_t *scrContext)
{
  int Int; 
  objective_t *v2; 

  Int = Scr_GetInt(scrContext, 0);
  v2 = G_Objectives_Get(Int);
  G_PlayerMask_AddAll(&v2->visibility);
}

/*
==============
Scr_Objective_RemoveClientFromMask
==============
*/
void Scr_Objective_RemoveClientFromMask(scrContext_t *scrContext)
{
  int Int; 
  objective_t *v3; 
  gentity_s *Entity; 
  gentity_s *v5; 

  Int = Scr_GetInt(scrContext, 0);
  v3 = G_Objectives_Get(Int);
  Entity = GScr_GetEntity(1u);
  v5 = Entity;
  if ( !Entity->client && !Entity->agent )
    Scr_Error(COM_ERR_2880, scrContext, "Entity must be a player or a bot.");
  G_PlayerMask_RemoveClient(&v3->visibility, v5->s.clientNum);
}

/*
==============
Scr_Objective_RemoveTeamFromMask
==============
*/
void Scr_Objective_RemoveTeamFromMask(scrContext_t *scrContext)
{
  int Int; 
  objective_t *v3; 
  scr_string_t ConstString; 
  const char *v5; 
  const char *v6; 
  team_t outTeam; 

  Int = Scr_GetInt(scrContext, 0);
  v3 = G_Objectives_Get(Int);
  ConstString = Scr_GetConstString(scrContext, 1u);
  if ( Com_Teams_TeamFromString(ConstString, &outTeam) )
  {
    G_PlayerMask_RemoveTeam(&v3->visibility, outTeam);
  }
  else
  {
    v5 = SL_ConvertToString(ConstString);
    v6 = j_va("unknown team '%s'", v5);
    Scr_Error(COM_ERR_2881, scrContext, v6);
  }
}

/*
==============
Scr_Objective_RemoveAllFromMask
==============
*/
void Scr_Objective_RemoveAllFromMask(scrContext_t *scrContext)
{
  int Int; 
  objective_t *v2; 

  Int = Scr_GetInt(scrContext, 0);
  v2 = G_Objectives_Get(Int);
  G_PlayerMask_RemoveAll(&v2->visibility);
}

/*
==============
Scr_Objective_ShowToPlayersInMask
==============
*/
void Scr_Objective_ShowToPlayersInMask(scrContext_t *scrContext)
{
  int Int; 
  objective_t *v2; 

  Int = Scr_GetInt(scrContext, 0);
  v2 = G_Objectives_Get(Int);
  G_PlayerMask_SetInverted(&v2->visibility, 0);
}

/*
==============
Scr_Objective_HideFromPlayersInMask
==============
*/
void Scr_Objective_HideFromPlayersInMask(scrContext_t *scrContext)
{
  int Int; 
  objective_t *v2; 

  Int = Scr_GetInt(scrContext, 0);
  v2 = G_Objectives_Get(Int);
  G_PlayerMask_SetInverted(&v2->visibility, 1);
}

/*
==============
Scr_Objective_Ping
==============
*/
void Scr_Objective_Ping(scrContext_t *scrContext)
{
  int Int; 

  Int = Scr_GetInt(scrContext, 0);
  G_Objectives_Get(Int)->pingTime = level.time;
}

/*
==============
Scr_Objective_SetPings
==============
*/
void Scr_Objective_SetPings(scrContext_t *scrContext)
{
  int Int; 
  PlayerMask *p_pings; 

  Int = Scr_GetInt(scrContext, 0);
  p_pings = &G_Objectives_Get(Int)->pings;
  if ( Scr_GetInt(scrContext, 1u) )
    G_PlayerMask_AddAll(p_pings);
  else
    G_PlayerMask_RemoveAll(p_pings);
}

/*
==============
Scr_Objective_SetPingsForTeam
==============
*/
void Scr_Objective_SetPingsForTeam(scrContext_t *scrContext)
{
  int Int; 
  objective_t *v3; 
  scr_string_t ConstString; 
  const char *v5; 
  const char *v6; 
  team_t outTeam; 

  Int = Scr_GetInt(scrContext, 0);
  v3 = G_Objectives_Get(Int);
  ConstString = Scr_GetConstString(scrContext, 1u);
  if ( Com_Teams_TeamFromString(ConstString, &outTeam) )
  {
    G_PlayerMask_AddTeam(&v3->pings, outTeam);
  }
  else
  {
    v5 = SL_ConvertToString(ConstString);
    v6 = j_va("unknown team '%s'", v5);
    Scr_Error(COM_ERR_2882, scrContext, v6);
  }
}

/*
==============
G_Objectives_Clear
==============
*/
void G_Objectives_Clear(objective_t *objective)
{
  GConfigStrings *v2; 
  signed __int64 v3; 
  bool v4; 
  int v5; 
  unsigned int v6; 
  __int64 v8; 

  if ( !GConfigStrings::ms_gConfigStrings && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\game\\g_configstrings.h", 71, ASSERT_TYPE_ASSERT, "( ms_gConfigStrings )", (const char *)&queryFormat, "ms_gConfigStrings") )
    __debugbreak();
  v2 = GConfigStrings::ms_gConfigStrings;
  GConfigStrings::ms_gConfigStrings->ClearLocalizedString(GConfigStrings::ms_gConfigStrings, &objective->description);
  v2->ClearLocalizedString(v2, &objective->friendlyLabel);
  v2->ClearLocalizedString(v2, &objective->neutralLabel);
  v2->ClearLocalizedString(v2, &objective->enemyLabel);
  memset_0(objective, 0, 0x60ui64);
  memset_0(&objective->validLocations, 0, 0xB8ui64);
  *(_QWORD *)&objective->pingTime = 0i64;
  objective->mlgObjectiveData = 0i64;
  *(_DWORD *)&objective->size = 0;
  objective->entNum[0] = 2047;
  objective->entNum[1] = 2047;
  objective->entNum[2] = 2047;
  objective->entNum[3] = 2047;
  objective->entNum[4] = 2047;
  objective->entNum[5] = 2047;
  objective->entNum[6] = 2047;
  objective->entNum[7] = 2047;
  *(_QWORD *)&objective->ownerClient = -1i64;
  *(_WORD *)objective->flags |= 0x34u;
  G_PlayerMask_RemoveAll(&objective->pinned);
  G_PlayerMask_RemoveAll(&objective->pings);
  G_PlayerMask_RemoveAll(&objective->progressVisibility);
  if ( Com_GameMode_SupportsFeature((Com_GameMode_Feature)258) && G_GameInterface_PlayingBR() )
  {
    v3 = objective - level.objectives;
    v4 = Com_GameMode_SupportsFeature((Com_GameMode_Feature)258) && G_GameInterface_PlayingBR();
    v5 = 128;
    v6 = 128;
    if ( !v4 )
      v6 = 32;
    if ( (unsigned int)v3 >= v6 )
    {
      if ( !Com_GameMode_SupportsFeature((Com_GameMode_Feature)258) || !G_GameInterface_PlayingBR() )
        v5 = 32;
      LODWORD(v8) = objective - level.objectives;
      if ( CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\game\\g_objectives.cpp", 341, ASSERT_TYPE_ASSERT, "(unsigned)( objectiveIndex ) < (unsigned)( G_Objectives_GetMaxObjectives() )", "objectiveIndex doesn't index G_Objectives_GetMaxObjectives()\n\t%i not in [0, %i)", v8, v5) )
        __debugbreak();
    }
    memset_0(expandedObjectiveMapping[(unsigned int)v3], 0, sizeof(unsigned __int8[200]));
  }
  G_GameInterface_ClearObjective(v2, objective);
}

/*
==============
G_Objectives_CopyObjectiveToObjectiveView
==============
*/
void G_Objectives_CopyObjectiveToObjectiveView(gentity_s *player, const objective_t *objective, ObjectiveView *objectiveView)
{
  const playerState_s *EntityPlayerState; 
  GUtils *v7; 
  team_t v8; 
  __int64 v9; 
  bool v10; 
  int ownerClient; 
  int v12; 
  bool v13; 
  team_t ownerTeam; 
  unsigned int neutralLabel; 
  __int64 spectatorClient; 
  GUtils *v22; 
  unsigned int v23; 
  __int64 v24; 
  bool v25; 
  char v26; 
  __int64 v27; 
  team_t v28; 
  GUtils *v29; 
  unsigned int v30; 
  __int64 v31; 
  bool v32; 
  __int64 progressClient; 
  bool v34; 
  team_t progressTeam; 
  ObjectiveSide v36; 

  _RDI = objectiveView;
  _RBX = objective;
  if ( !player && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\game\\g_objectives.cpp", 351, ASSERT_TYPE_ASSERT, "(player)", (const char *)&queryFormat, rowName) )
    __debugbreak();
  if ( !_RBX && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\game\\g_objectives.cpp", 352, ASSERT_TYPE_ASSERT, "(objective)", (const char *)&queryFormat, "objective") )
    __debugbreak();
  if ( !_RDI && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\game\\g_objectives.cpp", 353, ASSERT_TYPE_ASSERT, "(objectiveView)", (const char *)&queryFormat, "objectiveView") )
    __debugbreak();
  EntityPlayerState = G_GetEntityPlayerState(player);
  if ( !EntityPlayerState && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\game\\g_objectives.cpp", 356, ASSERT_TYPE_ASSERT, "(ps)", (const char *)&queryFormat, "ps") )
    __debugbreak();
  _RDI->state = _RBX->state;
  _RDI->icon = _RBX->icon;
  _RDI->mlgIcon = _RBX->mlgObjectiveData.mlgIcon;
  _RDI->mlgBackground = _RBX->mlgObjectiveData.mlgBackground;
  *(_WORD *)_RDI->flags = *(_WORD *)_RBX->flags;
  if ( G_PlayerMask_IsPlayerInMask(&_RBX->pinned, EntityPlayerState, NULL) )
    *(_WORD *)_RDI->flags |= 8u;
  if ( G_PlayerMask_IsPlayerInMask(&_RBX->progressVisibility, EntityPlayerState, NULL) )
    *(_WORD *)_RDI->flags |= 0x80u;
  if ( G_PlayerMask_IsPlayerInMask(&_RBX->pings, EntityPlayerState, NULL) )
    _RDI->pingTime = _RBX->pingTime;
  _RDI->background = _RBX->background;
  if ( !GUtils::ms_gUtils && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\game\\g_utils.h", 112, ASSERT_TYPE_ASSERT, "( ms_gUtils )", (const char *)&queryFormat, "ms_gUtils") )
    __debugbreak();
  v7 = GUtils::ms_gUtils;
  v8 = GUtils::ms_gUtils->GetEntityTeam(GUtils::ms_gUtils, player);
  v9 = (unsigned int)v8;
  v10 = (unsigned int)(v8 - 201) <= 1 && player->client->sess.cs.isMLGSpectator;
  ownerClient = _RBX->ownerClient;
  if ( ownerClient == -1 )
  {
    ownerTeam = _RBX->ownerTeam;
    if ( (unsigned int)(ownerTeam - 1) > 1 )
    {
      neutralLabel = _RBX->neutralLabel;
      goto LABEL_40;
    }
    if ( !v10 || (spectatorClient = player->client->spectatorClient, (_DWORD)spectatorClient == -1) )
      v13 = v8 == ownerTeam;
    else
      v13 = _RBX->ownerTeam == ((unsigned int (__fastcall *)(GUtils *, gentity_s *, _QWORD))v7->GetEntityTeam)(v7, &g_entities[spectatorClient], (unsigned int)v8);
  }
  else if ( !v10 || (v12 = player->client->spectatorClient, v12 == -1) )
  {
    v13 = ownerClient == player->s.clientNum;
  }
  else
  {
    v13 = ownerClient == v12;
  }
  if ( v13 )
    neutralLabel = _RBX->friendlyLabel;
  else
    neutralLabel = _RBX->enemyLabel;
LABEL_40:
  _RDI->label = neutralLabel;
  _RDI->description = _RBX->description;
  __asm
  {
    vmovups ymm0, ymmword ptr [rbx+60h]
    vmovups ymmword ptr [rdi], ymm0
    vmovups ymm0, ymmword ptr [rbx]
    vmovups ymmword ptr [rdi+20h], ymm0
    vmovups ymm1, ymmword ptr [rbx+20h]
    vmovups ymmword ptr [rdi+40h], ymm1
    vmovups ymm0, ymmword ptr [rbx+40h]
    vmovups ymmword ptr [rdi+60h], ymm0
  }
  _RDI->validLocations = _RBX->validLocations;
  __asm { vcvttss2si eax, dword ptr [rbx+84h] }
  _RDI->zOffset = _EAX;
  _RDI->progress = _RBX->progress;
  _RDI->size = _RBX->size;
  if ( !GUtils::ms_gUtils && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\game\\g_utils.h", 112, ASSERT_TYPE_ASSERT, "( ms_gUtils )", (const char *)&queryFormat, "ms_gUtils") )
    __debugbreak();
  v22 = GUtils::ms_gUtils;
  v23 = ((__int64 (__fastcall *)(GUtils *, gentity_s *, __int64))GUtils::ms_gUtils->GetEntityTeam)(GUtils::ms_gUtils, player, v9);
  v24 = v23;
  v25 = v23 - 201 <= 1 && player->client->sess.cs.isMLGSpectator;
  if ( (_RBX->flags[0] & 0x40) != 0 )
  {
    v26 = 3;
  }
  else
  {
    v27 = _RBX->ownerClient;
    if ( (_DWORD)v27 == -1 )
    {
      v28 = _RBX->ownerTeam;
      if ( (unsigned int)(v28 - 1) > 0xC7 )
      {
        v26 = 0;
      }
      else if ( v25 )
      {
        v26 = (v28 != TEAM_TWO) + 1;
      }
      else
      {
        v26 = ((_DWORD)v24 != v28) + 1;
      }
    }
    else if ( v25 )
    {
      v26 = (((unsigned int (__fastcall *)(GUtils *, gentity_s *, __int64))v22->GetEntityTeam)(v22, &g_entities[v27], v24) != 2) + 1;
    }
    else
    {
      v26 = ((_DWORD)v27 != player->s.clientNum) + 1;
    }
  }
  _RDI->side = v26;
  if ( !GUtils::ms_gUtils && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\game\\g_utils.h", 112, ASSERT_TYPE_ASSERT, "( ms_gUtils )", (const char *)&queryFormat, "ms_gUtils") )
    __debugbreak();
  v29 = GUtils::ms_gUtils;
  v30 = ((__int64 (__fastcall *)(GUtils *, gentity_s *, __int64))GUtils::ms_gUtils->GetEntityTeam)(GUtils::ms_gUtils, player, v24);
  v31 = v30;
  v32 = v30 - 201 <= 1 && player->client->sess.cs.isMLGSpectator;
  progressClient = _RBX->progressClient;
  if ( (_DWORD)progressClient != -1 )
  {
    if ( v32 )
      v34 = ((unsigned int (__fastcall *)(GUtils *, gentity_s *, __int64))v29->GetEntityTeam)(v29, &g_entities[progressClient], v31) == 2;
    else
      v34 = (_DWORD)progressClient == player->s.clientNum;
LABEL_74:
    v36 = !v34 + 1;
    goto LABEL_75;
  }
  progressTeam = _RBX->progressTeam;
  if ( (unsigned int)(progressTeam - 1) <= 1 )
  {
    if ( v32 )
      v34 = progressTeam == TEAM_TWO;
    else
      v34 = (_DWORD)v31 == progressTeam;
    goto LABEL_74;
  }
  v36 = NEUTRAL;
LABEL_75:
  _RDI->progressSide = v36;
  G_GameInterface_ObjectivesUpdate(EntityPlayerState, _RDI, _RBX);
}

/*
==============
G_Objectives_CopyObjectiveToPlayerState
==============
*/
void G_Objectives_CopyObjectiveToPlayerState(gentity_s *player, int levelIndex, int psIndex)
{
  __int64 v3; 
  __int64 v5; 
  bool v6; 
  int v7; 
  unsigned int v8; 
  playerState_s *EntityPlayerState; 
  __int64 v11; 
  __int64 v12; 

  v3 = psIndex;
  v5 = levelIndex;
  if ( !player && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\game\\g_objectives.cpp", 395, ASSERT_TYPE_ASSERT, "(player)", (const char *)&queryFormat, rowName) )
    __debugbreak();
  v6 = Com_GameMode_SupportsFeature((Com_GameMode_Feature)258) && G_GameInterface_PlayingBR();
  v7 = 128;
  v8 = 128;
  if ( !v6 )
    v8 = 32;
  if ( (unsigned int)v5 >= v8 )
  {
    if ( !Com_GameMode_SupportsFeature((Com_GameMode_Feature)258) || !G_GameInterface_PlayingBR() )
      v7 = 32;
    LODWORD(v11) = v5;
    if ( CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\game\\g_objectives.cpp", 396, ASSERT_TYPE_ASSERT, "(unsigned)( levelIndex ) < (unsigned)( G_Objectives_GetMaxObjectives() )", "levelIndex doesn't index G_Objectives_GetMaxObjectives()\n\t%i not in [0, %i)", v11, v7) )
      __debugbreak();
  }
  if ( (unsigned int)v3 >= 0x20 )
  {
    LODWORD(v12) = 32;
    LODWORD(v11) = v3;
    if ( CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\game\\g_objectives.cpp", 397, ASSERT_TYPE_ASSERT, "(unsigned)( psIndex ) < (unsigned)( 32 )", "psIndex doesn't index MAX_OBJECTIVES_PER_PLAYER\n\t%i not in [0, %i)", v11, v12) )
      __debugbreak();
  }
  EntityPlayerState = G_GetEntityPlayerState(player);
  if ( !EntityPlayerState && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\game\\g_objectives.cpp", 400, ASSERT_TYPE_ASSERT, "(ps)", (const char *)&queryFormat, "ps") )
    __debugbreak();
  G_Objectives_CopyObjectiveToObjectiveView(player, &level.objectives[v5], &EntityPlayerState->objectives[v3]);
}

/*
==============
G_Objectives_Get
==============
*/
objective_t *G_Objectives_Get(int objectiveIndex)
{
  __int64 v1; 
  bool v2; 
  int v3; 
  scrContext_t *v4; 
  const char *v5; 

  v1 = objectiveIndex;
  v2 = Com_GameMode_SupportsFeature((Com_GameMode_Feature)258) && G_GameInterface_PlayingBR();
  v3 = 128;
  if ( !v2 )
    v3 = 32;
  if ( (int)v1 < 0 || (int)v1 >= v3 )
  {
    v4 = ScriptContext_Server();
    v5 = j_va("index %i is an illegal objective index. Valid indexes are 0 to %i\n", (unsigned int)v1, (unsigned int)(v3 - 1));
    Scr_Error(COM_ERR_2856, v4, v5);
  }
  return &level.objectives[v1];
}

/*
==============
G_Objectives_GetMaxObjectives
==============
*/
__int64 G_Objectives_GetMaxObjectives()
{
  bool v0; 
  __int64 result; 

  if ( !Com_GameMode_SupportsFeature((Com_GameMode_Feature)258) )
    return 32i64;
  v0 = !G_GameInterface_PlayingBR();
  result = 128i64;
  if ( v0 )
    return 32i64;
  return result;
}

/*
==============
G_Objectives_GetObjectiveIndexFromPSIndex
==============
*/
__int64 G_Objectives_GetObjectiveIndexFromPSIndex(const int playerClientNum, const unsigned __int8 localPlayerIndex)
{
  __int64 v2; 
  unsigned int v4; 
  __int64 v5; 
  unsigned __int8 *i; 
  int v8; 
  int v9; 

  v2 = playerClientNum;
  if ( localPlayerIndex >= 0x20u )
  {
    v9 = 32;
    v8 = localPlayerIndex;
    if ( CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\game\\g_objectives.cpp", 614, ASSERT_TYPE_ASSERT, "(unsigned)( localPlayerIndex ) < (unsigned)( 32 )", "localPlayerIndex doesn't index MAX_OBJECTIVES_PER_PLAYER\n\t%i not in [0, %i)", v8, v9) )
      __debugbreak();
  }
  if ( !Com_GameMode_SupportsFeature((Com_GameMode_Feature)258) || !G_GameInterface_PlayingBR() )
    return localPlayerIndex;
  v4 = 0;
  v5 = 0i64;
  for ( i = &expandedObjectiveMapping[0][v2]; !*i || *i - 1 != localPlayerIndex; i += 200 )
  {
    ++v4;
    if ( ++v5 > 128 )
      return 0xFFFFFFFFi64;
  }
  return v4;
}

/*
==============
G_Objectives_Init
==============
*/
void G_Objectives_Init(void)
{
  __int64 v0; 
  objective_t *objectives; 

  if ( !Com_GameMode_SupportsFeature((Com_GameMode_Feature)258) || (v0 = 128i64, !G_GameInterface_PlayingBR()) )
    v0 = 32i64;
  objectives = level.objectives;
  do
  {
    G_Objectives_Clear(objectives++);
    --v0;
  }
  while ( v0 );
}

/*
==============
G_Objectives_Load
==============
*/
void G_Objectives_Load(MemoryFile *memFile)
{
  bool v2; 
  int v3; 
  int i; 
  __int64 v5; 
  char *fmt; 
  char p; 
  int v8; 

  if ( !memFile && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\game\\g_objectives.cpp", 78, ASSERT_TYPE_ASSERT, "( memFile )", (const char *)&queryFormat, "memFile") )
    __debugbreak();
  MemFile_ReadData(memFile, 1ui64, &p);
  v2 = Com_GameMode_SupportsFeature((Com_GameMode_Feature)258) && G_GameInterface_PlayingBR();
  v3 = 128;
  if ( !v2 )
    v3 = 32;
  MemFile_ReadData(memFile, 4ui64, &v8);
  for ( i = v8; v8 >= 0; i = v8 )
  {
    if ( i >= v3 )
    {
      LODWORD(fmt) = v3;
      Com_Error_impl(ERR_DROP, (const ObfuscateErrorText)&stru_143D87390, 96i64, (unsigned int)i, fmt);
      i = v8;
    }
    if ( p )
    {
      MemFile_ReadData(memFile, 0xC8ui64, expandedObjectiveMapping[i]);
      i = v8;
    }
    MemFile_ReadData(memFile, 0x148ui64, &level.objectives[i]);
    v5 = v8;
    level.objectives[v5].mlgObjectiveData.mlgIcon = 0;
    level.objectives[v5].mlgObjectiveData.mlgBackground = EASE_IN_QUAD;
    level.objectives[v5].size = OBJ_ICON_SIZE_REGULAR;
    MemFile_ReadData(memFile, 4ui64, &v8);
  }
}

/*
==============
G_Objectives_Save
==============
*/
void G_Objectives_Save(MemoryFile *memFile)
{
  bool v2; 
  int v3; 
  int v4; 
  int v5; 
  bool p; 
  int v7; 

  if ( !memFile && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\game\\g_objectives.cpp", 40, ASSERT_TYPE_ASSERT, "( memFile )", (const char *)&queryFormat, "memFile") )
    __debugbreak();
  v2 = Com_GameMode_SupportsFeature((Com_GameMode_Feature)258) && G_GameInterface_PlayingBR();
  p = v2;
  MemFile_WriteData(memFile, 1ui64, &p);
  if ( !Com_GameMode_SupportsFeature((Com_GameMode_Feature)258) || (v3 = 128, !G_GameInterface_PlayingBR()) )
    v3 = 32;
  v4 = 0;
  v7 = 0;
  v5 = 0;
  do
  {
    if ( level.objectives[v5].state )
    {
      MemFile_WriteData(memFile, 4ui64, &v7);
      if ( p )
        MemFile_WriteData(memFile, 0xC8ui64, expandedObjectiveMapping[v7]);
      MemFile_WriteData(memFile, 0x148ui64, &level.objectives[v7]);
      v4 = v7;
    }
    v7 = ++v4;
    v5 = v4;
  }
  while ( v4 < v3 );
  v7 = -1;
  MemFile_WriteData(memFile, 4ui64, &v7);
}

/*
==============
G_Objectives_Update
==============
*/
void G_Objectives_Update(gentity_s *player)
{
  char *Value; 
  unsigned int *v3; 
  unsigned int v4; 
  _QWORD *v5; 
  char *v6; 
  int *v7; 
  unsigned __int64 v8; 
  ThreadContext CurrentThreadContext; 
  __int64 v10; 
  playerState_s *EntityPlayerState; 
  bool v12; 
  int v13; 
  __int64 v14; 
  PlayerMask *p_visibility; 
  __int64 v16; 
  char v17; 
  team_t *p_mlgSpectatingTeam; 
  const playerState_s *v19; 
  gclient_s *client; 
  __int64 spectatorClient; 
  __int64 v22; 
  int v24; 
  char v25; 
  unsigned __int8 v26; 
  int v27; 
  int v28; 
  unsigned __int8 v29; 
  __int64 v30; 
  __int64 v31; 
  bool v32; 
  __int64 v33; 
  __int64 v34; 
  char v35; 
  int v36; 
  playerState_s *ps; 
  int *v38; 
  __int64 v39; 
  __m256i v40; 
  int v41; 
  int v42[130]; 

  if ( !player && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\game\\g_objectives.cpp", 436, ASSERT_TYPE_ASSERT, "( player )", (const char *)&queryFormat, rowName) )
    __debugbreak();
  Value = (char *)Sys_GetValue(0);
  v3 = (unsigned int *)(Value + 15736);
  if ( (unsigned int)(*((_DWORD *)Value + 3934) + 1) >= 3 )
  {
    LODWORD(v33) = *((_DWORD *)Value + 3934) + 1;
    if ( CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\universal\\profile.h", 95, ASSERT_TYPE_ASSERT, "(unsigned)( p->write.nesting + 1 ) < (unsigned)( ( sizeof( *array_counter( p->write.start ) ) + 0 ) )", "p->write.nesting + 1 doesn't index ARRAY_COUNT( p->write.start )\n\t%i not in [0, %i)", v33, 3) )
      __debugbreak();
  }
  v4 = *v3 + 1;
  *v3 = v4;
  if ( v4 >= 3 )
  {
    LODWORD(v34) = 3;
    LODWORD(v33) = v4;
    if ( CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\universal\\profile.h", 97, ASSERT_TYPE_ASSERT, "(unsigned)( p->write.nesting ) < (unsigned)( ( sizeof( *array_counter( p->write.start ) ) + 0 ) )", "p->write.nesting doesn't index ARRAY_COUNT( p->write.start )\n\t%i not in [0, %i)", v33, v34) )
      __debugbreak();
  }
  v5 = Value + 2088;
  v6 = Value + 40;
  if ( *v5 < (unsigned __int64)v6 && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\universal\\profile.h", 99, ASSERT_TYPE_ASSERT, "( prof_stack->prof_ppStack >= prof_stack->prof_pStack )", (const char *)&queryFormat, "prof_stack->prof_ppStack >= prof_stack->prof_pStack") )
    __debugbreak();
  *v5 += 8i64;
  if ( *v5 >= (unsigned __int64)v5 && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\universal\\profile.h", 101, ASSERT_TYPE_ASSERT, "( prof_stack->prof_ppStack < prof_stack->prof_pStack + 256 )", (const char *)&queryFormat, "prof_stack->prof_ppStack < prof_stack->prof_pStack + PROF_STACK_SIZE") )
    __debugbreak();
  *(_QWORD *)*v5 = v3;
  if ( *v5 <= (unsigned __int64)v6 && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\universal\\profile.h", 103, ASSERT_TYPE_ASSERT, "( prof_stack->prof_ppStack > prof_stack->prof_pStack )", (const char *)&queryFormat, "prof_stack->prof_ppStack > prof_stack->prof_pStack") )
    __debugbreak();
  v7 = (int *)&v3[*v3 + 2];
  v8 = __rdtsc();
  *v7 = v8;
  if ( Sys_HasValidCurrentThreadContext() )
    CurrentThreadContext = Sys_GetCurrentThreadContext();
  else
    CurrentThreadContext = THREAD_CONTEXT_COUNT;
  v10 = 0i64;
  CPUTimelineProfiler::BeginSample(&g_cpuProfiler, CurrentThreadContext, 341, NULL, 0);
  EntityPlayerState = G_GetEntityPlayerState(player);
  memset_0(EntityPlayerState->objectives, 0, sizeof(EntityPlayerState->objectives));
  if ( !Com_GameMode_SupportsFeature((Com_GameMode_Feature)258) || (v35 = 1, !G_GameInterface_PlayingBR()) )
    v35 = 0;
  v36 = 0;
  v12 = Com_GameMode_SupportsFeature((Com_GameMode_Feature)258) && G_GameInterface_PlayingBR();
  v13 = 0;
  v14 = 0i64;
  v38 = v42;
  p_visibility = &level.objectives[0].visibility;
  v16 = 128i64;
  if ( !v12 )
    v16 = 32i64;
  v39 = v16;
  do
  {
    v17 = HIBYTE(p_visibility[3].mask.array[5]);
    p_mlgSpectatingTeam = NULL;
    v19 = EntityPlayerState;
    ps = EntityPlayerState;
    client = player->client;
    if ( client->sess.cs.isMLGSpectator )
    {
      if ( p_visibility->mode[0] == 1 )
        goto LABEL_36;
      if ( p_visibility->mode[0] == 2 )
      {
        p_mlgSpectatingTeam = &client->sess.mlgSpectatingTeam;
LABEL_36:
        spectatorClient = client->spectatorClient;
        if ( (_DWORD)spectatorClient == -1 )
        {
          v19 = EntityPlayerState;
        }
        else
        {
          v19 = G_GetEntityPlayerState(&g_entities[spectatorClient]);
          ps = (playerState_s *)v19;
        }
      }
    }
    if ( v17 && G_PlayerMask_IsPlayerInMask(p_visibility, v19, p_mlgSpectatingTeam) )
      goto LABEL_56;
    if ( !player->client->sess.cs.isMLGSpectator )
      goto LABEL_62;
    if ( !p_mlgSpectatingTeam )
      goto LABEL_62;
    v22 = *(int *)p_mlgSpectatingTeam;
    if ( (unsigned int)(v22 - 1) > 1 )
      goto LABEL_62;
    if ( Com_GameMode_SupportsFeature(WEAPON_SKYDIVE_WEAPON_DROP|0x80) && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\qcommon\\com_teams.h", 186, ASSERT_TYPE_ASSERT, "(!Com_GameMode_SupportsFeature( Com_GameMode_Feature::TEAMS_SINGLEPLAYER ))", (const char *)&queryFormat, "!Com_GameMode_SupportsFeature( Com_GameMode_Feature::TEAMS_SINGLEPLAYER )") )
      __debugbreak();
    __asm
    {
      vmovdqu ymm0, cs:__ymm@0000000000000001000000010000000100000001000000010000000200000000
      vmovdqu [rsp+2C8h+var_260], ymm0
    }
    v41 = 0;
    if ( (unsigned int)v22 < 9 )
    {
      if ( (unsigned int)v22 > 0xCA && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\qcommon\\com_teams.h", 205, ASSERT_TYPE_ASSERT, "(eTeam >= 0 && eTeam < TEAM_MP_NUM_TEAMS)", (const char *)&queryFormat, "eTeam >= 0 && eTeam < TEAM_MP_NUM_TEAMS") )
        __debugbreak();
      v24 = v40.m256i_i32[v22];
    }
    else
    {
      v24 = 0;
    }
    if ( ((*p_mlgSpectatingTeam = v24, G_PlayerMask_IsPlayerInMask(p_visibility, ps, p_mlgSpectatingTeam)) || SLOWORD(p_visibility[3].mask.array[5]) < 0) && (p_visibility[3].mask.array[5] & 0x4000) == 0 )
    {
LABEL_56:
      v25 = v35;
      if ( v35 )
      {
        v26 = expandedObjectiveMapping[v14][player->s.number];
        if ( !v26 )
        {
          *v38 = v13;
          v28 = ++v36;
          ++v38;
          goto LABEL_64;
        }
        v27 = v26 - 1;
      }
      else
      {
        v27 = v13;
      }
      G_Objectives_CopyObjectiveToPlayerState(player, v13, v27);
    }
    else
    {
LABEL_62:
      expandedObjectiveMapping[v14][player->s.number] = 0;
    }
    v28 = v36;
    v25 = v35;
LABEL_64:
    ++v13;
    p_visibility = (PlayerMask *)((char *)p_visibility + 340);
    ++v14;
    --v39;
  }
  while ( v39 );
  if ( v25 )
  {
    v29 = 0;
    v30 = v28;
    if ( v28 > 0 )
    {
      while ( 1 )
      {
        v31 = v42[v10];
        v32 = v29 == 32;
        if ( v29 < 0x20u )
        {
          while ( EntityPlayerState->objectives[v29].state )
          {
            if ( ++v29 >= 0x20u )
              goto LABEL_72;
          }
          expandedObjectiveMapping[v31][player->s.number] = v29 + 1;
          G_Objectives_CopyObjectiveToPlayerState(player, v31, v29);
LABEL_72:
          v32 = v29 == 32;
        }
        if ( v32 )
          break;
        if ( ++v10 >= v30 )
          goto LABEL_77;
      }
      Com_PrintWarning(34, "Player(%d) can see more than max(%d) objectives.\n", (unsigned int)player->s.number, 32i64);
    }
  }
LABEL_77:
  Profile_EndInternal(NULL);
}

/*
==============
Objective_SetEntity
==============
*/
void Objective_SetEntity(objective_t *objective, int index, const gentity_s *entity)
{
  __int64 v3; 
  __int64 v6; 

  v3 = index;
  if ( (unsigned int)index >= 8 && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\game\\g_objectives.cpp", 916, ASSERT_TYPE_ASSERT, "(unsigned)( index ) < (unsigned)( 8 )", "index doesn't index MAX_OBJECTIVE_LOCATIONS\n\t%i not in [0, %i)", index, 8) )
    __debugbreak();
  objective->entNum[v3] = entity->s.number;
  v6 = v3;
  *(_QWORD *)objective->origin[v6].v = 0i64;
  objective->origin[v6].v[2] = 0.0;
  objective->validLocations |= 1 << v3;
}

