/*
==============
Compass_PrintFrame
==============
*/

void Compass_PrintFrame(void)
{
  ?Compass_PrintFrame@@YAXXZ();
}

/*
==============
Sys_XB3OutputDebugStringFlush
==============
*/

void Sys_XB3OutputDebugStringFlush(void)
{
  ?Sys_XB3OutputDebugStringFlush@@YAXXZ();
}

/*
==============
Sys_IsReleaseBuild
==============
*/

bool __fastcall Sys_IsReleaseBuild()
{
  return ?Sys_IsReleaseBuild@@YA_NXZ();
}

/*
==============
ApplicationView::Launch
==============
*/

void __fastcall ApplicationView::Launch(ApplicationView *this)
{
  ?Launch@ApplicationView@@AE$AAAXXZ(this);
}

/*
==============
Compass_Print
==============
*/

void __fastcall Compass_Print(const char *str)
{
  ?Compass_Print@@YAXPEBD@Z(str);
}

/*
==============
Sys_QueEvent
==============
*/

void __fastcall Sys_QueEvent(int time, sysEventType_t type, int value, int value2, int portIndex, int ptrLength, void *ptr)
{
  ?Sys_QueEvent@@YAXHW4sysEventType_t@@HHHHPEAX@Z(time, type, value, value2, portIndex, ptrLength, ptr);
}

/*
==============
Sys_GetLanguage
==============
*/

int __fastcall Sys_GetLanguage()
{
  return ?Sys_GetLanguage@@YAHXZ();
}

/*
==============
Sys_ResumeEvent
==============
*/

void Sys_ResumeEvent(void)
{
  ?Sys_ResumeEvent@@YAXXZ();
}

/*
==============
Sys_IsPLMHotLoadActive
==============
*/

bool __fastcall Sys_IsPLMHotLoadActive()
{
  return ?Sys_IsPLMHotLoadActive@@YA_NXZ();
}

/*
==============
Sys_Restart
==============
*/

void Sys_Restart(const char *startupMsg, ...)
{
  ?Sys_Restart@@YAXPEBDZZ(startupMsg);
}

/*
==============
ApplicationView::LaunchUriAsyncDone
==============
*/

void __fastcall ApplicationView::LaunchUriAsyncDone(ApplicationView *this, Windows::Foundation::IAsyncOperation<bool> *AsOp, Windows::Foundation::AsyncStatus s)
{
  ?LaunchUriAsyncDone@ApplicationView@@UE$AAAXPE$AAU?$IAsyncOperation@_N@Foundation@Windows@@W4AsyncStatus@34@@Z(this, AsOp, s);
}

/*
==============
Sys_OpenURL
==============
*/

void __fastcall Sys_OpenURL(const char *url, int doexit)
{
  ?Sys_OpenURL@@YAXPEBDH@Z(url, doexit);
}

/*
==============
Sys_TurnOffEarlySysErrorHandlingXB3
==============
*/

void Sys_TurnOffEarlySysErrorHandlingXB3(void)
{
  ?Sys_TurnOffEarlySysErrorHandlingXB3@@YAXXZ();
}

/*
==============
Sys_QuitAndStartProcess
==============
*/

void __fastcall Sys_QuitAndStartProcess(const char *exeName, const char *parameters)
{
  ?Sys_QuitAndStartProcess@@YAXPEBD0@Z(exeName, parameters);
}

/*
==============
Sys_DumpRawHWMemStats
==============
*/

void __fastcall Sys_DumpRawHWMemStats(const int useRawOutputCmd)
{
  ?Sys_DumpRawHWMemStats@@YAXH@Z(useRawOutputCmd);
}

/*
==============
Sys_IsUsingOptionalDevFunctionality
==============
*/

bool __fastcall Sys_IsUsingOptionalDevFunctionality()
{
  return ?Sys_IsUsingOptionalDevFunctionality@@YA_NXZ();
}

/*
==============
XB3EnableNUIReservation
==============
*/

void XB3EnableNUIReservation(void)
{
  ?XB3EnableNUIReservation@@YAXXZ();
}

/*
==============
Sys_GetXB3ConsoleType
==============
*/

XB3ConsoleType __fastcall Sys_GetXB3ConsoleType()
{
  return ?Sys_GetXB3ConsoleType@@YA?AW4XB3ConsoleType@@XZ();
}

/*
==============
Sys_StoreLanguage
==============
*/

void __fastcall Sys_StoreLanguage(language_t language)
{
  ?Sys_StoreLanguage@@YAXW4language_t@@@Z(language);
}

/*
==============
XB3SetLaunchData
==============
*/

unsigned int __fastcall XB3SetLaunchData(const LaunchData *pLaunchData, const unsigned int dwLaunchDataSize)
{
  return ?XB3SetLaunchData@@YAKPEBULaunchData@@K@Z(pLaunchData, dwLaunchDataSize);
}

/*
==============
Sys_GetDoubleClickTime
==============
*/

int __fastcall Sys_GetDoubleClickTime()
{
  return ?Sys_GetDoubleClickTime@@YAHXZ();
}

/*
==============
Sys_SetPLMHotLoadActive
==============
*/

void __fastcall Sys_SetPLMHotLoadActive(bool inPLMHotLoad)
{
  ?Sys_SetPLMHotLoadActive@@YAX_N@Z(inPLMHotLoad);
}

/*
==============
GetApplicationView
==============
*/

IW8::IFrameworkViewEx *__fastcall GetApplicationView()
{
  return ?GetApplicationView@@YAPE$AAUIFrameworkViewEx@IW8@@XZ();
}

/*
==============
Sys_GetStartupRegion
==============
*/

AssetRegion __fastcall Sys_GetStartupRegion()
{
  return ?Sys_GetStartupRegion@@YA?AW4AssetRegion@@XZ();
}

/*
==============
Sys_HeapOptimize
==============
*/

void Sys_HeapOptimize(void)
{
  ?Sys_HeapOptimize@@YAXXZ();
}

/*
==============
Sys_Print
==============
*/

void __fastcall Sys_Print(const char *msg)
{
  ?Sys_Print@@YAXPEBD@Z(msg);
}

/*
==============
XB3SetCrossLaunchPayload
==============
*/

unsigned int __fastcall XB3SetCrossLaunchPayload(const char *pCrosslaunchPayload, const unsigned int dwCrosslaunchPayloadSize)
{
  return ?XB3SetCrossLaunchPayload@@YAKPEBDK@Z(pCrosslaunchPayload, dwCrosslaunchPayloadSize);
}

/*
==============
Sys_PLM_MP_Resume
==============
*/

void Sys_PLM_MP_Resume(void)
{
  ?Sys_PLM_MP_Resume@@YAXXZ();
}

/*
==============
Sys_Init
==============
*/

void Sys_Init(void)
{
  ?Sys_Init@@YAXXZ();
}

/*
==============
Sys_CheckQuitRequest
==============
*/

void Sys_CheckQuitRequest(void)
{
  ?Sys_CheckQuitRequest@@YAXXZ();
}

/*
==============
Sys_FullResources
==============
*/

void Sys_FullResources(void)
{
  ?Sys_FullResources@@YAXXZ();
}

/*
==============
Sys_LoadingProcessEvents
==============
*/

void Sys_LoadingProcessEvents(void)
{
  ?Sys_LoadingProcessEvents@@YAXXZ();
}

/*
==============
XB3DisableNUIReservation
==============
*/

void XB3DisableNUIReservation(void)
{
  ?XB3DisableNUIReservation@@YAXXZ();
}

/*
==============
Sys_DumpPlatformMemStats
==============
*/

void Sys_DumpPlatformMemStats(void)
{
  ?Sys_DumpPlatformMemStats@@YAXXZ();
}

/*
==============
Sys_InitFolders
==============
*/

void __fastcall Sys_InitFolders(bool forceNoZoneDirectory)
{
  ?Sys_InitFolders@@YAX_N@Z(forceNoZoneDirectory);
}

/*
==============
Sys_CheckResumeFromTerminated
==============
*/

void Sys_CheckResumeFromTerminated(void)
{
  ?Sys_CheckResumeFromTerminated@@YAXXZ();
}

/*
==============
Sys_Quit
==============
*/

void Sys_Quit(void)
{
  ?Sys_Quit@@YAXXZ();
}

/*
==============
Sys_GetEvent
==============
*/

sysEvent_t *__fastcall Sys_GetEvent(sysEvent_t *result)
{
  return ?Sys_GetEvent@@YA?AUsysEvent_t@@XZ(result);
}

/*
==============
Sys_GetUsingPCHostHDDFolders
==============
*/

bool __fastcall Sys_GetUsingPCHostHDDFolders()
{
  return ?Sys_GetUsingPCHostHDDFolders@@YA_NXZ();
}

/*
==============
Sys_PLM_MP_Shutdown
==============
*/

void Sys_PLM_MP_Shutdown(void)
{
  ?Sys_PLM_MP_Shutdown@@YAXXZ();
}

/*
==============
Sys_Error
==============
*/

void Sys_Error(const ObfuscateErrorText error, ...)
{
  ?Sys_Error@@YAXUObfuscateErrorText@@ZZ(error);
}

/*
==============
Sys_GetTextSection
==============
*/

bool __fastcall Sys_GetTextSection(unsigned __int64 *start_in, unsigned int *size_in)
{
  return ?Sys_GetTextSection@@YA_NPEA_KPEAI@Z(start_in, size_in);
}

/*
==============
XB3_StartMWR
==============
*/

void XB3_StartMWR(void)
{
  ?XB3_StartMWR@@YAXXZ();
}

/*
==============
Sys_ConstrainedResources
==============
*/

void Sys_ConstrainedResources(void)
{
  ?Sys_ConstrainedResources@@YAXXZ();
}

/*
==============
Sys_IsSpecialRegion
==============
*/

int __fastcall Sys_IsSpecialRegion()
{
  return ?Sys_IsSpecialRegion@@YAHXZ();
}

/*
==============
ApplicationView::ApplicationView
==============
*/

void __fastcall ApplicationView::ApplicationView(ApplicationView *this)
{
  ??0ApplicationView@@QE$AAA@XZ(this);
}

/*
==============
Sys_XB3OutputDebugString
==============
*/

void __fastcall Sys_XB3OutputDebugString(const char *msg)
{
  ?Sys_XB3OutputDebugString@@YAXPEBD@Z(msg);
}

/*
==============
Sys_PLM_WriteData
==============
*/

bool __fastcall Sys_PLM_WriteData(bool suspended, bool async)
{
  return ?Sys_PLM_WriteData@@YA_N_N0@Z(suspended, async);
}

/*
==============
Sys_LoadingKeepAlive
==============
*/

void Sys_LoadingKeepAlive(void)
{
  ?Sys_LoadingKeepAlive@@YAXXZ();
}

/*
==============
Sys_SuspendEvent
==============
*/

void Sys_SuspendEvent(void)
{
  ?Sys_SuspendEvent@@YAXXZ();
}

/*
==============
Sys_FileExists
==============
*/

bool __fastcall Sys_FileExists(const char *name)
{
  return ?Sys_FileExists@@YA_NPEBD@Z(name);
}

/*
==============
Sys_InitRegionFolders
==============
*/

void __fastcall Sys_InitRegionFolders(bool forceNoZoneDirectory)
{
  ?Sys_InitRegionFolders@@YAX_N@Z(forceNoZoneDirectory);
}

/*
==============
Sys_UnhandledExceptionFilter
==============
*/

int __fastcall Sys_UnhandledExceptionFilter(_EXCEPTION_POINTERS *ExceptionInfo)
{
  return ?Sys_UnhandledExceptionFilter@@YAJPEAU_EXCEPTION_POINTERS@@@Z(ExceptionInfo);
}

/*
==============
ApplicationView::ApplicationView
==============
*/
void ApplicationView::ApplicationView(ApplicationView *this)
{
  unsigned __int64 ullAvailPhys; 
  _MEMORYSTATUSEX Buffer; 
  wchar_t OutputString[256]; 
  char _Buffer[256]; 

  Platform::Object::Object(&this->Platform::Object);
  this->__IApplicationViewPublicNonVirtuals::Platform::Object::__vftable = (ApplicationView_vtbl *)&ApplicationView::`vftable'{for `__IApplicationViewPublicNonVirtuals'};
  this->IW8::IFrameworkViewEx::Platform::Object::__vftable = (IW8::IFrameworkViewEx_vtbl *)&ApplicationView::`vftable'{for `Platform::Object's `IW8::IFrameworkViewEx'};
  this->IW8::IFrameworkViewEx::Windows::ApplicationModel::Core::IFrameworkView::Platform::Object::__vftable = (Windows::ApplicationModel::Core::IFrameworkView_vtbl *)&ApplicationView::`vftable'{for `Windows::ApplicationModel::Core::IFrameworkView'};
  this->Platform::Object::__vftable = (Platform::Object_vtbl *)&ApplicationView::`vftable'{for `Platform::Object'};
  this->Platform::Details::IWeakReferenceSource::__abi_IUnknown::__vftable = (Platform::Details::IWeakReferenceSource_vtbl *)&ApplicationView::`vftable'{for `__abi_IUnknown'};
  this->Platform::Details::IWeakReferenceSource::Platform::Object::__vftable = (Platform::Object_vtbl *)&ApplicationView::`vftable'{for `Platform::Object's `Platform::Details::IWeakReferenceSource'};
  this->__abi_reference_count.__pUnkMarshal = (__abi_IUnknown *volatile)-1i64;
  if ( __abi_module )
    __abi_module->__abi_IncrementObjectCount(__abi_module);
  this->m_launchData.sessionHandleId._Mypair._Myval2._Mysize = 0i64;
  this->m_launchData.sessionHandleId._Mypair._Myval2._Myres = 7i64;
  this->m_launchData.sessionHandleId._Mypair._Myval2._Bx._Buf[0] = 0;
  j__snprintf(_Buffer, 0x100ui64, "XDK VER: %d\n", 1122898900i64);
  OutputDebugStringA(_Buffer);
  memset(&Buffer.dwMemoryLoad, 0, 60);
  Buffer.dwLength = 64;
  GlobalMemoryStatusEx(&Buffer);
  ullAvailPhys = g_min_available_memory;
  if ( g_min_available_memory > Buffer.ullAvailPhys )
    ullAvailPhys = Buffer.ullAvailPhys;
  g_min_available_memory = ullAvailPhys;
  __asm
  {
    vxorps  xmm0, xmm0, xmm0
    vcvtsi2ss xmm0, xmm0, [rsp+388h+Buffer.ullTotalPhys]
    vmulss  xmm0, xmm0, cs:__real@35800000
    vcvtss2sd xmm3, xmm0, xmm0
    vmovq   r9, xmm3
  }
  j__snwprintf(OutputString, 0x100ui64, L"OS Total      : %.0f MB\n", _R9, -2i64, this);
  OutputDebugStringW(OutputString);
  __asm
  {
    vxorps  xmm0, xmm0, xmm0
    vcvtsi2ss xmm0, xmm0, [rsp+388h+Buffer.ullAvailPhys]
    vmulss  xmm1, xmm0, cs:__real@35800000
    vcvtss2sd xmm3, xmm1, xmm1
    vmovq   r9, xmm3
  }
  j__snwprintf(OutputString, 0x100ui64, L"OS Avail      : %.0f MB\n", _R9);
  OutputDebugStringW(OutputString);
  if ( g_min_available_memory != -1i64 )
  {
    __asm
    {
      vxorps  xmm0, xmm0, xmm0
      vcvtsi2ss xmm0, xmm0, rax
      vmulss  xmm1, xmm0, cs:__real@35800000
      vcvtss2sd xmm3, xmm1, xmm1
      vmovq   r9, xmm3
    }
    j__snwprintf(OutputString, 0x100ui64, L"OS Avail (Min): %.0f MB\n\n", _R9);
    OutputDebugStringW(OutputString);
  }
  *(_WORD *)&this->m_activated = 0;
}

/*
==============
Compass_Print
==============
*/
void Compass_Print(const char *str)
{
  Sys_Print(str);
  if ( I_stristr(str, "Ready for Compass") )
  {
    s_readyForCompassDelaySecondPrint = 1;
    s_readyForCompassDelaySecondPrintTime = 0;
  }
}

/*
==============
Compass_PrintFrame
==============
*/
void Compass_PrintFrame(void)
{
  if ( s_readyForCompassDelaySecondPrint && ++s_readyForCompassDelaySecondPrintTime > 0x708 )
  {
    Sys_Print("Ready for Compass\n");
    s_readyForCompassDelaySecondPrint = 0;
  }
  EnterCriticalSection(&s_xtfPrintCritSect);
  Sys_XB3XTF_PrintCurrentBufferInternal();
  LeaveCriticalSection(&s_xtfPrintCritSect);
}

/*
==============
GetApplicationView
==============
*/
IW8::IFrameworkViewEx *GetApplicationView()
{
  ApplicationView *v0; 
  __int64 v1; 
  __int64 v2; 
  IW8::IFrameworkViewEx *v3; 
  IW8::IFrameworkViewEx *v4; 

  if ( g_applicationView && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\xb3\\xb3_main.cpp", 3301, ASSERT_TYPE_ASSERT, "(g_applicationView == nullptr)", (const char *)&queryFormat, "g_applicationView == nullptr", -2i64) )
    __debugbreak();
  v0 = (ApplicationView *)Platform::Details::Heap::Allocate(0x978ui64, 0x990ui64);
  ApplicationView::ApplicationView(v0);
  v2 = v1;
  if ( v1 )
    v3 = (IW8::IFrameworkViewEx *)(v1 + 8);
  else
    v3 = NULL;
  v4 = g_applicationView;
  if ( v3 != g_applicationView )
  {
    if ( v3 )
    {
      v3->__abi_AddRef(v3);
      v4 = g_applicationView;
    }
    if ( v4 )
      v4->__abi_Release(v4);
    v4 = v3;
    g_applicationView = v3;
  }
  if ( v2 )
  {
    (*(void (__fastcall **)(__int64))(*(_QWORD *)v2 + 16i64))(v2);
    v4 = g_applicationView;
  }
  if ( v4 )
    goto LABEL_19;
  if ( CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\xb3\\xb3_main.cpp", 3303, ASSERT_TYPE_ASSERT, "(g_applicationView != nullptr)", (const char *)&queryFormat, "g_applicationView != nullptr") )
    __debugbreak();
  v4 = g_applicationView;
  if ( g_applicationView )
LABEL_19:
    v4->__abi_AddRef(v4);
  return v4;
}

/*
==============
ApplicationView::Launch
==============
*/
void ApplicationView::Launch(ApplicationView *this)
{
  const wchar_t *StringRawBuffer_0; 
  HANDLE CurrentProcess; 
  int ActivationFactoryByPCWSTR; 
  int v6; 
  __int64 v7; 
  Windows::Foundation::IAsyncOperation<Windows::Xbox::Graphics::Display::HdrModeInfo _> *v8; 
  const std::shared_ptr<Concurrency::scheduler_interface> *ambient_scheduler; 
  std::_Ref_count_base *Rep; 
  Windows::Xbox::Graphics::Display::HdrModeInfo *object; 
  int v13; 
  const char *v14; 
  std::_Ref_count_base *v15; 
  stdext::exception *v16; 
  __int64 v17[2]; 
  __int64 v18; 
  Platform::Guid pGuid; 
  __int64 v20; 
  Windows::Foundation::IAsyncOperation<Windows::Xbox::Graphics::Display::HdrModeInfo _> *v21; 
  void *ppActivationFactory; 
  unsigned __int64 SystemAffinityMask; 
  Concurrency::task<Windows::Xbox::Graphics::Display::HdrModeInfo _> v24; 
  Concurrency::task_options v25; 
  __int64 v26; 
  unsigned __int64 ProcessAffinityMask[3]; 
  Concurrency::task_canceled v29; 
  char v30[40]; 
  char v31[40]; 
  _OSVERSIONINFOW VersionInformation; 
  char dest[256]; 
  wchar_t WideCharStr[264]; 
  wchar_t FileName[264]; 
  wchar_t lpWideCharStr[264]; 

  v26 = -2i64;
  j_Com_InitCoreLibHooks();
  SetUnhandledExceptionFilter(Sys_UnhandledExceptionFilter);
  Sys_InitializeCriticalSections();
  InitializeCriticalSection(&s_xtfPrintCritSect);
  Sys_InitMainThread();
  CrashReport_Init();
  Core_strcpy(dest, 0x100ui64, ".indy.iimg");
  MultiByteToWideChar(0xFDE9u, 0, dest, -1, WideCharStr, 260);
  if ( GetFileAttributesExW(WideCharStr, GetFileExInfoStandard, &v29._Data._DoFree) )
  {
    s_pcHostHDDFolders = 1;
  }
  else
  {
    Com_sprintf<256>((char (*)[256])dest, "%s%s", "code_post_gfx", ".ff");
    MultiByteToWideChar(0xFDE9u, 0, dest, -1, FileName, 260);
    if ( GetFileAttributesExW(FileName, GetFileExInfoStandard, v30) )
    {
      s_pcHostHDDFolders = 0;
    }
    else
    {
      Core_strcpy(dest, 0x100ui64, "zone");
      MultiByteToWideChar(0xFDE9u, 0, dest, -1, lpWideCharStr, 260);
      if ( GetFileAttributesExW(lpWideCharStr, GetFileExInfoStandard, v31) )
        s_pcHostHDDFolders = 1;
      else
        Sys_Error((const ObfuscateErrorText)&stru_14452AEE0);
    }
  }
  StringRawBuffer_0 = WindowsGetStringRawBuffer_0((HSTRING)this->m_commandLineParams, NULL);
  WideCharToMultiByte(0xFDE9u, 0, StringRawBuffer_0, -1, cmdline, 1024, NULL, NULL);
  Com_InitCommandLine(cmdline);
  IWMem_InitCommandLine(cmdline);
  InitTiming_NoThreadLock();
  PMem_Init();
  XB3_HwZlib_Init();
  PMem_PushAuxAllocations();
  XB3InitLaunchData();
  CurrentProcess = GetCurrentProcess();
  GetProcessAffinityMask(CurrentProcess, ProcessAffinityMask, &SystemAffinityMask);
  if ( SystemAffinityMask != 127 && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\xb3\\xb3_main.cpp", 2463, ASSERT_TYPE_ASSERT, "(dwSystemAffinity == 0x7f)", (const char *)&queryFormat, "dwSystemAffinity == 0x7f") )
    __debugbreak();
  j_SetManualControllerUpdate(1);
  Windows::ApplicationModel::Core::CoreApplication::DisableKinectGpuReservation::set(1);
  pGuid.__vftable = (Platform::Object_vtbl *)0x49EDDB52081B331Ei64;
  *(_DWORD *)&pGuid.__d = 1697406906;
  *(_DWORD *)&pGuid.__h = 850531435;
  ppActivationFactory = NULL;
  ActivationFactoryByPCWSTR = __winRT::__getActivationFactoryByPCWSTR(L"Windows.Xbox.Graphics.Display.DisplayConfiguration", &pGuid, &ppActivationFactory);
  if ( ActivationFactoryByPCWSTR < 0 )
    __abi_WinRTraiseException(ActivationFactoryByPCWSTR);
  v21 = NULL;
  v6 = (*(__int64 (__fastcall **)(void *, Windows::Foundation::IAsyncOperation<Windows::Xbox::Graphics::Display::HdrModeInfo _> **))(*(_QWORD *)ppActivationFactory + 48i64))(ppActivationFactory, &v21);
  if ( v6 < 0 )
    __abi_WinRTraiseException(v6);
  v7 = (__int64)v21;
  v8 = v21;
  if ( v21 )
  {
    v21->__abi_AddRef(v21);
    v7 = (__int64)v21;
  }
  if ( v7 )
    (*(void (__fastcall **)(__int64))(*(_QWORD *)v7 + 16i64))(v7);
  v18 = 0i64;
  if ( ppActivationFactory )
    (*(void (__fastcall **)(void *))(*(_QWORD *)ppActivationFactory + 16i64))(ppActivationFactory);
  ProcessAffinityMask[1] = (unsigned __int64)v8;
  v18 = 0i64;
  ambient_scheduler = Concurrency::get_ambient_scheduler();
  Rep = ambient_scheduler->_Rep;
  if ( Rep )
  {
    _InterlockedIncrement((volatile signed __int32 *)&Rep->_Uses);
    Rep = ambient_scheduler->_Rep;
  }
  v25._M_Scheduler._M_sharedScheduler._Ptr = ambient_scheduler->_Ptr;
  v25._M_Scheduler._M_sharedScheduler._Rep = Rep;
  __asm
  {
    vpxor   xmm0, xmm0, xmm0
    vmovdqu [rbp+920h+var_908], xmm0
  }
  v25._M_Scheduler._M_scheduler = v25._M_Scheduler._M_sharedScheduler._Ptr;
  v25._M_CancellationToken._M_Impl = NULL;
  v25._M_ContinuationContext._M_context._M_captureMethod = 1i64;
  v25._M_ContinuationContext._M_RunInline = 0;
  __asm { vmovdqu [rbp+920h+var_948], xmm0 }
  v25._M_InternalTaskOptions._M_presetCreationCallstack._M_frames._Mypair._Myval2._Myend = NULL;
  v25._M_InternalTaskOptions._M_presetCreationCallstack._M_SingleFrame = NULL;
  v25._M_InternalTaskOptions._M_hasPresetCreationCallstack = 0;
  *(_WORD *)&v25._M_HasCancellationToken = 0;
  Concurrency::create_task<Windows::Foundation::IAsyncOperation<Windows::Xbox::Graphics::Display::HdrModeInfo __gc *> __gc *>(&v24, v8, &v25);
  Com_InitParse();
  Dvar_Init();
  Sys_Milliseconds();
  Profile_Init();
  Profile_InitContext(0);
  CPUTimelineProfiler::Init(&g_cpuProfiler, cmdline);
  if ( s_checkedOptionalDevDLLs && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\xb3\\xb3_main.cpp", 1643, ASSERT_TYPE_ASSERT, "(!s_checkedOptionalDevDLLs)", (const char *)&queryFormat, "!s_checkedOptionalDevDLLs") )
    __debugbreak();
  if ( !Sys_ModuleInfo_EnumModules((void (__fastcall *)(HINSTANCE__ *, const _MODULEINFO *))Sys_UsingOptionalDevFunctionalityCallback) )
    Com_PrintError(0, "Sys_ModuleInfo_EnumModules failed\n");
  s_checkedOptionalDevDLLs = 1;
  if ( !v24._M_Impl._Ptr )
    Concurrency::details::_DefaultTaskHelper::_NoCallOnDefaultTask_ErrorImpl();
  if ( Concurrency::details::_Task_impl_base::_Wait(v24._M_Impl._Ptr) == canceled )
  {
    Concurrency::task_canceled::task_canceled(&v29);
    stdext::exception::_Raise(v16);
  }
  object = v24._M_Impl._Ptr->_M_Result._M_Result._object;
  if ( object )
    object->__abi_AddRef(v24._M_Impl._Ptr->_M_Result._M_Result._object);
  ProcessAffinityMask[2] = (unsigned __int64)object;
  v17[1] = 0i64;
  v13 = object->__abi_get_HdrEnabled(object, (bool *)v17);
  if ( v13 < 0 )
    __abi_WinRTraiseException(v13);
  if ( LOBYTE(v17[0]) )
  {
    g_dx.features.displayHDRCapable = 1;
    v14 = "true";
  }
  else
  {
    g_dx.features.displayHDRCapable = 0;
    v14 = "false";
  }
  CrashReport_AddKVP("HDR", v14);
  Com_Init(cmdline);
  memset_0(&VersionInformation.dwMajorVersion, 0, 0x118ui64);
  VersionInformation.dwOSVersionInfoSize = 284;
  if ( GetVersionExW(&VersionInformation) )
  {
    LODWORD(v18) = VersionInformation.dwMajorVersion;
    LODWORD(v20) = VersionInformation.dwMinorVersion;
    if ( VersionInformation.dwMajorVersion >= 0xA )
      goto LABEL_39;
  }
  else
  {
    Com_Printf(0, "Build XDK_VER 0x%x, failed to obtain OS Version!\n", 1122898900i64);
    if ( CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\xb3\\xb3_main.cpp", 1969, ASSERT_TYPE_ASSERT, (const char *)&queryFormat.fmt + 3, "failed to obtain OS Version") )
      __debugbreak();
  }
  Sys_Error((const ObfuscateErrorText)&stru_14452AF70, (unsigned int)v18, (unsigned int)v20, 10i64, 0i64);
LABEL_39:
  PMem_PopAuxAllocations();
  s_inPLMHotLoad = 0;
  FreeLoadScreen();
  if ( object )
    object->__abi_Release(object);
  v15 = v24._M_Impl._Rep;
  if ( v24._M_Impl._Rep )
  {
    if ( _InterlockedExchangeAdd((volatile signed __int32 *)&v24._M_Impl._Rep->_Uses, 0xFFFFFFFF) == 1 )
    {
      v15->_Destroy(v15);
      if ( _InterlockedExchangeAdd((volatile signed __int32 *)&v15->_Weaks, 0xFFFFFFFF) == 1 )
        v15->_Delete_this(v15);
    }
  }
  if ( v8 )
    v8->__abi_Release(v8);
}

/*
==============
ApplicationView::LaunchUriAsyncDone
==============
*/
void ApplicationView::LaunchUriAsyncDone(ApplicationView *this, Windows::Foundation::IAsyncOperation<bool> *AsOp, Windows::Foundation::AsyncStatus s)
{
  int v4; 
  char v5; 

  v4 = AsOp->__abi_GetResults(AsOp, (bool *)&v5);
  if ( v4 < 0 )
    __abi_WinRTraiseException(v4);
  if ( !v5 )
    this->m_launchUriAsyncAttempted = 0;
}

/*
==============
Sys_BootRestart_f
==============
*/
void Sys_BootRestart_f()
{
  int v0; 
  const char *v1; 
  const char *v2; 
  __int64 v3; 
  char v4; 
  const char *v5; 
  const char *v6; 
  const char *v7; 
  const char *v8; 
  const char *v9; 
  __int64 v10; 
  char v11; 
  const char *v12; 
  __int64 v13; 
  char v14; 
  const char *v15; 
  char ControllerFromClient; 
  int v17; 

  v0 = 0;
  v1 = "default text";
  if ( Cmd_Argc() > 2 )
    v1 = Cmd_Argv(2);
  if ( Cmd_Argc() >= 2 )
  {
    v2 = Cmd_Argv(1);
    v3 = 0i64;
    while ( 1 )
    {
      v4 = v2[v3++];
      if ( v4 != val[v3 - 1] )
        break;
      if ( v3 == 5 )
        goto LABEL_7;
    }
    v6 = Cmd_Argv(1);
    if ( *v6 == gametype[0] && v6[1] == gametype[1] && v6[2] == gametype[2] )
    {
      v0 = 1;
    }
    else
    {
      v7 = Cmd_Argv(1);
      if ( *v7 == dir[0] && v7[1] == dir[1] && v7[2] == dir[2] )
      {
        v0 = 2;
      }
      else
      {
        v8 = Cmd_Argv(1);
        if ( *v8 == map[0] && v8[1] == map[1] && v8[2] == map[2] )
        {
          v0 = 3;
        }
        else
        {
          v9 = Cmd_Argv(1);
          v10 = 0i64;
          while ( 1 )
          {
            v11 = v9[v10++];
            if ( v11 != aError_9[v10 - 1] )
              break;
            if ( v10 == 6 )
            {
              Sys_Error((const ObfuscateErrorText)&queryFormat, v1, "error");
              return;
            }
          }
          v12 = Cmd_Argv(1);
          v13 = 0i64;
          while ( 1 )
          {
            v14 = v12[v13++];
            if ( v14 != aQuit_0[v13 - 1] )
              break;
            if ( v13 == 5 )
            {
              Sys_Quit();
              goto LABEL_7;
            }
          }
          v15 = Cmd_Argv(1);
          if ( strcmp_0(v15, "quit_request") )
          {
            Com_Printf(16, "boot_restart with bogus arguments, ignored");
            return;
          }
          Sys_CheckQuitRequest();
        }
      }
    }
  }
LABEL_7:
  switch ( v0 )
  {
    case 1:
      v5 = "SP";
      break;
    case 2:
      v5 = "MP";
      break;
    case 3:
      v5 = "CP";
      break;
    default:
      v5 = "NONE";
      break;
  }
  Com_Printf(16, "boot_restart \"%s\"  ....", v5);
  ControllerFromClient = CL_Mgr_GetControllerFromClient(LOCAL_CLIENT_0);
  g_launchData.skipMovies = 1;
  g_launchData.activeController = ControllerFromClient | 8;
  LaunchData::operator=(&s_launchDataXB3, &g_launchData);
  if ( g_applicationView )
  {
    v17 = g_applicationView->__abi_Restart(g_applicationView, v0);
    if ( v17 < 0 )
      __abi_WinRTraiseException(v17);
  }
}

/*
==============
Sys_CheckQuitRequest
==============
*/
void Sys_CheckQuitRequest(void)
{
  const dvar_t *v0; 
  const dvar_t *v1; 
  LocalClientNum_t FirstActiveLocalClient; 

  if ( g_quitRequested && Sys_IsMainThread() )
  {
    v0 = DVARBOOL_onlinegame;
    if ( !DVARBOOL_onlinegame && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\universal\\dvar.h", 692, ASSERT_TYPE_ASSERT, "(dvar)", "%s\n\tDvar %s accessed after deregistration", "dvar", "onlinegame") )
      __debugbreak();
    Dvar_CheckFrontendServerThread(v0);
    if ( !v0->current.enabled )
      goto LABEL_15;
    v1 = DVARBOOL_xblive_privatematch;
    if ( !DVARBOOL_xblive_privatematch && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\universal\\dvar.h", 692, ASSERT_TYPE_ASSERT, "(dvar)", "%s\n\tDvar %s accessed after deregistration", "dvar", "xblive_privatematch") )
      __debugbreak();
    Dvar_CheckFrontendServerThread(v1);
    if ( !v1->current.enabled && Com_IsGameLocalServerRunningOrLoading() && Sys_Milliseconds() - g_quitRequestTime < 8500 )
    {
      if ( !g_quitMigrationStarted )
      {
        g_quitMigrationStarted = 1;
        FirstActiveLocalClient = CL_GetFirstActiveLocalClient();
        Cbuf_AddText(FirstActiveLocalClient, "hostmigration_start\n");
      }
    }
    else
    {
LABEL_15:
      Sys_Quit();
    }
  }
}

/*
==============
Sys_CheckResumeFromTerminated
==============
*/
void Sys_CheckResumeFromTerminated(void)
{
  Windows::Xbox::System::User *v0; 
  Windows::Xbox::System::User *v1; 
  Windows::Xbox::System::User *v2; 
  Windows::Xbox::System::User *v3; 
  const char *v4; 
  LocalClientNum_t OnlyLocalClientNum; 
  LocalClientNum_t v6; 
  LocalClientNum_t v7; 
  LocalClientNum_t v8; 
  LocalClientNum_t v9; 
  const char *v10; 
  LocalClientNum_t v11; 
  int portIndexToReturn; 
  Windows::Xbox::System::User *v13; 
  Windows::Xbox::System::User *v14; 

  if ( !Sys_IsMainThread() && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\xb3\\xb3_main.cpp", 1352, ASSERT_TYPE_ASSERT, "(Sys_IsMainThread())", (const char *)&queryFormat, "Sys_IsMainThread()", -2i64) )
    __debugbreak();
  if ( PLM_IsValid(&s_PLMData) )
  {
    if ( rg.inFrame && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\xb3\\xb3_main.cpp", 1360, ASSERT_TYPE_ASSERT, "(rg.inFrame == false)", (const char *)&queryFormat, "rg.inFrame == false") )
      __debugbreak();
    R_SyncRenderThread();
    g_PLMRestarting = 1;
    R_BeginRemoteScreenUpdate();
    Sys_PLM_WriteData(0, 1);
    if ( g_appContextRecommendedUser )
    {
      g_appContextRecommendedUser->__abi_Release(g_appContextRecommendedUser);
      g_appContextRecommendedUser = NULL;
    }
    v0 = NULL;
    v13 = NULL;
    v1 = Windows::Xbox::ApplicationModel::Core::CoreApplicationContext::CurrentUser::get();
    v2 = v1;
    v14 = v1;
    v3 = g_appContextRecommendedUser;
    if ( v1 != g_appContextRecommendedUser )
    {
      if ( v1 )
      {
        v1->__abi_AddRef(v1);
        v3 = g_appContextRecommendedUser;
      }
      if ( v3 )
        v3->__abi_Release(v3);
      v3 = v2;
      g_appContextRecommendedUser = v2;
    }
    if ( v2 )
    {
      v2->__abi_Release(v2);
      v3 = g_appContextRecommendedUser;
    }
    if ( v3 )
    {
      v3->__abi_AddRef(v3);
      v0 = v3;
      v13 = v3;
    }
    if ( v0 && GPad_GetGamepadCountForUser(v0) <= 1 && (unsigned int)(s_PLMData.gameMode - 1) <= 2 )
    {
      if ( !CL_Mgr_IsClientActive(LOCAL_CLIENT_0) && GPad_GetPortIndexForUser(v0, &portIndexToReturn) && (unsigned int)portIndexToReturn <= 7 && GPad_IsActive(portIndexToReturn) )
        CL_Mgr_ActivateClient(LOCAL_CLIENT_0, portIndexToReturn);
      if ( s_PLMData.gameMode == eGameModeSinglePlayer && CL_Mgr_IsClientActive(LOCAL_CLIENT_0) )
      {
        v4 = "plmsave.svg";
        if ( s_PLMData.useDefaultGameSave )
          v4 = DEFAULT_SAVE_NAME;
        if ( SaveExists(v4) )
        {
          s_inPLMHotLoad = 1;
          PLM_SetValidGameSave(1);
          OnlyLocalClientNum = CL_GetOnlyLocalClientNum();
          Cbuf_AddText(OnlyLocalClientNum, "updatesavegameavailable\n");
          v6 = CL_GetOnlyLocalClientNum();
          Cbuf_AddText(v6, "Updatedvarsfromprofile\n");
          v7 = CL_GetOnlyLocalClientNum();
          Cbuf_AddText(v7, "profile_difficultyLoad\n");
          v8 = CL_GetOnlyLocalClientNum();
          Cbuf_AddText(v8, "profile_specialistModeLoad\n");
          v9 = CL_GetOnlyLocalClientNum();
          Cbuf_AddText(v9, "profile_yoloModeLoad\n");
          v10 = j_va("loadgame_continue %s\n", v4);
          v11 = CL_GetOnlyLocalClientNum();
          Cbuf_AddText(v11, v10);
        }
      }
    }
    R_EndRemoteScreenUpdate();
    g_PLMRestarting = 0;
    if ( v0 )
      v0->__abi_Release(v0);
  }
}

/*
==============
Sys_ConstrainedResources
==============
*/
void Sys_ConstrainedResources(void)
{
  if ( !Sys_IsMainThread() && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\xb3\\xb3_main.cpp", 1308, ASSERT_TYPE_ASSERT, "(Sys_IsMainThread())", (const char *)&queryFormat, "Sys_IsMainThread()") )
    __debugbreak();
  SND_SetConstrainedMode();
  Live_OnConstrainedResources_DisableBlockingPrivilegeChecks();
  Sys_PLM_SetConstrainedProcIds();
}

/*
==============
Sys_Crosslaunch_f
==============
*/
void Sys_Crosslaunch_f()
{
  const char *v0; 
  char ControllerFromClient; 
  int v2; 
  int v3; 
  HSTRING_HEADER hstringHeader; 
  HSTRING string; 

  if ( Cmd_Argc() <= 1 )
  {
    Com_Printf(16, "Sys_Crosslaunch_f \"%S\"  ....", L"ms-xbl-0020E1B2:
    ControllerFromClient = CL_Mgr_GetControllerFromClient(LOCAL_CLIENT_0);
    g_launchData.skipMovies = 1;
    g_launchData.activeController = ControllerFromClient | 8;
    LaunchData::operator=(&s_launchDataXB3, &g_launchData);
    if ( g_applicationView )
    {
      v2 = WindowsCreateStringReference_0(L"ms-xbl-0020E1B2:
      if ( v2 < 0 )
        __abi_WinRTraiseException(v2);
      v3 = g_applicationView->__abi_LaunchUriAsync(g_applicationView, (Platform::String *)string);
      if ( v3 < 0 )
        __abi_WinRTraiseException(v3);
    }
  }
  else
  {
    v0 = Cmd_Argv(0);
    Com_Printf(0, "USAGE: %s \n", v0);
  }
}

/*
==============
Sys_DumpPlatformMemStats
==============
*/
void Sys_DumpPlatformMemStats(void)
{
  unsigned __int64 CurrentAvailableMem; 
  unsigned __int64 TotalMem; 
  unsigned __int64 v2; 
  unsigned __int64 ExecutableSize; 
  unsigned __int64 UntrackedMem; 

  CurrentAvailableMem = XB3GetCurrentAvailableMem();
  TotalMem = XB3GetTotalMem();
  Com_MemDumpStatsLine("total system mem", TotalMem);
  Com_MemDumpStatsLine("free system mem", CurrentAvailableMem);
  v2 = g_min_available_memory;
  if ( CurrentAvailableMem < g_min_available_memory )
    v2 = CurrentAvailableMem;
  g_min_available_memory = v2;
  if ( v2 != -1i64 )
    Com_MemDumpStatsLine("min free sysmem", v2);
  ExecutableSize = XB3GetExecutableSize();
  Com_MemDumpStatsLine("exe size", ExecutableSize);
  UntrackedMem = XB3GetUntrackedMem();
  Com_MemDumpStatsLine("untracked system mem", UntrackedMem);
  XB3SystemMemoryStatus_Show_f();
}

/*
==============
Sys_DumpRawHWMemStats
==============
*/
void Sys_DumpRawHWMemStats(const int useRawOutputCmd)
{
  unsigned __int64 ullAvailPhys; 
  _MEMORYSTATUSEX Buffer; 
  wchar_t _Buffer[256]; 

  __asm { vmovaps [rsp+280h+var_10], xmm6 }
  memset(&Buffer.dwMemoryLoad, 0, 60);
  Buffer.dwLength = 64;
  GlobalMemoryStatusEx(&Buffer);
  ullAvailPhys = g_min_available_memory;
  __asm { vmovss  xmm6, cs:__real@35800000 }
  if ( g_min_available_memory > Buffer.ullAvailPhys )
    ullAvailPhys = Buffer.ullAvailPhys;
  g_min_available_memory = ullAvailPhys;
  __asm
  {
    vxorps  xmm0, xmm0, xmm0
    vcvtsi2ss xmm0, xmm0, [rsp+280h+Buffer.ullTotalPhys]
    vmulss  xmm0, xmm0, xmm6
    vcvtss2sd xmm3, xmm0, xmm0
    vmovq   r9, xmm3
  }
  if ( useRawOutputCmd )
  {
    j__snwprintf(_Buffer, 0x100ui64, L"OS Total      : %.0f MB\n", _R9);
    OutputDebugStringW(_Buffer);
    __asm
    {
      vxorps  xmm0, xmm0, xmm0
      vcvtsi2ss xmm0, xmm0, [rsp+280h+Buffer.ullAvailPhys]
      vmulss  xmm1, xmm0, xmm6
      vcvtss2sd xmm3, xmm1, xmm1
      vmovq   r9, xmm3
    }
    j__snwprintf(_Buffer, 0x100ui64, L"OS Avail      : %.0f MB\n", _R9);
    OutputDebugStringW(_Buffer);
  }
  else
  {
    j__snprintf((char *const)_Buffer, 0x200ui64, "OS Total      : %.0f MB\n", *(double *)&_XMM3);
    Com_MemDumpPrintf((const char *const)_Buffer);
    __asm
    {
      vxorps  xmm0, xmm0, xmm0
      vcvtsi2ss xmm0, xmm0, [rsp+280h+Buffer.ullAvailPhys]
      vmulss  xmm1, xmm0, xmm6
      vcvtss2sd xmm3, xmm1, xmm1
      vmovq   r9, xmm3
    }
    j__snprintf((char *const)_Buffer, 0x200ui64, "OS Avail      : %.0f MB\n", *(double *)&_XMM3);
    Com_MemDumpPrintf((const char *const)_Buffer);
  }
  if ( g_min_available_memory != -1i64 )
  {
    __asm
    {
      vxorps  xmm0, xmm0, xmm0
      vcvtsi2ss xmm0, xmm0, rax
      vmulss  xmm1, xmm0, xmm6
      vcvtss2sd xmm3, xmm1, xmm1
      vmovq   r9, xmm3
    }
    if ( useRawOutputCmd )
    {
      j__snwprintf(_Buffer, 0x100ui64, L"OS Avail (Min): %.0f MB\n\n", _R9);
      OutputDebugStringW(_Buffer);
    }
    else
    {
      j__snprintf((char *const)_Buffer, 0x200ui64, "OS Avail (Min): %.0f MB\n\n", *(double *)&_XMM3);
      Com_MemDumpPrintf((const char *const)_Buffer);
    }
  }
  __asm { vmovaps xmm6, [rsp+280h+var_10] }
}

/*
==============
Sys_Error
==============
*/
void Sys_Error(const ObfuscateErrorText error, ...)
{
  char v1; 
  const char *LastStackTraceBuffer; 
  const char *v3; 
  char dest[4096]; 
  va_list va; 

  va_start(va, error);
  Sys_EnterCriticalSection(CRITSECT_COM_ERROR);
  Sys_SuspendOtherThreads();
  Com_vsprintf_truncate(dest, 0x1000ui64, 0x1000ui64, error.fmt, va);
  if ( com_unattendedMode && com_unattendedMode->current.enabled )
  {
    v1 = 1;
    Sys_Print("********************\n");
    Sys_Print(dest);
    Sys_Print("\n********************\n");
    Com_PrintStackTrace();
  }
  else
  {
    v1 = 0;
  }
  Com_PrintError(16, "===========================================\n");
  Com_PrintError(16, "Sys_Error: %s\n", dest);
  BootPrintf("Sys_Error: %s\n", dest);
  Com_SendSysErrorToDLog(dest);
  Com_LogFileFlush();
  NET_RemoteDbgHostStabilize();
  if ( IsDebuggerPresent() || v1 )
    __debugbreak();
  Content_UnmountAllContent();
  if ( g_launchData.startupText[0] == 101 )
  {
    Sys_SuspendOtherThreads();
    Com_PrintError(16, " recursive with \"%s\"\n", g_launchData.startupText);
    BootPrintf(" recursive with \"%s\" (if any), erasing... ", g_launchData.startupText);
    g_launchData.startupText[0] = 0;
    LaunchData::operator=(&s_launchDataXB3, &g_launchData);
    BootPrintf("Exiting on recursive Sys_Error... ", g_launchData.startupText);
    Windows::ApplicationModel::Core::CoreApplication::Exit();
  }
  else
  {
    Com_PrintStackTrace();
    LastStackTraceBuffer = Com_GetLastStackTraceBuffer();
    if ( !g_isHandlingAssert )
    {
      Com_Printf(16, "===Restarting for Sys_Error===\n");
      Com_Printf(16, "%s\n", dest);
      Com_Printf(16, "==============================\n");
      BootPrintf("===Restarting for Sys_Error===\n");
      BootPrintf("%s\n", dest);
      BootPrintf("==============================\n");
    }
    Sys_SuspendOtherThreads();
    v3 = "null";
    if ( LastStackTraceBuffer )
      v3 = LastStackTraceBuffer;
    Com_sprintf_truncate(g_launchData.startupText, 0x7D0ui64, "e%s\nSTACK:%s", dest, v3);
    BootPrintf("Callstack:%s", v3);
    LaunchData::operator=(&s_launchDataXB3, &g_launchData);
  }
  if ( (!com_unattendedMode || !com_unattendedMode->current.enabled) && s_earlySysErrorHandlingAtBoot )
    XB3LaunchNewImage(-2);
  XB3LaunchNewImage(-1);
}

/*
==============
Sys_FileExists
==============
*/
bool Sys_FileExists(const char *name)
{
  char FileInformation[48]; 
  wchar_t WideCharStr[264]; 

  MultiByteToWideChar(0xFDE9u, 0, name, -1, WideCharStr, 260);
  return GetFileAttributesExW(WideCharStr, GetFileExInfoStandard, FileInformation);
}

/*
==============
Sys_FullResources
==============
*/
void Sys_FullResources(void)
{
  int i; 
  Online_BlockList *Instance; 

  if ( !Sys_IsMainThread() && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\xb3\\xb3_main.cpp", 1320, ASSERT_TYPE_ASSERT, "(Sys_IsMainThread())", (const char *)&queryFormat, "Sys_IsMainThread()") )
    __debugbreak();
  Sys_PLM_SetFullProcIds();
  Live_OnConstrainedResources_EnableBlockingPrivilegeChecks();
  Live_CheckControllerPairingsForConfirmationPopup();
  SND_SetFullResourcesMode();
  Live_OnFullResources_CheckForContentChanges();
  for ( i = 0; i < 8; ++i )
  {
    if ( CL_Mgr_IsControllerActive(i) && Live_IsUserSignedInToLive(i) )
    {
      XB3_Privacy_RefetchAllPrivacy(i);
      Instance = Online_BlockList::GetInstance();
      Online_BlockList::RefetchPlatformBlocklist(Instance, i);
    }
  }
}

/*
==============
Sys_GetDoubleClickTime
==============
*/
__int64 Sys_GetDoubleClickTime()
{
  return 500i64;
}

/*
==============
Sys_GetEvent
==============
*/
sysEvent_t *Sys_GetEvent(sysEvent_t *result)
{
  unsigned __int8 v1; 
  sysEvent_t *v6; 
  __m256i v8; 

  v1 = eventTail;
  _RBX = result;
  if ( eventHead <= eventTail )
  {
    v8.m256i_i32[0] = 0;
    memset(&v8.m256i_u64[1], 0, 24);
    v8.m256i_i32[1] = Sys_Milliseconds();
    v6 = _RBX;
    __asm
    {
      vmovups ymm0, ymmword ptr [rsp+48h+var_28]
      vmovups ymmword ptr [rbx], ymm0
    }
  }
  else
  {
    ++eventTail;
    _RDX = v1;
    _RAX = eventQue;
    _RDX *= 32i64;
    __asm
    {
      vmovups ymm0, ymmword ptr [rdx+rax]
      vmovups ymmword ptr [rcx], ymm0
    }
    return result;
  }
  return v6;
}

/*
==============
Sys_GetLanguage
==============
*/
__int64 Sys_GetLanguage()
{
  __int64 result; 
  language_t v1; 
  int v2; 
  int v3; 
  const char *LanguageName; 
  char MultiByteStr[256]; 
  wchar_t LocaleName[88]; 

  if ( dword_15644BDAC > *(_DWORD *)(*((_QWORD *)NtCurrentTeb()->Reserved1[11] + tls_index) + 1772i64) )
  {
    j__Init_thread_header(&dword_15644BDAC);
    if ( dword_15644BDAC == -1 )
    {
      languageID = DCache_AdditionalData_GetLanguage();
      j__Init_thread_footer(&dword_15644BDAC);
    }
  }
  result = (unsigned int)languageID;
  if ( languageID == MAX_LANGUAGES )
  {
    v1 = LANGUAGE_ENGLISH;
    if ( GetUserDefaultLocaleName(LocaleName, languageID + 64) <= 0 )
    {
      languageID = LANGUAGE_ENGLISH;
    }
    else
    {
      WideCharToMultiByte(0xFDE9u, 0, LocaleName, -1, MultiByteStr, 256, NULL, NULL);
      s_isSpecialRegion = 0;
      if ( !strncmp(MultiByteStr, "ar", 2ui64) )
      {
        languageID = LANGUAGE_ARABIC;
      }
      else if ( !strncmp(MultiByteStr, "en", 2ui64) )
      {
        languageID = LANGUAGE_ENGLISH;
      }
      else if ( !strncmp(MultiByteStr, "fr", 2ui64) )
      {
        languageID = LANGUAGE_FRENCH;
      }
      else if ( !strncmp(MultiByteStr, "it", 2ui64) )
      {
        languageID = LANGUAGE_ITALIAN;
      }
      else if ( !strncmp(MultiByteStr, "de", 2ui64) )
      {
        languageID = LANGUAGE_GERMAN;
      }
      else if ( _strcmpi(MultiByteStr, "es-MX") )
      {
        if ( !strncmp(MultiByteStr, "es", 2ui64) )
        {
          languageID = LANGUAGE_SPANISH;
        }
        else if ( !strncmp(MultiByteStr, "ko", 2ui64) )
        {
          languageID = LANGUAGE_KOREAN_FULL;
        }
        else if ( !strncmp(MultiByteStr, "pl", 2ui64) )
        {
          languageID = LANGUAGE_POLISH_FULL;
        }
        else if ( !strncmp(MultiByteStr, "pt", 2ui64) )
        {
          languageID = LANGUAGE_PORTUGUESE;
        }
        else if ( !strncmp(MultiByteStr, "ru", 2ui64) )
        {
          languageID = LANGUAGE_RUSSIAN_FULL;
        }
        else if ( !strncmp(MultiByteStr, "ja", 2ui64) )
        {
          languageID = LANGUAGE_JAPANESE_FULL;
        }
        else if ( _strnicmp(MultiByteStr, "zh-Hant", 7ui64) && _strcmpi(MultiByteStr, "zh-HK") && _strcmpi(MultiByteStr, "zh-TW") )
        {
          if ( !strncmp(MultiByteStr, "zh", 2ui64) )
            v1 = LANGUAGE_SIMPLIFIED_CHINESE;
          languageID = v1;
        }
        else
        {
          languageID = LANGUAGE_TRADITIONAL_CHINESE;
        }
      }
      else
      {
        languageID = LANGUAGE_SPANISHNA;
      }
      v2 = _strcmpi(MultiByteStr, "fr-CA");
      v3 = s_isSpecialRegion;
      if ( !v2 )
        v3 = 1;
      s_isSpecialRegion = v3;
      if ( !_strcmpi(MultiByteStr, "en-GB") )
        s_isSpecialRegion = 1;
    }
    Dvar_BeginPermanentRegistration();
    LanguageName = SEH_GetLanguageName(languageID);
    Dvar_RegisterString("MOLKSQRKOL", LanguageName, 0x2000u, "sys_language");
    Dvar_EndPermanentRegistration();
    return (unsigned int)languageID;
  }
  return result;
}

/*
==============
Sys_GetStartupRegion
==============
*/
__int64 Sys_GetStartupRegion()
{
  AssetRegion v0; 
  GEOID UserGeoID; 
  AssetRegion v2; 
  const char *RegionCode; 
  const char *RegionName; 
  const char *v6; 
  const char *v7; 
  bool v8; 
  const char *v9; 
  const char *v10; 
  AssetRegion s; 
  char FileInformation[40]; 
  char v13[48]; 
  char dest[256]; 
  wchar_t WideCharStr[264]; 
  wchar_t FileName[264]; 

  v0 = Worldwide;
  UserGeoID = GetUserGeoID(0x10u);
  v2 = Japan;
  switch ( UserGeoID )
  {
    case 224:
    case 205:
      v0 = SaudiArabia;
      break;
    case 122:
      v0 = Japan;
      break;
    case 45:
      v0 = China;
      break;
  }
  if ( Sys_IsRegionAvailable(v0) )
    return (unsigned int)v0;
  for ( s = Japan; s != End; v2 = s )
  {
    RegionCode = RG_GetRegionCode(v2);
    RegionName = RG_GetRegionName(v2);
    Com_sprintf(dest, 0x100ui64, "%s/%s_%s%s", RegionName, RegionCode, "code_post_gfx", ".ff");
    if ( g_fileSystem->GetType(g_fileSystem) )
    {
      if ( g_fileSystem->Exists(g_fileSystem, SF_ZONE, dest) )
        return (unsigned int)s;
      v9 = RG_GetRegionCode(v2);
      v10 = RG_GetRegionName(v2);
      Com_sprintf(dest, 0x100ui64, "zone/%s/%s_%s%s", v10, v9, "code_post_gfx", ".ff");
      v8 = !g_fileSystem->Exists(g_fileSystem, SF_ZONE, dest);
    }
    else
    {
      MultiByteToWideChar(0xFDE9u, 0, dest, -1, WideCharStr, 260);
      if ( GetFileAttributesExW(WideCharStr, GetFileExInfoStandard, FileInformation) )
        return (unsigned int)s;
      v6 = RG_GetRegionCode(v2);
      v7 = RG_GetRegionName(v2);
      Com_sprintf(dest, 0x100ui64, "zone/%s/%s_%s%s", v7, v6, "code_post_gfx", ".ff");
      MultiByteToWideChar(0xFDE9u, 0, dest, -1, FileName, 260);
      v8 = !GetFileAttributesExW(FileName, GetFileExInfoStandard, v13);
    }
    if ( !v8 )
      return (unsigned int)s;
    operator++(&s);
  }
  if ( !Com_IsContentMemRun() && !Sys_IsRegionAvailable(Worldwide) && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\xb3\\xb3_main.cpp", 3540, ASSERT_TYPE_ASSERT, "(Sys_IsRegionAvailable( AssetRegion::Worldwide ))", "%s\n\tCould not determine region.", "Sys_IsRegionAvailable( AssetRegion::Worldwide )") )
    __debugbreak();
  return 0i64;
}

/*
==============
Sys_GetTextSection
==============
*/
char Sys_GetTextSection(unsigned __int64 *start_in, unsigned int *size_in)
{
  HMODULE ModuleHandleW; 
  HMODULE v5; 
  char result; 
  int v7; 
  char *v8; 
  __int64 v9; 
  _BYTE *i; 
  _BYTE *v11; 
  __int64 v12; 
  const char *v13; 
  char v14; 
  __int64 v15; 
  char v16; 
  __int64 v19; 
  char *v20; 

  ModuleHandleW = GetModuleHandleW(NULL);
  v5 = ModuleHandleW;
  if ( ModuleHandleW )
  {
    v7 = 0;
    v8 = (char *)ModuleHandleW + *((int *)ModuleHandleW + 15);
    v20 = &v8[*((unsigned __int16 *)v8 + 10)];
    if ( *((_WORD *)v8 + 3) )
    {
      v9 = (__int64)&v8[*((unsigned __int16 *)v8 + 10) + 60];
      v19 = v9;
      for ( i = (_BYTE *)v9; ; i += 40 )
      {
        v11 = &i[-v9];
        if ( (*i & 0x20) != 0 )
          break;
LABEL_13:
        if ( ++v7 >= *((unsigned __int16 *)v8 + 3) )
          return 0;
        v9 = v19;
      }
      v12 = 0x7FFFFFFFi64;
      v13 = ".text";
      if ( i == (_BYTE *)36 && CoreAssert_Handler("c:\\workspace\\iw8\\shared\\codware\\core\\core_string.h", 181, ASSERT_TYPE_SANITY, "( s0 )", (const char *)&queryFormat, "s0") )
        __debugbreak();
      do
      {
        v14 = i[-36i64 - (_QWORD)".text" + (_QWORD)v13];
        v15 = v12;
        v16 = *v13++;
        --v12;
        if ( !v15 )
          break;
        if ( v14 != v16 )
          goto LABEL_13;
      }
      while ( v14 );
      *start_in = (unsigned __int64)v5 + *(unsigned int *)&v20[(_QWORD)v11 + 36];
      *size_in = *(_DWORD *)&v20[(_QWORD)v11 + 40];
      return 1;
    }
    else
    {
      return 0;
    }
  }
  else
  {
    Com_PrintWarning(16, "!!!!!!!!!!!!!!!!!!!!!!!! Unable to find exe named '%s'. Challenge response will not work!!!!!!!!!!!!!!!!!!!!!!!!\n", "1-game_test.exe");
    *start_in = 0i64;
    result = 0;
    *size_in = 0;
  }
  return result;
}

/*
==============
Sys_GetUsingPCHostHDDFolders
==============
*/
_BOOL8 Sys_GetUsingPCHostHDDFolders()
{
  return s_pcHostHDDFolders;
}

/*
==============
Sys_GetXB3ConsoleType
==============
*/
__int64 Sys_GetXB3ConsoleType()
{
  int ConsoleType_0; 

  ConsoleType_0 = GetConsoleType_0();
  if ( ConsoleType_0 > 0 )
  {
    if ( ConsoleType_0 <= 2 )
      return 1i64;
    if ( ConsoleType_0 <= 4 )
      return 2i64;
  }
  Sys_Error((const ObfuscateErrorText)&stru_144529FC0);
  return 0i64;
}

/*
==============
Sys_HeapOptimize
==============
*/
void Sys_HeapOptimize(void)
{
  __int64 HeapInformation; 

  HeapInformation = 1i64;
  Sys_ProfBeginNamedEvent(0xFFB22222, "HeapOptimize");
  if ( !HeapSetInformation(NULL, HeapOptimizeResources, &HeapInformation, 8ui64) && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\xb3\\xb3_main.cpp", 1884, ASSERT_TYPE_ASSERT, "(HeapSetInformation( nullptr, HeapOptimizeResources, &hori, sizeof( hori ) ))", (const char *)&queryFormat, "HeapSetInformation( nullptr, HeapOptimizeResources, &hori, sizeof( hori ) )") )
    __debugbreak();
  Sys_ProfEndNamedEvent();
}

/*
==============
Sys_In_Restart_f
==============
*/
void Sys_In_Restart_f()
{
  IN_Shutdown();
  IN_Init();
}

/*
==============
Sys_Init
==============
*/
void Sys_Init(void)
{
  PLM_SetValidGameSave(0);
  g_quitRequested = 0;
  g_quitMigrationStarted = 0;
  Cmd_AddCommandInternal("in_restart", Sys_In_Restart_f, &Sys_In_Restart_f_VAR);
  Cmd_AddCommandInternal("sys_restart", Sys_Restart_f, &Sys_Restart_f_VAR);
  Cmd_AddCommandInternal("boot_restart", Sys_BootRestart_f, &Sys_BootRestart_f_VAR);
  Cmd_AddCommandInternal("crosslaunch", Sys_Crosslaunch_f, &Sys_Crosslaunch_f_VAR);
  XB3XMemAlloc_InitCommands();
  IN_Init();
}

/*
==============
Sys_InitFolders
==============
*/
void Sys_InitFolders(bool forceNoZoneDirectory)
{
  const char *v1; 
  const char *v2; 
  const char *v3; 
  const char *v4; 
  const char *v5; 
  const char *v6; 
  const char *CurrentLanguageName; 
  const char *v8; 
  const char *v9; 

  if ( !s_pcHostHDDFolders || forceNoZoneDirectory )
  {
    Sys_SetFolder(SF_ZONE, (const char *)&queryFormat.fmt + 3);
    CurrentLanguageName = SEH_GetCurrentLanguageName();
    Sys_SetFolder(SF_ZONE_LOC, CurrentLanguageName);
    Sys_SetFolder(SF_VIDEO, (const char *)&queryFormat.fmt + 3);
    v8 = SEH_GetCurrentLanguageName();
    Sys_SetFolder(SF_VIDEO_LOC, v8);
    Sys_SetFolder(SF_PAKFILE, (const char *)&queryFormat.fmt + 3);
    v9 = SEH_GetCurrentLanguageName();
    Sys_SetFolder(SF_PAKFILE_LOC, v9);
  }
  else
  {
    Sys_SetFolder(SF_ZONE, "zone");
    v1 = SEH_GetCurrentLanguageName();
    v2 = j_va("zone\\%s", v1);
    Sys_SetFolder(SF_ZONE_LOC, v2);
    Sys_SetFolder(SF_VIDEO, "discdata\\video");
    v3 = SEH_GetCurrentLanguageName();
    v4 = j_va("discdata\\%s\\video", v3);
    Sys_SetFolder(SF_VIDEO_LOC, v4);
    Sys_SetFolder(SF_PAKFILE, "zone");
    v5 = SEH_GetCurrentLanguageName();
    v6 = j_va("zone\\%s", v5);
    Sys_SetFolder(SF_PAKFILE_LOC, v6);
  }
}

/*
==============
Sys_InitRegionFolders
==============
*/
void Sys_InitRegionFolders(bool forceNoZoneDirectory)
{
  const char *v2; 
  const char *v3; 
  const char *CurrentRegionName; 
  char dest[256]; 

  v2 = Sys_Cwd();
  Com_sprintf(dest, 0x100ui64, "%s\\zone", v2);
  if ( !s_pcHostHDDFolders || forceNoZoneDirectory )
  {
    CurrentRegionName = RG_GetCurrentRegionName();
  }
  else
  {
    v3 = RG_GetCurrentRegionName();
    CurrentRegionName = j_va("zone\\%s", v3);
  }
  Sys_SetFolder(SF_ZONE_REGION, CurrentRegionName);
}

/*
==============
Sys_IsPLMHotLoadActive
==============
*/
_BOOL8 Sys_IsPLMHotLoadActive()
{
  return s_inPLMHotLoad;
}

/*
==============
Sys_IsRegionAvailable
==============
*/
char Sys_IsRegionAvailable(AssetRegion region)
{
  const char *RegionCode; 
  const char *RegionName; 
  const char *v4; 
  const char *v5; 
  const char *v7; 
  const char *v8; 
  char FileInformation[48]; 
  char dest[256]; 
  wchar_t WideCharStr[264]; 

  RegionCode = RG_GetRegionCode(region);
  RegionName = RG_GetRegionName(region);
  Com_sprintf(dest, 0x100ui64, "%s/%s_%s%s", RegionName, RegionCode, "code_post_gfx", ".ff");
  if ( g_fileSystem->GetType(g_fileSystem) )
  {
    if ( g_fileSystem->Exists(g_fileSystem, SF_ZONE, dest) )
      return 1;
    v7 = RG_GetRegionCode(region);
    v8 = RG_GetRegionName(region);
    Com_sprintf(dest, 0x100ui64, "zone/%s/%s_%s%s", v8, v7, "code_post_gfx", ".ff");
    if ( g_fileSystem->Exists(g_fileSystem, SF_ZONE, dest) )
      return 1;
  }
  else
  {
    MultiByteToWideChar(0xFDE9u, 0, dest, -1, WideCharStr, 260);
    if ( GetFileAttributesExW(WideCharStr, GetFileExInfoStandard, FileInformation) )
      return 1;
    v4 = RG_GetRegionCode(region);
    v5 = RG_GetRegionName(region);
    Com_sprintf(dest, 0x100ui64, "zone/%s/%s_%s%s", v5, v4, "code_post_gfx", ".ff");
    MultiByteToWideChar(0xFDE9u, 0, dest, -1, WideCharStr, 260);
    if ( GetFileAttributesExW(WideCharStr, GetFileExInfoStandard, FileInformation) )
      return 1;
  }
  return 0;
}

/*
==============
Sys_IsReleaseBuild
==============
*/
_BOOL8 Sys_IsReleaseBuild()
{
  int ActivationFactoryByPCWSTR; 
  int v1; 
  __int64 v2; 
  __int64 v3; 
  int v4; 
  __int64 v5; 
  __int64 v6; 
  int v7; 
  bool v8; 
  Platform::Guid pGuid; 
  __int64 v11; 
  __int64 v12; 
  void *ppActivationFactory; 
  __int64 v14; 

  pGuid.__vftable = (Platform::Object_vtbl *)0x487829604E534BDFi64;
  *(_DWORD *)&pGuid.__d = 613852311;
  *(_DWORD *)&pGuid.__h = 758101982;
  ppActivationFactory = NULL;
  ActivationFactoryByPCWSTR = __winRT::__getActivationFactoryByPCWSTR(L"Windows.ApplicationModel.Package", &pGuid, &ppActivationFactory);
  if ( ActivationFactoryByPCWSTR < 0 )
    __abi_WinRTraiseException(ActivationFactoryByPCWSTR);
  v12 = 0i64;
  v1 = (*(__int64 (__fastcall **)(void *, __int64 *))(*(_QWORD *)ppActivationFactory + 48i64))(ppActivationFactory, &v12);
  if ( v1 < 0 )
    __abi_WinRTraiseException(v1);
  v2 = v12;
  v3 = v12;
  if ( v12 )
  {
    (*(void (__fastcall **)(__int64))(*(_QWORD *)v12 + 8i64))(v12);
    v2 = v12;
  }
  if ( v2 )
    (*(void (__fastcall **)(__int64))(*(_QWORD *)v2 + 16i64))(v2);
  v14 = 0i64;
  if ( ppActivationFactory )
    (*(void (__fastcall **)(void *))(*(_QWORD *)ppActivationFactory + 16i64))(ppActivationFactory);
  v14 = 0i64;
  v4 = (*(__int64 (__fastcall **)(__int64, __int64 *))(*(_QWORD *)v3 + 48i64))(v3, &v14);
  if ( v4 < 0 )
    __abi_WinRTraiseException(v4);
  v5 = v14;
  v6 = v14;
  if ( v14 )
  {
    (*(void (__fastcall **)(__int64))(*(_QWORD *)v14 + 8i64))(v14);
    v5 = v14;
  }
  if ( v5 )
    (*(void (__fastcall **)(__int64))(*(_QWORD *)v5 + 16i64))(v5);
  v11 = 0i64;
  v7 = (*(__int64 (__fastcall **)(__int64, __int64 *))(*(_QWORD *)v6 + 56i64))(v6, &v11);
  if ( v7 < 0 )
    __abi_WinRTraiseException(v7);
  v8 = (_WORD)v11 == 1 && !*(_DWORD *)((char *)&v11 + 2);
  (*(void (__fastcall **)(__int64))(*(_QWORD *)v6 + 16i64))(v6);
  (*(void (__fastcall **)(__int64))(*(_QWORD *)v3 + 16i64))(v3);
  return v8;
}

/*
==============
Sys_IsSpecialRegion
==============
*/
__int64 Sys_IsSpecialRegion()
{
  return (unsigned int)s_isSpecialRegion;
}

/*
==============
Sys_IsUsingOptionalDevFunctionality
==============
*/
_BOOL8 Sys_IsUsingOptionalDevFunctionality()
{
  if ( !s_checkedOptionalDevDLLs && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\xb3\\xb3_main.cpp", 1656, ASSERT_TYPE_ASSERT, "(s_checkedOptionalDevDLLs)", (const char *)&queryFormat, "s_checkedOptionalDevDLLs") )
    __debugbreak();
  return s_usingOptionalDevDLLs;
}

/*
==============
Sys_LoadingKeepAlive
==============
*/
void Sys_LoadingKeepAlive(void)
{
  ;
}

/*
==============
Sys_LoadingProcessEvents
==============
*/
void Sys_LoadingProcessEvents(void)
{
  __int64 v0; 
  Windows::UI::Core::CoreWindow *v1; 
  int v2; 
  __int64 v3; 
  __int64 v4; 
  int v5; 
  __int64 v6; 
  __int64 v7; 
  Windows::UI::Core::CoreWindow *v8; 
  __int64 v9; 

  v0 = 0i64;
  v7 = 0i64;
  if ( !Sys_IsMainThread() && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\xb3\\xb3_main.cpp", 1701, ASSERT_TYPE_ASSERT, "(Sys_IsMainThread())", (const char *)&queryFormat, "Sys_IsMainThread()", -2i64) )
    __debugbreak();
  v1 = Windows::UI::Core::CoreWindow::GetForCurrentThread();
  v8 = v1;
  v6 = 0i64;
  v2 = v1->__abi_get_Dispatcher(v1, (Windows::UI::Core::CoreDispatcher **)&v6);
  if ( v2 < 0 )
    __abi_WinRTraiseException(v2);
  v3 = v6;
  v4 = v6;
  if ( v6 )
  {
    (*(void (__fastcall **)(__int64))(*(_QWORD *)v6 + 8i64))(v6);
    v3 = v6;
  }
  if ( v3 )
    (*(void (__fastcall **)(__int64))(*(_QWORD *)v3 + 16i64))(v3);
  v9 = v4;
  if ( v4 )
  {
    (*(void (__fastcall **)(__int64))(*(_QWORD *)v4 + 8i64))(v4);
    v0 = v4;
    v7 = v4;
  }
  if ( v4 )
    (*(void (__fastcall **)(__int64))(*(_QWORD *)v4 + 16i64))(v4);
  v1->__abi_Release(v1);
  if ( v0 )
  {
    v5 = (*(__int64 (__fastcall **)(__int64, __int64))(*(_QWORD *)v0 + 56i64))(v0, 3i64);
    if ( v5 < 0 )
      __abi_WinRTraiseException(v5);
  }
  else if ( CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\xb3\\xb3_main.cpp", 1703, ASSERT_TYPE_ASSERT, "(dispatcher != nullptr)", (const char *)&queryFormat, "dispatcher != nullptr") )
  {
    __debugbreak();
  }
  if ( v0 )
    (*(void (__fastcall **)(__int64))(*(_QWORD *)v0 + 16i64))(v0);
}

/*
==============
Sys_OpenURL
==============
*/
void Sys_OpenURL(const char *url, int doexit)
{
  ;
}

/*
==============
Sys_PLM_MP_Resume
==============
*/
void Sys_PLM_MP_Resume(void)
{
  int i; 
  int ControllerFromClient; 

  for ( i = 0; i < 2; ++i )
  {
    if ( CL_IsLocalClientActive((LocalClientNum_t)i) )
    {
      ControllerFromClient = CL_Mgr_GetControllerFromClient((LocalClientNum_t)i);
      Session_LeaveOldMPSDSessions(ControllerFromClient);
    }
  }
  if ( Com_GameMode_SupportsFeature(WEAPON_LADDER_CLIMB) )
    Com_MP_Resume();
}

/*
==============
Sys_PLM_MP_Shutdown
==============
*/
void Sys_PLM_MP_Shutdown(void)
{
  Live_OnSuspendPreCom_Suspend();
  if ( Com_GameMode_SupportsFeature(WEAPON_LADDER_CLIMB) )
    Com_MP_Suspend();
}

/*
==============
Sys_PLM_WriteData
==============
*/
char Sys_PLM_WriteData(bool suspended, bool async)
{
  bool v3; 
  const dvar_t *v4; 
  char ActiveGameMode; 
  MemcardSizeHint ControllerFromClient; 
  MemCardFileHandle *v8; 
  MemCardFileHandle v9; 
  int fmt; 
  _FILETIME SystemTimeAsFileTime; 
  __int64 v12; 
  __int64 v13; 
  __int64 v14; 
  __int64 v15; 
  __int64 v16; 
  __int64 v17; 
  __int64 v18; 

  SystemTimeAsFileTime = 0i64;
  v12 = 0i64;
  v13 = 0i64;
  v14 = 0i64;
  v15 = 0i64;
  v16 = 0i64;
  v17 = 0i64;
  v18 = 0i64;
  BYTE4(v12) = suspended;
  BYTE5(v12) = PLM_IsValidGameSave();
  v3 = PLM_UseDefaultGameSave();
  v4 = DVARBOOL_systemlink;
  BYTE6(v12) = v3;
  if ( !DVARBOOL_systemlink && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\universal\\dvar.h", 692, ASSERT_TYPE_ASSERT, "(dvar)", "%s\n\tDvar %s accessed after deregistration", "dvar", "systemlink") )
    __debugbreak();
  Dvar_CheckFrontendServerThread(v4);
  if ( v4->current.enabled || (ActiveGameMode = Com_GameMode_GetActiveGameMode()) == 0 )
  {
    LODWORD(v12) = 0;
  }
  else
  {
    switch ( ActiveGameMode )
    {
      case 1:
        LODWORD(v12) = 1;
        break;
      case 2:
        LODWORD(v12) = 2;
        break;
      case 3:
        LODWORD(v12) = 3;
        break;
      default:
        Com_PrintError(16, "Unhandled game mode type in Sys_PLM_WriteData\n");
        return 0;
    }
  }
  GetSystemTimeAsFileTime(&SystemTimeAsFileTime);
  ControllerFromClient = CL_Mgr_GetControllerFromClient(LOCAL_CLIENT_0);
  v8 = MemCard_OpenFile((MemCardFileHandle *)&stru_14452A3A8, (const char *)1, MEMCARD_READ, ControllerFromClient, fmt);
  v9.handle = (__int64)v8;
  if ( !v8 )
    return 0;
  MemCard_WriteFile((MemCardFileHandle)v8, &SystemTimeAsFileTime, 0x40u);
  MemCard_CloseFile(v9, async);
  return 1;
}

/*
==============
Sys_Print
==============
*/
void Sys_Print(const char *msg)
{
  const char *v1; 
  char i; 
  bool v3; 
  __int64 v4; 

  v1 = msg;
  if ( !msg && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\xb3\\xb3_main.cpp", 742, ASSERT_TYPE_ASSERT, "(msg)", (const char *)&queryFormat, "msg") )
    __debugbreak();
  if ( com_unattendedMode && com_unattendedMode->current.enabled )
  {
    if ( !v1 && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\xb3\\xb3_main.cpp", 703, ASSERT_TYPE_ASSERT, "(msg)", (const char *)&queryFormat, "msg") )
      __debugbreak();
    EnterCriticalSection(&s_xtfPrintCritSect);
    for ( i = *v1; i; ++v1 )
    {
      if ( i == 10 )
      {
        Sys_XB3XTF_PrintLine();
      }
      else if ( i == 9 || (unsigned __int8)(i - 32) <= 0x5Eu )
      {
        v3 = s_xtfBufferPos < 0xFFE;
        if ( s_xtfBufferPos == 4094 )
        {
          Sys_XB3XTF_PrintLine();
          v3 = s_xtfBufferPos < 0xFFE;
        }
        if ( !v3 && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\xb3\\xb3_main.cpp", 726, ASSERT_TYPE_ASSERT, "(s_xtfBufferPos < ( ( sizeof( *array_counter( s_xtfBuffer ) ) + 0 ) - 2 ))", (const char *)&queryFormat, "s_xtfBufferPos < ( ARRAY_COUNT( s_xtfBuffer ) - 2 )") )
          __debugbreak();
        v4 = s_xtfBufferPos++;
        s_xtfBuffer[v4] = i;
      }
      i = v1[1];
    }
    LeaveCriticalSection(&s_xtfPrintCritSect);
  }
  else
  {
    OutputDebugStringA(v1);
  }
}

/*
==============
Sys_QueEvent
==============
*/
void Sys_QueEvent(int time, sysEventType_t type, int value, int value2, int portIndex, int ptrLength, void *ptr)
{
  int v7; 
  sysEvent_t *v10; 

  v7 = eventHead;
  v10 = &eventQue[(unsigned __int8)eventHead];
  if ( eventHead - eventTail >= 256 )
  {
    Com_PrintError(16, "Sys_QueEvent: overflow\n");
    if ( v10->evPtr && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\xb3\\xb3_main.cpp", 1739, ASSERT_TYPE_ASSERT, "(!ev->evPtr)", (const char *)&queryFormat, "!ev->evPtr") )
      __debugbreak();
    ++eventTail;
    v7 = eventHead;
  }
  eventHead = v7 + 1;
  if ( !time )
    time = Sys_Milliseconds();
  v10->evPtrLength = ptrLength;
  v10->evPtr = ptr;
  v10->evTime = time;
  v10->evValue = value;
  v10->evValue2 = value2;
  v10->evPortIndex = portIndex;
  v10->evType = type;
}

/*
==============
Sys_Quit
==============
*/
void Sys_Quit(void)
{
  Online_VideoStreaming *Instance; 
  HANDLE CurrentProcess; 

  Instance = Online_VideoStreaming::GetInstance();
  Online_VideoStreaming::StopVideo(Instance, 1, 0);
  CL_Main_ShutdownAll(0, 1);
  IN_Shutdown();
  CL_Keys_Shutdown();
  RefreshQuitOnErrorCondition();
  Dvar_Shutdown();
  Cmd_Shutdown();
  Con_Shutdown();
  Com_ShutdownEvents();
  if ( !g_serverThreadOwnership )
  {
    Scr_ShutdownGameStrings();
    Scr_ShutdownGlobalStrings();
    SL_Shutdown();
  }
  Con_ShutdownChannels();
  OutputDebugStringA("finish exit game\n");
  if ( com_unattendedMode && com_unattendedMode->current.enabled )
    __debugbreak();
  Windows::ApplicationModel::Core::CoreApplication::Exit();
  CurrentProcess = GetCurrentProcess();
  TerminateProcess(CurrentProcess, 0);
}

/*
==============
Sys_QuitAndStartProcess
==============
*/
void Sys_QuitAndStartProcess(const char *exeName, const char *parameters)
{
  ;
}

/*
==============
Sys_Restart
==============
*/
void Sys_Restart(const char *startupMsg, ...)
{
  char dest[1024]; 
  va_list va; 

  va_start(va, startupMsg);
  Sys_EnterCriticalSection(CRITSECT_EXE_RESTART);
  Com_vsprintf_truncate(dest, 0x400ui64, 0x400ui64, startupMsg, va);
  Com_LogFileFlush();
  NET_RemoteDbgHostStabilize();
  SD_Terminate();
  Sys_SuspendOtherThreads();
  Content_UnmountAllContent();
  XB3InitLaunchData();
  Com_sprintf_truncate(g_launchData.startupText, 0x7D0ui64, "n%s", dest);
  LaunchData::operator=(&s_launchDataXB3, &g_launchData);
  XB3LaunchNewImage(-1);
}

/*
==============
Sys_Restart_f
==============
*/
void Sys_Restart_f()
{
  Sys_Restart((const char *)&queryFormat.fmt + 3);
}

/*
==============
Sys_ResumeEvent
==============
*/
void Sys_ResumeEvent(void)
{
  int v0; 
  int i; 
  int ControllerFromClient; 

  Live_OnSuspendResume_RefreshCachedObjects();
  if ( !Sys_IsMainThread() && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\xb3\\xb3_main.cpp", 1262, ASSERT_TYPE_ASSERT, "(Sys_IsMainThread())", (const char *)&queryFormat, "Sys_IsMainThread()") )
    __debugbreak();
  if ( ((unsigned __int8)&g_PLMSuspending & 3) != 0 && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\qcommon\\threads_interlock_pc.h", 93, ASSERT_TYPE_ASSERT, "( ( IsAligned( target, sizeof( volatile_int32 ) ) ) )", "( target ) = %p", (const void *)&g_PLMSuspending) )
    __debugbreak();
  v0 = 0;
  _InterlockedExchange(&g_PLMSuspending, 0);
  R_LockGfxImmediateContext();
  g_dx.immediateCommandQueue.commandQueue->m_pFunction[7].AddRef(g_dx.immediateCommandQueue.commandQueue);
  R_UnlockGfxImmediateContext();
  XB3_HwZlib_Resume();
  if ( Stream_IsEnabled() && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\xb3\\xb3_main.cpp", 1277, ASSERT_TYPE_ASSERT, "(!Stream_IsEnabled())", (const char *)&queryFormat, "!Stream_IsEnabled()") )
    __debugbreak();
  Stream_PopSyncDisable();
  Sys_PLM_WriteData(0, 1);
  for ( i = 0; i < 2; ++i )
  {
    if ( CL_IsLocalClientActive((LocalClientNum_t)i) )
    {
      ControllerFromClient = CL_Mgr_GetControllerFromClient((LocalClientNum_t)i);
      Session_LeaveOldMPSDSessions(ControllerFromClient);
    }
  }
  if ( Com_GameMode_SupportsFeature(WEAPON_LADDER_CLIMB) )
    Com_MP_Resume();
  do
    XB3GameEvent_PlayerSessionStart(v0++);
  while ( v0 < 8 );
  R_PushRemoteScreenUpdate(g_suspendRemoteScreenUpdateNesting);
  Live_OnResume();
  Users_OnResume();
}

/*
==============
Sys_SetPLMHotLoadActive
==============
*/
void Sys_SetPLMHotLoadActive(bool inPLMHotLoad)
{
  s_inPLMHotLoad = inPLMHotLoad;
}

/*
==============
Sys_StoreLanguage
==============
*/

void __fastcall Sys_StoreLanguage(language_t language)
{
  DCache_AdditionalData_SetLanguage(language);
}

/*
==============
Sys_SuspendEvent
==============
*/
void Sys_SuspendEvent(void)
{
  int v0; 
  int v1; 
  int i; 
  Online_VideoStreaming *Instance; 
  int v4; 
  int v5; 
  int v6; 

  v0 = 0;
  v1 = Sys_Milliseconds();
  for ( i = 0; i < 8; ++i )
    XB3GameEvent_MultiplayerRoundEnd(i);
  G_SaveMemorySP_WaitForWritesToComplete(1);
  BootPrintf("Completed waiting for save game write\n");
  Sys_PLM_WriteData(1, 0);
  BootPrintf("Completed PLM write\n");
  g_suspendRemoteScreenUpdateNesting = R_PopRemoteScreenUpdate();
  if ( ((unsigned __int8)&g_PLMSuspending & 3) != 0 && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\qcommon\\threads_interlock_pc.h", 93, ASSERT_TYPE_ASSERT, "( ( IsAligned( target, sizeof( volatile_int32 ) ) ) )", "( target ) = %p", (const void *)&g_PLMSuspending) )
    __debugbreak();
  _InterlockedExchange(&g_PLMSuspending, 1);
  Live_OnSuspendPreCom_Suspend();
  if ( Com_GameMode_SupportsFeature(WEAPON_LADDER_CLIMB) )
    Com_MP_Suspend();
  do
    XB3GameEvent_PlayerSessionEnd(v0++, 1);
  while ( v0 < 8 );
  Stream_PushSyncDisable();
  if ( Stream_IsEnabled() && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\xb3\\xb3_main.cpp", 1206, ASSERT_TYPE_ASSERT, "(!Stream_IsEnabled())", (const char *)&queryFormat, "!Stream_IsEnabled()") )
    __debugbreak();
  Stream_Primer_CancelAndWait();
  Stream_BackendQueue_ForcedFlush();
  if ( !Sys_IsMainThread() && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\xb3\\xb3_main.cpp", 1215, ASSERT_TYPE_ASSERT, "(Sys_IsMainThread())", (const char *)&queryFormat, "Sys_IsMainThread()") )
    __debugbreak();
  Com_SyncThreads();
  XB3_HwZlib_Suspend();
  R_WaitAllAsyncComputeForSuspend();
  Instance = Online_VideoStreaming::GetInstance();
  Online_VideoStreaming::StopVideo(Instance, 1, 0);
  R_LockGfxImmediateContext();
  ((void (__fastcall *)(ID3D12CommandQueue *, _QWORD))g_dx.immediateCommandQueue.commandQueue->m_pFunction[7].QueryInterface)(g_dx.immediateCommandQueue.commandQueue, 0i64);
  R_UnlockGfxImmediateContext();
  v4 = Sys_Milliseconds();
  v5 = g_maxDurationSuspendingMs;
  v6 = v4 - v1;
  if ( v6 > g_maxDurationSuspendingMs )
    v5 = v6;
  g_maxDurationSuspendingMs = v5;
  BootPrintf("Suspend processing complete in %d ms. Longest duration %d ms\n", (unsigned int)v6);
}

/*
==============
Sys_TurnOffEarlySysErrorHandlingXB3
==============
*/
void Sys_TurnOffEarlySysErrorHandlingXB3(void)
{
  s_earlySysErrorHandlingAtBoot = 0;
}

/*
==============
Sys_UnhandledExceptionFilter
==============
*/
HMODULE Sys_UnhandledExceptionFilter(_EXCEPTION_POINTERS *ExceptionInfo)
{
  HMODULE result; 
  void (__fastcall *v3)(_QWORD, _QWORD, _QWORD, _QWORD, _QWORD, _QWORD, _QWORD); 
  struct tm *v4; 
  int tm_min; 
  int v6; 
  int tm_hour; 
  int tm_mday; 
  int tm_mon; 
  const char *DevHddPath; 
  HANDLE FileA; 
  DWORD CurrentProcessId; 
  HANDLE CurrentProcess; 
  DWORD CurrentThreadId; 
  _EXCEPTION_POINTERS *v15; 
  int v16; 
  __time64_t Time[2]; 
  char _Buffer[272]; 

  SetUnhandledExceptionFilter(NULL);
  Com_LogException(ExceptionInfo);
  result = LoadLibraryW(L"toolhelpx.dll");
  if ( result )
  {
    result = (HMODULE)GetProcAddress(result, "MiniDumpWriteDump");
    v3 = (void (__fastcall *)(_QWORD, _QWORD, _QWORD, _QWORD, _QWORD, _QWORD, _QWORD))result;
    if ( result )
    {
      Time[0] = _time64(NULL);
      v4 = _localtime64(Time);
      tm_min = v4->tm_min;
      v6 = v4->tm_year + 1900;
      tm_hour = v4->tm_hour;
      tm_mday = v4->tm_mday;
      tm_mon = v4->tm_mon;
      DevHddPath = Sys_GetDevHddPath();
      j_sprintf_s(_Buffer, 0x105ui64, "%s\\crashdump%04d%02d%02d_%02d%02d.dmp", DevHddPath, v6, tm_mon, tm_mday, tm_hour, tm_min);
      FileA = CreateFileA(_Buffer, 0xC0000000, 0, NULL, 2u, 0x80u, NULL);
      if ( FileA != (HANDLE)-1i64 )
      {
        CurrentThreadId = GetCurrentThreadId();
        v15 = ExceptionInfo;
        v16 = 0;
        CurrentProcessId = GetCurrentProcessId();
        CurrentProcess = GetCurrentProcess();
        v3(CurrentProcess, CurrentProcessId, FileA, 536901i64, &CurrentThreadId, 0i64, 0i64);
        CloseHandle(FileA);
      }
      return 0i64;
    }
  }
  return result;
}

/*
==============
Sys_UsingOptionalDevFunctionalityCallback
==============
*/
void Sys_UsingOptionalDevFunctionalityCallback(HINSTANCE__ *const module, const _MODULEINFO *r_info)
{
  int v3; 
  const char **i; 
  char destBuf[272]; 

  if ( !Sys_ModuleInfo_GetFilename(module, destBuf, 260) )
    Com_PrintError(0, "Sys_ModuleInfo_GetFilename %d failed\n", module);
  Com_Printf(0, "Sys_UsingOptionalDevFunctionalityCallback: %s\n", destBuf);
  if ( !s_usingOptionalDevDLLs )
  {
    v3 = 0;
    for ( i = (const char **)XB3_OPTIONAL_DEV_DLL_NAMES; !I_EndsWithi(destBuf, *i); ++i )
    {
      if ( (unsigned int)++v3 >= 9 )
        return;
    }
    s_usingOptionalDevDLLs = 1;
  }
}

/*
==============
Sys_XB3OutputDebugString
==============
*/
void Sys_XB3OutputDebugString(const char *msg)
{
  const char *v1; 
  char i; 
  bool v3; 
  __int64 v4; 

  v1 = msg;
  if ( !msg && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\xb3\\xb3_main.cpp", 742, ASSERT_TYPE_ASSERT, "(msg)", (const char *)&queryFormat, "msg") )
    __debugbreak();
  if ( com_unattendedMode && com_unattendedMode->current.enabled )
  {
    if ( !v1 && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\xb3\\xb3_main.cpp", 703, ASSERT_TYPE_ASSERT, "(msg)", (const char *)&queryFormat, "msg") )
      __debugbreak();
    EnterCriticalSection(&s_xtfPrintCritSect);
    for ( i = *v1; i; ++v1 )
    {
      if ( i == 10 )
      {
        Sys_XB3XTF_PrintLine();
      }
      else if ( i == 9 || (unsigned __int8)(i - 32) <= 0x5Eu )
      {
        v3 = s_xtfBufferPos < 0xFFE;
        if ( s_xtfBufferPos == 4094 )
        {
          Sys_XB3XTF_PrintLine();
          v3 = s_xtfBufferPos < 0xFFE;
        }
        if ( !v3 && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\xb3\\xb3_main.cpp", 726, ASSERT_TYPE_ASSERT, "(s_xtfBufferPos < ( ( sizeof( *array_counter( s_xtfBuffer ) ) + 0 ) - 2 ))", (const char *)&queryFormat, "s_xtfBufferPos < ( ARRAY_COUNT( s_xtfBuffer ) - 2 )") )
          __debugbreak();
        v4 = s_xtfBufferPos++;
        s_xtfBuffer[v4] = i;
      }
      i = v1[1];
    }
    LeaveCriticalSection(&s_xtfPrintCritSect);
  }
  else
  {
    OutputDebugStringA(v1);
  }
}

/*
==============
Sys_XB3OutputDebugStringFlush
==============
*/
void Sys_XB3OutputDebugStringFlush(void)
{
  EnterCriticalSection(&s_xtfPrintCritSect);
  Sys_XB3XTF_PrintCurrentBufferInternal();
  LeaveCriticalSection(&s_xtfPrintCritSect);
}

/*
==============
Sys_XB3XTF_PrintCurrentBufferInternal
==============
*/
void Sys_XB3XTF_PrintCurrentBufferInternal(__int64 a1)
{
  if ( s_xtfBufferPos )
  {
    if ( s_xtfBufferPos >= 0x1000ui64 )
    {
      j___report_rangecheckfailure(a1);
      JUMPOUT(0x142892828i64);
    }
    s_xtfBuffer[s_xtfBufferPos] = 0;
    s_xtfBufferPos = 0;
    MultiByteToWideChar(0xFDE9u, 0, s_xtfBuffer, -1, s_xtfBufferWide, 4096);
    OutputDebugStringW(s_xtfBufferWide);
  }
}

/*
==============
Sys_XB3XTF_PrintLine
==============
*/
void Sys_XB3XTF_PrintLine()
{
  unsigned int v0; 
  __int64 v1; 
  __int64 v2; 

  v0 = s_xtfBufferPos;
  if ( s_xtfBufferPos >= 0xFFF )
  {
    if ( CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\xb3\\xb3_main.cpp", 690, ASSERT_TYPE_ASSERT, "(s_xtfBufferPos < ( ( sizeof( *array_counter( s_xtfBuffer ) ) + 0 ) - 1 ))", (const char *)&queryFormat, "s_xtfBufferPos < ( ARRAY_COUNT( s_xtfBuffer ) - 1 )") )
      __debugbreak();
    v0 = s_xtfBufferPos;
  }
  v1 = v0;
  v2 = v0 + 1;
  s_xtfBufferPos = v2;
  s_xtfBuffer[v1] = 10;
  if ( (unsigned int)v2 > 0x100 )
    Sys_XB3XTF_PrintCurrentBufferInternal(v2);
}

/*
==============
XB3DisableNUIReservation
==============
*/
void XB3DisableNUIReservation(void)
{
  Windows::ApplicationModel::Core::CoreApplication::DisableKinectGpuReservation::set(1);
}

/*
==============
XB3EnableNUIReservation
==============
*/
void XB3EnableNUIReservation(void)
{
  Windows::ApplicationModel::Core::CoreApplication::DisableKinectGpuReservation::set(0);
}

/*
==============
XB3InitLaunchData
==============
*/
unsigned __int8 XB3InitLaunchData()
{
  unsigned __int64 v0; 
  unsigned __int8 result; 

  if ( !s_crosslaunchPayload[0] )
    goto LABEL_9;
  v0 = -1i64;
  do
    ++v0;
  while ( s_crosslaunchPayload[v0] );
  if ( v0 > 0x7D0 && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\xb3\\xb3_main.cpp", 367, ASSERT_TYPE_ASSERT, "(argSize <= ( 2000 ))", (const char *)&queryFormat, "argSize <= MAX_ARGUMENT_LENGTH") )
    __debugbreak();
  result = DeserializeCrossTitleLaunchData(s_crosslaunchPayload, v0, &g_launchData);
  if ( !result )
  {
    Com_Printf(1, "Ignoring invalid crosslaunch payload: \"%s\"\n", s_crosslaunchPayload);
LABEL_9:
    result = (unsigned __int8)LaunchData::operator=(&g_launchData, &s_launchDataXB3);
  }
  if ( g_launchData.version != 12 )
  {
    memset_0(g_launchData.startupText, 0, 0x994ui64);
    g_launchData.version = 12;
    return (unsigned __int8)LaunchData::operator=(&s_launchDataXB3, &g_launchData);
  }
  return result;
}

/*
==============
XB3LaunchNewImage
==============
*/
void XB3LaunchNewImage(int mode)
{
  int v1; 

  if ( !g_applicationView )
  {
    if ( CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\xb3\\xb3_main.cpp", 430, ASSERT_TYPE_ASSERT, "(g_applicationView != nullptr)", (const char *)&queryFormat, "g_applicationView != nullptr") )
      __debugbreak();
    exit(-1);
  }
  v1 = g_applicationView->__abi_Restart(g_applicationView, mode);
  if ( v1 < 0 )
    __abi_WinRTraiseException(v1);
}

/*
==============
XB3SetCrossLaunchPayload
==============
*/
__int64 XB3SetCrossLaunchPayload(const char *pCrosslaunchPayload, const unsigned int dwCrosslaunchPayloadSize)
{
  if ( pCrosslaunchPayload && dwCrosslaunchPayloadSize <= 0x7D1 )
  {
    memcpy_0(s_crosslaunchPayload, pCrosslaunchPayload, dwCrosslaunchPayloadSize);
    return dwCrosslaunchPayloadSize;
  }
  else
  {
    if ( CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\xb3\\xb3_main.cpp", 322, ASSERT_TYPE_ASSERT, (const char *)&queryFormat.fmt + 3, "Bad crosslaunch data") )
      __debugbreak();
    return 0i64;
  }
}

/*
==============
XB3SetLaunchData
==============
*/
__int64 XB3SetLaunchData(const LaunchData *pLaunchData, const unsigned int dwLaunchDataSize)
{
  if ( pLaunchData && dwLaunchDataSize == 2456 )
  {
    LaunchData::operator=(&s_launchDataXB3, pLaunchData);
    return 2456i64;
  }
  else
  {
    if ( CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\xb3\\xb3_main.cpp", 336, ASSERT_TYPE_ASSERT, (const char *)&queryFormat.fmt + 3, "Bad launch data") )
      __debugbreak();
    return 0i64;
  }
}

/*
==============
XB3_StartMWR
==============
*/
void XB3_StartMWR(void)
{
  char ControllerFromClient; 
  int v1; 
  int v2; 
  HSTRING_HEADER hstringHeader; 
  HSTRING string; 

  ControllerFromClient = CL_Mgr_GetControllerFromClient(LOCAL_CLIENT_0);
  g_launchData.skipMovies = 1;
  g_launchData.activeController = ControllerFromClient | 8;
  LaunchData::operator=(&s_launchDataXB3, &g_launchData);
  if ( g_applicationView )
  {
    v1 = WindowsCreateStringReference_0(L"ms-xbl-0020E1B2:
    if ( v1 < 0 )
      __abi_WinRTraiseException(v1);
    v2 = g_applicationView->__abi_LaunchUriAsync(g_applicationView, (Platform::String *)string);
    if ( v2 < 0 )
      __abi_WinRTraiseException(v2);
  }
}

