/*
==============
DLogTDigest<20,8>::GetString<double>
==============
*/

unsigned __int64 __fastcall DLogTDigest<20,8>::GetString<double>(DLogTDigest<20,8> *this, const char *tableTitle, const char *rowTitle, const char *unitFormat, const int headerColWidth, const int dataColWidth, unsigned int *percentiles, int percentileCount, char *buffer, unsigned __int64 bufferSize)
{
  return ??$GetString@N@?$DLogTDigest@$0BE@$07@@QEAA_KPEBD00HHPEAIHPEAD_K@Z(this, tableTitle, rowTitle, unitFormat, headerColWidth, dataColWidth, percentiles, percentileCount, buffer, bufferSize);
}

/*
==============
DLogTDigest<16,8>::SerializeToProtobuf
==============
*/

int __fastcall DLogTDigest<16,8>::SerializeToProtobuf(DLogTDigest<16,8> *this, unsigned __int8 *outBuffer, unsigned __int64 bufferSize)
{
  return ?SerializeToProtobuf@?$DLogTDigest@$0BA@$07@@QEAAHPEAE_K@Z(this, outBuffer, bufferSize);
}

/*
==============
DLogTDigest<32,8>::DLogTDigest<32,8>
==============
*/

void __fastcall DLogTDigest<32,8>::DLogTDigest<32,8>(DLogTDigest<32,8> *this)
{
  ??0?$DLogTDigest@$0CA@$07@@QEAA@XZ(this);
}

/*
==============
DLogTDigest<32,8>::Reset
==============
*/

void __fastcall DLogTDigest<32,8>::Reset(DLogTDigest<32,8> *this)
{
  ?Reset@?$DLogTDigest@$0CA@$07@@QEAAXXZ(this);
}

/*
==============
DLogTDigest<16,8>::ProcessBufferedCentroids
==============
*/

void __fastcall DLogTDigest<16,8>::ProcessBufferedCentroids(DLogTDigest<16,8> *this)
{
  ?ProcessBufferedCentroids@?$DLogTDigest@$0BA@$07@@QEAAXXZ(this);
}

/*
==============
DLogTDigest<20,8>::Reset
==============
*/

void __fastcall DLogTDigest<20,8>::Reset(DLogTDigest<20,8> *this)
{
  ?Reset@?$DLogTDigest@$0BE@$07@@QEAAXXZ(this);
}

/*
==============
DLogTDigest<32,8>::ProcessBufferedCentroids
==============
*/

void __fastcall DLogTDigest<32,8>::ProcessBufferedCentroids(DLogTDigest<32,8> *this)
{
  ?ProcessBufferedCentroids@?$DLogTDigest@$0CA@$07@@QEAAXXZ(this);
}

/*
==============
DLogTDigest<20,8>::ProcessBufferedCentroids
==============
*/

void __fastcall DLogTDigest<20,8>::ProcessBufferedCentroids(DLogTDigest<20,8> *this)
{
  ?ProcessBufferedCentroids@?$DLogTDigest@$0BE@$07@@QEAAXXZ(this);
}

/*
==============
DLogTDigest<20,8>::EstimateQuantile
==============
*/

long double __fastcall DLogTDigest<20,8>::EstimateQuantile(DLogTDigest<20,8> *this, long double quantile)
{
  return ?EstimateQuantile@?$DLogTDigest@$0BE@$07@@QEAANN@Z(this, quantile);
}

/*
==============
DLogTDigest<20,8>::Add
==============
*/

void __fastcall DLogTDigest<20,8>::Add(DLogTDigest<20,8> *this, long double value, long double weight)
{
  ?Add@?$DLogTDigest@$0BE@$07@@QEAAXNN@Z(this, value, weight);
}

/*
==============
DLogTDigest<32,8>::Add
==============
*/

void __fastcall DLogTDigest<32,8>::Add(DLogTDigest<32,8> *this, long double value, long double weight)
{
  ?Add@?$DLogTDigest@$0CA@$07@@QEAAXNN@Z(this, value, weight);
}

/*
==============
DLogTDigest<100,8>::SerializeToProtobuf
==============
*/

int __fastcall DLogTDigest<100,8>::SerializeToProtobuf(DLogTDigest<100,8> *this, unsigned __int8 *outBuffer, unsigned __int64 bufferSize)
{
  return ?SerializeToProtobuf@?$DLogTDigest@$0GE@$07@@QEAAHPEAE_K@Z(this, outBuffer, bufferSize);
}

/*
==============
DLogTDigest<100,8>::Reset
==============
*/

void __fastcall DLogTDigest<100,8>::Reset(DLogTDigest<100,8> *this)
{
  ?Reset@?$DLogTDigest@$0GE@$07@@QEAAXXZ(this);
}

/*
==============
DLogTDigest<16,8>::Add
==============
*/

void __fastcall DLogTDigest<16,8>::Add(DLogTDigest<16,8> *this, long double value, long double weight)
{
  ?Add@?$DLogTDigest@$0BA@$07@@QEAAXNN@Z(this, value, weight);
}

/*
==============
DLogTDigest<100,8>::ProcessBufferedCentroids
==============
*/

void __fastcall DLogTDigest<100,8>::ProcessBufferedCentroids(DLogTDigest<100,8> *this)
{
  ?ProcessBufferedCentroids@?$DLogTDigest@$0GE@$07@@QEAAXXZ(this);
}

/*
==============
DLogTDigest<32,8>::SerializeToProtobuf
==============
*/

int __fastcall DLogTDigest<32,8>::SerializeToProtobuf(DLogTDigest<32,8> *this, unsigned __int8 *outBuffer, unsigned __int64 bufferSize)
{
  return ?SerializeToProtobuf@?$DLogTDigest@$0CA@$07@@QEAAHPEAE_K@Z(this, outBuffer, bufferSize);
}

/*
==============
DLogTDigest<16,8>::Reset
==============
*/

void __fastcall DLogTDigest<16,8>::Reset(DLogTDigest<16,8> *this)
{
  ?Reset@?$DLogTDigest@$0BA@$07@@QEAAXXZ(this);
}

/*
==============
DLogTDigestCentroid::DLogTDigestCentroid
==============
*/

void __fastcall DLogTDigestCentroid::DLogTDigestCentroid(DLogTDigestCentroid *this)
{
  ??0DLogTDigestCentroid@@QEAA@XZ(this);
}

/*
==============
DLogTDigest<20,8>::SerializeToProtobuf
==============
*/

int __fastcall DLogTDigest<20,8>::SerializeToProtobuf(DLogTDigest<20,8> *this, unsigned __int8 *outBuffer, unsigned __int64 bufferSize)
{
  return ?SerializeToProtobuf@?$DLogTDigest@$0BE@$07@@QEAAHPEAE_K@Z(this, outBuffer, bufferSize);
}

/*
==============
DLogTDigest<100,8>::Add
==============
*/

void __fastcall DLogTDigest<100,8>::Add(DLogTDigest<100,8> *this, long double value, long double weight)
{
  ?Add@?$DLogTDigest@$0GE@$07@@QEAAXNN@Z(this, value, weight);
}

/*
==============
DLogTDigest<20,8>::DLogTDigest<20,8>
==============
*/

void __fastcall DLogTDigest<20,8>::DLogTDigest<20,8>(DLogTDigest<20,8> *this)
{
  ??0?$DLogTDigest@$0BE@$07@@QEAA@XZ(this);
}

/*
==============
DLogTDigest<20,8>::Add
==============
*/

void __fastcall DLogTDigest<20,8>::Add(DLogTDigest<20,8> *this, double value, double weight)
{
  int m_unprocessedCentroidBufferIndex; 

  m_unprocessedCentroidBufferIndex = this->m_unprocessedCentroidBufferIndex;
  _RBX = this;
  __asm
  {
    vmovaps [rsp+48h+var_18], xmm6
    vmovaps [rsp+48h+var_28], xmm7
    vmovaps xmm7, xmm2
    vmovaps xmm6, xmm1
  }
  if ( (unsigned int)m_unprocessedCentroidBufferIndex < 0x8C )
    goto LABEL_4;
  if ( !this->m_disableAutoMerge )
  {
    DLogTDigest<20,8>::ProcessBufferedCentroids(this);
    m_unprocessedCentroidBufferIndex = _RBX->m_unprocessedCentroidBufferIndex;
LABEL_4:
    __asm
    {
      vmovsd  xmm1, qword ptr [rbx]
      vcmpltsd xmm0, xmm6, xmm1
      vblendvpd xmm1, xmm1, xmm6, xmm0
      vmovsd  qword ptr [rbx], xmm1
      vmovsd  xmm2, qword ptr [rbx+8]
    }
    _RAX = 2 * (m_unprocessedCentroidBufferIndex + 23i64);
    __asm
    {
      vcmpltsd xmm0, xmm2, xmm6
      vblendvpd xmm1, xmm2, xmm6, xmm0
      vmovsd  qword ptr [rbx+8], xmm1
      vmovsd  qword ptr [rbx+rax*8], xmm6
      vmovsd  qword ptr [rbx+rax*8+8], xmm7
      vaddsd  xmm0, xmm7, qword ptr [rbx+20h]
    }
    ++_RBX->m_unprocessedCentroidBufferIndex;
    __asm
    {
      vmovsd  qword ptr [rbx+20h], xmm0
      vmovaps xmm6, [rsp+48h+var_18]
      vmovaps xmm7, [rsp+48h+var_28]
    }
    return;
  }
  __asm
  {
    vmovaps xmm6, [rsp+48h+var_18]
    vmovaps xmm7, [rsp+48h+var_28]
  }
  DLog_PrintError("Auto merge disabled - centroid buffer overflow\n");
}

/*
==============
DLogTDigest<20,8>::ProcessBufferedCentroids
==============
*/
void DLogTDigest<20,8>::ProcessBufferedCentroids(DLogTDigest<20,8> *this)
{
  __int64 m_unprocessedCentroidBufferIndex; 
  DLogTDigestCentroid *m_processedCentroids; 
  DLogTDigestCentroid *v15; 
  int v17; 
  int v20; 
  bool v30; 
  bool v44; 
  int v53; 
  void *retaddr; 
  DLogTDigestCentroid *v80; 

  _R11 = &retaddr;
  m_unprocessedCentroidBufferIndex = this->m_unprocessedCentroidBufferIndex;
  _RSI = this;
  if ( (_DWORD)m_unprocessedCentroidBufferIndex )
  {
    m_processedCentroids = this->m_processedCentroids;
    __asm
    {
      vmovaps xmmword ptr [r11-18h], xmm6
      vmovaps xmmword ptr [r11-28h], xmm7
      vmovaps xmmword ptr [r11-58h], xmm10
    }
    v15 = &this->m_unprocessedCentroidBuffer[m_unprocessedCentroidBufferIndex];
    __asm { vmovaps [rsp+0D8h+var_98], xmm14 }
    std::_Ptr_copy_cat<DLogTDigestCentroid,DLogTDigestCentroid>(&v80, &v80);
    memmove_0(v15, m_processedCentroids, (size_t)_RSI + 16 * (_RSI->m_processedCentroidsIndex + 3i64) - (_QWORD)m_processedCentroids);
    _RBX = _RSI->m_unprocessedCentroidBuffer;
    std::_Sort_unchecked<DLogTDigestCentroid *,std::less<void>>(_RSI->m_unprocessedCentroidBuffer, &_RSI->m_unprocessedCentroidBuffer[_RSI->m_processedCentroidsIndex + (__int64)_RSI->m_unprocessedCentroidBufferIndex], (16 * (_RSI->m_processedCentroidsIndex + (__int64)_RSI->m_unprocessedCentroidBufferIndex + 23) - 368) >> 4, (std::less<void>)v80);
    v17 = 1;
    _RSI->m_unprocessedCentroidBufferIndex += _RSI->m_processedCentroidsIndex;
    __asm
    {
      vmovsd  xmm0, qword ptr [rsi+18h]
      vaddsd  xmm1, xmm0, qword ptr [rsi+20h]
    }
    v20 = _RSI->m_unprocessedCentroidBufferIndex;
    __asm
    {
      vmulsd  xmm2, xmm1, cs:__real@3f747ae147ae147c
      vmovsd  qword ptr [rsi+18h], xmm1
    }
    _RSI->m_unprocessedWeightTotal = 0.0;
    --v20;
    _RSI->m_processedCentroidsIndex = 0;
    __asm
    {
      vmovsd  xmm1, qword ptr [rbx+8]
      vmovsd  xmm3, qword ptr [rbx]
      vmovaps xmm10, xmm1
      vxorpd  xmm14, xmm14, xmm14
      vxorpd  xmm4, xmm4, xmm4
      vxorpd  xmm5, xmm5, xmm5
    }
    v30 = (unsigned int)v20 <= 1;
    if ( v20 >= 1 )
    {
      __asm { vmovaps [rsp+0D8h+var_38], xmm8 }
      _RBX = &_RSI->m_unprocessedCentroidBuffer[1];
      __asm
      {
        vmovaps [rsp+0D8h+var_48], xmm9
        vmovaps [rsp+0D8h+var_68], xmm11
        vmovsd  xmm11, cs:__real@3ff0000000000000
        vmovaps [rsp+0D8h+var_78], xmm12
        vmovsd  xmm12, cs:__real@4000000000000000
        vmovaps [rsp+0D8h+var_88], xmm13
        vmovaps [rsp+0D8h+var_A8], xmm15
        vmovsd  xmm15, cs:__real@3fa999999999999a
        vmovaps xmm13, xmm12
      }
      do
      {
        __asm
        {
          vmovsd  xmm8, qword ptr [rbx+8]
          vmovsd  xmm9, qword ptr [rbx]
          vaddsd  xmm10, xmm10, xmm8
          vcomisd xmm10, xmm2
        }
        if ( v30 )
        {
          __asm
          {
            vmulsd  xmm0, xmm8, xmm9
            vaddsd  xmm4, xmm4, xmm0
            vaddsd  xmm5, xmm5, xmm8
          }
        }
        else
        {
          __asm
          {
            vmulsd  xmm0, xmm1, xmm3
            vaddsd  xmm0, xmm0, xmm4
            vaddsd  xmm7, xmm1, xmm5
            vdivsd  xmm6, xmm0, xmm7
          }
          DLog_Assert(_RSI->m_processedCentroidsIndex < 0x14u, "m_processedCentroidsIndex < ARRAY_COUNT( m_processedCentroids )", "c:\\workspace\\iw8\\code_source\\src\\dlog\\dlog_tdigest.h", "DLogTDigest<20,8>::ProcessBufferedCentroids", 280);
          _RAX = _RSI->m_processedCentroidsIndex + 3i64;
          v44 = __CFADD__(_RAX, _RAX);
          _RAX *= 2i64;
          __asm
          {
            vmovaps xmm0, xmm13
            vmulsd  xmm1, xmm0, xmm15
            vmovaps xmm4, xmm14
            vmovsd  qword ptr [rsi+rax*8], xmm6
            vmovsd  qword ptr [rsi+rax*8+8], xmm7
          }
          ++_RSI->m_processedCentroidsIndex;
          __asm
          {
            vcomisd xmm1, cs:__real@3fe0000000000000
            vmovaps xmm5, xmm14
            vaddsd  xmm13, xmm13, xmm11
          }
          if ( v44 )
          {
            __asm
            {
              vmulsd  xmm0, xmm1, xmm12
              vmulsd  xmm3, xmm0, xmm1
            }
          }
          else
          {
            __asm
            {
              vsubsd  xmm1, xmm11, xmm1
              vmulsd  xmm0, xmm1, xmm12
              vmulsd  xmm2, xmm0, xmm1
              vsubsd  xmm3, xmm11, xmm2
            }
          }
          __asm
          {
            vmulsd  xmm2, xmm3, qword ptr [rsi+18h]
            vmovaps xmm3, xmm9
            vmovaps xmm1, xmm8
          }
        }
        ++v17;
        v53 = _RSI->m_unprocessedCentroidBufferIndex - 1;
        ++_RBX;
        v30 = v17 <= (unsigned int)v53;
      }
      while ( v17 <= v53 );
      __asm
      {
        vmovaps xmm15, [rsp+0D8h+var_A8]
        vmovaps xmm13, [rsp+0D8h+var_88]
        vmovaps xmm12, [rsp+0D8h+var_78]
        vmovaps xmm11, [rsp+0D8h+var_68]
        vmovaps xmm9, [rsp+0D8h+var_48]
        vmovaps xmm8, [rsp+0D8h+var_38]
      }
    }
    __asm
    {
      vmovaps xmm10, [rsp+0D8h+var_58]
      vcomisd xmm1, xmm14
      vmovaps xmm14, [rsp+0D8h+var_98]
    }
    if ( !v30 )
    {
      __asm
      {
        vmulsd  xmm0, xmm1, xmm3
        vaddsd  xmm0, xmm0, xmm4
        vaddsd  xmm7, xmm1, xmm5
        vdivsd  xmm6, xmm0, xmm7
      }
      DLog_Assert(_RSI->m_processedCentroidsIndex < 0x14u, "m_processedCentroidsIndex < ARRAY_COUNT( m_processedCentroids )", "c:\\workspace\\iw8\\code_source\\src\\dlog\\dlog_tdigest.h", "DLogTDigest<20,8>::ProcessBufferedCentroids", 299);
      _RAX = 2 * (_RSI->m_processedCentroidsIndex + 3i64);
      __asm
      {
        vmovsd  qword ptr [rsi+rax*8], xmm6
        vmovsd  qword ptr [rsi+rax*8+8], xmm7
      }
      ++_RSI->m_processedCentroidsIndex;
    }
    __asm
    {
      vmovaps xmm7, [rsp+0D8h+var_28]
      vmovaps xmm6, [rsp+0D8h+var_18]
    }
    _RSI->m_unprocessedCentroidBufferIndex = 0;
  }
}

/*
==============
DLogTDigest<20,8>::Reset
==============
*/
void DLogTDigest<20,8>::Reset(DLogTDigest<20,8> *this)
{
  this->m_min = 1.797693134862316e308;
  this->m_max = 2.225073858507201e-308;
  this->m_processedWeightTotal = 0.0;
  this->m_unprocessedWeightTotal = 0.0;
  *(_QWORD *)&this->m_unprocessedCentroidBufferIndex = 0i64;
  memset_0(this->m_processedCentroids, 0, 0xB40ui64);
}

/*
==============
DLogTDigest<20,8>::SerializeToProtobuf
==============
*/
unsigned __int64 DLogTDigest<20,8>::SerializeToProtobuf(DLogTDigest<20,8> *this, unsigned __int8 *outBuffer, unsigned __int64 bufferSize)
{
  char v8; 
  int v9; 
  int v10; 
  ProtobufSerializer v18; 

  _RSI = this;
  DLog_Assert(bufferSize >= 0xBE, "GetSerializedByteSize() <= bufferSize", "c:\\workspace\\iw8\\code_source\\src\\dlog\\dlog_tdigest.h", "DLogTDigest<20,8>::SerializeToProtobuf", 398);
  DLogTDigest<20,8>::ProcessBufferedCentroids(_RSI);
  ProtobufSerializer::ProtobufSerializer(&v18, outBuffer, bufferSize);
  if ( !ProtobufSerializer::UInt64(&v18, 1ui64, 1ui64) )
    goto LABEL_6;
  __asm { vmovsd  xmm2, qword ptr [rsi]; value }
  if ( !ProtobufSerializer::Float64(&v18, 2ui64, *(long double *)&_XMM2) )
    goto LABEL_6;
  __asm { vmovsd  xmm2, qword ptr [rsi+8]; value }
  if ( !ProtobufSerializer::Float64(&v18, 3ui64, *(long double *)&_XMM2) )
    goto LABEL_6;
  if ( ProtobufSerializer::Int32(&v18, 4ui64, _RSI->m_processedCentroidsIndex + 1) )
    v8 = 1;
  else
LABEL_6:
    v8 = 0;
  ProtobufSerializer::BeginPacked(&v18, 5ui64);
  v9 = 0;
  v10 = 0;
  if ( _RSI->m_processedCentroidsIndex > 0 )
  {
    _R14 = &_RSI->m_processedCentroids[0].m_weight;
    do
    {
      if ( !v8 )
        goto LABEL_12;
      __asm
      {
        vmovsd  xmm2, qword ptr [r14]
        vcvtpd2ps xmm2, xmm2; value
      }
      if ( ProtobufSerializer::Float32(&v18, 5ui64, *(float *)&_XMM2) )
        v8 = 1;
      else
LABEL_12:
        v8 = 0;
      ++v10;
      _R14 += 2;
    }
    while ( v10 < _RSI->m_processedCentroidsIndex );
  }
  ProtobufSerializer::EndPacked(&v18);
  ProtobufSerializer::BeginPacked(&v18, 6ui64);
  if ( _RSI->m_processedCentroidsIndex > 0 )
  {
    _RBP = _RSI->m_processedCentroids;
    do
    {
      if ( !v8 )
        goto LABEL_19;
      __asm
      {
        vmovsd  xmm2, qword ptr [rbp+0]
        vcvtpd2ps xmm2, xmm2; value
      }
      if ( ProtobufSerializer::Float32(&v18, 6ui64, *(float *)&_XMM2) )
        v8 = 1;
      else
LABEL_19:
        v8 = 0;
      ++v9;
      ++_RBP;
    }
    while ( v9 < _RSI->m_processedCentroidsIndex );
  }
  ProtobufSerializer::EndPacked(&v18);
  return ProtobufSerializer::Size(&v18);
}

/*
==============
DLogTDigest<20,8>::GetString<double>
==============
*/
unsigned __int64 DLogTDigest<20,8>::GetString<double>(DLogTDigest<20,8> *this, const char *tableTitle, const char *rowTitle, const char *unitFormat, const int headerColWidth, const int dataColWidth, unsigned int *percentiles, int percentileCount, char *buffer, unsigned __int64 bufferSize)
{
  unsigned int *v13; 
  int v15; 
  unsigned __int64 v16; 
  unsigned __int64 v17; 
  unsigned __int64 v18; 
  int v19; 
  unsigned int *v20; 
  __int64 v21; 
  char *v22; 
  unsigned __int64 v23; 
  unsigned __int64 v24; 
  unsigned __int64 v26; 
  char *v28; 
  unsigned __int64 v29; 
  char *v35; 
  char *v39; 
  unsigned __int64 v40; 
  char v45[64]; 
  char dest[64]; 

  v13 = percentiles;
  _RBP = this;
  v15 = 0;
  v16 = 0i64;
  DLog_sprintf<64>((char (*)[64])dest, "%%-%us", (unsigned int)headerColWidth);
  DLog_sprintf<64>((char (*)[64])v45, "%%-%us", (unsigned int)dataColWidth);
  if ( tableTitle )
  {
    v17 = DLog_sprintf(buffer, bufferSize, dest, tableTitle);
    v18 = DLog_sprintf(&buffer[v17], bufferSize - v17, v45, "min") + v17;
    v19 = 0;
    if ( percentileCount > 0 )
    {
      v20 = percentiles;
      do
      {
        v21 = *v20;
        if ( !(_DWORD)v21 )
          break;
        v22 = j_va("%u%%", v21);
        v18 += DLog_sprintf(&buffer[v18], bufferSize - v18, v45, v22);
        ++v19;
        ++v20;
      }
      while ( v19 < percentileCount );
    }
    v23 = DLog_sprintf(&buffer[v18], bufferSize - v18, v45, "max") + v18;
    _RBP = this;
    v16 = DLog_sprintf(&buffer[v23], bufferSize - v23, "\n") + v23;
  }
  v24 = DLog_sprintf(&buffer[v16], bufferSize - v16, dest, rowTitle);
  __asm { vmovsd  xmm1, qword ptr [rbp+0] }
  v26 = v24 + v16;
  __asm { vmovq   rdx, xmm1 }
  v28 = j_va(unitFormat, _RDX);
  v29 = DLog_sprintf(&buffer[v26], bufferSize - v26, v45, v28) + v26;
  if ( percentileCount > 0 )
  {
    __asm
    {
      vmovaps [rsp+128h+var_58], xmm6
      vmovsd  xmm6, cs:__real@3f847ae147ae147b
    }
    do
    {
      if ( !*v13 )
        break;
      __asm
      {
        vxorps  xmm0, xmm0, xmm0
        vcvtsi2sd xmm0, xmm0, rax
        vmulsd  xmm1, xmm0, xmm6; quantile
      }
      *(double *)&_XMM0 = DLogTDigest<20,8>::EstimateQuantile(_RBP, *(long double *)&_XMM1);
      __asm
      {
        vmovaps xmm1, xmm0
        vmovq   rdx, xmm1
      }
      v35 = j_va(unitFormat, _RDX);
      v29 += DLog_sprintf(&buffer[v29], bufferSize - v29, v45, v35);
      ++v15;
      ++v13;
    }
    while ( v15 < percentileCount );
    __asm { vmovaps xmm6, [rsp+128h+var_58] }
  }
  __asm
  {
    vmovsd  xmm1, qword ptr [rbp+8]
    vmovq   rdx, xmm1
  }
  v39 = j_va(unitFormat, _RDX);
  v40 = DLog_sprintf(&buffer[v29], bufferSize - v29, v45, v39) + v29;
  return v40 + DLog_sprintf(&buffer[v40], bufferSize - v40, "\n");
}

/*
==============
DLogTDigest<20,8>::EstimateQuantile
==============
*/

long double __fastcall DLogTDigest<20,8>::EstimateQuantile(DLogTDigest<20,8> *this, double quantile)
{
  __asm { vmovaps [rsp+68h+var_18], xmm6 }
  _RBX = this;
  __asm { vmovaps xmm6, xmm1 }
  DLogTDigest<20,8>::ProcessBufferedCentroids(this);
  if ( _RBX->m_processedCentroidsIndex )
  {
    __asm
    {
      vmovsd  xmm5, cs:__real@3fe0000000000000
      vcomisd xmm6, xmm5
      vmovsd  xmm1, qword ptr [rbx+18h]
      vmulsd  xmm3, xmm1, xmm6
      vxorpd  xmm4, xmm4, xmm4
      vcomisd xmm6, cs:__real@3ff0000000000000
      vmovsd  xmm0, qword ptr [rbx+8]
      vmovaps xmm6, [rsp+68h+var_18]
    }
  }
  else
  {
    __asm
    {
      vxorpd  xmm0, xmm0, xmm0
      vmovaps xmm6, [rsp+68h+var_18]
    }
  }
  return *(double *)&_XMM0;
}

/*
==============
DLogTDigest<20,8>::DLogTDigest<20,8>
==============
*/
void DLogTDigest<20,8>::DLogTDigest<20,8>(DLogTDigest<20,8> *this)
{
  DLogTDigestCentroid *m_processedCentroids; 
  __int64 v3; 
  DLogTDigestCentroid *m_unprocessedCentroidBuffer; 
  __int64 v5; 

  this->m_serializedHeaderByteSize = 22;
  this->m_min = 1.797693134862316e308;
  m_processedCentroids = this->m_processedCentroids;
  this->m_disableAutoMerge = 0;
  this->m_max = 2.225073858507201e-308;
  this->m_processedWeightTotal = 0.0;
  this->m_unprocessedWeightTotal = 0.0;
  *(_QWORD *)&this->m_unprocessedCentroidBufferIndex = 0i64;
  v3 = 20i64;
  do
  {
    DLogTDigestCentroid::DLogTDigestCentroid(m_processedCentroids++);
    --v3;
  }
  while ( v3 );
  m_unprocessedCentroidBuffer = this->m_unprocessedCentroidBuffer;
  v5 = 160i64;
  do
  {
    DLogTDigestCentroid::DLogTDigestCentroid(m_unprocessedCentroidBuffer++);
    --v5;
  }
  while ( v5 );
}

/*
==============
DLogTDigest<32,8>::DLogTDigest<32,8>
==============
*/
void DLogTDigest<32,8>::DLogTDigest<32,8>(DLogTDigest<32,8> *this)
{
  DLogTDigestCentroid *m_processedCentroids; 
  __int64 v3; 
  DLogTDigestCentroid *m_unprocessedCentroidBuffer; 
  __int64 v5; 

  this->m_serializedHeaderByteSize = 22;
  this->m_min = 1.797693134862316e308;
  m_processedCentroids = this->m_processedCentroids;
  this->m_disableAutoMerge = 0;
  this->m_max = 2.225073858507201e-308;
  this->m_processedWeightTotal = 0.0;
  this->m_unprocessedWeightTotal = 0.0;
  *(_QWORD *)&this->m_unprocessedCentroidBufferIndex = 0i64;
  v3 = 32i64;
  do
  {
    DLogTDigestCentroid::DLogTDigestCentroid(m_processedCentroids++);
    --v3;
  }
  while ( v3 );
  m_unprocessedCentroidBuffer = this->m_unprocessedCentroidBuffer;
  v5 = 256i64;
  do
  {
    DLogTDigestCentroid::DLogTDigestCentroid(m_unprocessedCentroidBuffer++);
    --v5;
  }
  while ( v5 );
}

/*
==============
DLogTDigestCentroid::DLogTDigestCentroid
==============
*/
void DLogTDigestCentroid::DLogTDigestCentroid(DLogTDigestCentroid *this)
{
  this->m_mean = 0.0;
  this->m_weight = 0.0;
}

/*
==============
DLogTDigest<16,8>::Add
==============
*/

void __fastcall DLogTDigest<16,8>::Add(DLogTDigest<16,8> *this, double value, double weight)
{
  int m_unprocessedCentroidBufferIndex; 

  m_unprocessedCentroidBufferIndex = this->m_unprocessedCentroidBufferIndex;
  _RBX = this;
  __asm
  {
    vmovaps [rsp+48h+var_18], xmm6
    vmovaps [rsp+48h+var_28], xmm7
    vmovaps xmm7, xmm2
    vmovaps xmm6, xmm1
  }
  if ( (unsigned int)m_unprocessedCentroidBufferIndex < 0x70 )
    goto LABEL_4;
  if ( !this->m_disableAutoMerge )
  {
    DLogTDigest<16,8>::ProcessBufferedCentroids(this);
    m_unprocessedCentroidBufferIndex = _RBX->m_unprocessedCentroidBufferIndex;
LABEL_4:
    __asm
    {
      vmovsd  xmm1, qword ptr [rbx]
      vcmpltsd xmm0, xmm6, xmm1
      vblendvpd xmm1, xmm1, xmm6, xmm0
      vmovsd  qword ptr [rbx], xmm1
      vmovsd  xmm2, qword ptr [rbx+8]
    }
    _RAX = 2 * (m_unprocessedCentroidBufferIndex + 19i64);
    __asm
    {
      vcmpltsd xmm0, xmm2, xmm6
      vblendvpd xmm1, xmm2, xmm6, xmm0
      vmovsd  qword ptr [rbx+8], xmm1
      vmovsd  qword ptr [rbx+rax*8], xmm6
      vmovsd  qword ptr [rbx+rax*8+8], xmm7
      vaddsd  xmm0, xmm7, qword ptr [rbx+20h]
    }
    ++_RBX->m_unprocessedCentroidBufferIndex;
    __asm
    {
      vmovsd  qword ptr [rbx+20h], xmm0
      vmovaps xmm6, [rsp+48h+var_18]
      vmovaps xmm7, [rsp+48h+var_28]
    }
    return;
  }
  __asm
  {
    vmovaps xmm6, [rsp+48h+var_18]
    vmovaps xmm7, [rsp+48h+var_28]
  }
  DLog_PrintError("Auto merge disabled - centroid buffer overflow\n");
}

/*
==============
DLogTDigest<32,8>::Add
==============
*/

void __fastcall DLogTDigest<32,8>::Add(DLogTDigest<32,8> *this, double value, double weight)
{
  int m_unprocessedCentroidBufferIndex; 

  m_unprocessedCentroidBufferIndex = this->m_unprocessedCentroidBufferIndex;
  _RBX = this;
  __asm
  {
    vmovaps [rsp+48h+var_18], xmm6
    vmovaps [rsp+48h+var_28], xmm7
    vmovaps xmm7, xmm2
    vmovaps xmm6, xmm1
  }
  if ( (unsigned int)m_unprocessedCentroidBufferIndex < 0xE0 )
    goto LABEL_4;
  if ( !this->m_disableAutoMerge )
  {
    DLogTDigest<32,8>::ProcessBufferedCentroids(this);
    m_unprocessedCentroidBufferIndex = _RBX->m_unprocessedCentroidBufferIndex;
LABEL_4:
    __asm
    {
      vmovsd  xmm1, qword ptr [rbx]
      vcmpltsd xmm0, xmm6, xmm1
      vblendvpd xmm1, xmm1, xmm6, xmm0
      vmovsd  qword ptr [rbx], xmm1
      vmovsd  xmm2, qword ptr [rbx+8]
    }
    _RAX = 2 * (m_unprocessedCentroidBufferIndex + 35i64);
    __asm
    {
      vcmpltsd xmm0, xmm2, xmm6
      vblendvpd xmm1, xmm2, xmm6, xmm0
      vmovsd  qword ptr [rbx+8], xmm1
      vmovsd  qword ptr [rbx+rax*8], xmm6
      vmovsd  qword ptr [rbx+rax*8+8], xmm7
      vaddsd  xmm0, xmm7, qword ptr [rbx+20h]
    }
    ++_RBX->m_unprocessedCentroidBufferIndex;
    __asm
    {
      vmovsd  qword ptr [rbx+20h], xmm0
      vmovaps xmm6, [rsp+48h+var_18]
      vmovaps xmm7, [rsp+48h+var_28]
    }
    return;
  }
  __asm
  {
    vmovaps xmm6, [rsp+48h+var_18]
    vmovaps xmm7, [rsp+48h+var_28]
  }
  DLog_PrintError("Auto merge disabled - centroid buffer overflow\n");
}

/*
==============
DLogTDigest<16,8>::ProcessBufferedCentroids
==============
*/
void DLogTDigest<16,8>::ProcessBufferedCentroids(DLogTDigest<16,8> *this)
{
  __int64 m_unprocessedCentroidBufferIndex; 
  DLogTDigestCentroid *m_processedCentroids; 
  DLogTDigestCentroid *v15; 
  int v17; 
  int v20; 
  bool v30; 
  bool v44; 
  int v53; 
  void *retaddr; 
  DLogTDigestCentroid *v80; 

  _R11 = &retaddr;
  m_unprocessedCentroidBufferIndex = this->m_unprocessedCentroidBufferIndex;
  _RSI = this;
  if ( (_DWORD)m_unprocessedCentroidBufferIndex )
  {
    m_processedCentroids = this->m_processedCentroids;
    __asm
    {
      vmovaps xmmword ptr [r11-18h], xmm6
      vmovaps xmmword ptr [r11-28h], xmm7
      vmovaps xmmword ptr [r11-58h], xmm10
    }
    v15 = &this->m_unprocessedCentroidBuffer[m_unprocessedCentroidBufferIndex];
    __asm { vmovaps [rsp+0D8h+var_98], xmm14 }
    std::_Ptr_copy_cat<DLogTDigestCentroid,DLogTDigestCentroid>(&v80, &v80);
    memmove_0(v15, m_processedCentroids, (size_t)_RSI + 16 * (_RSI->m_processedCentroidsIndex + 3i64) - (_QWORD)m_processedCentroids);
    _RBX = _RSI->m_unprocessedCentroidBuffer;
    std::_Sort_unchecked<DLogTDigestCentroid *,std::less<void>>(_RSI->m_unprocessedCentroidBuffer, &_RSI->m_unprocessedCentroidBuffer[_RSI->m_processedCentroidsIndex + (__int64)_RSI->m_unprocessedCentroidBufferIndex], (16 * (_RSI->m_processedCentroidsIndex + (__int64)_RSI->m_unprocessedCentroidBufferIndex + 19) - 304) >> 4, (std::less<void>)v80);
    v17 = 1;
    _RSI->m_unprocessedCentroidBufferIndex += _RSI->m_processedCentroidsIndex;
    __asm
    {
      vmovsd  xmm0, qword ptr [rsi+18h]
      vaddsd  xmm1, xmm0, qword ptr [rsi+20h]
    }
    v20 = _RSI->m_unprocessedCentroidBufferIndex;
    __asm
    {
      vmulsd  xmm2, xmm1, cs:__real@3f80000000000000
      vmovsd  qword ptr [rsi+18h], xmm1
    }
    _RSI->m_unprocessedWeightTotal = 0.0;
    --v20;
    _RSI->m_processedCentroidsIndex = 0;
    __asm
    {
      vmovsd  xmm1, qword ptr [rbx+8]
      vmovsd  xmm3, qword ptr [rbx]
      vmovaps xmm10, xmm1
      vxorpd  xmm14, xmm14, xmm14
      vxorpd  xmm4, xmm4, xmm4
      vxorpd  xmm5, xmm5, xmm5
    }
    v30 = (unsigned int)v20 <= 1;
    if ( v20 >= 1 )
    {
      __asm { vmovaps [rsp+0D8h+var_38], xmm8 }
      _RBX = &_RSI->m_unprocessedCentroidBuffer[1];
      __asm
      {
        vmovaps [rsp+0D8h+var_48], xmm9
        vmovaps [rsp+0D8h+var_68], xmm11
        vmovsd  xmm11, cs:__real@3ff0000000000000
        vmovaps [rsp+0D8h+var_78], xmm12
        vmovsd  xmm12, cs:__real@4000000000000000
        vmovaps [rsp+0D8h+var_88], xmm13
        vmovaps [rsp+0D8h+var_A8], xmm15
        vmovsd  xmm15, cs:__real@3fb0000000000000
        vmovaps xmm13, xmm12
      }
      do
      {
        __asm
        {
          vmovsd  xmm8, qword ptr [rbx+8]
          vmovsd  xmm9, qword ptr [rbx]
          vaddsd  xmm10, xmm10, xmm8
          vcomisd xmm10, xmm2
        }
        if ( v30 )
        {
          __asm
          {
            vmulsd  xmm0, xmm8, xmm9
            vaddsd  xmm4, xmm4, xmm0
            vaddsd  xmm5, xmm5, xmm8
          }
        }
        else
        {
          __asm
          {
            vmulsd  xmm0, xmm1, xmm3
            vaddsd  xmm0, xmm0, xmm4
            vaddsd  xmm7, xmm1, xmm5
            vdivsd  xmm6, xmm0, xmm7
          }
          DLog_Assert(_RSI->m_processedCentroidsIndex < 0x10u, "m_processedCentroidsIndex < ARRAY_COUNT( m_processedCentroids )", "c:\\workspace\\iw8\\code_source\\src\\dlog\\dlog_tdigest.h", "DLogTDigest<16,8>::ProcessBufferedCentroids", 280);
          _RAX = _RSI->m_processedCentroidsIndex + 3i64;
          v44 = __CFADD__(_RAX, _RAX);
          _RAX *= 2i64;
          __asm
          {
            vmovaps xmm0, xmm13
            vmulsd  xmm1, xmm0, xmm15
            vmovaps xmm4, xmm14
            vmovsd  qword ptr [rsi+rax*8], xmm6
            vmovsd  qword ptr [rsi+rax*8+8], xmm7
          }
          ++_RSI->m_processedCentroidsIndex;
          __asm
          {
            vcomisd xmm1, cs:__real@3fe0000000000000
            vmovaps xmm5, xmm14
            vaddsd  xmm13, xmm13, xmm11
          }
          if ( v44 )
          {
            __asm
            {
              vmulsd  xmm0, xmm1, xmm12
              vmulsd  xmm3, xmm0, xmm1
            }
          }
          else
          {
            __asm
            {
              vsubsd  xmm1, xmm11, xmm1
              vmulsd  xmm0, xmm1, xmm12
              vmulsd  xmm2, xmm0, xmm1
              vsubsd  xmm3, xmm11, xmm2
            }
          }
          __asm
          {
            vmulsd  xmm2, xmm3, qword ptr [rsi+18h]
            vmovaps xmm3, xmm9
            vmovaps xmm1, xmm8
          }
        }
        ++v17;
        v53 = _RSI->m_unprocessedCentroidBufferIndex - 1;
        ++_RBX;
        v30 = v17 <= (unsigned int)v53;
      }
      while ( v17 <= v53 );
      __asm
      {
        vmovaps xmm15, [rsp+0D8h+var_A8]
        vmovaps xmm13, [rsp+0D8h+var_88]
        vmovaps xmm12, [rsp+0D8h+var_78]
        vmovaps xmm11, [rsp+0D8h+var_68]
        vmovaps xmm9, [rsp+0D8h+var_48]
        vmovaps xmm8, [rsp+0D8h+var_38]
      }
    }
    __asm
    {
      vmovaps xmm10, [rsp+0D8h+var_58]
      vcomisd xmm1, xmm14
      vmovaps xmm14, [rsp+0D8h+var_98]
    }
    if ( !v30 )
    {
      __asm
      {
        vmulsd  xmm0, xmm1, xmm3
        vaddsd  xmm0, xmm0, xmm4
        vaddsd  xmm7, xmm1, xmm5
        vdivsd  xmm6, xmm0, xmm7
      }
      DLog_Assert(_RSI->m_processedCentroidsIndex < 0x10u, "m_processedCentroidsIndex < ARRAY_COUNT( m_processedCentroids )", "c:\\workspace\\iw8\\code_source\\src\\dlog\\dlog_tdigest.h", "DLogTDigest<16,8>::ProcessBufferedCentroids", 299);
      _RAX = 2 * (_RSI->m_processedCentroidsIndex + 3i64);
      __asm
      {
        vmovsd  qword ptr [rsi+rax*8], xmm6
        vmovsd  qword ptr [rsi+rax*8+8], xmm7
      }
      ++_RSI->m_processedCentroidsIndex;
    }
    __asm
    {
      vmovaps xmm7, [rsp+0D8h+var_28]
      vmovaps xmm6, [rsp+0D8h+var_18]
    }
    _RSI->m_unprocessedCentroidBufferIndex = 0;
  }
}

/*
==============
DLogTDigest<32,8>::ProcessBufferedCentroids
==============
*/
void DLogTDigest<32,8>::ProcessBufferedCentroids(DLogTDigest<32,8> *this)
{
  __int64 m_unprocessedCentroidBufferIndex; 
  DLogTDigestCentroid *m_processedCentroids; 
  DLogTDigestCentroid *v15; 
  int v17; 
  int v20; 
  bool v30; 
  bool v44; 
  int v53; 
  void *retaddr; 
  DLogTDigestCentroid *v80; 

  _R11 = &retaddr;
  m_unprocessedCentroidBufferIndex = this->m_unprocessedCentroidBufferIndex;
  _RSI = this;
  if ( (_DWORD)m_unprocessedCentroidBufferIndex )
  {
    m_processedCentroids = this->m_processedCentroids;
    __asm
    {
      vmovaps xmmword ptr [r11-18h], xmm6
      vmovaps xmmword ptr [r11-28h], xmm7
      vmovaps xmmword ptr [r11-58h], xmm10
    }
    v15 = &this->m_unprocessedCentroidBuffer[m_unprocessedCentroidBufferIndex];
    __asm { vmovaps [rsp+0D8h+var_98], xmm14 }
    std::_Ptr_copy_cat<DLogTDigestCentroid,DLogTDigestCentroid>(&v80, &v80);
    memmove_0(v15, m_processedCentroids, (size_t)_RSI + 16 * (_RSI->m_processedCentroidsIndex + 3i64) - (_QWORD)m_processedCentroids);
    _RBX = _RSI->m_unprocessedCentroidBuffer;
    std::_Sort_unchecked<DLogTDigestCentroid *,std::less<void>>(_RSI->m_unprocessedCentroidBuffer, &_RSI->m_unprocessedCentroidBuffer[_RSI->m_processedCentroidsIndex + (__int64)_RSI->m_unprocessedCentroidBufferIndex], (16 * (_RSI->m_processedCentroidsIndex + (__int64)_RSI->m_unprocessedCentroidBufferIndex + 35) - 560) >> 4, (std::less<void>)v80);
    v17 = 1;
    _RSI->m_unprocessedCentroidBufferIndex += _RSI->m_processedCentroidsIndex;
    __asm
    {
      vmovsd  xmm0, qword ptr [rsi+18h]
      vaddsd  xmm1, xmm0, qword ptr [rsi+20h]
    }
    v20 = _RSI->m_unprocessedCentroidBufferIndex;
    __asm
    {
      vmulsd  xmm2, xmm1, cs:__real@3f60000000000000
      vmovsd  qword ptr [rsi+18h], xmm1
    }
    _RSI->m_unprocessedWeightTotal = 0.0;
    --v20;
    _RSI->m_processedCentroidsIndex = 0;
    __asm
    {
      vmovsd  xmm1, qword ptr [rbx+8]
      vmovsd  xmm3, qword ptr [rbx]
      vmovaps xmm10, xmm1
      vxorpd  xmm14, xmm14, xmm14
      vxorpd  xmm4, xmm4, xmm4
      vxorpd  xmm5, xmm5, xmm5
    }
    v30 = (unsigned int)v20 <= 1;
    if ( v20 >= 1 )
    {
      __asm { vmovaps [rsp+0D8h+var_38], xmm8 }
      _RBX = &_RSI->m_unprocessedCentroidBuffer[1];
      __asm
      {
        vmovaps [rsp+0D8h+var_48], xmm9
        vmovaps [rsp+0D8h+var_68], xmm11
        vmovsd  xmm11, cs:__real@3ff0000000000000
        vmovaps [rsp+0D8h+var_78], xmm12
        vmovsd  xmm12, cs:__real@4000000000000000
        vmovaps [rsp+0D8h+var_88], xmm13
        vmovaps [rsp+0D8h+var_A8], xmm15
        vmovsd  xmm15, cs:__real@3fa0000000000000
        vmovaps xmm13, xmm12
      }
      do
      {
        __asm
        {
          vmovsd  xmm8, qword ptr [rbx+8]
          vmovsd  xmm9, qword ptr [rbx]
          vaddsd  xmm10, xmm10, xmm8
          vcomisd xmm10, xmm2
        }
        if ( v30 )
        {
          __asm
          {
            vmulsd  xmm0, xmm8, xmm9
            vaddsd  xmm4, xmm4, xmm0
            vaddsd  xmm5, xmm5, xmm8
          }
        }
        else
        {
          __asm
          {
            vmulsd  xmm0, xmm1, xmm3
            vaddsd  xmm0, xmm0, xmm4
            vaddsd  xmm7, xmm1, xmm5
            vdivsd  xmm6, xmm0, xmm7
          }
          DLog_Assert(_RSI->m_processedCentroidsIndex < 0x20u, "m_processedCentroidsIndex < ARRAY_COUNT( m_processedCentroids )", "c:\\workspace\\iw8\\code_source\\src\\dlog\\dlog_tdigest.h", "DLogTDigest<32,8>::ProcessBufferedCentroids", 280);
          _RAX = _RSI->m_processedCentroidsIndex + 3i64;
          v44 = __CFADD__(_RAX, _RAX);
          _RAX *= 2i64;
          __asm
          {
            vmovaps xmm0, xmm13
            vmulsd  xmm1, xmm0, xmm15
            vmovaps xmm4, xmm14
            vmovsd  qword ptr [rsi+rax*8], xmm6
            vmovsd  qword ptr [rsi+rax*8+8], xmm7
          }
          ++_RSI->m_processedCentroidsIndex;
          __asm
          {
            vcomisd xmm1, cs:__real@3fe0000000000000
            vmovaps xmm5, xmm14
            vaddsd  xmm13, xmm13, xmm11
          }
          if ( v44 )
          {
            __asm
            {
              vmulsd  xmm0, xmm1, xmm12
              vmulsd  xmm3, xmm0, xmm1
            }
          }
          else
          {
            __asm
            {
              vsubsd  xmm1, xmm11, xmm1
              vmulsd  xmm0, xmm1, xmm12
              vmulsd  xmm2, xmm0, xmm1
              vsubsd  xmm3, xmm11, xmm2
            }
          }
          __asm
          {
            vmulsd  xmm2, xmm3, qword ptr [rsi+18h]
            vmovaps xmm3, xmm9
            vmovaps xmm1, xmm8
          }
        }
        ++v17;
        v53 = _RSI->m_unprocessedCentroidBufferIndex - 1;
        ++_RBX;
        v30 = v17 <= (unsigned int)v53;
      }
      while ( v17 <= v53 );
      __asm
      {
        vmovaps xmm15, [rsp+0D8h+var_A8]
        vmovaps xmm13, [rsp+0D8h+var_88]
        vmovaps xmm12, [rsp+0D8h+var_78]
        vmovaps xmm11, [rsp+0D8h+var_68]
        vmovaps xmm9, [rsp+0D8h+var_48]
        vmovaps xmm8, [rsp+0D8h+var_38]
      }
    }
    __asm
    {
      vmovaps xmm10, [rsp+0D8h+var_58]
      vcomisd xmm1, xmm14
      vmovaps xmm14, [rsp+0D8h+var_98]
    }
    if ( !v30 )
    {
      __asm
      {
        vmulsd  xmm0, xmm1, xmm3
        vaddsd  xmm0, xmm0, xmm4
        vaddsd  xmm7, xmm1, xmm5
        vdivsd  xmm6, xmm0, xmm7
      }
      DLog_Assert(_RSI->m_processedCentroidsIndex < 0x20u, "m_processedCentroidsIndex < ARRAY_COUNT( m_processedCentroids )", "c:\\workspace\\iw8\\code_source\\src\\dlog\\dlog_tdigest.h", "DLogTDigest<32,8>::ProcessBufferedCentroids", 299);
      _RAX = 2 * (_RSI->m_processedCentroidsIndex + 3i64);
      __asm
      {
        vmovsd  qword ptr [rsi+rax*8], xmm6
        vmovsd  qword ptr [rsi+rax*8+8], xmm7
      }
      ++_RSI->m_processedCentroidsIndex;
    }
    __asm
    {
      vmovaps xmm7, [rsp+0D8h+var_28]
      vmovaps xmm6, [rsp+0D8h+var_18]
    }
    _RSI->m_unprocessedCentroidBufferIndex = 0;
  }
}

/*
==============
DLogTDigest<16,8>::Reset
==============
*/
void DLogTDigest<16,8>::Reset(DLogTDigest<16,8> *this)
{
  this->m_min = 1.797693134862316e308;
  this->m_max = 2.225073858507201e-308;
  this->m_processedWeightTotal = 0.0;
  this->m_unprocessedWeightTotal = 0.0;
  *(_QWORD *)&this->m_unprocessedCentroidBufferIndex = 0i64;
  memset_0(this->m_processedCentroids, 0, 0x900ui64);
}

/*
==============
DLogTDigest<16,8>::SerializeToProtobuf
==============
*/
unsigned __int64 DLogTDigest<16,8>::SerializeToProtobuf(DLogTDigest<16,8> *this, unsigned __int8 *outBuffer, unsigned __int64 bufferSize)
{
  char v8; 
  int v9; 
  int v10; 
  ProtobufSerializer v18; 

  _RSI = this;
  DLog_Assert(bufferSize >= 0x9E, "GetSerializedByteSize() <= bufferSize", "c:\\workspace\\iw8\\code_source\\src\\dlog\\dlog_tdigest.h", "DLogTDigest<16,8>::SerializeToProtobuf", 398);
  DLogTDigest<16,8>::ProcessBufferedCentroids(_RSI);
  ProtobufSerializer::ProtobufSerializer(&v18, outBuffer, bufferSize);
  if ( !ProtobufSerializer::UInt64(&v18, 1ui64, 1ui64) )
    goto LABEL_6;
  __asm { vmovsd  xmm2, qword ptr [rsi]; value }
  if ( !ProtobufSerializer::Float64(&v18, 2ui64, *(long double *)&_XMM2) )
    goto LABEL_6;
  __asm { vmovsd  xmm2, qword ptr [rsi+8]; value }
  if ( !ProtobufSerializer::Float64(&v18, 3ui64, *(long double *)&_XMM2) )
    goto LABEL_6;
  if ( ProtobufSerializer::Int32(&v18, 4ui64, _RSI->m_processedCentroidsIndex + 1) )
    v8 = 1;
  else
LABEL_6:
    v8 = 0;
  ProtobufSerializer::BeginPacked(&v18, 5ui64);
  v9 = 0;
  v10 = 0;
  if ( _RSI->m_processedCentroidsIndex > 0 )
  {
    _R14 = &_RSI->m_processedCentroids[0].m_weight;
    do
    {
      if ( !v8 )
        goto LABEL_12;
      __asm
      {
        vmovsd  xmm2, qword ptr [r14]
        vcvtpd2ps xmm2, xmm2; value
      }
      if ( ProtobufSerializer::Float32(&v18, 5ui64, *(float *)&_XMM2) )
        v8 = 1;
      else
LABEL_12:
        v8 = 0;
      ++v10;
      _R14 += 2;
    }
    while ( v10 < _RSI->m_processedCentroidsIndex );
  }
  ProtobufSerializer::EndPacked(&v18);
  ProtobufSerializer::BeginPacked(&v18, 6ui64);
  if ( _RSI->m_processedCentroidsIndex > 0 )
  {
    _RBP = _RSI->m_processedCentroids;
    do
    {
      if ( !v8 )
        goto LABEL_19;
      __asm
      {
        vmovsd  xmm2, qword ptr [rbp+0]
        vcvtpd2ps xmm2, xmm2; value
      }
      if ( ProtobufSerializer::Float32(&v18, 6ui64, *(float *)&_XMM2) )
        v8 = 1;
      else
LABEL_19:
        v8 = 0;
      ++v9;
      ++_RBP;
    }
    while ( v9 < _RSI->m_processedCentroidsIndex );
  }
  ProtobufSerializer::EndPacked(&v18);
  return ProtobufSerializer::Size(&v18);
}

/*
==============
DLogTDigest<32,8>::SerializeToProtobuf
==============
*/
unsigned __int64 DLogTDigest<32,8>::SerializeToProtobuf(DLogTDigest<32,8> *this, unsigned __int8 *outBuffer, unsigned __int64 bufferSize)
{
  char v8; 
  int v9; 
  int v10; 
  ProtobufSerializer v18; 

  _RSI = this;
  DLog_Assert(bufferSize >= 0x11E, "GetSerializedByteSize() <= bufferSize", "c:\\workspace\\iw8\\code_source\\src\\dlog\\dlog_tdigest.h", "DLogTDigest<32,8>::SerializeToProtobuf", 398);
  DLogTDigest<32,8>::ProcessBufferedCentroids(_RSI);
  ProtobufSerializer::ProtobufSerializer(&v18, outBuffer, bufferSize);
  if ( !ProtobufSerializer::UInt64(&v18, 1ui64, 1ui64) )
    goto LABEL_6;
  __asm { vmovsd  xmm2, qword ptr [rsi]; value }
  if ( !ProtobufSerializer::Float64(&v18, 2ui64, *(long double *)&_XMM2) )
    goto LABEL_6;
  __asm { vmovsd  xmm2, qword ptr [rsi+8]; value }
  if ( !ProtobufSerializer::Float64(&v18, 3ui64, *(long double *)&_XMM2) )
    goto LABEL_6;
  if ( ProtobufSerializer::Int32(&v18, 4ui64, _RSI->m_processedCentroidsIndex + 1) )
    v8 = 1;
  else
LABEL_6:
    v8 = 0;
  ProtobufSerializer::BeginPacked(&v18, 5ui64);
  v9 = 0;
  v10 = 0;
  if ( _RSI->m_processedCentroidsIndex > 0 )
  {
    _R14 = &_RSI->m_processedCentroids[0].m_weight;
    do
    {
      if ( !v8 )
        goto LABEL_12;
      __asm
      {
        vmovsd  xmm2, qword ptr [r14]
        vcvtpd2ps xmm2, xmm2; value
      }
      if ( ProtobufSerializer::Float32(&v18, 5ui64, *(float *)&_XMM2) )
        v8 = 1;
      else
LABEL_12:
        v8 = 0;
      ++v10;
      _R14 += 2;
    }
    while ( v10 < _RSI->m_processedCentroidsIndex );
  }
  ProtobufSerializer::EndPacked(&v18);
  ProtobufSerializer::BeginPacked(&v18, 6ui64);
  if ( _RSI->m_processedCentroidsIndex > 0 )
  {
    _RBP = _RSI->m_processedCentroids;
    do
    {
      if ( !v8 )
        goto LABEL_19;
      __asm
      {
        vmovsd  xmm2, qword ptr [rbp+0]
        vcvtpd2ps xmm2, xmm2; value
      }
      if ( ProtobufSerializer::Float32(&v18, 6ui64, *(float *)&_XMM2) )
        v8 = 1;
      else
LABEL_19:
        v8 = 0;
      ++v9;
      ++_RBP;
    }
    while ( v9 < _RSI->m_processedCentroidsIndex );
  }
  ProtobufSerializer::EndPacked(&v18);
  return ProtobufSerializer::Size(&v18);
}

/*
==============
DLogTDigest<100,8>::ProcessBufferedCentroids
==============
*/
void DLogTDigest<100,8>::ProcessBufferedCentroids(DLogTDigest<100,8> *this)
{
  __int64 m_unprocessedCentroidBufferIndex; 
  DLogTDigestCentroid *m_processedCentroids; 
  DLogTDigestCentroid *v15; 
  int v17; 
  int v20; 
  bool v30; 
  bool v44; 
  int v53; 
  void *retaddr; 
  DLogTDigestCentroid *v80; 

  _R11 = &retaddr;
  m_unprocessedCentroidBufferIndex = this->m_unprocessedCentroidBufferIndex;
  _RSI = this;
  if ( (_DWORD)m_unprocessedCentroidBufferIndex )
  {
    m_processedCentroids = this->m_processedCentroids;
    __asm
    {
      vmovaps xmmword ptr [r11-18h], xmm6
      vmovaps xmmword ptr [r11-28h], xmm7
      vmovaps xmmword ptr [r11-58h], xmm10
    }
    v15 = &this->m_unprocessedCentroidBuffer[m_unprocessedCentroidBufferIndex];
    __asm { vmovaps [rsp+0D8h+var_98], xmm14 }
    std::_Ptr_copy_cat<DLogTDigestCentroid,DLogTDigestCentroid>(&v80, &v80);
    memmove_0(v15, m_processedCentroids, (size_t)_RSI + 16 * (_RSI->m_processedCentroidsIndex + 3i64) - (_QWORD)m_processedCentroids);
    _RBX = _RSI->m_unprocessedCentroidBuffer;
    std::_Sort_unchecked<DLogTDigestCentroid *,std::less<void>>(_RSI->m_unprocessedCentroidBuffer, &_RSI->m_unprocessedCentroidBuffer[_RSI->m_processedCentroidsIndex + (__int64)_RSI->m_unprocessedCentroidBufferIndex], (16 * (_RSI->m_processedCentroidsIndex + (__int64)_RSI->m_unprocessedCentroidBufferIndex + 103) - 1648) >> 4, (std::less<void>)v80);
    v17 = 1;
    _RSI->m_unprocessedCentroidBufferIndex += _RSI->m_processedCentroidsIndex;
    __asm
    {
      vmovsd  xmm0, qword ptr [rsi+18h]
      vaddsd  xmm1, xmm0, qword ptr [rsi+20h]
    }
    v20 = _RSI->m_unprocessedCentroidBufferIndex;
    __asm
    {
      vmulsd  xmm2, xmm1, cs:__real@3f2a36e2eb1c432d
      vmovsd  qword ptr [rsi+18h], xmm1
    }
    _RSI->m_unprocessedWeightTotal = 0.0;
    --v20;
    _RSI->m_processedCentroidsIndex = 0;
    __asm
    {
      vmovsd  xmm1, qword ptr [rbx+8]
      vmovsd  xmm3, qword ptr [rbx]
      vmovaps xmm10, xmm1
      vxorpd  xmm14, xmm14, xmm14
      vxorpd  xmm4, xmm4, xmm4
      vxorpd  xmm5, xmm5, xmm5
    }
    v30 = (unsigned int)v20 <= 1;
    if ( v20 >= 1 )
    {
      __asm { vmovaps [rsp+0D8h+var_38], xmm8 }
      _RBX = &_RSI->m_unprocessedCentroidBuffer[1];
      __asm
      {
        vmovaps [rsp+0D8h+var_48], xmm9
        vmovaps [rsp+0D8h+var_68], xmm11
        vmovsd  xmm11, cs:__real@3ff0000000000000
        vmovaps [rsp+0D8h+var_78], xmm12
        vmovsd  xmm12, cs:__real@4000000000000000
        vmovaps [rsp+0D8h+var_88], xmm13
        vmovaps [rsp+0D8h+var_A8], xmm15
        vmovsd  xmm15, cs:__real@3f847ae147ae147b
        vmovaps xmm13, xmm12
      }
      do
      {
        __asm
        {
          vmovsd  xmm8, qword ptr [rbx+8]
          vmovsd  xmm9, qword ptr [rbx]
          vaddsd  xmm10, xmm10, xmm8
          vcomisd xmm10, xmm2
        }
        if ( v30 )
        {
          __asm
          {
            vmulsd  xmm0, xmm8, xmm9
            vaddsd  xmm4, xmm4, xmm0
            vaddsd  xmm5, xmm5, xmm8
          }
        }
        else
        {
          __asm
          {
            vmulsd  xmm0, xmm1, xmm3
            vaddsd  xmm0, xmm0, xmm4
            vaddsd  xmm7, xmm1, xmm5
            vdivsd  xmm6, xmm0, xmm7
          }
          DLog_Assert(_RSI->m_processedCentroidsIndex < 0x64u, "m_processedCentroidsIndex < ARRAY_COUNT( m_processedCentroids )", "c:\\workspace\\iw8\\code_source\\src\\dlog\\dlog_tdigest.h", "DLogTDigest<100,8>::ProcessBufferedCentroids", 280);
          _RAX = _RSI->m_processedCentroidsIndex + 3i64;
          v44 = __CFADD__(_RAX, _RAX);
          _RAX *= 2i64;
          __asm
          {
            vmovaps xmm0, xmm13
            vmulsd  xmm1, xmm0, xmm15
            vmovaps xmm4, xmm14
            vmovsd  qword ptr [rsi+rax*8], xmm6
            vmovsd  qword ptr [rsi+rax*8+8], xmm7
          }
          ++_RSI->m_processedCentroidsIndex;
          __asm
          {
            vcomisd xmm1, cs:__real@3fe0000000000000
            vmovaps xmm5, xmm14
            vaddsd  xmm13, xmm13, xmm11
          }
          if ( v44 )
          {
            __asm
            {
              vmulsd  xmm0, xmm1, xmm12
              vmulsd  xmm3, xmm0, xmm1
            }
          }
          else
          {
            __asm
            {
              vsubsd  xmm1, xmm11, xmm1
              vmulsd  xmm0, xmm1, xmm12
              vmulsd  xmm2, xmm0, xmm1
              vsubsd  xmm3, xmm11, xmm2
            }
          }
          __asm
          {
            vmulsd  xmm2, xmm3, qword ptr [rsi+18h]
            vmovaps xmm3, xmm9
            vmovaps xmm1, xmm8
          }
        }
        ++v17;
        v53 = _RSI->m_unprocessedCentroidBufferIndex - 1;
        ++_RBX;
        v30 = v17 <= (unsigned int)v53;
      }
      while ( v17 <= v53 );
      __asm
      {
        vmovaps xmm15, [rsp+0D8h+var_A8]
        vmovaps xmm13, [rsp+0D8h+var_88]
        vmovaps xmm12, [rsp+0D8h+var_78]
        vmovaps xmm11, [rsp+0D8h+var_68]
        vmovaps xmm9, [rsp+0D8h+var_48]
        vmovaps xmm8, [rsp+0D8h+var_38]
      }
    }
    __asm
    {
      vmovaps xmm10, [rsp+0D8h+var_58]
      vcomisd xmm1, xmm14
      vmovaps xmm14, [rsp+0D8h+var_98]
    }
    if ( !v30 )
    {
      __asm
      {
        vmulsd  xmm0, xmm1, xmm3
        vaddsd  xmm0, xmm0, xmm4
        vaddsd  xmm7, xmm1, xmm5
        vdivsd  xmm6, xmm0, xmm7
      }
      DLog_Assert(_RSI->m_processedCentroidsIndex < 0x64u, "m_processedCentroidsIndex < ARRAY_COUNT( m_processedCentroids )", "c:\\workspace\\iw8\\code_source\\src\\dlog\\dlog_tdigest.h", "DLogTDigest<100,8>::ProcessBufferedCentroids", 299);
      _RAX = 2 * (_RSI->m_processedCentroidsIndex + 3i64);
      __asm
      {
        vmovsd  qword ptr [rsi+rax*8], xmm6
        vmovsd  qword ptr [rsi+rax*8+8], xmm7
      }
      ++_RSI->m_processedCentroidsIndex;
    }
    __asm
    {
      vmovaps xmm7, [rsp+0D8h+var_28]
      vmovaps xmm6, [rsp+0D8h+var_18]
    }
    _RSI->m_unprocessedCentroidBufferIndex = 0;
  }
}

/*
==============
DLogTDigest<100,8>::Reset
==============
*/
void DLogTDigest<100,8>::Reset(DLogTDigest<100,8> *this)
{
  this->m_min = 1.797693134862316e308;
  this->m_max = 2.225073858507201e-308;
  this->m_processedWeightTotal = 0.0;
  this->m_unprocessedWeightTotal = 0.0;
  *(_QWORD *)&this->m_unprocessedCentroidBufferIndex = 0i64;
  memset_0(this->m_processedCentroids, 0, 0x3840ui64);
}

/*
==============
DLogTDigest<100,8>::SerializeToProtobuf
==============
*/
unsigned __int64 DLogTDigest<100,8>::SerializeToProtobuf(DLogTDigest<100,8> *this, unsigned __int8 *outBuffer, unsigned __int64 bufferSize)
{
  char v8; 
  int v9; 
  int v10; 
  ProtobufSerializer v18; 

  _RSI = this;
  DLog_Assert(bufferSize >= 0x33E, "GetSerializedByteSize() <= bufferSize", "c:\\workspace\\iw8\\code_source\\src\\dlog\\dlog_tdigest.h", "DLogTDigest<100,8>::SerializeToProtobuf", 398);
  DLogTDigest<100,8>::ProcessBufferedCentroids(_RSI);
  ProtobufSerializer::ProtobufSerializer(&v18, outBuffer, bufferSize);
  if ( !ProtobufSerializer::UInt64(&v18, 1ui64, 1ui64) )
    goto LABEL_6;
  __asm { vmovsd  xmm2, qword ptr [rsi]; value }
  if ( !ProtobufSerializer::Float64(&v18, 2ui64, *(long double *)&_XMM2) )
    goto LABEL_6;
  __asm { vmovsd  xmm2, qword ptr [rsi+8]; value }
  if ( !ProtobufSerializer::Float64(&v18, 3ui64, *(long double *)&_XMM2) )
    goto LABEL_6;
  if ( ProtobufSerializer::Int32(&v18, 4ui64, _RSI->m_processedCentroidsIndex + 1) )
    v8 = 1;
  else
LABEL_6:
    v8 = 0;
  ProtobufSerializer::BeginPacked(&v18, 5ui64);
  v9 = 0;
  v10 = 0;
  if ( _RSI->m_processedCentroidsIndex > 0 )
  {
    _R14 = &_RSI->m_processedCentroids[0].m_weight;
    do
    {
      if ( !v8 )
        goto LABEL_12;
      __asm
      {
        vmovsd  xmm2, qword ptr [r14]
        vcvtpd2ps xmm2, xmm2; value
      }
      if ( ProtobufSerializer::Float32(&v18, 5ui64, *(float *)&_XMM2) )
        v8 = 1;
      else
LABEL_12:
        v8 = 0;
      ++v10;
      _R14 += 2;
    }
    while ( v10 < _RSI->m_processedCentroidsIndex );
  }
  ProtobufSerializer::EndPacked(&v18);
  ProtobufSerializer::BeginPacked(&v18, 6ui64);
  if ( _RSI->m_processedCentroidsIndex > 0 )
  {
    _RBP = _RSI->m_processedCentroids;
    do
    {
      if ( !v8 )
        goto LABEL_19;
      __asm
      {
        vmovsd  xmm2, qword ptr [rbp+0]
        vcvtpd2ps xmm2, xmm2; value
      }
      if ( ProtobufSerializer::Float32(&v18, 6ui64, *(float *)&_XMM2) )
        v8 = 1;
      else
LABEL_19:
        v8 = 0;
      ++v9;
      ++_RBP;
    }
    while ( v9 < _RSI->m_processedCentroidsIndex );
  }
  ProtobufSerializer::EndPacked(&v18);
  return ProtobufSerializer::Size(&v18);
}

/*
==============
DLogTDigest<100,8>::Add
==============
*/

void __fastcall DLogTDigest<100,8>::Add(DLogTDigest<100,8> *this, double value, double weight)
{
  int m_unprocessedCentroidBufferIndex; 

  m_unprocessedCentroidBufferIndex = this->m_unprocessedCentroidBufferIndex;
  _RBX = this;
  __asm
  {
    vmovaps [rsp+48h+var_18], xmm6
    vmovaps [rsp+48h+var_28], xmm7
    vmovaps xmm7, xmm2
    vmovaps xmm6, xmm1
  }
  if ( (unsigned int)m_unprocessedCentroidBufferIndex < 0x2BC )
    goto LABEL_4;
  if ( !this->m_disableAutoMerge )
  {
    DLogTDigest<100,8>::ProcessBufferedCentroids(this);
    m_unprocessedCentroidBufferIndex = _RBX->m_unprocessedCentroidBufferIndex;
LABEL_4:
    __asm
    {
      vmovsd  xmm1, qword ptr [rbx]
      vcmpltsd xmm0, xmm6, xmm1
      vblendvpd xmm1, xmm1, xmm6, xmm0
      vmovsd  qword ptr [rbx], xmm1
      vmovsd  xmm2, qword ptr [rbx+8]
    }
    _RAX = 2 * (m_unprocessedCentroidBufferIndex + 103i64);
    __asm
    {
      vcmpltsd xmm0, xmm2, xmm6
      vblendvpd xmm1, xmm2, xmm6, xmm0
      vmovsd  qword ptr [rbx+8], xmm1
      vmovsd  qword ptr [rbx+rax*8], xmm6
      vmovsd  qword ptr [rbx+rax*8+8], xmm7
      vaddsd  xmm0, xmm7, qword ptr [rbx+20h]
    }
    ++_RBX->m_unprocessedCentroidBufferIndex;
    __asm
    {
      vmovsd  qword ptr [rbx+20h], xmm0
      vmovaps xmm6, [rsp+48h+var_18]
      vmovaps xmm7, [rsp+48h+var_28]
    }
    return;
  }
  __asm
  {
    vmovaps xmm6, [rsp+48h+var_18]
    vmovaps xmm7, [rsp+48h+var_28]
  }
  DLog_PrintError("Auto merge disabled - centroid buffer overflow\n");
}

/*
==============
DLogTDigest<32,8>::Reset
==============
*/
void DLogTDigest<32,8>::Reset(DLogTDigest<32,8> *this)
{
  this->m_min = 1.797693134862316e308;
  this->m_max = 2.225073858507201e-308;
  this->m_processedWeightTotal = 0.0;
  this->m_unprocessedWeightTotal = 0.0;
  *(_QWORD *)&this->m_unprocessedCentroidBufferIndex = 0i64;
  memset_0(this->m_processedCentroids, 0, 0x1200ui64);
}

