/*
==============
Com_FrontEndScene_GetFastFileNameForMode
==============
*/

const char *__fastcall Com_FrontEndScene_GetFastFileNameForMode(GameModeType gameMode)
{
  return ?Com_FrontEndScene_GetFastFileNameForMode@@YAPEBDW4GameModeType@@@Z(gameMode);
}

/*
==============
Com_FrontEndScene_SetOpacityTargetOverride
==============
*/

void __fastcall Com_FrontEndScene_SetOpacityTargetOverride(const float targetOpacity, const float renderOpacity)
{
  ?Com_FrontEndScene_SetOpacityTargetOverride@@YAXMM@Z(targetOpacity, renderOpacity);
}

/*
==============
Com_FrontEndScene_IsSystemEnabled
==============
*/

bool __fastcall Com_FrontEndScene_IsSystemEnabled()
{
  return ?Com_FrontEndScene_IsSystemEnabled@@YA_NXZ();
}

/*
==============
Com_FrontEndScene_NeedsDatabaseAccess
==============
*/

bool __fastcall Com_FrontEndScene_NeedsDatabaseAccess()
{
  return ?Com_FrontEndScene_NeedsDatabaseAccess@@YA_NXZ();
}

/*
==============
Com_FrontEndScene_Init
==============
*/

void Com_FrontEndScene_Init(void)
{
  ?Com_FrontEndScene_Init@@YAXXZ();
}

/*
==============
Com_FrontEndScene_OnExitFrontEnd
==============
*/

void Com_FrontEndScene_OnExitFrontEnd(void)
{
  ?Com_FrontEndScene_OnExitFrontEnd@@YAXXZ();
}

/*
==============
Com_FrontEndScene_OnProcessResume
==============
*/

void Com_FrontEndScene_OnProcessResume(void)
{
  ?Com_FrontEndScene_OnProcessResume@@YAXXZ();
}

/*
==============
Com_FrontEndScene_Frame
==============
*/

void __fastcall Com_FrontEndScene_Frame(int msec)
{
  ?Com_FrontEndScene_Frame@@YAXH@Z(msec);
}

/*
==============
Com_FrontEndScene_SetImageStreamingComplete
==============
*/

void __fastcall Com_FrontEndScene_SetImageStreamingComplete(const bool hasRequiredImages)
{
  ?Com_FrontEndScene_SetImageStreamingComplete@@YAX_N@Z(hasRequiredImages);
}

/*
==============
Com_FrontEndScene_GetWorldChecksum
==============
*/

int __fastcall Com_FrontEndScene_GetWorldChecksum()
{
  return ?Com_FrontEndScene_GetWorldChecksum@@YAHXZ();
}

/*
==============
Com_FrontEndScene_OnEnterFrontEnd
==============
*/

void Com_FrontEndScene_OnEnterFrontEnd(void)
{
  ?Com_FrontEndScene_OnEnterFrontEnd@@YAXXZ();
}

/*
==============
Com_FrontEndScene_IsDisabledState
==============
*/

bool __fastcall Com_FrontEndScene_IsDisabledState()
{
  return ?Com_FrontEndScene_IsDisabledState@@YA_NXZ();
}

/*
==============
Com_FrontEndScene_ForceAllowTabulation
==============
*/

bool __fastcall Com_FrontEndScene_ForceAllowTabulation()
{
  return ?Com_FrontEndScene_ForceAllowTabulation@@YA_NXZ();
}

/*
==============
Com_FrontEndScene_IsPreloadEnabled
==============
*/

bool __fastcall Com_FrontEndScene_IsPreloadEnabled()
{
  return ?Com_FrontEndScene_IsPreloadEnabled@@YA_NXZ();
}

/*
==============
Com_FrontEndScene_IsActive
==============
*/

bool __fastcall Com_FrontEndScene_IsActive()
{
  return ?Com_FrontEndScene_IsActive@@YA_NXZ();
}

/*
==============
Com_FrontEndScene_IsRenderableStreaming
==============
*/

bool __fastcall Com_FrontEndScene_IsRenderableStreaming()
{
  return ?Com_FrontEndScene_IsRenderableStreaming@@YA_NXZ();
}

/*
==============
Com_FrontEndScene_IsRenderable
==============
*/

bool __fastcall Com_FrontEndScene_IsRenderable()
{
  return ?Com_FrontEndScene_IsRenderable@@YA_NXZ();
}

/*
==============
Com_FrontEndScene_GetStateDebugName
==============
*/

const char *__fastcall Com_FrontEndScene_GetStateDebugName()
{
  return ?Com_FrontEndScene_GetStateDebugName@@YAPEBDXZ();
}

/*
==============
Com_FrontEndScene_SetImageStreamingRequestDisabled
==============
*/

void __fastcall Com_FrontEndScene_SetImageStreamingRequestDisabled(const bool isRequestDisabled)
{
  ?Com_FrontEndScene_SetImageStreamingRequestDisabled@@YAX_N@Z(isRequestDisabled);
}

/*
==============
Com_FrontEndScene_SetOpacityChangeTime
==============
*/

void __fastcall Com_FrontEndScene_SetOpacityChangeTime(const int renderOpacityChangeTime)
{
  ?Com_FrontEndScene_SetOpacityChangeTime@@YAXH@Z(renderOpacityChangeTime);
}

/*
==============
Com_FrontEndScene_ShutdownAndDisable
==============
*/

void Com_FrontEndScene_ShutdownAndDisable(void)
{
  ?Com_FrontEndScene_ShutdownAndDisable@@YAXXZ();
}

/*
==============
Com_FrontEndScene_OnEnterGameMode
==============
*/

void Com_FrontEndScene_OnEnterGameMode(void)
{
  ?Com_FrontEndScene_OnEnterGameMode@@YAXXZ();
}

/*
==============
Com_FrontEndScene_IsNoRenderStreaming
==============
*/

bool __fastcall Com_FrontEndScene_IsNoRenderStreaming()
{
  return ?Com_FrontEndScene_IsNoRenderStreaming@@YA_NXZ();
}

/*
==============
Com_FrontEndScene_GetStreamingEstimatedSizeForMode
==============
*/

unsigned int __fastcall Com_FrontEndScene_GetStreamingEstimatedSizeForMode(GameModeType gameMode)
{
  return ?Com_FrontEndScene_GetStreamingEstimatedSizeForMode@@YAIW4GameModeType@@@Z(gameMode);
}

/*
==============
Com_FrontEndScene_GetStateToggleTime
==============
*/

int __fastcall Com_FrontEndScene_GetStateToggleTime()
{
  return ?Com_FrontEndScene_GetStateToggleTime@@YAHXZ();
}

/*
==============
Com_FrontEndScene_CanDrawGameScene
==============
*/

bool __fastcall Com_FrontEndScene_CanDrawGameScene()
{
  return ?Com_FrontEndScene_CanDrawGameScene@@YA_NXZ();
}

/*
==============
Com_FrontEndScene_TransmissionError
==============
*/

void Com_FrontEndScene_TransmissionError(void)
{
  ?Com_FrontEndScene_TransmissionError@@YAXXZ();
}

/*
==============
Com_FrontEndScene_OnMatchStartRequest
==============
*/

void Com_FrontEndScene_OnMatchStartRequest(void)
{
  ?Com_FrontEndScene_OnMatchStartRequest@@YAXXZ();
}

/*
==============
Com_FrontEndScene_ClearOpacityOverride
==============
*/

void Com_FrontEndScene_ClearOpacityOverride(void)
{
  ?Com_FrontEndScene_ClearOpacityOverride@@YAXXZ();
}

/*
==============
Com_FrontEndScene_NeedsStreamingForVisiblity
==============
*/

bool __fastcall Com_FrontEndScene_NeedsStreamingForVisiblity()
{
  return ?Com_FrontEndScene_NeedsStreamingForVisiblity@@YA_NXZ();
}

/*
==============
Com_FrontEndScene_OnErrorCleanup
==============
*/

void Com_FrontEndScene_OnErrorCleanup(void)
{
  ?Com_FrontEndScene_OnErrorCleanup@@YAXXZ();
}

/*
==============
Com_FrontEndScene_GetOpaqueOverlayAlpha
==============
*/

double __fastcall Com_FrontEndScene_GetOpaqueOverlayAlpha()
{
  double result; 

  *(float *)&result = ?Com_FrontEndScene_GetOpaqueOverlayAlpha@@YAMXZ();
  return result;
}

/*
==============
Com_FrontEndScene_OnExitGameMode
==============
*/

void Com_FrontEndScene_OnExitGameMode(void)
{
  ?Com_FrontEndScene_OnExitGameMode@@YAXXZ();
}

/*
==============
Com_FrontEndScene_GetFastFileEstimatedSizeForMode
==============
*/

unsigned int __fastcall Com_FrontEndScene_GetFastFileEstimatedSizeForMode(GameModeType gameMode)
{
  return ?Com_FrontEndScene_GetFastFileEstimatedSizeForMode@@YAIW4GameModeType@@@Z(gameMode);
}

/*
==============
Com_FrontEndScene_SetForceStreamingDuration
==============
*/

void __fastcall Com_FrontEndScene_SetForceStreamingDuration(const unsigned int durationMs)
{
  ?Com_FrontEndScene_SetForceStreamingDuration@@YAXI@Z(durationMs);
}

/*
==============
Com_FrontEndScene_FreeCamEnabled
==============
*/

bool __fastcall Com_FrontEndScene_FreeCamEnabled()
{
  return ?Com_FrontEndScene_FreeCamEnabled@@YA_NXZ();
}

/*
==============
Com_FrontEndScene_CanDrawGameScene
==============
*/
bool Com_FrontEndScene_CanDrawGameScene()
{
  return s_frontEndScene_state >= (COUNT|DODGE|0x4);
}

/*
==============
Com_FrontEndScene_CheckSceneConnection
==============
*/

void __fastcall Com_FrontEndScene_CheckSceneConnection(double _XMM0_8)
{
  const dvar_t *v1; 
  char v2; 
  char v3; 
  int integer; 
  __int64 v7; 
  char *fmt; 

  if ( s_frontEndScene_state != 5 && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\qcommon\\com_frontend_scene.cpp", 465, ASSERT_TYPE_ASSERT, "(s_frontEndScene_state == ComFrontEndSceneState::SERVER_STARTING)", (const char *)&queryFormat, "s_frontEndScene_state == ComFrontEndSceneState::SERVER_STARTING") )
    __debugbreak();
  if ( !s_frontEndScene_worldChecksum && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\qcommon\\com_frontend_scene.cpp", 466, ASSERT_TYPE_ASSERT, "(s_frontEndScene_worldChecksum)", (const char *)&queryFormat, "s_frontEndScene_worldChecksum") )
    __debugbreak();
  if ( !clientUIActives[0].frontEndSceneState[0] && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\qcommon\\com_frontend_scene.cpp", 467, ASSERT_TYPE_ASSERT, "(CL_GetLocalClientFrontEntState( LOCAL_CLIENT_0 ) != ClFrontEndSceneState::INACTIVE)", (const char *)&queryFormat, "CL_GetLocalClientFrontEntState( FRONTEND_SCENE_LOCAL_CLIENT ) != ClFrontEndSceneState::INACTIVE") )
    __debugbreak();
  if ( Stream_LoadSync_IsActiveFrontend() && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\qcommon\\com_frontend_scene.cpp", 470, ASSERT_TYPE_ASSERT, "(!Stream_LoadSync_IsActiveFrontend())", (const char *)&queryFormat, "!Stream_LoadSync_IsActiveFrontend()") )
    __debugbreak();
  if ( clientUIActives[0].connectionState == CA_ACTIVE )
  {
    v1 = DCONST_DVARINT_frontEndSceneDefaultFadeTime;
    if ( !DCONST_DVARINT_frontEndSceneDefaultFadeTime && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\universal\\dvar.h", 699, ASSERT_TYPE_ASSERT, "(dvar)", "%s\n\tDvar %s accessed after deregistration", "dvar", "frontEndSceneDefaultFadeTime") )
      __debugbreak();
    Dvar_CheckFrontendServerThread(v1);
    integer = v1->current.integer;
    __asm
    {
      vmovss  xmm1, cs:s_frontEndSceneControl.m_renderOpacity
      vxorps  xmm0, xmm0, xmm0
      vucomiss xmm1, xmm0
      vmovss  cs:s_frontEndSceneControl.m_renderOpacityTarget, xmm0
    }
    s_frontEndSceneControl.m_renderOpacityChangeTime = integer;
    s_frontEndSceneControl.m_renderOpacityGameOverrideValid = 1;
    if ( !v3 )
    {
      __asm { vcomiss xmm1, xmm0 }
      if ( v2 || !(v2 | v3) )
        __asm { vmovss  cs:s_frontEndSceneControl.m_renderOpacity, xmm0 }
    }
    s_frontEndSceneControl.m_imageStreamingForcedTime = 0;
    *(_WORD *)&s_frontEndSceneControl.m_imageStreamingComplete = 0;
    if ( !CL_UIStreaming_IsRunningImages() && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\qcommon\\com_frontend_scene.cpp", 482, ASSERT_TYPE_ASSERT, "(CL_UIStreaming_IsRunningImages())", "%s\n\tWe expect ui streaming images to be active to service the front-end scene", "CL_UIStreaming_IsRunningImages()") )
      __debugbreak();
    CL_UIStreaming_StartStreamingTransients();
    Stream_LoadSync_BeginFrontend();
    v7 = s_frontEndScene_state;
    s_frontEndScene_state = 6;
    s_frontEndScene_stateToggleTime = Sys_Milliseconds();
    s_frontEndScene_stateTime[6] = Sys_Milliseconds();
    LODWORD(fmt) = s_frontEndScene_stateTime[6] - s_frontEndScene_stateTime[v7];
    Com_Printf(16, "Com_FrontEndScene_SetState %i => %i (%i ms).\n", (unsigned int)v7, 6i64, fmt);
  }
}

/*
==============
Com_FrontEndScene_CheckStartServer
==============
*/
void Com_FrontEndScene_CheckStartServer()
{
  unsigned __int8 ActiveGameMode; 
  const char *LevelNameForMode; 
  const char *v2; 
  __int64 v3; 
  char *fmt; 

  if ( s_frontEndScene_state != 4 && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\qcommon\\com_frontend_scene.cpp", 428, ASSERT_TYPE_ASSERT, "(s_frontEndScene_state == ComFrontEndSceneState::SERVER_PRIMED)", (const char *)&queryFormat, "s_frontEndScene_state == ComFrontEndSceneState::SERVER_PRIMED") )
    __debugbreak();
  if ( !s_frontEndScene_worldChecksum && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\qcommon\\com_frontend_scene.cpp", 429, ASSERT_TYPE_ASSERT, "(s_frontEndScene_worldChecksum)", (const char *)&queryFormat, "s_frontEndScene_worldChecksum") )
    __debugbreak();
  if ( !Com_GameMode_SupportsFeature(WEAPON_OFFHAND_END) && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\qcommon\\com_frontend_scene.cpp", 430, ASSERT_TYPE_ASSERT, "(Com_GameMode_SupportsFeature( Com_GameMode_Feature::FRONTEND_GAME_SCENE ))", (const char *)&queryFormat, "Com_GameMode_SupportsFeature( Com_GameMode_Feature::FRONTEND_GAME_SCENE )") )
    __debugbreak();
  if ( Com_IsAnyLocalServerRunning() && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\qcommon\\com_frontend_scene.cpp", 431, ASSERT_TYPE_ASSERT, "(!Com_IsAnyLocalServerRunning())", (const char *)&queryFormat, "!Com_IsAnyLocalServerRunning()") )
    __debugbreak();
  if ( Com_IsAnyLocalServerStarting() && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\qcommon\\com_frontend_scene.cpp", 432, ASSERT_TYPE_ASSERT, "(!Com_IsAnyLocalServerStarting())", (const char *)&queryFormat, "!Com_IsAnyLocalServerStarting()") )
    __debugbreak();
  if ( !CL_TransientsMP_NeedsProcessing() && DB_AreFastfileLoadsCompleted() )
  {
    ActiveGameMode = Com_GameMode_GetActiveGameMode();
    LevelNameForMode = Com_FrontEndScene_GetLevelNameForMode((GameModeType)ActiveGameMode);
    v2 = LevelNameForMode;
    if ( LevelNameForMode && *LevelNameForMode )
    {
      v3 = s_frontEndScene_state;
      s_frontEndScene_state = 5;
      s_frontEndScene_stateToggleTime = Sys_Milliseconds();
      s_frontEndScene_stateTime[5] = Sys_Milliseconds();
      LODWORD(fmt) = s_frontEndScene_stateTime[5] - s_frontEndScene_stateTime[v3];
      Com_Printf(16, "Com_FrontEndScene_SetState %i => %i (%i ms).\n", (unsigned int)v3, 5i64, fmt);
      ProfLoad_Activate();
      ProfLoad_Begin("CL Game Allocate");
      CL_MainMP_GameAllocate(2);
      CL_MainMP_ClearGameState();
      ProfLoad_End();
      ProfLoad_Begin("CL Init Frontend");
      CL_MainMP_InitLoadFrontEnd(v2, "frontend");
      CL_MainMP_MapLoadingFrontEnd();
      ProfLoad_End();
      ProfLoad_Begin("Com Restart");
      Com_StreamSync_SetEnabled(0);
      BG_Customization_SetIsEnabled(1);
      BG_Customization_UpdatePackageBindings(v2);
      Com_RestartForFrontend();
      ProfLoad_End();
      if ( !cls.hunkUsersStarted && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\qcommon\\com_frontend_scene.cpp", 386, ASSERT_TYPE_ASSERT, "(cls.hunkUsersStarted)", (const char *)&queryFormat, "cls.hunkUsersStarted") )
        __debugbreak();
      Dvar_SetServerThreadCheckEnabled(1);
      SV_CmdsMP_StartMapForFrontEnd(v2, "frontend");
    }
    else
    {
      Com_PrintError(16, "Invalid game mode fence, should have a valid frontend name\n");
      Com_FrontEndScene_ShutdownAndDisable();
    }
  }
}

/*
==============
Com_FrontEndScene_ClearOpacityOverride
==============
*/
void Com_FrontEndScene_ClearOpacityOverride(void)
{
  s_frontEndSceneControl.m_renderOpacityGameOverrideValid = 0;
}

/*
==============
Com_FrontEndScene_DevStart_f
==============
*/
void Com_FrontEndScene_DevStart_f()
{
  int v0; 

  Com_Printf(16, "FrontEndScene: Manually starting up.\n");
  if ( s_frontEndScene_state == MOVEMENT )
  {
    s_frontEndScene_state = DODGE;
    s_frontEndScene_stateToggleTime = Sys_Milliseconds();
    s_frontEndScene_stateTime[1] = Sys_Milliseconds();
    v0 = s_frontEndScene_stateTime[1] - s_frontEndScene_stateTime[0];
    Com_Printf(16, "Com_FrontEndScene_SetState %i => %i (%i ms).\n", 0i64, 1i64, v0);
  }
}

/*
==============
Com_FrontEndScene_DevStop_f
==============
*/
void Com_FrontEndScene_DevStop_f()
{
  Com_Printf(16, "FrontEndScene: Manually shutting down.\n");
  Com_FrontEndScene_ShutdownAndDisable();
}

/*
==============
Com_FrontEndScene_ForceAllowTabulation
==============
*/
bool Com_FrontEndScene_ForceAllowTabulation()
{
  const dvar_t *v0; 

  if ( s_frontEndScene_state < 8 )
    return 0;
  v0 = DVARBOOL_frontendSceneTabulationForce;
  if ( !DVARBOOL_frontendSceneTabulationForce && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\universal\\dvar.h", 692, ASSERT_TYPE_ASSERT, "(dvar)", "%s\n\tDvar %s accessed after deregistration", "dvar", "frontendSceneTabulationForce") )
    __debugbreak();
  Dvar_CheckFrontendServerThread(v0);
  return v0->current.enabled;
}

/*
==============
Com_FrontEndScene_Frame
==============
*/

void __fastcall Com_FrontEndScene_Frame(int msec, __int64 a2, __int64 a3, double _XMM3_8)
{
  const dvar_t *v6; 
  bool v7; 
  bool v8; 
  bool v9; 
  unsigned __int32 v10; 

  if ( Com_FrontEndScene_IsSystemEnabled() )
  {
    if ( Com_GameMode_SupportsFeature(WEAPON_OFFHAND_END) )
    {
      if ( Com_FastFile_IsFrontEndSceneLoaded() )
      {
        if ( Com_FrontEndScene_IsSystemEnabled() )
        {
          v6 = DVARBOOL_frontEndSceneFreeCam;
          if ( !DVARBOOL_frontEndSceneFreeCam && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\universal\\dvar.h", 692, ASSERT_TYPE_ASSERT, "(dvar)", "%s\n\tDvar %s accessed after deregistration", "dvar", "frontEndSceneFreeCam") )
            __debugbreak();
          Dvar_CheckFrontendServerThread(v6);
          if ( v6->current.enabled )
            Stream_ImageRecord_Disable("Com_FrontEndScene_FreeCamEnabled");
        }
        Com_FrontEndScene_RunStateMachine();
        if ( !s_frontEndSceneControl.m_renderOpacityGameOverrideValid )
        {
          v7 = (unsigned int)s_frontEndScene_state < 8;
          v8 = s_frontEndScene_state == 8;
          v9 = (unsigned int)s_frontEndScene_state <= 8;
          v10 = s_frontEndScene_state - 8;
          if ( s_frontEndScene_state == 8 )
          {
            __asm
            {
              vmovss  xmm1, cs:__real@3f800000
              vmovss  cs:s_frontEndSceneControl.m_renderOpacityTarget, xmm1
            }
          }
          else
          {
            v7 = s_frontEndScene_state == 8;
            v8 = v10 == 1;
            v9 = v10 <= 1;
            if ( s_frontEndScene_state != 9 )
            {
              __asm
              {
                vxorps  xmm0, xmm0, xmm0
                vmovss  cs:s_frontEndSceneControl.m_renderOpacityTarget, xmm0
                vmovss  cs:s_frontEndSceneControl.m_renderOpacity, xmm0
              }
              return;
            }
            __asm { vmovss  xmm1, cs:s_frontEndSceneControl.m_renderOpacityTarget }
          }
          __asm
          {
            vmovss  xmm2, cs:s_frontEndSceneControl.m_renderOpacity
            vucomiss xmm1, xmm2
          }
          if ( !v8 )
          {
            __asm
            {
              vxorps  xmm3, xmm3, xmm3
              vcvtsi2ss xmm3, xmm3, cs:s_frontEndSceneControl.m_renderOpacityChangeTime
              vxorps  xmm0, xmm0, xmm0
              vcomiss xmm3, xmm0
            }
            if ( !v9 )
            {
              __asm
              {
                vcomiss xmm1, xmm2
                vxorps  xmm0, xmm0, xmm0
                vcvtsi2ss xmm0, xmm0, edi
                vmovaps [rsp+68h+var_18], xmm6
                vdivss  xmm6, xmm0, xmm3
              }
              if ( v7 )
              {
                __asm
                {
                  vsubss  xmm0, xmm2, xmm6
                  vmovaps xmm6, [rsp+68h+var_18]
                  vmaxss  xmm1, xmm0, xmm1
                  vmovss  cs:s_frontEndSceneControl.m_renderOpacity, xmm1
                }
                return;
              }
              if ( v9 )
              {
                __asm
                {
                  vcvttss2si eax, xmm2
                  vcvttss2si ecx, xmm1
                }
                if ( CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\qcommon\\com_frontend_scene.cpp", 248, ASSERT_TYPE_ASSERT, "( s_frontEndSceneControl.m_renderOpacityTarget ) > ( s_frontEndSceneControl.m_renderOpacity )", "%s > %s\n\t%i, %i", "s_frontEndSceneControl.m_renderOpacityTarget", "s_frontEndSceneControl.m_renderOpacity", _ECX, _EAX) )
                  __debugbreak();
                __asm
                {
                  vmovss  xmm2, cs:s_frontEndSceneControl.m_renderOpacity
                  vmovss  xmm1, cs:s_frontEndSceneControl.m_renderOpacityTarget
                }
              }
              __asm
              {
                vaddss  xmm0, xmm2, xmm6
                vmovaps xmm6, [rsp+68h+var_18]
                vminss  xmm1, xmm0, xmm1
              }
            }
            __asm { vmovss  cs:s_frontEndSceneControl.m_renderOpacity, xmm1 }
          }
        }
      }
      else if ( (unsigned int)s_frontEndScene_state > DODGE && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\qcommon\\com_frontend_scene.cpp", 1260, ASSERT_TYPE_ASSERT, "( ( s_frontEndScene_state == ComFrontEndSceneState::DISABLED || s_frontEndScene_state == ComFrontEndSceneState::STOPPED ) )", "( s_frontEndScene_state ) = %i", s_frontEndScene_state) )
      {
        goto LABEL_12;
      }
    }
    else if ( (unsigned int)s_frontEndScene_state > DODGE && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\qcommon\\com_frontend_scene.cpp", 1254, ASSERT_TYPE_ASSERT, "( ( s_frontEndScene_state == ComFrontEndSceneState::DISABLED || s_frontEndScene_state == ComFrontEndSceneState::STOPPED ) )", "( s_frontEndScene_state ) = %i", s_frontEndScene_state) )
    {
      goto LABEL_12;
    }
  }
  else if ( s_frontEndScene_state && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\qcommon\\com_frontend_scene.cpp", 1248, ASSERT_TYPE_ASSERT, "( ( s_frontEndScene_state == ComFrontEndSceneState::DISABLED ) )", "( s_frontEndScene_state ) = %i", s_frontEndScene_state) )
  {
LABEL_12:
    __debugbreak();
  }
}

/*
==============
Com_FrontEndScene_FreeCamEnabled
==============
*/
bool Com_FrontEndScene_FreeCamEnabled()
{
  const dvar_t *v0; 

  if ( !Com_FrontEndScene_IsSystemEnabled() )
    return 0;
  v0 = DVARBOOL_frontEndSceneFreeCam;
  if ( !DVARBOOL_frontEndSceneFreeCam && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\universal\\dvar.h", 692, ASSERT_TYPE_ASSERT, "(dvar)", "%s\n\tDvar %s accessed after deregistration", "dvar", "frontEndSceneFreeCam") )
    __debugbreak();
  Dvar_CheckFrontendServerThread(v0);
  return v0->current.enabled;
}

/*
==============
Com_FrontEndScene_GetFastFileEstimatedSizeForMode
==============
*/
__int64 Com_FrontEndScene_GetFastFileEstimatedSizeForMode(GameModeType gameMode)
{
  unsigned __int8 v1; 
  int v3; 
  int v4; 

  v1 = gameMode;
  if ( !Com_FrontEndScene_IsSystemEnabled() )
    return 0i64;
  if ( v1 >= 4u )
  {
    v4 = 4;
    v3 = v1;
    if ( CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\qcommon\\com_frontend_scene.cpp", 202, ASSERT_TYPE_ASSERT, "(unsigned)( static_cast<uint>( gameMode ) ) < (unsigned)( static_cast<uint>( GameModeType::COUNT ) )", "static_cast<uint>( gameMode ) doesn't index static_cast<uint>( GameModeType::COUNT )\n\t%i not in [0, %i)", v3, v4) )
      __debugbreak();
  }
  return S_FRONTEND_SCENE_LEVEL_ESTIMATED_SIZE[v1];
}

/*
==============
Com_FrontEndScene_GetFastFileNameForMode
==============
*/
const char *Com_FrontEndScene_GetFastFileNameForMode(GameModeType gameMode)
{
  unsigned __int8 v1; 

  v1 = gameMode;
  if ( Com_FrontEndScene_IsSystemEnabled() )
    return Com_FrontEndScene_GetLevelNameForMode((GameModeType)v1);
  else
    return 0i64;
}

/*
==============
Com_FrontEndScene_GetLevelNameForMode
==============
*/
const char *Com_FrontEndScene_GetLevelNameForMode(GameModeType gameMode)
{
  char v1; 
  const dvar_t *v2; 
  const char *string; 
  __int64 v4; 
  const char *v5; 
  char v6; 
  __int64 v7; 
  char v8; 

  v1 = gameMode;
  if ( (unsigned __int8)gameMode >= (unsigned int)LONG_LONG && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\qcommon\\com_frontend_scene.cpp", 148, ASSERT_TYPE_ASSERT, "(unsigned)( static_cast<uint>( gameMode ) ) < (unsigned)( static_cast<uint>( GameModeType::COUNT ) )", "static_cast<uint>( gameMode ) doesn't index static_cast<uint>( GameModeType::COUNT )\n\t%i not in [0, %i)", (unsigned __int8)gameMode, 4) )
    __debugbreak();
  if ( (unsigned __int8)(v1 - 2) <= 1u )
  {
    v2 = DVARSTR_frontEndFastfileName;
    if ( !DVARSTR_frontEndFastfileName && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\universal\\dvar.h", 748, ASSERT_TYPE_ASSERT, "(dvar)", "%s\n\tDvar %s accessed after deregistration", "dvar", "frontEndFastfileName") )
      __debugbreak();
    Dvar_CheckFrontendServerThread(v2);
    string = v2->current.string;
    v4 = 11i64;
    v5 = "mp_frontend";
    if ( !string && CoreAssert_Handler("c:\\workspace\\iw8\\shared\\codware\\core\\core_string.h", 181, ASSERT_TYPE_SANITY, "( s0 )", (const char *)&queryFormat, "s0") )
      __debugbreak();
    while ( 1 )
    {
      v6 = v5[string - "mp_frontend"];
      v7 = v4;
      v8 = *v5++;
      --v4;
      if ( !v7 )
        return string;
      if ( v6 != v8 )
        break;
      if ( !v6 )
        return string;
    }
    Com_PrintError(14, "Invalid frontend name '%s'. Must begin with '%s'\n", string, "mp_frontend");
  }
  return 0i64;
}

/*
==============
Com_FrontEndScene_GetOpaqueOverlayAlpha
==============
*/

float __fastcall Com_FrontEndScene_GetOpaqueOverlayAlpha(double _XMM0_8)
{
  if ( s_frontEndScene_state < (COUNT|DODGE|0x4) )
  {
    __asm { vxorps  xmm0, xmm0, xmm0 }
  }
  else
  {
    __asm
    {
      vmovss  xmm0, cs:__real@3f800000
      vsubss  xmm0, xmm0, cs:s_frontEndSceneControl.m_renderOpacity
    }
  }
  return *(float *)&_XMM0;
}

/*
==============
Com_FrontEndScene_GetStateDebugName
==============
*/
const char *Com_FrontEndScene_GetStateDebugName()
{
  __int64 v0; 

  v0 = (unsigned int)s_frontEndScene_state;
  if ( (unsigned int)s_frontEndScene_state >= 0xA )
  {
    if ( CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\qcommon\\com_frontend_scene.cpp", 1213, ASSERT_TYPE_ASSERT, "(unsigned)( s_frontEndScene_state ) < (unsigned)( ComFrontEndSceneState::COUNT )", "s_frontEndScene_state doesn't index ComFrontEndSceneState::COUNT\n\t%i not in [0, %i)", s_frontEndScene_state, 10) )
      __debugbreak();
    v0 = (unsigned int)s_frontEndScene_state;
  }
  return S_FRONTEND_SCENE_STATE_NAMES[v0];
}

/*
==============
Com_FrontEndScene_GetStateToggleTime
==============
*/
__int64 Com_FrontEndScene_GetStateToggleTime()
{
  return (unsigned int)s_frontEndScene_stateToggleTime;
}

/*
==============
Com_FrontEndScene_GetStreamingEstimatedSizeForMode
==============
*/
__int64 Com_FrontEndScene_GetStreamingEstimatedSizeForMode(GameModeType gameMode)
{
  unsigned __int8 v1; 
  int v3; 
  int v4; 

  v1 = gameMode;
  if ( !Com_FrontEndScene_IsSystemEnabled() )
    return 0i64;
  if ( v1 >= 4u )
  {
    v4 = 4;
    v3 = v1;
    if ( CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\qcommon\\com_frontend_scene.cpp", 210, ASSERT_TYPE_ASSERT, "(unsigned)( static_cast<uint>( gameMode ) ) < (unsigned)( static_cast<uint>( GameModeType::COUNT ) )", "static_cast<uint>( gameMode ) doesn't index static_cast<uint>( GameModeType::COUNT )\n\t%i not in [0, %i)", v3, v4) )
      __debugbreak();
  }
  return S_FRONTEND_SCENE_STREAMED_IMAGES_ESTIMATED_SIZE[v1];
}

/*
==============
Com_FrontEndScene_GetWorldChecksum
==============
*/
__int64 Com_FrontEndScene_GetWorldChecksum()
{
  if ( s_frontEndScene_state < COUNT && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\qcommon\\com_frontend_scene.cpp", 1181, ASSERT_TYPE_ASSERT, "(s_frontEndScene_state >= ComFrontEndSceneState::WORLD_LOADED)", (const char *)&queryFormat, "s_frontEndScene_state >= ComFrontEndSceneState::WORLD_LOADED") )
    __debugbreak();
  return (unsigned int)s_frontEndScene_worldChecksum;
}

/*
==============
Com_FrontEndScene_Init
==============
*/
void Com_FrontEndScene_Init(void)
{
  *(_QWORD *)s_frontEndScene_stateTime = 0i64;
  s_frontEndScene_state = MOVEMENT;
  s_frontEndScene_worldChecksum = 0;
  s_frontEndScene_transmissionErrorTime = 0;
  *(_QWORD *)&s_frontEndScene_stateTime[2] = 0i64;
  *(_QWORD *)&s_frontEndScene_stateTime[4] = 0i64;
  *(_QWORD *)&s_frontEndScene_stateTime[6] = 0i64;
  *(_QWORD *)&s_frontEndScene_stateTime[8] = 0i64;
  *(_QWORD *)&s_frontEndSceneControl.m_renderOpacity = 0i64;
  *(_QWORD *)&s_frontEndSceneControl.m_renderOpacityChangeTime = 0i64;
  s_frontEndSceneControl.m_imageStreamingForcedTime = 0;
  Cmd_AddCommandInternal("frontendscene_dev_start", Com_FrontEndScene_DevStart_f, &stru_14B894A40);
  Cmd_AddCommandInternal("frontendscene_dev_stop", Com_FrontEndScene_DevStop_f, &stru_14B894A70);
}

/*
==============
Com_FrontEndScene_IsActive
==============
*/
bool Com_FrontEndScene_IsActive()
{
  return s_frontEndScene_state >= 5;
}

/*
==============
Com_FrontEndScene_IsDisabledState
==============
*/
bool Com_FrontEndScene_IsDisabledState()
{
  return s_frontEndScene_state == MOVEMENT;
}

/*
==============
Com_FrontEndScene_IsNoRenderStreaming
==============
*/
bool Com_FrontEndScene_IsNoRenderStreaming()
{
  return (unsigned int)(s_frontEndScene_state - 6) <= 1;
}

/*
==============
Com_FrontEndScene_IsPreloadEnabled
==============
*/
bool Com_FrontEndScene_IsPreloadEnabled()
{
  const dvar_t *v0; 

  if ( !Com_FrontEndScene_IsSystemEnabled() )
    return 0;
  v0 = DVARBOOL_frontEndScenePreload;
  if ( !DVARBOOL_frontEndScenePreload && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\universal\\dvar.h", 692, ASSERT_TYPE_ASSERT, "(dvar)", "%s\n\tDvar %s accessed after deregistration", "dvar", "frontEndScenePreload") )
    __debugbreak();
  Dvar_CheckFrontendServerThread(v0);
  return v0->current.enabled;
}

/*
==============
Com_FrontEndScene_IsRenderable
==============
*/
bool Com_FrontEndScene_IsRenderable()
{
  return s_frontEndScene_state >= 8;
}

/*
==============
Com_FrontEndScene_IsRenderableStreaming
==============
*/
bool Com_FrontEndScene_IsRenderableStreaming()
{
  return s_frontEndScene_state == 9;
}

/*
==============
Com_FrontEndScene_IsSystemEnabled
==============
*/
bool Com_FrontEndScene_IsSystemEnabled()
{
  const dvar_t *v1; 

  if ( Com_FastFile_IsAltLaunchMode() )
    return 0;
  v1 = DVARBOOL_frontEndSceneEnabled;
  if ( !DVARBOOL_frontEndSceneEnabled && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\universal\\dvar.h", 692, ASSERT_TYPE_ASSERT, "(dvar)", "%s\n\tDvar %s accessed after deregistration", "dvar", "frontEndSceneEnabled") )
    __debugbreak();
  Dvar_CheckFrontendServerThread(v1);
  return v1->current.enabled;
}

/*
==============
Com_FrontEndScene_LoadWorld
==============
*/
void Com_FrontEndScene_LoadWorld()
{
  unsigned __int8 ActiveGameMode; 
  unsigned __int8 v1; 
  const dvar_t *v2; 
  const char *string; 
  __int64 v4; 
  const char *v5; 
  char v6; 
  __int64 v7; 
  char v8; 
  __int64 v9; 
  char *fmt; 
  __int64 v11; 
  __int64 v12; 
  char dest[256]; 

  if ( s_frontEndScene_state != DODGE && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\qcommon\\com_frontend_scene.cpp", 303, ASSERT_TYPE_ASSERT, "(s_frontEndScene_state == ComFrontEndSceneState::STOPPED)", (const char *)&queryFormat, "s_frontEndScene_state == ComFrontEndSceneState::STOPPED") )
    __debugbreak();
  if ( s_frontEndScene_worldChecksum && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\qcommon\\com_frontend_scene.cpp", 304, ASSERT_TYPE_ASSERT, "(s_frontEndScene_worldChecksum == 0)", (const char *)&queryFormat, "s_frontEndScene_worldChecksum == 0") )
    __debugbreak();
  if ( !Com_GameMode_SupportsFeature(WEAPON_OFFHAND_END) && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\qcommon\\com_frontend_scene.cpp", 305, ASSERT_TYPE_ASSERT, "(Com_GameMode_SupportsFeature( Com_GameMode_Feature::FRONTEND_GAME_SCENE ))", (const char *)&queryFormat, "Com_GameMode_SupportsFeature( Com_GameMode_Feature::FRONTEND_GAME_SCENE )") )
    __debugbreak();
  ActiveGameMode = Com_GameMode_GetActiveGameMode();
  v1 = ActiveGameMode;
  if ( ActiveGameMode >= 4u )
  {
    LODWORD(v11) = ActiveGameMode;
    if ( CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\qcommon\\com_frontend_scene.cpp", 175, ASSERT_TYPE_ASSERT, "(unsigned)( static_cast<uint>( gameMode ) ) < (unsigned)( static_cast<uint>( GameModeType::COUNT ) )", "static_cast<uint>( gameMode ) doesn't index static_cast<uint>( GameModeType::COUNT )\n\t%i not in [0, %i)", v11, 4) )
      __debugbreak();
  }
  if ( (unsigned __int8)(v1 - 2) > 1u )
  {
LABEL_30:
    Com_PrintError(16, "Invalid game mode fence (%d), should have a valid frontend path name\n", v1);
LABEL_31:
    Com_FrontEndScene_ShutdownAndDisable();
  }
  else
  {
    v2 = DVARSTR_frontEndFastfileName;
    if ( !DVARSTR_frontEndFastfileName && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\universal\\dvar.h", 748, ASSERT_TYPE_ASSERT, "(dvar)", "%s\n\tDvar %s accessed after deregistration", "dvar", "frontEndFastfileName") )
      __debugbreak();
    Dvar_CheckFrontendServerThread(v2);
    string = v2->current.string;
    v4 = 11i64;
    v5 = "mp_frontend";
    if ( !string && CoreAssert_Handler("c:\\workspace\\iw8\\shared\\codware\\core\\core_string.h", 181, ASSERT_TYPE_SANITY, "( s0 )", (const char *)&queryFormat, "s0") )
      __debugbreak();
    do
    {
      v6 = v5[string - "mp_frontend"];
      v7 = v4;
      v8 = *v5++;
      --v4;
      if ( !v7 )
        break;
      if ( v6 != v8 )
      {
        Com_PrintError(14, "Invalid frontend name '%s'. Must begin with '%s'\n", string, "mp_frontend");
        goto LABEL_30;
      }
    }
    while ( v6 );
    if ( Com_sprintf(dest, 0x100ui64, "maps/mp/%s.d3dbsp", string) <= 0 )
      goto LABEL_30;
    if ( !dest[0] )
    {
      LODWORD(v12) = v1;
      if ( CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\qcommon\\com_frontend_scene.cpp", 311, ASSERT_TYPE_ASSERT, "(!I_strempty( bspFileName ))", "%s\n\tInvalid game mode fence (%d), should have a valid frontend path name.", "!I_strempty( bspFileName )", v12) )
        __debugbreak();
    }
    R_LoadWorld(1u, dest, &s_frontEndScene_worldChecksum, 1);
    if ( !rgp.world )
    {
      Com_PrintError(16, "Com_FrontEndScene_LoadWorld failed. Front-end scene is now disabled.\n");
      goto LABEL_31;
    }
    v9 = s_frontEndScene_state;
    s_frontEndScene_state = COUNT;
    s_frontEndScene_stateToggleTime = Sys_Milliseconds();
    s_frontEndScene_stateTime[2] = Sys_Milliseconds();
    LODWORD(fmt) = s_frontEndScene_stateTime[2] - s_frontEndScene_stateTime[v9];
    Com_Printf(16, "Com_FrontEndScene_SetState %i => %i (%i ms).\n", (unsigned int)v9, 2i64, fmt);
  }
}

/*
==============
Com_FrontEndScene_NeedsDatabaseAccess
==============
*/
bool Com_FrontEndScene_NeedsDatabaseAccess()
{
  int v0; 

  if ( !Com_FrontEndScene_IsSystemEnabled() )
    return 0;
  if ( !Com_GameMode_SupportsFeature(WEAPON_OFFHAND_END) )
    return 0;
  v0 = s_frontEndScene_state;
  if ( s_frontEndScene_state == MOVEMENT )
    return 0;
  if ( s_frontEndScene_transmissionErrorTime > 0 )
  {
    if ( s_frontEndScene_transmissionErrorTime - Sys_Milliseconds() + 1000 >= 0 )
      return 0;
    v0 = s_frontEndScene_state;
  }
  return v0 != 3 && (v0 < 8 || !s_frontEndSceneControl.m_imageStreamingRequestDisabled && v0 >= 9);
}

/*
==============
Com_FrontEndScene_NeedsStreamingForVisiblity
==============
*/
bool Com_FrontEndScene_NeedsStreamingForVisiblity()
{
  if ( s_frontEndScene_state < 8 )
    return 0;
  __asm
  {
    vmovss  xmm0, cs:s_frontEndSceneControl.m_renderOpacityTarget
    vcomiss xmm0, cs:__real@3f800000
  }
  return (unsigned int)s_frontEndScene_state < 8;
}

/*
==============
Com_FrontEndScene_OnEnterFrontEnd
==============
*/
void Com_FrontEndScene_OnEnterFrontEnd(void)
{
  __int64 v0; 
  char *fmt; 
  ComFrontEndSceneState v2; 

  if ( s_frontEndScene_state )
  {
    v2 = s_frontEndScene_state;
    if ( CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\qcommon\\com_frontend_scene.cpp", 884, ASSERT_TYPE_ASSERT, "( s_frontEndScene_state ) == ( ComFrontEndSceneState::DISABLED )", "%s == %s\n\t%i, %i", "s_frontEndScene_state", "ComFrontEndSceneState::DISABLED", v2, 0i64) )
      __debugbreak();
  }
  if ( Com_IsAnyLocalServerRunning() && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\qcommon\\com_frontend_scene.cpp", 885, ASSERT_TYPE_ASSERT, "(!Com_IsAnyLocalServerRunning())", (const char *)&queryFormat, "!Com_IsAnyLocalServerRunning()") )
    __debugbreak();
  if ( Com_FrontEndScene_IsSystemEnabled() )
  {
    v0 = s_frontEndScene_state;
    s_frontEndScene_state = DODGE;
    s_frontEndScene_stateToggleTime = Sys_Milliseconds();
    s_frontEndScene_stateTime[1] = Sys_Milliseconds();
    LODWORD(fmt) = s_frontEndScene_stateTime[1] - s_frontEndScene_stateTime[v0];
    Com_Printf(16, "Com_FrontEndScene_SetState %i => %i (%i ms).\n", (unsigned int)v0, 1i64, fmt);
  }
}

/*
==============
Com_FrontEndScene_OnEnterGameMode
==============
*/
void Com_FrontEndScene_OnEnterGameMode(void)
{
  ComFrontEndSceneState v0; 
  int v1; 

  if ( s_frontEndScene_state >= 5 )
  {
    v1 = 5;
    v0 = s_frontEndScene_state;
    if ( CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\qcommon\\com_frontend_scene.cpp", 938, ASSERT_TYPE_ASSERT, "( s_frontEndScene_state ) < ( ComFrontEndSceneState::SERVER_STARTING )", "%s < %s\n\t%i, %i", "s_frontEndScene_state", "ComFrontEndSceneState::SERVER_STARTING", v0, v1) )
      __debugbreak();
  }
  if ( Com_IsAnyLocalServerRunning() && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\qcommon\\com_frontend_scene.cpp", 939, ASSERT_TYPE_ASSERT, "(!Com_IsAnyLocalServerRunning())", (const char *)&queryFormat, "!Com_IsAnyLocalServerRunning()") )
    __debugbreak();
}

/*
==============
Com_FrontEndScene_OnErrorCleanup
==============
*/

void Com_FrontEndScene_OnErrorCleanup(void)
{
  Com_FrontEndScene_Shutdown();
}

/*
==============
Com_FrontEndScene_OnExitFrontEnd
==============
*/
void Com_FrontEndScene_OnExitFrontEnd(void)
{
  ComFrontEndSceneState v0; 
  char *fmt; 

  if ( Com_IsAnyLocalServerRunning() && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\qcommon\\com_frontend_scene.cpp", 922, ASSERT_TYPE_ASSERT, "(!Com_IsAnyLocalServerRunning())", (const char *)&queryFormat, "!Com_IsAnyLocalServerRunning()") )
    __debugbreak();
  v0 = s_frontEndScene_state;
  if ( s_frontEndScene_state )
  {
    if ( s_frontEndScene_state != DODGE )
    {
      if ( CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\qcommon\\com_frontend_scene.cpp", 927, ASSERT_TYPE_ASSERT, "(s_frontEndScene_state == ComFrontEndSceneState::STOPPED)", (const char *)&queryFormat, "s_frontEndScene_state == ComFrontEndSceneState::STOPPED") )
        __debugbreak();
      v0 = s_frontEndScene_state;
    }
    s_frontEndScene_state = MOVEMENT;
    s_frontEndScene_stateToggleTime = Sys_Milliseconds();
    s_frontEndScene_stateTime[0] = Sys_Milliseconds();
    LODWORD(fmt) = s_frontEndScene_stateTime[0] - s_frontEndScene_stateTime[v0];
    Com_Printf(16, "Com_FrontEndScene_SetState %i => %i (%i ms).\n", (unsigned int)v0, 0i64, fmt);
  }
}

/*
==============
Com_FrontEndScene_OnExitGameMode
==============
*/

void Com_FrontEndScene_OnExitGameMode(void)
{
  Com_FrontEndScene_Shutdown();
}

/*
==============
Com_FrontEndScene_OnMatchStartRequest
==============
*/

void Com_FrontEndScene_OnMatchStartRequest(void)
{
  Com_FrontEndScene_Shutdown();
}

/*
==============
Com_FrontEndScene_OnProcessResume
==============
*/
void Com_FrontEndScene_OnProcessResume(void)
{
  char *fmt; 
  ComFrontEndSceneState v1; 

  if ( (unsigned int)s_frontEndScene_state > DODGE )
  {
    v1 = s_frontEndScene_state;
    if ( CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\qcommon\\com_frontend_scene.cpp", 899, ASSERT_TYPE_ASSERT, "( ( s_frontEndScene_state == ComFrontEndSceneState::DISABLED || s_frontEndScene_state == ComFrontEndSceneState::STOPPED ) )", "( s_frontEndScene_state ) = %i", v1) )
      __debugbreak();
  }
  if ( Com_IsAnyLocalServerRunning() && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\qcommon\\com_frontend_scene.cpp", 900, ASSERT_TYPE_ASSERT, "(!Com_IsAnyLocalServerRunning())", (const char *)&queryFormat, "!Com_IsAnyLocalServerRunning()") )
    __debugbreak();
  if ( Com_FrontEndScene_IsSystemEnabled() && s_frontEndScene_state == MOVEMENT )
  {
    s_frontEndScene_state = DODGE;
    s_frontEndScene_stateToggleTime = Sys_Milliseconds();
    s_frontEndScene_stateTime[1] = Sys_Milliseconds();
    LODWORD(fmt) = s_frontEndScene_stateTime[1] - s_frontEndScene_stateTime[0];
    Com_Printf(16, "Com_FrontEndScene_SetState %i => %i (%i ms).\n", 0i64, 1i64, fmt);
  }
}

/*
==============
Com_FrontEndScene_RunStateMachine
==============
*/
void Com_FrontEndScene_RunStateMachine(double a1)
{
  ComFrontEndSceneState v1; 
  __int64 v2; 
  int ControllerFromClient; 
  __int64 v4; 
  __int64 v5; 
  __int64 v6; 
  const dvar_t *v7; 
  int integer; 
  __int64 v9; 
  const dvar_t *v10; 
  int v11; 
  char *fmt; 

  do
  {
    v1 = s_frontEndScene_state;
    switch ( s_frontEndScene_state )
    {
      case 0:
        return;
      case 1:
        Com_FrontEndScene_LoadWorld();
        break;
      case 2:
        if ( !s_frontEndScene_worldChecksum && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\qcommon\\com_frontend_scene.cpp", 340, ASSERT_TYPE_ASSERT, "(s_frontEndScene_worldChecksum)", (const char *)&queryFormat, "s_frontEndScene_worldChecksum") )
          __debugbreak();
        if ( !rgp.world && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\qcommon\\com_frontend_scene.cpp", 341, ASSERT_TYPE_ASSERT, "(rgp.world != nullptr)", (const char *)&queryFormat, "rgp.world != nullptr") )
          __debugbreak();
        if ( rgp.gameWorldSorted )
        {
          v2 = s_frontEndScene_state;
          s_frontEndScene_state = COUNT|DODGE;
          s_frontEndScene_stateToggleTime = Sys_Milliseconds();
          s_frontEndScene_stateTime[3] = Sys_Milliseconds();
          LODWORD(fmt) = s_frontEndScene_stateTime[3] - s_frontEndScene_stateTime[v2];
          Com_Printf(16, "Com_FrontEndScene_SetState %i => %i (%i ms).\n", (unsigned int)v2, 3i64, fmt);
        }
        break;
      case 3:
        if ( !s_frontEndScene_worldChecksum && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\qcommon\\com_frontend_scene.cpp", 405, ASSERT_TYPE_ASSERT, "(s_frontEndScene_worldChecksum)", (const char *)&queryFormat, "s_frontEndScene_worldChecksum") )
          __debugbreak();
        if ( !Com_GameMode_SupportsFeature(WEAPON_OFFHAND_END) && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\qcommon\\com_frontend_scene.cpp", 406, ASSERT_TYPE_ASSERT, "(Com_GameMode_SupportsFeature( Com_GameMode_Feature::FRONTEND_GAME_SCENE ))", (const char *)&queryFormat, "Com_GameMode_SupportsFeature( Com_GameMode_Feature::FRONTEND_GAME_SCENE )") )
          __debugbreak();
        ControllerFromClient = CL_Mgr_GetControllerFromClient(LOCAL_CLIENT_0);
        if ( FenceManager_IsFenceComplete(ControllerFromClient, FENCE_ONLINE) )
        {
          v4 = s_frontEndScene_state;
          s_frontEndScene_state = 4;
          s_frontEndScene_stateToggleTime = Sys_Milliseconds();
          s_frontEndScene_stateTime[4] = Sys_Milliseconds();
          LODWORD(fmt) = s_frontEndScene_stateTime[4] - s_frontEndScene_stateTime[v4];
          Com_Printf(16, "Com_FrontEndScene_SetState %i => %i (%i ms).\n", (unsigned int)v4, 4i64, fmt);
        }
        break;
      case 4:
        Com_FrontEndScene_CheckStartServer();
        break;
      case 5:
        Com_FrontEndScene_CheckSceneConnection(a1);
        break;
      case 6:
        if ( !s_frontEndScene_worldChecksum && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\qcommon\\com_frontend_scene.cpp", 512, ASSERT_TYPE_ASSERT, "(s_frontEndScene_worldChecksum)", (const char *)&queryFormat, "s_frontEndScene_worldChecksum") )
          __debugbreak();
        if ( !clientUIActives[0].frontEndSceneState[0] && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\qcommon\\com_frontend_scene.cpp", 513, ASSERT_TYPE_ASSERT, "(CL_GetLocalClientFrontEntState( LOCAL_CLIENT_0 ) != ClFrontEndSceneState::INACTIVE)", (const char *)&queryFormat, "CL_GetLocalClientFrontEntState( FRONTEND_SCENE_LOCAL_CLIENT ) != ClFrontEndSceneState::INACTIVE") )
          __debugbreak();
        if ( !CL_UIStreaming_IsRunningImages() && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\qcommon\\com_frontend_scene.cpp", 514, ASSERT_TYPE_ASSERT, "(CL_UIStreaming_IsRunningImages())", "%s\n\tWe expect ui streaming images to be active to service the front-end scene", "CL_UIStreaming_IsRunningImages()") )
          __debugbreak();
        if ( !Stream_LoadSync_IsActiveFrontend() && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\qcommon\\com_frontend_scene.cpp", 517, ASSERT_TYPE_ASSERT, "(Stream_LoadSync_IsActiveFrontend())", (const char *)&queryFormat, "Stream_LoadSync_IsActiveFrontend()") )
          __debugbreak();
        if ( Com_FrontendScene_CheckRenderableStreamingTimeout() )
          goto LABEL_50;
        if ( s_frontEndSceneControl.m_imageStreamingComplete )
        {
          v5 = s_frontEndScene_state;
          s_frontEndScene_state = COUNT|DODGE|0x4;
          s_frontEndScene_stateToggleTime = Sys_Milliseconds();
          s_frontEndScene_stateTime[7] = Sys_Milliseconds();
          LODWORD(fmt) = s_frontEndScene_stateTime[7] - s_frontEndScene_stateTime[v5];
          Com_Printf(16, "Com_FrontEndScene_SetState %i => %i (%i ms).\n", (unsigned int)v5, 7i64, fmt);
        }
        break;
      case 7:
        if ( !s_frontEndScene_worldChecksum && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\qcommon\\com_frontend_scene.cpp", 541, ASSERT_TYPE_ASSERT, "(s_frontEndScene_worldChecksum)", (const char *)&queryFormat, "s_frontEndScene_worldChecksum") )
          __debugbreak();
        if ( !clientUIActives[0].frontEndSceneState[0] && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\qcommon\\com_frontend_scene.cpp", 542, ASSERT_TYPE_ASSERT, "(CL_GetLocalClientFrontEntState( LOCAL_CLIENT_0 ) != ClFrontEndSceneState::INACTIVE)", (const char *)&queryFormat, "CL_GetLocalClientFrontEntState( FRONTEND_SCENE_LOCAL_CLIENT ) != ClFrontEndSceneState::INACTIVE") )
          __debugbreak();
        if ( !CL_UIStreaming_IsRunningImages() && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\qcommon\\com_frontend_scene.cpp", 543, ASSERT_TYPE_ASSERT, "(CL_UIStreaming_IsRunningImages())", "%s\n\tWe expect ui streaming images to be active to service the front-end scene", "CL_UIStreaming_IsRunningImages()") )
          __debugbreak();
        if ( !Stream_LoadSync_IsActiveFrontend() && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\qcommon\\com_frontend_scene.cpp", 546, ASSERT_TYPE_ASSERT, "(Stream_LoadSync_IsActiveFrontend())", (const char *)&queryFormat, "Stream_LoadSync_IsActiveFrontend()") )
          __debugbreak();
        goto LABEL_48;
      case 8:
        if ( !s_frontEndScene_worldChecksum && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\qcommon\\com_frontend_scene.cpp", 569, ASSERT_TYPE_ASSERT, "(s_frontEndScene_worldChecksum)", (const char *)&queryFormat, "s_frontEndScene_worldChecksum") )
          __debugbreak();
        if ( !CL_UIStreaming_IsRunningImages() && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\qcommon\\com_frontend_scene.cpp", 570, ASSERT_TYPE_ASSERT, "(CL_UIStreaming_IsRunningImages())", "%s\n\tWe expect ui streaming images to be active to service the front-end scene", "CL_UIStreaming_IsRunningImages()") )
          __debugbreak();
        if ( Stream_LoadSync_IsActiveFrontend() && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\qcommon\\com_frontend_scene.cpp", 573, ASSERT_TYPE_ASSERT, "(!Stream_LoadSync_IsActiveFrontend())", (const char *)&queryFormat, "!Stream_LoadSync_IsActiveFrontend()") )
          __debugbreak();
        v7 = DCONST_DVARINT_frontEndFastfilesMinTime;
        if ( !DCONST_DVARINT_frontEndFastfilesMinTime && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\universal\\dvar.h", 699, ASSERT_TYPE_ASSERT, "(dvar)", "%s\n\tDvar %s accessed after deregistration", "dvar", "frontEndFastfilesMinTime") )
          __debugbreak();
        Dvar_CheckFrontendServerThread(v7);
        integer = v7->current.integer;
        if ( integer + s_frontEndScene_stateToggleTime - Sys_Milliseconds() <= 0 && !s_frontEndSceneControl.m_imageStreamingComplete || s_frontEndSceneControl.m_imageStreamingForcedTime >= Sys_Milliseconds() )
        {
          Stream_LoadSync_BeginFrontend();
          v9 = s_frontEndScene_state;
          s_frontEndScene_state = 9;
          s_frontEndScene_stateToggleTime = Sys_Milliseconds();
          s_frontEndScene_stateTime[9] = Sys_Milliseconds();
          LODWORD(fmt) = s_frontEndScene_stateTime[9] - s_frontEndScene_stateTime[v9];
          Com_Printf(16, "Com_FrontEndScene_SetState %i => %i (%i ms).\n", (unsigned int)v9, 9i64, fmt);
        }
        break;
      case 9:
        if ( !s_frontEndScene_worldChecksum && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\qcommon\\com_frontend_scene.cpp", 593, ASSERT_TYPE_ASSERT, "(s_frontEndScene_worldChecksum)", (const char *)&queryFormat, "s_frontEndScene_worldChecksum") )
          __debugbreak();
        if ( !CL_UIStreaming_IsRunningImages() && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\qcommon\\com_frontend_scene.cpp", 594, ASSERT_TYPE_ASSERT, "(CL_UIStreaming_IsRunningImages())", "%s\n\tWe expect ui streaming images to be active to service the front-end scene", "CL_UIStreaming_IsRunningImages()") )
          __debugbreak();
        if ( !Stream_LoadSync_IsActiveFrontend() && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\qcommon\\com_frontend_scene.cpp", 597, ASSERT_TYPE_ASSERT, "(Stream_LoadSync_IsActiveFrontend())", (const char *)&queryFormat, "Stream_LoadSync_IsActiveFrontend()") )
          __debugbreak();
        v10 = DCONST_DVARINT_frontEndStreamingMinTime;
        if ( !DCONST_DVARINT_frontEndStreamingMinTime && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\universal\\dvar.h", 699, ASSERT_TYPE_ASSERT, "(dvar)", "%s\n\tDvar %s accessed after deregistration", "dvar", "frontEndStreamingMinTime") )
          __debugbreak();
        Dvar_CheckFrontendServerThread(v10);
        v11 = v10->current.integer;
        if ( v11 + s_frontEndScene_stateToggleTime - Sys_Milliseconds() <= 0 )
        {
LABEL_48:
          if ( s_frontEndSceneControl.m_imageStreamingComplete || Com_FrontendScene_CheckRenderableStreamingTimeout() )
          {
LABEL_50:
            Stream_LoadSync_EndFrontend();
            v6 = s_frontEndScene_state;
            s_frontEndScene_state = 8;
            s_frontEndScene_stateToggleTime = Sys_Milliseconds();
            s_frontEndScene_stateTime[8] = Sys_Milliseconds();
            LODWORD(fmt) = s_frontEndScene_stateTime[8] - s_frontEndScene_stateTime[v6];
            Com_Printf(16, "Com_FrontEndScene_SetState %i => %i (%i ms).\n", (unsigned int)v6, 8i64, fmt);
          }
        }
        break;
      default:
        if ( CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\qcommon\\com_frontend_scene.cpp", 769, ASSERT_TYPE_ASSERT, (const char *)&queryFormat.fmt + 3, "Unhandled state") )
          __debugbreak();
        break;
    }
  }
  while ( s_frontEndScene_state != v1 );
}

/*
==============
Com_FrontEndScene_SetForceStreamingDuration
==============
*/
void Com_FrontEndScene_SetForceStreamingDuration(const unsigned int durationMs)
{
  if ( !durationMs && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\qcommon\\com_frontend_scene.cpp", 805, ASSERT_TYPE_ASSERT, "(durationMs)", "%s\n\tMust request a non-zero duration", "durationMs") )
    __debugbreak();
  s_frontEndSceneControl.m_imageStreamingForcedTime = durationMs + Sys_Milliseconds();
}

/*
==============
Com_FrontEndScene_SetImageStreamingComplete
==============
*/
void Com_FrontEndScene_SetImageStreamingComplete(const bool hasRequiredImages)
{
  s_frontEndSceneControl.m_imageStreamingComplete = hasRequiredImages;
}

/*
==============
Com_FrontEndScene_SetImageStreamingRequestDisabled
==============
*/
void Com_FrontEndScene_SetImageStreamingRequestDisabled(const bool isRequestDisabled)
{
  s_frontEndSceneControl.m_imageStreamingRequestDisabled = isRequestDisabled;
}

/*
==============
Com_FrontEndScene_SetOpacityChangeTime
==============
*/
void Com_FrontEndScene_SetOpacityChangeTime(const int renderOpacityChangeTime)
{
  s_frontEndSceneControl.m_renderOpacityChangeTime = renderOpacityChangeTime;
}

/*
==============
Com_FrontEndScene_SetOpacityTargetOverride
==============
*/

void __fastcall Com_FrontEndScene_SetOpacityTargetOverride(double targetOpacity, double renderOpacity)
{
  char v2; 
  char v3; 

  __asm
  {
    vmovss  xmm2, cs:s_frontEndSceneControl.m_renderOpacity
    vucomiss xmm0, xmm2
    vmovss  cs:s_frontEndSceneControl.m_renderOpacityTarget, xmm0
  }
  s_frontEndSceneControl.m_renderOpacityGameOverrideValid = 1;
  if ( !v3 )
  {
    __asm { vcomiss xmm0, xmm2 }
    if ( v2 | v3 )
    {
      __asm
      {
        vcmpltss xmm0, xmm1, xmm2
        vblendvps xmm0, xmm2, xmm1, xmm0
        vmovss  cs:s_frontEndSceneControl.m_renderOpacity, xmm0
      }
    }
    else
    {
      __asm { vcomiss xmm1, xmm2 }
      if ( !(v2 | v3) )
        __asm { vmovss  cs:s_frontEndSceneControl.m_renderOpacity, xmm1 }
    }
  }
}

/*
==============
Com_FrontEndScene_Shutdown
==============
*/

void __fastcall Com_FrontEndScene_Shutdown(double _XMM0_8)
{
  __int64 v7; 
  char *fmt; 

  if ( (unsigned int)s_frontEndScene_state > DODGE )
  {
    __rdtsc();
    if ( Stream_LoadSync_IsActiveFrontend() )
      Stream_LoadSync_EndFrontend();
    Com_SyncThreads();
    Dvar_SetServerThreadCheckEnabled(0);
    if ( s_frontEndScene_state >= 5 )
      CL_MainMP_DisconnectFrontEndScene(LOCAL_CLIENT_0);
    CL_UIStreaming_StopStreamingTransients();
    Com_ShutdownFrontEnd();
    if ( rgp.world )
    {
      if ( CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\qcommon\\com_frontend_scene.cpp", 654, ASSERT_TYPE_ASSERT, "(rgp.world == nullptr)", (const char *)&queryFormat, "rgp.world == nullptr") )
        __debugbreak();
    }
    s_frontEndScene_worldChecksum = 0;
    s_frontEndScene_transmissionErrorTime = 0;
    __rdtsc();
    __asm
    {
      vxorps  xmm0, xmm0, xmm0
      vcvtsi2sd xmm0, xmm0, rax
      vmulsd  xmm1, xmm0, cs:?msecPerRawTimerTick@@3NA; double msecPerRawTimerTick
      vcvtsd2ss xmm2, xmm1, xmm1
      vcvtss2sd xmm2, xmm2, xmm2
      vmovq   r8, xmm2
    }
    Com_Printf(16, "Com_FrontEndScene_Shutdown: Took %f ms\n", *(double *)&_XMM2);
    v7 = s_frontEndScene_state;
    s_frontEndScene_state = DODGE;
    s_frontEndScene_stateToggleTime = Sys_Milliseconds();
    s_frontEndScene_stateTime[1] = Sys_Milliseconds();
    LODWORD(fmt) = s_frontEndScene_stateTime[1] - s_frontEndScene_stateTime[v7];
    Com_Printf(16, "Com_FrontEndScene_SetState %i => %i (%i ms).\n", (unsigned int)v7, 1i64, fmt);
  }
}

/*
==============
Com_FrontEndScene_ShutdownAndDisable
==============
*/
void Com_FrontEndScene_ShutdownAndDisable(double a1)
{
  ComFrontEndSceneState v1; 
  char *fmt; 

  Com_FrontEndScene_Shutdown(a1);
  v1 = s_frontEndScene_state;
  if ( s_frontEndScene_state )
  {
    if ( s_frontEndScene_state != DODGE )
    {
      if ( CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\qcommon\\com_frontend_scene.cpp", 873, ASSERT_TYPE_ASSERT, "(s_frontEndScene_state == ComFrontEndSceneState::STOPPED)", (const char *)&queryFormat, "s_frontEndScene_state == ComFrontEndSceneState::STOPPED") )
        __debugbreak();
      v1 = s_frontEndScene_state;
    }
    s_frontEndScene_state = MOVEMENT;
    s_frontEndScene_stateToggleTime = Sys_Milliseconds();
    s_frontEndScene_stateTime[0] = Sys_Milliseconds();
    LODWORD(fmt) = s_frontEndScene_stateTime[0] - s_frontEndScene_stateTime[v1];
    Com_Printf(16, "Com_FrontEndScene_SetState %i => %i (%i ms).\n", (unsigned int)v1, 0i64, fmt);
  }
}

/*
==============
Com_FrontEndScene_TransmissionError
==============
*/
void Com_FrontEndScene_TransmissionError(void)
{
  Com_PrintError(14, "Received a front-end scene transmission error, this isn't suppoed to happen");
  s_frontEndScene_transmissionErrorTime = Sys_Milliseconds();
}

/*
==============
Com_FrontendScene_CheckRenderableStreamingTimeout
==============
*/
char Com_FrontendScene_CheckRenderableStreamingTimeout()
{
  const dvar_t *v0; 
  int integer; 

  v0 = DCONST_DVARINT_frontEndSceneRenderStreamingTimeout;
  if ( !DCONST_DVARINT_frontEndSceneRenderStreamingTimeout && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\universal\\dvar.h", 699, ASSERT_TYPE_ASSERT, "(dvar)", "%s\n\tDvar %s accessed after deregistration", "dvar", "frontEndSceneRenderStreamingTimeout") )
    __debugbreak();
  Dvar_CheckFrontendServerThread(v0);
  integer = v0->current.integer;
  if ( integer + s_frontEndScene_stateToggleTime - Sys_Milliseconds() > 0 )
    return 0;
  Com_PrintError(30, "Com_FrontEndScene: Timed out renderable state (image streaming), too large of a scene or error streaming\n");
  return 1;
}

