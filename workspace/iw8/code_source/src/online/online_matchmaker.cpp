/*
==============
OnlineMatchmakerOmniscient::ResetBreak
==============
*/

void __fastcall OnlineMatchmakerOmniscient::ResetBreak(OnlineMatchmakerOmniscient *this)
{
  ?ResetBreak@OnlineMatchmakerOmniscient@@QEAAXXZ(this);
}

/*
==============
OnlineMatchmakerOmniscient::ShouldDisbandLobby
==============
*/

bool __fastcall OnlineMatchmakerOmniscient::ShouldDisbandLobby(OnlineMatchmakerOmniscient *this)
{
  return ?ShouldDisbandLobby@OnlineMatchmakerOmniscient@@QEBA_NXZ(this);
}

/*
==============
OnlineMatchmakerOmniscient::RunIniting
==============
*/

void __fastcall OnlineMatchmakerOmniscient::RunIniting(OnlineMatchmakerOmniscient *this)
{
  ?RunIniting@OnlineMatchmakerOmniscient@@AEAAXXZ(this);
}

/*
==============
tCallbacks::HasCallbackType
==============
*/

bool __fastcall tCallbacks::HasCallbackType(tCallbacks *this, tCallbacks::tCallbackTypes type)
{
  return ?HasCallbackType@tCallbacks@@QEAA_NW4tCallbackTypes@1@@Z(this, type);
}

/*
==============
tCallbacks::test
==============
*/

void __fastcall tCallbacks::test(tCallbacks *this)
{
  ?test@tCallbacks@@QEAAXXZ(this);
}

/*
==============
OnlineMatchmakerOmniscient::RunStartedMatchmaking
==============
*/

void __fastcall OnlineMatchmakerOmniscient::RunStartedMatchmaking(OnlineMatchmakerOmniscient *this)
{
  ?RunStartedMatchmaking@OnlineMatchmakerOmniscient@@AEAAXXZ(this);
}

/*
==============
OnlineMatchmakerOmniscient::IsStartingGame
==============
*/

bool __fastcall OnlineMatchmakerOmniscient::IsStartingGame(OnlineMatchmakerOmniscient *this)
{
  return ?IsStartingGame@OnlineMatchmakerOmniscient@@QEBA_NXZ(this);
}

/*
==============
OnlineMatchmakerOmniscient::JoinLobby
==============
*/

void __fastcall OnlineMatchmakerOmniscient::JoinLobby(OnlineMatchmakerOmniscient *this, const unsigned __int64 mmId, const unsigned __int64 lobbyId, const char *lobbyHostDoc, const unsigned int lobbyHostDocLength, const char *lobbyBackendDoc, const unsigned int lobbyBackendDocLength)
{
  ?JoinLobby@OnlineMatchmakerOmniscient@@QEAAX_K0PEBDI1I@Z(this, mmId, lobbyId, lobbyHostDoc, lobbyHostDocLength, lobbyBackendDoc, lobbyBackendDocLength);
}

/*
==============
OnlineMatchmakerOmniscient::GameInLobbyIntermission
==============
*/

void __fastcall OnlineMatchmakerOmniscient::GameInLobbyIntermission(OnlineMatchmakerOmniscient *this)
{
  ?GameInLobbyIntermission@OnlineMatchmakerOmniscient@@QEAAXXZ(this);
}

/*
==============
OnlineMatchmakerOmniscient::ResetInviteData
==============
*/

void __fastcall OnlineMatchmakerOmniscient::ResetInviteData(OnlineMatchmakerOmniscient *this)
{
  ?ResetInviteData@OnlineMatchmakerOmniscient@@QEAAXXZ(this);
}

/*
==============
OnlineAsyncMatchmakingEventHandler::msgLobbyDisbanded
==============
*/

void __fastcall OnlineAsyncMatchmakingEventHandler::msgLobbyDisbanded(OnlineAsyncMatchmakingEventHandler *this, unsigned __int64 lobbyID, bdAsyncMatchMakingEventHandler::LobbyDisbandedReason reason)
{
  ?msgLobbyDisbanded@OnlineAsyncMatchmakingEventHandler@@UEAAX_KW4LobbyDisbandedReason@bdAsyncMatchMakingEventHandler@@@Z(this, lobbyID, reason);
}

/*
==============
OnlineMatchmakerOmniscient::RunLobbyCreated
==============
*/

void __fastcall OnlineMatchmakerOmniscient::RunLobbyCreated(OnlineMatchmakerOmniscient *this)
{
  ?RunLobbyCreated@OnlineMatchmakerOmniscient@@AEAAXXZ(this);
}

/*
==============
MatchmakingData::GetMaxPingForTime
==============
*/

int __fastcall MatchmakingData::GetMaxPingForTime(MatchmakingData *this, int timeSeconds)
{
  return ?GetMaxPingForTime@MatchmakingData@@QEBAHH@Z(this, timeSeconds);
}

/*
==============
OnlineMatchmakerOmniscient::RunLobbyUpdatingDocument
==============
*/

void __fastcall OnlineMatchmakerOmniscient::RunLobbyUpdatingDocument(OnlineMatchmakerOmniscient *this)
{
  ?RunLobbyUpdatingDocument@OnlineMatchmakerOmniscient@@AEAAXXZ(this);
}

/*
==============
OnlineMatchmakerOmniscient::IsReadyToInitMatchmaking
==============
*/

bool __fastcall OnlineMatchmakerOmniscient::IsReadyToInitMatchmaking(OnlineMatchmakerOmniscient *this)
{
  return ?IsReadyToInitMatchmaking@OnlineMatchmakerOmniscient@@QEBA_NXZ(this);
}

/*
==============
OnlineMatchmakerOmniscient::PostMigrationNoLongerHost
==============
*/

void __fastcall OnlineMatchmakerOmniscient::PostMigrationNoLongerHost(OnlineMatchmakerOmniscient *this)
{
  ?PostMigrationNoLongerHost@OnlineMatchmakerOmniscient@@QEAAXXZ(this);
}

/*
==============
OnlineMatchmakerOmniscient::GetPrivateMatchId
==============
*/

PrivateMatchId *__fastcall OnlineMatchmakerOmniscient::GetPrivateMatchId(OnlineMatchmakerOmniscient *this, PrivateMatchId *result)
{
  return ?GetPrivateMatchId@OnlineMatchmakerOmniscient@@QEBA?AVPrivateMatchId@@XZ(this, result);
}

/*
==============
OnlineAsyncMatchmakingEventHandler::msgLobbyNotFound
==============
*/

void __fastcall OnlineAsyncMatchmakingEventHandler::msgLobbyNotFound(OnlineAsyncMatchmakingEventHandler *this, unsigned __int64 mmID, bdAsyncMatchMakingEventHandler::LobbyNotFoundCause cause)
{
  ?msgLobbyNotFound@OnlineAsyncMatchmakingEventHandler@@UEAAX_KW4LobbyNotFoundCause@bdAsyncMatchMakingEventHandler@@@Z(this, mmID, cause);
}

/*
==============
OnlineMatchmakerOmniscient::SerializePlayerInfoGameState
==============
*/

bool __fastcall OnlineMatchmakerOmniscient::SerializePlayerInfoGameState(OnlineMatchmakerOmniscient *this, bdJSONSerializer *json)
{
  return ?SerializePlayerInfoGameState@OnlineMatchmakerOmniscient@@AEBA_NAEAVbdJSONSerializer@@@Z(this, json);
}

/*
==============
OnlineMatchmakerOmniscient::LobbyDisbanded
==============
*/

void __fastcall OnlineMatchmakerOmniscient::LobbyDisbanded(OnlineMatchmakerOmniscient *this, const unsigned __int64 lobbyId)
{
  ?LobbyDisbanded@OnlineMatchmakerOmniscient@@QEAAX_K@Z(this, lobbyId);
}

/*
==============
OnlineMatchmakerOmniscient::Allow_CanLobbyMerge
==============
*/

bool __fastcall OnlineMatchmakerOmniscient::Allow_CanLobbyMerge(OnlineMatchmakerOmniscient *this)
{
  return ?Allow_CanLobbyMerge@OnlineMatchmakerOmniscient@@QEAA_NXZ(this);
}

/*
==============
OnlineMatchmakerOmniscient::GetGameState
==============
*/

const char *__fastcall OnlineMatchmakerOmniscient::GetGameState(OnlineMatchmakerOmniscient *this)
{
  return ?GetGameState@OnlineMatchmakerOmniscient@@QEBAPEBDXZ(this);
}

/*
==============
OnlineAsyncMatchmakingEventHandler::msgMatchMakingSearchStatus
==============
*/

void __fastcall OnlineAsyncMatchmakingEventHandler::msgMatchMakingSearchStatus(OnlineAsyncMatchmakingEventHandler *this, unsigned __int64 mmID, char *matchMakingSearchStatus, unsigned int statusBufferSize)
{
  ?msgMatchMakingSearchStatus@OnlineAsyncMatchmakingEventHandler@@UEAAX_KPEADI@Z(this, mmID, matchMakingSearchStatus, statusBufferSize);
}

/*
==============
OnlineMatchmakerOmniscient::GetPrivateMatchHost
==============
*/

XUID *__fastcall OnlineMatchmakerOmniscient::GetPrivateMatchHost(OnlineMatchmakerOmniscient *this, XUID *result)
{
  return ?GetPrivateMatchHost@OnlineMatchmakerOmniscient@@QEBA?AUXUID@@XZ(this, result);
}

/*
==============
OnlineMatchmakerOmniscient::SetPlayerPotentiallyJoining
==============
*/

void __fastcall OnlineMatchmakerOmniscient::SetPlayerPotentiallyJoining(OnlineMatchmakerOmniscient *this, OnlineMatchmakerOmniscient::Player *outplayer)
{
  ?SetPlayerPotentiallyJoining@OnlineMatchmakerOmniscient@@AEAAXAEAUPlayer@1@@Z(this, outplayer);
}

/*
==============
OnlineMatchmakerOmniscient::UpdateMergeability
==============
*/

bool __fastcall OnlineMatchmakerOmniscient::UpdateMergeability(OnlineMatchmakerOmniscient *this, bool enable)
{
  return ?UpdateMergeability@OnlineMatchmakerOmniscient@@QEAA_N_N@Z(this, enable);
}

/*
==============
OnlineMatchmakerOmniscient::AllPlayerAreReadyForMatchmaking
==============
*/

bool __fastcall OnlineMatchmakerOmniscient::AllPlayerAreReadyForMatchmaking(OnlineMatchmakerOmniscient *this)
{
  return ?AllPlayerAreReadyForMatchmaking@OnlineMatchmakerOmniscient@@AEBA_NXZ(this);
}

/*
==============
OnlineMatchmakerOmniscient::SetPartyPotentiallyJoining
==============
*/

void __fastcall OnlineMatchmakerOmniscient::SetPartyPotentiallyJoining(OnlineMatchmakerOmniscient *this, const XUID partyHostXuid)
{
  ?SetPartyPotentiallyJoining@OnlineMatchmakerOmniscient@@QEAAXUXUID@@@Z(this, partyHostXuid);
}

/*
==============
OnlineMatchmakerOmniscient::RunShutdownMatchmaking
==============
*/

void __fastcall OnlineMatchmakerOmniscient::RunShutdownMatchmaking(OnlineMatchmakerOmniscient *this)
{
  ?RunShutdownMatchmaking@OnlineMatchmakerOmniscient@@AEAAXXZ(this);
}

/*
==============
OnlineMatchmakerOmniscient::AddPlayerFromLocal
==============
*/

void __fastcall OnlineMatchmakerOmniscient::AddPlayerFromLocal(OnlineMatchmakerOmniscient *this, const XUID xuid, const XNADDR *addr, const int localControllerIndex, const bool isSplitscreenSecondaryPlayer)
{
  ?AddPlayerFromLocal@OnlineMatchmakerOmniscient@@QEAAXUXUID@@AEBUXNADDR@@H_N@Z(this, xuid, addr, localControllerIndex, isSplitscreenSecondaryPlayer);
}

/*
==============
OnlineMatchmakerOmniscient::InitForInviteJoin
==============
*/

bool __fastcall OnlineMatchmakerOmniscient::InitForInviteJoin(OnlineMatchmakerOmniscient *this, const int controllerIndex, const XUID uidToJoinOn, void (__fastcall *callback)(tCallbackResult, const unsigned __int64, const XSESSION_INFO *, void *), void *data)
{
  return ?InitForInviteJoin@OnlineMatchmakerOmniscient@@QEAA_NHUXUID@@P6AXW4tCallbackResult@@_KAEBVXSESSION_INFO@@PEAX@Z4@Z(this, controllerIndex, uidToJoinOn, callback, data);
}

/*
==============
OnlineMatchmakerOmniscient::SyncSplitscreenPlayers
==============
*/

void __fastcall OnlineMatchmakerOmniscient::SyncSplitscreenPlayers(OnlineMatchmakerOmniscient *this)
{
  ?SyncSplitscreenPlayers@OnlineMatchmakerOmniscient@@AEAAXXZ(this);
}

/*
==============
OnlineMatchmakerOmniscient::InitForLobbyIdJoin
==============
*/

bool __fastcall OnlineMatchmakerOmniscient::InitForLobbyIdJoin(OnlineMatchmakerOmniscient *this, const int controllerIndex, const unsigned __int64 lobbyIdToJoinOn, void (__fastcall *callback)(tCallbackResult, const unsigned __int64, const XSESSION_INFO *, void *), void *data)
{
  return ?InitForLobbyIdJoin@OnlineMatchmakerOmniscient@@QEAA_NH_KP6AXW4tCallbackResult@@0AEBVXSESSION_INFO@@PEAX@Z3@Z(this, controllerIndex, lobbyIdToJoinOn, callback, data);
}

/*
==============
OnlineMatchmakerOmniscient::GetTournamentID
==============
*/

unsigned __int64 __fastcall OnlineMatchmakerOmniscient::GetTournamentID(OnlineMatchmakerOmniscient *this)
{
  return ?GetTournamentID@OnlineMatchmakerOmniscient@@QEBA_KXZ(this);
}

/*
==============
OnlineMatchmakerOmniscient::staticTaskGetLobbyDocuments
==============
*/

void __fastcall OnlineMatchmakerOmniscient::staticTaskGetLobbyDocuments(GenericTask *task, eTaskManagerTaskState state)
{
  ?staticTaskGetLobbyDocuments@OnlineMatchmakerOmniscient@@CAXPEAVGenericTask@@W4eTaskManagerTaskState@@@Z(task, state);
}

/*
==============
OnlineAsyncMatchmakingEventHandler::Reset
==============
*/

void __fastcall OnlineAsyncMatchmakingEventHandler::Reset(OnlineAsyncMatchmakingEventHandler *this)
{
  ?Reset@OnlineAsyncMatchmakingEventHandler@@QEAAXXZ(this);
}

/*
==============
OnlineMatchmakerOmniscient::LobbyNotFound
==============
*/

void __fastcall OnlineMatchmakerOmniscient::LobbyNotFound(OnlineMatchmakerOmniscient *this, const unsigned __int64 mmId, const bdAsyncMatchMakingEventHandler::LobbyNotFoundCause cause, const char *optimizerErrorMessage)
{
  ?LobbyNotFound@OnlineMatchmakerOmniscient@@QEAAX_KW4LobbyNotFoundCause@bdAsyncMatchMakingEventHandler@@PEBD@Z(this, mmId, cause, optimizerErrorMessage);
}

/*
==============
OnlineMatchmakerOmniscient::HasMigrationList
==============
*/

bool __fastcall OnlineMatchmakerOmniscient::HasMigrationList(OnlineMatchmakerOmniscient *this)
{
  return ?HasMigrationList@OnlineMatchmakerOmniscient@@QEBA_NXZ(this);
}

/*
==============
OnlineMatchmakerOmniscient::IsPrivateMatch
==============
*/

bool __fastcall OnlineMatchmakerOmniscient::IsPrivateMatch(OnlineMatchmakerOmniscient *this)
{
  return ?IsPrivateMatch@OnlineMatchmakerOmniscient@@QEBA_NXZ(this);
}

/*
==============
OnlineMatchmakerOmniscient::TaskQosComplete
==============
*/

void __fastcall OnlineMatchmakerOmniscient::TaskQosComplete(OnlineMatchmakerOmniscient *this, GenericTask *task, eTaskManagerTaskState state)
{
  ?TaskQosComplete@OnlineMatchmakerOmniscient@@AEAAXPEAVGenericTask@@W4eTaskManagerTaskState@@@Z(this, task, state);
}

/*
==============
OnlineMatchmakerOmniscient::AmIHost
==============
*/

bool __fastcall OnlineMatchmakerOmniscient::AmIHost(OnlineMatchmakerOmniscient *this)
{
  return ?AmIHost@OnlineMatchmakerOmniscient@@QEBA_NXZ(this);
}

/*
==============
OnlineMatchmakerOmniscient::FindPlayer
==============
*/

bool __fastcall OnlineMatchmakerOmniscient::FindPlayer(OnlineMatchmakerOmniscient *this, const XUID *xuid, ntl::internal::list_iterator<OnlineMatchmakerOmniscient::Player,ntl::internal::list_node<OnlineMatchmakerOmniscient::Player>,OnlineMatchmakerOmniscient::Player *,OnlineMatchmakerOmniscient::Player &> *it)
{
  return ?FindPlayer@OnlineMatchmakerOmniscient@@AEAA_NAEBUXUID@@PEAV?$list_iterator@UPlayer@OnlineMatchmakerOmniscient@@V?$list_node@UPlayer@OnlineMatchmakerOmniscient@@@internal@ntl@@PEAU12@AEAU12@@internal@ntl@@@Z(this, xuid, it);
}

/*
==============
OnlineMatchmakerOmniscient::ParseMatchmakingIds
==============
*/

void __fastcall OnlineMatchmakerOmniscient::ParseMatchmakingIds(OnlineMatchmakerOmniscient *this, bdJSONDeserializer *backendDoc, MatchMakerOmniLobbyData *lobbyDataToBeFilledIn)
{
  ?ParseMatchmakingIds@OnlineMatchmakerOmniscient@@AEBAXAEAVbdJSONDeserializer@@AEAUMatchMakerOmniLobbyData@@@Z(this, backendDoc, lobbyDataToBeFilledIn);
}

/*
==============
OnlineMatchmakerOmniscient::Uninit
==============
*/

void __fastcall OnlineMatchmakerOmniscient::Uninit(OnlineMatchmakerOmniscient *this)
{
  ?Uninit@OnlineMatchmakerOmniscient@@QEAAXXZ(this);
}

/*
==============
OnlineMatchmakerOmniscient::EndGame
==============
*/

void __fastcall OnlineMatchmakerOmniscient::EndGame(OnlineMatchmakerOmniscient *this)
{
  ?EndGame@OnlineMatchmakerOmniscient@@QEAAXXZ(this);
}

/*
==============
OnlineBootId::GetBootId
==============
*/

unsigned __int64 __fastcall OnlineBootId::GetBootId()
{
  return ?GetBootId@OnlineBootId@@SA_KXZ();
}

/*
==============
OnlineMatchmakerOmniscient::GetPlayerStateString
==============
*/

const char *__fastcall OnlineMatchmakerOmniscient::GetPlayerStateString(OnlineMatchmakerOmniscient *this, const OnlineMatchmakerOmniscient::Player::PlayerState playerState)
{
  return ?GetPlayerStateString@OnlineMatchmakerOmniscient@@QEBAPEBDW4PlayerState@Player@1@@Z(this, playerState);
}

/*
==============
OnlineMatchmakerOmniscient::AddPlayerFromDW
==============
*/

void __fastcall OnlineMatchmakerOmniscient::AddPlayerFromDW(OnlineMatchmakerOmniscient *this, const XUID xuid, MemberStatus status)
{
  ?AddPlayerFromDW@OnlineMatchmakerOmniscient@@QEAAXUXUID@@W4MemberStatus@@@Z(this, xuid, status);
}

/*
==============
OnlineMatchmakerOmniscient::RunCancelMatchmaking
==============
*/

void __fastcall OnlineMatchmakerOmniscient::RunCancelMatchmaking(OnlineMatchmakerOmniscient *this)
{
  ?RunCancelMatchmaking@OnlineMatchmakerOmniscient@@AEAAXXZ(this);
}

/*
==============
OnlineMatchmakerOmniscient::IsInited
==============
*/

bool __fastcall OnlineMatchmakerOmniscient::IsInited(OnlineMatchmakerOmniscient *this)
{
  return ?IsInited@OnlineMatchmakerOmniscient@@QEBA_NXZ(this);
}

/*
==============
OnlineMatchmakerOmniscient::PumpLobby
==============
*/

void __fastcall OnlineMatchmakerOmniscient::PumpLobby(OnlineMatchmakerOmniscient *this)
{
  ?PumpLobby@OnlineMatchmakerOmniscient@@AEAAXXZ(this);
}

/*
==============
OnlineMatchmakerOmniscient::GetTournamentAxisTeam
==============
*/

team_t __fastcall OnlineMatchmakerOmniscient::GetTournamentAxisTeam(OnlineMatchmakerOmniscient *this)
{
  return ?GetTournamentAxisTeam@OnlineMatchmakerOmniscient@@QEBA?AW4team_t@@XZ(this);
}

/*
==============
OnlineMatchmakerOmniscient::ParseAdditionalPlayerSlots
==============
*/

void __fastcall OnlineMatchmakerOmniscient::ParseAdditionalPlayerSlots(OnlineMatchmakerOmniscient *this, bdJSONDeserializer *backendDoc, MatchMakerOmniLobbyData *lobbyDataToBeFilledIn)
{
  ?ParseAdditionalPlayerSlots@OnlineMatchmakerOmniscient@@AEBAXAEAVbdJSONDeserializer@@AEAUMatchMakerOmniLobbyData@@@Z(this, backendDoc, lobbyDataToBeFilledIn);
}

/*
==============
OnlineMatchmakerOmniscient::GetPlayerStatus
==============
*/

const char *__fastcall OnlineMatchmakerOmniscient::GetPlayerStatus(OnlineMatchmakerOmniscient *this, const unsigned int index)
{
  return ?GetPlayerStatus@OnlineMatchmakerOmniscient@@QEBAPEBDI@Z(this, index);
}

/*
==============
OnlineMatchmakerOmniscient::GetPlaylist
==============
*/

int __fastcall OnlineMatchmakerOmniscient::GetPlaylist(OnlineMatchmakerOmniscient *this)
{
  return ?GetPlaylist@OnlineMatchmakerOmniscient@@QEBAHXZ(this);
}

/*
==============
OnlineMatchmakerOmniscient::QosHosts
==============
*/

void __fastcall OnlineMatchmakerOmniscient::QosHosts(OnlineMatchmakerOmniscient *this, const unsigned __int64 transactionId, const bdArray<bdQoSRemoteAddr> *qosHosts, const unsigned __int16 numProbes)
{
  ?QosHosts@OnlineMatchmakerOmniscient@@QEAAX_KPEBV?$bdArray@VbdQoSRemoteAddr@@@@G@Z(this, transactionId, qosHosts, numProbes);
}

/*
==============
OnlineMatchmakerOmniscient::IsReadyToStart
==============
*/

bool __fastcall OnlineMatchmakerOmniscient::IsReadyToStart(OnlineMatchmakerOmniscient *this)
{
  return ?IsReadyToStart@OnlineMatchmakerOmniscient@@QEBA_NXZ(this);
}

/*
==============
OnlineMatchId::GetMatchId
==============
*/

unsigned __int64 __fastcall OnlineMatchId::GetMatchId()
{
  return ?GetMatchId@OnlineMatchId@@SA_KXZ();
}

/*
==============
OnlineMatchmakerOmniscient::TaskShutdownMatchmaking
==============
*/

void __fastcall OnlineMatchmakerOmniscient::TaskShutdownMatchmaking(OnlineMatchmakerOmniscient *this, GenericTask *task, eTaskManagerTaskState state)
{
  ?TaskShutdownMatchmaking@OnlineMatchmakerOmniscient@@AEAAXPEAVGenericTask@@W4eTaskManagerTaskState@@@Z(this, task, state);
}

/*
==============
OnlineAsyncMatchmakingEventHandler::msgExpectGame
==============
*/

void __fastcall OnlineAsyncMatchmakingEventHandler::msgExpectGame(OnlineAsyncMatchmakingEventHandler *this, unsigned __int64 lobbyID, char *lobbyBackendDoc, unsigned int lobbyBackendDocLength)
{
  ?msgExpectGame@OnlineAsyncMatchmakingEventHandler@@UEAAX_KPEADI@Z(this, lobbyID, lobbyBackendDoc, lobbyBackendDocLength);
}

/*
==============
OnlineMatchmakerOmniscient::RunLobbyDisbanding
==============
*/

void __fastcall OnlineMatchmakerOmniscient::RunLobbyDisbanding(OnlineMatchmakerOmniscient *this)
{
  ?RunLobbyDisbanding@OnlineMatchmakerOmniscient@@AEAAXXZ(this);
}

/*
==============
OnlineMatchmakerOmniscient::ParseFilters
==============
*/

void __fastcall OnlineMatchmakerOmniscient::ParseFilters(OnlineMatchmakerOmniscient *this, bdJSONDeserializer *backendDoc, MatchMakerOmniLobbyData *lobbyDataToBeFilledIn)
{
  ?ParseFilters@OnlineMatchmakerOmniscient@@AEBAXAEAVbdJSONDeserializer@@AEAUMatchMakerOmniLobbyData@@@Z(this, backendDoc, lobbyDataToBeFilledIn);
}

/*
==============
OnlineMatchmakerOmniscient::ResetMatchmaking
==============
*/

void __fastcall OnlineMatchmakerOmniscient::ResetMatchmaking(OnlineMatchmakerOmniscient *this)
{
  ?ResetMatchmaking@OnlineMatchmakerOmniscient@@QEAAXXZ(this);
}

/*
==============
OnlineMatchmakerOmniscient::IsLobbyHost
==============
*/

bool __fastcall OnlineMatchmakerOmniscient::IsLobbyHost(OnlineMatchmakerOmniscient *this)
{
  return ?IsLobbyHost@OnlineMatchmakerOmniscient@@QEBA_NXZ(this);
}

/*
==============
tCallbacks::Reset
==============
*/

void __fastcall tCallbacks::Reset(tCallbacks *this)
{
  ?Reset@tCallbacks@@QEAAXXZ(this);
}

/*
==============
OnlineMatchmakerOmniscient::RunNone
==============
*/

void __fastcall OnlineMatchmakerOmniscient::RunNone(OnlineMatchmakerOmniscient *this)
{
  ?RunNone@OnlineMatchmakerOmniscient@@AEAAXXZ(this);
}

/*
==============
OnlineMatchmakerOmniscient::staticTaskLobbyDisbanded
==============
*/

void __fastcall OnlineMatchmakerOmniscient::staticTaskLobbyDisbanded(GenericTask *task, eTaskManagerTaskState state)
{
  ?staticTaskLobbyDisbanded@OnlineMatchmakerOmniscient@@CAXPEAVGenericTask@@W4eTaskManagerTaskState@@@Z(task, state);
}

/*
==============
OnlineMatchmakerOmniscient::GameLobbyInFinalCountdown
==============
*/

void __fastcall OnlineMatchmakerOmniscient::GameLobbyInFinalCountdown(OnlineMatchmakerOmniscient *this)
{
  ?GameLobbyInFinalCountdown@OnlineMatchmakerOmniscient@@QEAAXXZ(this);
}

/*
==============
OnlineMatchmakerOmniscient::AreAnyPlayersConnecting
==============
*/

bool __fastcall OnlineMatchmakerOmniscient::AreAnyPlayersConnecting(OnlineMatchmakerOmniscient *this)
{
  return ?AreAnyPlayersConnecting@OnlineMatchmakerOmniscient@@QEBA_NXZ(this);
}

/*
==============
OnlineMatchmakerOmniscient::GetHostInfoForLobbyComplete
==============
*/

void __fastcall OnlineMatchmakerOmniscient::GetHostInfoForLobbyComplete(OnlineMatchmakerOmniscient *this, GenericTask *task, eTaskManagerTaskState state)
{
  ?GetHostInfoForLobbyComplete@OnlineMatchmakerOmniscient@@QEAAXPEAVGenericTask@@W4eTaskManagerTaskState@@@Z(this, task, state);
}

/*
==============
OnlineAsyncMatchmakingEventHandler::msgJoinLobby
==============
*/

void __fastcall OnlineAsyncMatchmakingEventHandler::msgJoinLobby(OnlineAsyncMatchmakingEventHandler *this, unsigned __int64 mmID, unsigned __int64 lobbyID, char *lobbyHostDoc, unsigned int lobbyHostDocLength, char *lobbyBackendDoc, unsigned int lobbyBackendDocLength)
{
  ?msgJoinLobby@OnlineAsyncMatchmakingEventHandler@@UEAAX_K0PEADI1I@Z(this, mmID, lobbyID, lobbyHostDoc, lobbyHostDocLength, lobbyBackendDoc, lobbyBackendDocLength);
}

/*
==============
OnlineMatchmakerOmniscient::CreateLobbyFailed
==============
*/

void __fastcall OnlineMatchmakerOmniscient::CreateLobbyFailed(OnlineMatchmakerOmniscient *this, const unsigned __int64 lobbyId)
{
  ?CreateLobbyFailed@OnlineMatchmakerOmniscient@@QEAAX_K@Z(this, lobbyId);
}

/*
==============
OnlineMatchmakerOmniscient::RunLobbyJoining
==============
*/

void __fastcall OnlineMatchmakerOmniscient::RunLobbyJoining(OnlineMatchmakerOmniscient *this)
{
  ?RunLobbyJoining@OnlineMatchmakerOmniscient@@AEAAXXZ(this);
}

/*
==============
OnlineAsyncMatchmakingEventHandler::msgJoinTournament
==============
*/

void __fastcall OnlineAsyncMatchmakingEventHandler::msgJoinTournament(OnlineAsyncMatchmakingEventHandler *this, unsigned __int64 mmID, const char *tournamentState, unsigned int tournamentStateLength)
{
  ?msgJoinTournament@OnlineAsyncMatchmakingEventHandler@@UEAAX_KPEBDI@Z(this, mmID, tournamentState, tournamentStateLength);
}

/*
==============
OnlineMatchmakerOmniscient::GetHostInfo
==============
*/

const XSESSION_INFO *__fastcall OnlineMatchmakerOmniscient::GetHostInfo(OnlineMatchmakerOmniscient *this)
{
  return ?GetHostInfo@OnlineMatchmakerOmniscient@@QEBAPEBVXSESSION_INFO@@XZ(this);
}

/*
==============
OnlineMatchmakerOmniscient::ReadyToStartGame
==============
*/

void __fastcall OnlineMatchmakerOmniscient::ReadyToStartGame(OnlineMatchmakerOmniscient *this)
{
  ?ReadyToStartGame@OnlineMatchmakerOmniscient@@QEAAXXZ(this);
}

/*
==============
OnlineMatchmakerOmniscient::IsDedicatedServerLobby
==============
*/

bool __fastcall OnlineMatchmakerOmniscient::IsDedicatedServerLobby(OnlineMatchmakerOmniscient *this)
{
  return ?IsDedicatedServerLobby@OnlineMatchmakerOmniscient@@QEBA_NXZ(this);
}

/*
==============
OnlineMatchmakerOmniscient::TaskCancelMatchmaking
==============
*/

void __fastcall OnlineMatchmakerOmniscient::TaskCancelMatchmaking(OnlineMatchmakerOmniscient *this, GenericTask *task, eTaskManagerTaskState state)
{
  ?TaskCancelMatchmaking@OnlineMatchmakerOmniscient@@AEAAXPEAVGenericTask@@W4eTaskManagerTaskState@@@Z(this, task, state);
}

/*
==============
OnlineMatchmakerOmniscient::GetStatus
==============
*/

const char *__fastcall OnlineMatchmakerOmniscient::GetStatus(OnlineMatchmakerOmniscient *this)
{
  return ?GetStatus@OnlineMatchmakerOmniscient@@QEBAPEBDXZ(this);
}

/*
==============
OnlineMatchmakerOmniscient::UpdateAdditionalPlayerSlots
==============
*/

void __fastcall OnlineMatchmakerOmniscient::UpdateAdditionalPlayerSlots(OnlineMatchmakerOmniscient *this, const ntl::fixed_list<PlayerValue<int>,200,0> *additionalSlotsRequestedList)
{
  ?UpdateAdditionalPlayerSlots@OnlineMatchmakerOmniscient@@AEAAXAEBV?$fixed_list@U?$PlayerValue@H@@$0MI@$0A@@ntl@@@Z(this, additionalSlotsRequestedList);
}

/*
==============
OnlineAsyncMatchmakingEventHandler::msgCreateNewLobby
==============
*/

void __fastcall OnlineAsyncMatchmakingEventHandler::msgCreateNewLobby(OnlineAsyncMatchmakingEventHandler *this, unsigned __int64 mmID, unsigned __int64 lobbyID, unsigned __int64 updateID, char *lobbyHostDoc, unsigned int lobbyHostDocLength, char *lobbyBackendDoc, unsigned int lobbyBackendDocLength)
{
  ?msgCreateNewLobby@OnlineAsyncMatchmakingEventHandler@@UEAAX_K00PEADI1I@Z(this, mmID, lobbyID, updateID, lobbyHostDoc, lobbyHostDocLength, lobbyBackendDoc, lobbyBackendDocLength);
}

/*
==============
OnlineMatchmakerOmniscient::GetUIState
==============
*/

MatchmakerUIState __fastcall OnlineMatchmakerOmniscient::GetUIState(OnlineMatchmakerOmniscient *this, MatchmakerUIStateData *outExtraInfo)
{
  return ?GetUIState@OnlineMatchmakerOmniscient@@QEBA?AW4MatchmakerUIState@@PEAUMatchmakerUIStateData@@@Z(this, outExtraInfo);
}

/*
==============
OnlineMatchmakerOmniscient::RunWaitingForPlayers
==============
*/

void __fastcall OnlineMatchmakerOmniscient::RunWaitingForPlayers(OnlineMatchmakerOmniscient *this)
{
  ?RunWaitingForPlayers@OnlineMatchmakerOmniscient@@AEAAXXZ(this);
}

/*
==============
OnlineAsyncMatchmakingEventHandler::msgLobbyNotFound
==============
*/

void __fastcall OnlineAsyncMatchmakingEventHandler::msgLobbyNotFound(OnlineAsyncMatchmakingEventHandler *this, unsigned __int64 mmID, bdAsyncMatchMakingEventHandler::LobbyNotFoundCause cause, const char *optimizerErrorMessage)
{
  ?msgLobbyNotFound@OnlineAsyncMatchmakingEventHandler@@UEAAX_KW4LobbyNotFoundCause@bdAsyncMatchMakingEventHandler@@PEBD@Z(this, mmID, cause, optimizerErrorMessage);
}

/*
==============
OnlineMatchmakerOmniscient::Log
==============
*/

void __fastcall OnlineMatchmakerOmniscient::Log(OnlineMatchmakerOmniscient *this, const char *action, const char *msg_string, const char *backendDoc, const char *hostDoc, const unsigned __int64 demonwareTaskId)
{
  ?Log@OnlineMatchmakerOmniscient@@QEBAXPEBD000_K@Z(this, action, msg_string, backendDoc, hostDoc, demonwareTaskId);
}

/*
==============
OnlineMatchmakerOmniscient::GetCurrentLobbyId
==============
*/

unsigned __int64 __fastcall OnlineMatchmakerOmniscient::GetCurrentLobbyId(OnlineMatchmakerOmniscient *this)
{
  return ?GetCurrentLobbyId@OnlineMatchmakerOmniscient@@QEBA_KXZ(this);
}

/*
==============
OnlineMatchmakerOmniscient::FindPlayer
==============
*/

bool __fastcall OnlineMatchmakerOmniscient::FindPlayer(OnlineMatchmakerOmniscient *this, const XUID *xuid, ntl::internal::list_iterator<OnlineMatchmakerOmniscient::Player,ntl::internal::list_node<OnlineMatchmakerOmniscient::Player> const ,OnlineMatchmakerOmniscient::Player const *,OnlineMatchmakerOmniscient::Player const &> *it)
{
  return ?FindPlayer@OnlineMatchmakerOmniscient@@AEBA_NAEBUXUID@@PEAV?$list_iterator@UPlayer@OnlineMatchmakerOmniscient@@$$CBV?$list_node@UPlayer@OnlineMatchmakerOmniscient@@@internal@ntl@@PEBU12@AEBU12@@internal@ntl@@@Z(this, xuid, it);
}

/*
==============
OnlineMatchmakerOmniscient::ParseExpectedPlayers
==============
*/

void __fastcall OnlineMatchmakerOmniscient::ParseExpectedPlayers(OnlineMatchmakerOmniscient *this, bdJSONDeserializer *backendDoc, MatchMakerOmniLobbyData *lobbyDataToBeFilledIn)
{
  ?ParseExpectedPlayers@OnlineMatchmakerOmniscient@@AEBAXAEAVbdJSONDeserializer@@AEAUMatchMakerOmniLobbyData@@@Z(this, backendDoc, lobbyDataToBeFilledIn);
}

/*
==============
base64EncodeAndSerializeToJSON
==============
*/

bool __fastcall base64EncodeAndSerializeToJSON(bdJSONSerializer *json, const char *keyName, const char *data, const unsigned int dataSize, char *tempBase64Buf, const unsigned int tempBase64BufSize)
{
  return ?base64EncodeAndSerializeToJSON@@YA_NAEAVbdJSONSerializer@@PEBDPEBCIPEADI@Z(json, keyName, data, dataSize, tempBase64Buf, tempBase64BufSize);
}

/*
==============
OnlineMatchmakerOmniscient::UpdateHostDoc
==============
*/

void __fastcall OnlineMatchmakerOmniscient::UpdateHostDoc(OnlineMatchmakerOmniscient *this)
{
  ?UpdateHostDoc@OnlineMatchmakerOmniscient@@AEAAXXZ(this);
}

/*
==============
OnlineMatchmakerOmniscient::AddPlayersFromParty
==============
*/

void __fastcall OnlineMatchmakerOmniscient::AddPlayersFromParty(OnlineMatchmakerOmniscient *this, const PartyData *const party)
{
  ?AddPlayersFromParty@OnlineMatchmakerOmniscient@@QEAAXQEBUPartyData@@@Z(this, party);
}

/*
==============
OnlineAsyncMatchmakingEventHandler::msgUpdateTournament
==============
*/

void __fastcall OnlineAsyncMatchmakingEventHandler::msgUpdateTournament(OnlineAsyncMatchmakingEventHandler *this, const char *tournamentState, unsigned int tournamentStateLength)
{
  ?msgUpdateTournament@OnlineAsyncMatchmakingEventHandler@@UEAAXPEBDI@Z(this, tournamentState, tournamentStateLength);
}

/*
==============
OnlineMatchmakerOmniscient::RunLobbyNone
==============
*/

void __fastcall OnlineMatchmakerOmniscient::RunLobbyNone(OnlineMatchmakerOmniscient *this)
{
  ?RunLobbyNone@OnlineMatchmakerOmniscient@@AEAAXXZ(this);
}

/*
==============
OnlineMatchmakerOmniscient::StartMatchmaking
==============
*/

bool __fastcall OnlineMatchmakerOmniscient::StartMatchmaking(OnlineMatchmakerOmniscient *this)
{
  return ?StartMatchmaking@OnlineMatchmakerOmniscient@@AEAA_NXZ(this);
}

/*
==============
OnlineMatchmakerOmniscient::AddLocalPlayer
==============
*/

void __fastcall OnlineMatchmakerOmniscient::AddLocalPlayer(OnlineMatchmakerOmniscient *this, OnlineMatchmakerOmniscient::Player *outplayer)
{
  ?AddLocalPlayer@OnlineMatchmakerOmniscient@@AEAAXAEAUPlayer@1@@Z(this, outplayer);
}

/*
==============
OnlineMatchmakerOmniscient::RunShuttingDownMatchmaking
==============
*/

void __fastcall OnlineMatchmakerOmniscient::RunShuttingDownMatchmaking(OnlineMatchmakerOmniscient *this)
{
  ?RunShuttingDownMatchmaking@OnlineMatchmakerOmniscient@@AEAAXXZ(this);
}

/*
==============
OnlineMatchmakerOmniscient::RunStartMatchmaking
==============
*/

void __fastcall OnlineMatchmakerOmniscient::RunStartMatchmaking(OnlineMatchmakerOmniscient *this)
{
  ?RunStartMatchmaking@OnlineMatchmakerOmniscient@@AEAAXXZ(this);
}

/*
==============
OnlineMatchmakerOmniscient::TurnOffBackfill_JIP
==============
*/

void __fastcall OnlineMatchmakerOmniscient::TurnOffBackfill_JIP(OnlineMatchmakerOmniscient *this)
{
  ?TurnOffBackfill_JIP@OnlineMatchmakerOmniscient@@QEAAXXZ(this);
}

/*
==============
OnlineMatchmakerOmniscient::staticTaskCancelMatchmaking
==============
*/

void __fastcall OnlineMatchmakerOmniscient::staticTaskCancelMatchmaking(GenericTask *task, eTaskManagerTaskState state)
{
  ?staticTaskCancelMatchmaking@OnlineMatchmakerOmniscient@@CAXPEAVGenericTask@@W4eTaskManagerTaskState@@@Z(task, state);
}

/*
==============
OnlineMatchmakerOmniscient::GetPlaylistCategory
==============
*/

int __fastcall OnlineMatchmakerOmniscient::GetPlaylistCategory(OnlineMatchmakerOmniscient *this)
{
  return ?GetPlaylistCategory@OnlineMatchmakerOmniscient@@QEBAHXZ(this);
}

/*
==============
OnlineMatchmakerOmniscient::IsShuttingDown
==============
*/

bool __fastcall OnlineMatchmakerOmniscient::IsShuttingDown(OnlineMatchmakerOmniscient *this)
{
  return ?IsShuttingDown@OnlineMatchmakerOmniscient@@QEBA_NXZ(this);
}

/*
==============
OnlineMatchmakerOmniscient::RegisterLUIFunctions
==============
*/

void __fastcall OnlineMatchmakerOmniscient::RegisterLUIFunctions(lua_State *luaVM)
{
  ?RegisterLUIFunctions@OnlineMatchmakerOmniscient@@SAXPEAUlua_State@@@Z(luaVM);
}

/*
==============
OnlineMatchmakerOmniscient::RunCancelingMatchmaking
==============
*/

void __fastcall OnlineMatchmakerOmniscient::RunCancelingMatchmaking(OnlineMatchmakerOmniscient *this)
{
  ?RunCancelingMatchmaking@OnlineMatchmakerOmniscient@@AEAAXXZ(this);
}

/*
==============
tCallbacks::GetNextCallbackType
==============
*/

bool __fastcall tCallbacks::GetNextCallbackType(tCallbacks *this, tCallbacks::tCallbackTypes *retType, tCallbackResult *result)
{
  return ?GetNextCallbackType@tCallbacks@@QEAA_NPEAW4tCallbackTypes@1@PEAW4tCallbackResult@@@Z(this, retType, result);
}

/*
==============
OnlineMatchmakerOmniscient::TaskGetMatchmakingToken
==============
*/

void __fastcall OnlineMatchmakerOmniscient::TaskGetMatchmakingToken(OnlineMatchmakerOmniscient *this, GenericTask *task, eTaskManagerTaskState state)
{
  ?TaskGetMatchmakingToken@OnlineMatchmakerOmniscient@@AEAAXPEAVGenericTask@@W4eTaskManagerTaskState@@@Z(this, task, state);
}

/*
==============
MatchMakerOmniLobbyData::Reset
==============
*/

void __fastcall MatchMakerOmniLobbyData::Reset(MatchMakerOmniLobbyData *this)
{
  ?Reset@MatchMakerOmniLobbyData@@QEAAXXZ(this);
}

/*
==============
OnlineAsyncMatchmakingEventHandler::msgQoSHosts
==============
*/

void __fastcall OnlineAsyncMatchmakingEventHandler::msgQoSHosts(OnlineAsyncMatchmakingEventHandler *this, unsigned __int64 transactionID, bdArray<bdQoSRemoteAddr> *qosHosts, unsigned __int16 numProbes)
{
  ?msgQoSHosts@OnlineAsyncMatchmakingEventHandler@@UEAAX_KPEAV?$bdArray@VbdQoSRemoteAddr@@@@G@Z(this, transactionID, qosHosts, numProbes);
}

/*
==============
OnlineMatchmakerOmniscient::IsPlayerAllowedToJoin
==============
*/

bool __fastcall OnlineMatchmakerOmniscient::IsPlayerAllowedToJoin(OnlineMatchmakerOmniscient *this, const XUID xuid, const int numAdditionalSlotsRequired)
{
  return ?IsPlayerAllowedToJoin@OnlineMatchmakerOmniscient@@AEBA_NUXUID@@H@Z(this, xuid, numAdditionalSlotsRequired);
}

/*
==============
OnlineMatchmakerOmniscient::GetMapWeight
==============
*/

double __fastcall OnlineMatchmakerOmniscient::GetMapWeight(OnlineMatchmakerOmniscient *this, const int map_index)
{
  double result; 

  *(float *)&result = ?GetMapWeight@OnlineMatchmakerOmniscient@@QEBAMH@Z(this, map_index);
  return result;
}

/*
==============
OnlineMatchmakerOmniscient::staticTaskStartMatchmaking
==============
*/

void __fastcall OnlineMatchmakerOmniscient::staticTaskStartMatchmaking(GenericTask *task, eTaskManagerTaskState state)
{
  ?staticTaskStartMatchmaking@OnlineMatchmakerOmniscient@@CAXPEAVGenericTask@@W4eTaskManagerTaskState@@@Z(task, state);
}

/*
==============
OnlineMatchmakerOmniscient::InitForMatchmaking
==============
*/

bool __fastcall OnlineMatchmakerOmniscient::InitForMatchmaking(OnlineMatchmakerOmniscient *this, const OmniscientMatchmakingParams *params)
{
  return ?InitForMatchmaking@OnlineMatchmakerOmniscient@@QEAA_NAEBUOmniscientMatchmakingParams@@@Z(this, params);
}

/*
==============
OnlineMatchmakerOmniscient::RunFailure
==============
*/

void __fastcall OnlineMatchmakerOmniscient::RunFailure(OnlineMatchmakerOmniscient *this)
{
  ?RunFailure@OnlineMatchmakerOmniscient@@AEAAXXZ(this);
}

/*
==============
OnlineMatchmakerOmniscient::GetMatchmakingGameType
==============
*/

MatchmakingGameType __fastcall OnlineMatchmakerOmniscient::GetMatchmakingGameType(OnlineMatchmakerOmniscient *this)
{
  return ?GetMatchmakingGameType@OnlineMatchmakerOmniscient@@QEBA?AW4MatchmakingGameType@@XZ(this);
}

/*
==============
OnlineMatchId::SetMatchId
==============
*/

void __fastcall OnlineMatchId::SetMatchId(const unsigned __int64 matchId)
{
  ?SetMatchId@OnlineMatchId@@SAX_K@Z(matchId);
}

/*
==============
OnlineMatchmakerOmniscient::Init
==============
*/

bool __fastcall OnlineMatchmakerOmniscient::Init(OnlineMatchmakerOmniscient *this, const int localControllerIndex)
{
  return ?Init@OnlineMatchmakerOmniscient@@QEAA_NH@Z(this, localControllerIndex);
}

/*
==============
OnlineMatchmakerOmniscient::SetLobbyState
==============
*/

void __fastcall OnlineMatchmakerOmniscient::SetLobbyState(OnlineMatchmakerOmniscient *this, MatchmakerLobbyState newState)
{
  ?SetLobbyState@OnlineMatchmakerOmniscient@@AEAAXW4MatchmakerLobbyState@@@Z(this, newState);
}

/*
==============
OnlineMatchmakerOmniscient::RunLobbyIniting
==============
*/

void __fastcall OnlineMatchmakerOmniscient::RunLobbyIniting(OnlineMatchmakerOmniscient *this)
{
  ?RunLobbyIniting@OnlineMatchmakerOmniscient@@AEAAXXZ(this);
}

/*
==============
OnlineMatchmakerOmniscient::ParseTeamInfo
==============
*/

bool __fastcall OnlineMatchmakerOmniscient::ParseTeamInfo(OnlineMatchmakerOmniscient *this, bdJSONDeserializer *backendDoc, MatchMakerOmniLobbyData *lobbyDataToBeFilledIn)
{
  return ?ParseTeamInfo@OnlineMatchmakerOmniscient@@AEBA_NAEAVbdJSONDeserializer@@AEAUMatchMakerOmniLobbyData@@@Z(this, backendDoc, lobbyDataToBeFilledIn);
}

/*
==============
OnlineMatchmakerOmniscient::ApplyDvarOverrides
==============
*/

void __fastcall OnlineMatchmakerOmniscient::ApplyDvarOverrides(OnlineMatchmakerOmniscient *this)
{
  ?ApplyDvarOverrides@OnlineMatchmakerOmniscient@@QEAAXXZ(this);
}

/*
==============
OnlineMatchmakerOmniscient::UpdateServiceLevels
==============
*/

void __fastcall OnlineMatchmakerOmniscient::UpdateServiceLevels(OnlineMatchmakerOmniscient *this, const ntl::fixed_list<XUID,200,0> *xuidList, const bool isPaidUser)
{
  ?UpdateServiceLevels@OnlineMatchmakerOmniscient@@AEAAXAEBV?$fixed_list@UXUID@@$0MI@$0A@@ntl@@_N@Z(this, xuidList, isPaidUser);
}

/*
==============
OnlineAsyncMatchmakingEventHandler::Init
==============
*/

bool __fastcall OnlineAsyncMatchmakingEventHandler::Init(OnlineAsyncMatchmakingEventHandler *this, OnlineMatchmakerOmniscient *matchmaker)
{
  return ?Init@OnlineAsyncMatchmakingEventHandler@@QEAA_NPEAVOnlineMatchmakerOmniscient@@@Z(this, matchmaker);
}

/*
==============
OnlineAsyncMatchmakingEventHandler::msgMergeIntoLobby
==============
*/

void __fastcall OnlineAsyncMatchmakingEventHandler::msgMergeIntoLobby(OnlineAsyncMatchmakingEventHandler *this, unsigned __int64 mmID, unsigned __int64 sourceLobbyID, unsigned __int64 destinationLobbyID, char *lobbyHostDoc, unsigned int lobbyHostDocLength, char *lobbyBackendDoc, unsigned int lobbyBackendDocLength)
{
  ?msgMergeIntoLobby@OnlineAsyncMatchmakingEventHandler@@UEAAX_K00PEADI1I@Z(this, mmID, sourceLobbyID, destinationLobbyID, lobbyHostDoc, lobbyHostDocLength, lobbyBackendDoc, lobbyBackendDocLength);
}

/*
==============
OnlineMatchId::GetMatchIdString
==============
*/

char *__fastcall OnlineMatchId::GetMatchIdString()
{
  return ?GetMatchIdString@OnlineMatchId@@SAPEADXZ();
}

/*
==============
OnlineMatchmakerOmniscient::RunLobbyDisband
==============
*/

void __fastcall OnlineMatchmakerOmniscient::RunLobbyDisband(OnlineMatchmakerOmniscient *this)
{
  ?RunLobbyDisband@OnlineMatchmakerOmniscient@@AEAAXXZ(this);
}

/*
==============
OnlineBootId::GetBootIdString
==============
*/

char *__fastcall OnlineBootId::GetBootIdString()
{
  return ?GetBootIdString@OnlineBootId@@SAPEADXZ();
}

/*
==============
OnlineMatchmakerOmniscient::GetUpdateId
==============
*/

unsigned __int64 __fastcall OnlineMatchmakerOmniscient::GetUpdateId(OnlineMatchmakerOmniscient *this)
{
  return ?GetUpdateId@OnlineMatchmakerOmniscient@@QEBA_KXZ(this);
}

/*
==============
OnlineMatchmakerOmniscient::SetMatchmakingTokenForUID
==============
*/

void __fastcall OnlineMatchmakerOmniscient::SetMatchmakingTokenForUID(OnlineMatchmakerOmniscient *this, const XUID uid, const unsigned __int64 matchmakingToken, const bool isPrimaryAccount)
{
  ?SetMatchmakingTokenForUID@OnlineMatchmakerOmniscient@@QEAAXUXUID@@_K_N@Z(this, uid, matchmakingToken, isPrimaryAccount);
}

/*
==============
OnlineMatchmakerOmniscient::SetCallbacks
==============
*/

void __fastcall OnlineMatchmakerOmniscient::SetCallbacks(OnlineMatchmakerOmniscient *this, void (__fastcall *createCallback)(const unsigned __int64, const XSESSION_INFO *, const bool), void (__fastcall *joinCallback)(const unsigned __int64, const XUID, const XSESSION_INFO *, const bool), void (__fastcall *lobbyUpdatedCallback)(const unsigned __int64), void (__fastcall *lobbyDisbandedCallback)(const unsigned __int64), void (__fastcall *failureCallback)(), void (__fastcall *tokenUpdateCallback)(const XUID, const unsigned __int64, const bool), bool (__fastcall *requestMatchmakingInfoCallback)(const XUID), void *data)
{
  ?SetCallbacks@OnlineMatchmakerOmniscient@@QEAAXP6AX_KAEBVXSESSION_INFO@@_N@ZP6AX0UXUID@@12@ZP6AX0@Z6P6AXXZP6AX402@ZP6A_N4@ZPEAX@Z(this, createCallback, joinCallback, lobbyUpdatedCallback, lobbyDisbandedCallback, failureCallback, tokenUpdateCallback, requestMatchmakingInfoCallback, data);
}

/*
==============
OnlineMatchmakerOmniscient::TaskLobbyDisbanded
==============
*/

void __fastcall OnlineMatchmakerOmniscient::TaskLobbyDisbanded(OnlineMatchmakerOmniscient *this, GenericTask *task, eTaskManagerTaskState state)
{
  ?TaskLobbyDisbanded@OnlineMatchmakerOmniscient@@AEAAXPEAVGenericTask@@W4eTaskManagerTaskState@@@Z(this, task, state);
}

/*
==============
OnlineMatchmakerOmniscient::StartNextSearchRound
==============
*/

bool __fastcall OnlineMatchmakerOmniscient::StartNextSearchRound(OnlineMatchmakerOmniscient *this)
{
  return ?StartNextSearchRound@OnlineMatchmakerOmniscient@@QEAA_NXZ(this);
}

/*
==============
OnlineMatchmakerOmniscient::IsGameStarted
==============
*/

bool __fastcall OnlineMatchmakerOmniscient::IsGameStarted(OnlineMatchmakerOmniscient *this)
{
  return ?IsGameStarted@OnlineMatchmakerOmniscient@@QEBA_NXZ(this);
}

/*
==============
OnlineMatchmakerOmniscient::RunReadyToStartMatchmaking
==============
*/

void __fastcall OnlineMatchmakerOmniscient::RunReadyToStartMatchmaking(OnlineMatchmakerOmniscient *this)
{
  ?RunReadyToStartMatchmaking@OnlineMatchmakerOmniscient@@AEAAXXZ(this);
}

/*
==============
OnlineMatchmakerOmniscient::UpdateMatchmaking
==============
*/

void __fastcall OnlineMatchmakerOmniscient::UpdateMatchmaking(OnlineMatchmakerOmniscient *this)
{
  ?UpdateMatchmaking@OnlineMatchmakerOmniscient@@AEAAXXZ(this);
}

/*
==============
OnlineMatchmakerOmniscient::Player::Cleanup
==============
*/

void __fastcall OnlineMatchmakerOmniscient::Player::Cleanup(OnlineMatchmakerOmniscient::Player *this)
{
  ?Cleanup@Player@OnlineMatchmakerOmniscient@@QEAAXXZ(this);
}

/*
==============
OnlineMatchmakerOmniscient::UpdatePerformanceValues
==============
*/

void __fastcall OnlineMatchmakerOmniscient::UpdatePerformanceValues(OnlineMatchmakerOmniscient *this, const ntl::fixed_list<PlayerValue<float>,200,0> *performanceValueList)
{
  ?UpdatePerformanceValues@OnlineMatchmakerOmniscient@@AEAAXAEBV?$fixed_list@U?$PlayerValue@M@@$0MI@$0A@@ntl@@@Z(this, performanceValueList);
}

/*
==============
OnlineMatchmakerOmniscient::GetLobbyStateString
==============
*/

const char *__fastcall OnlineMatchmakerOmniscient::GetLobbyStateString(OnlineMatchmakerOmniscient *this, const MatchmakerLobbyState state)
{
  return ?GetLobbyStateString@OnlineMatchmakerOmniscient@@QEBAPEBDW4MatchmakerLobbyState@@@Z(this, state);
}

/*
==============
OnlineAsyncMatchmakingEventHandler::msgLobbyDisbanded
==============
*/

void __fastcall OnlineAsyncMatchmakingEventHandler::msgLobbyDisbanded(OnlineAsyncMatchmakingEventHandler *this, unsigned __int64 lobbyID)
{
  ?msgLobbyDisbanded@OnlineAsyncMatchmakingEventHandler@@UEAAX_K@Z(this, lobbyID);
}

/*
==============
OnlineMatchmakerOmniscient::IsIdle
==============
*/

bool __fastcall OnlineMatchmakerOmniscient::IsIdle(OnlineMatchmakerOmniscient *this)
{
  return ?IsIdle@OnlineMatchmakerOmniscient@@QEBA_NXZ(this);
}

/*
==============
OnlineMatchmakerOmniscient::staticTaskShutdownMatchmaking
==============
*/

void __fastcall OnlineMatchmakerOmniscient::staticTaskShutdownMatchmaking(GenericTask *task, eTaskManagerTaskState state)
{
  ?staticTaskShutdownMatchmaking@OnlineMatchmakerOmniscient@@CAXPEAVGenericTask@@W4eTaskManagerTaskState@@@Z(task, state);
}

/*
==============
OnlineMatchmakerOmniscient::TaskGetLobbyDocuments
==============
*/

void __fastcall OnlineMatchmakerOmniscient::TaskGetLobbyDocuments(OnlineMatchmakerOmniscient *this, GenericTask *task, eTaskManagerTaskState state)
{
  ?TaskGetLobbyDocuments@OnlineMatchmakerOmniscient@@AEAAXPEAVGenericTask@@W4eTaskManagerTaskState@@@Z(this, task, state);
}

/*
==============
OnlineMatchmakerOmniscient::IsPlayerConnected
==============
*/

bool __fastcall OnlineMatchmakerOmniscient::IsPlayerConnected(OnlineMatchmakerOmniscient *this, const PartyData *party, const XUID xuid)
{
  return ?IsPlayerConnected@OnlineMatchmakerOmniscient@@AEBA_NPEBUPartyData@@UXUID@@@Z(this, party, xuid);
}

/*
==============
OnlineMatchmakerOmniscient::HasDemonwareAckedGameStart
==============
*/

bool __fastcall OnlineMatchmakerOmniscient::HasDemonwareAckedGameStart(OnlineMatchmakerOmniscient *this)
{
  return ?HasDemonwareAckedGameStart@OnlineMatchmakerOmniscient@@QEBA_NXZ(this);
}

/*
==============
MatchmakingData::MatchmakingData
==============
*/

void __fastcall MatchmakingData::MatchmakingData(MatchmakingData *this)
{
  ??0MatchmakingData@@QEAA@XZ(this);
}

/*
==============
OnlineMatchmakerOmniscient::GetSquadFor
==============
*/

bool __fastcall OnlineMatchmakerOmniscient::GetSquadFor(OnlineMatchmakerOmniscient *this, const XUID uid, int *squadId)
{
  return ?GetSquadFor@OnlineMatchmakerOmniscient@@QEBA_NUXUID@@PEAH@Z(this, uid, squadId);
}

/*
==============
OnlineMatchmakerOmniscient::ErasePlayer
==============
*/

ntl::internal::list_iterator<OnlineMatchmakerOmniscient::Player,ntl::internal::list_node<OnlineMatchmakerOmniscient::Player>,OnlineMatchmakerOmniscient::Player *,OnlineMatchmakerOmniscient::Player &> *__fastcall OnlineMatchmakerOmniscient::ErasePlayer(OnlineMatchmakerOmniscient *this, ntl::internal::list_iterator<OnlineMatchmakerOmniscient::Player,ntl::internal::list_node<OnlineMatchmakerOmniscient::Player>,OnlineMatchmakerOmniscient::Player *,OnlineMatchmakerOmniscient::Player &> *result, ntl::internal::list_iterator<OnlineMatchmakerOmniscient::Player,ntl::internal::list_node<OnlineMatchmakerOmniscient::Player>,OnlineMatchmakerOmniscient::Player *,OnlineMatchmakerOmniscient::Player &> *it)
{
  return ?ErasePlayer@OnlineMatchmakerOmniscient@@AEAA?AV?$list_iterator@UPlayer@OnlineMatchmakerOmniscient@@V?$list_node@UPlayer@OnlineMatchmakerOmniscient@@@internal@ntl@@PEAU12@AEAU12@@internal@ntl@@AEAV234@@Z(this, result, it);
}

/*
==============
OnlineMatchmakerOmniscient::SerializePlayerInfoListenServerDetails
==============
*/

bool __fastcall OnlineMatchmakerOmniscient::SerializePlayerInfoListenServerDetails(OnlineMatchmakerOmniscient *this, bdJSONSerializer *json, const XNADDR *xnaddr)
{
  return ?SerializePlayerInfoListenServerDetails@OnlineMatchmakerOmniscient@@AEBA_NAEAVbdJSONSerializer@@AEBUXNADDR@@@Z(this, json, xnaddr);
}

/*
==============
OnlineMatchmakerOmniscient::EnqueueJoinLobbyCallback
==============
*/

void __fastcall OnlineMatchmakerOmniscient::EnqueueJoinLobbyCallback(OnlineMatchmakerOmniscient *this)
{
  ?EnqueueJoinLobbyCallback@OnlineMatchmakerOmniscient@@QEAAXXZ(this);
}

/*
==============
OnlineMatchmakerOmniscient::GetStateString
==============
*/

const char *__fastcall OnlineMatchmakerOmniscient::GetStateString(OnlineMatchmakerOmniscient *this, const MatchmakerOmniscientState state)
{
  return ?GetStateString@OnlineMatchmakerOmniscient@@QEBAPEBDW4MatchmakerOmniscientState@@@Z(this, state);
}

/*
==============
OnlineBootId::CheckForCreate
==============
*/

void OnlineBootId::CheckForCreate(void)
{
  ?CheckForCreate@OnlineBootId@@CAXXZ();
}

/*
==============
OnlineMatchmakerOmniscient::IsSplitscreenPlayerAllowedToJoin
==============
*/

bool __fastcall OnlineMatchmakerOmniscient::IsSplitscreenPlayerAllowedToJoin(OnlineMatchmakerOmniscient *this, const XUID primaryPlayerXuid)
{
  return ?IsSplitscreenPlayerAllowedToJoin@OnlineMatchmakerOmniscient@@QEBA_NUXUID@@@Z(this, primaryPlayerXuid);
}

/*
==============
OnlineMatchmakerOmniscient::GetBuildName
==============
*/

void __fastcall OnlineMatchmakerOmniscient::GetBuildName(OnlineMatchmakerOmniscient *this, char *buildName, unsigned int len)
{
  ?GetBuildName@OnlineMatchmakerOmniscient@@QEBAXPEADI@Z(this, buildName, len);
}

/*
==============
OnlineMatchmakerOmniscient::GetHostInfoForLobby
==============
*/

bool __fastcall OnlineMatchmakerOmniscient::GetHostInfoForLobby(OnlineMatchmakerOmniscient *this, const int controllerIndex, unsigned __int64 lobbyid, void (__fastcall *callback)(const int, const GetHostInfoForLobbyResult, const XSESSION_INFO *, const unsigned __int64))
{
  return ?GetHostInfoForLobby@OnlineMatchmakerOmniscient@@QEAA_NH_KP6AXHW4GetHostInfoForLobbyResult@@AEBVXSESSION_INFO@@_K@Z@Z(this, controllerIndex, lobbyid, callback);
}

/*
==============
OnlineMatchmakerOmniscient::GetTournamentAlliesTeam
==============
*/

team_t __fastcall OnlineMatchmakerOmniscient::GetTournamentAlliesTeam(OnlineMatchmakerOmniscient *this)
{
  return ?GetTournamentAlliesTeam@OnlineMatchmakerOmniscient@@QEBA?AW4team_t@@XZ(this);
}

/*
==============
OnlineMatchmakerOmniscient::AggressivelyPrunePlayers
==============
*/

void __fastcall OnlineMatchmakerOmniscient::AggressivelyPrunePlayers(OnlineMatchmakerOmniscient *this)
{
  ?AggressivelyPrunePlayers@OnlineMatchmakerOmniscient@@AEAAXXZ(this);
}

/*
==============
OnlineMatchmakerOmniscient::RunInitMatchmaking
==============
*/

void __fastcall OnlineMatchmakerOmniscient::RunInitMatchmaking(OnlineMatchmakerOmniscient *this)
{
  ?RunInitMatchmaking@OnlineMatchmakerOmniscient@@AEAAXXZ(this);
}

/*
==============
OnlineMatchmakerOmniscient::SerializePlayerInfoDedicatedServerDetails
==============
*/

bool __fastcall OnlineMatchmakerOmniscient::SerializePlayerInfoDedicatedServerDetails(OnlineMatchmakerOmniscient *this, bdJSONSerializer *json)
{
  return ?SerializePlayerInfoDedicatedServerDetails@OnlineMatchmakerOmniscient@@AEBA_NAEAVbdJSONSerializer@@@Z(this, json);
}

/*
==============
OnlineMatchmakerOmniscient::staticTaskLocalPlayerAddedToDW
==============
*/

void __fastcall OnlineMatchmakerOmniscient::staticTaskLocalPlayerAddedToDW(GenericTask *task, eTaskManagerTaskState state)
{
  ?staticTaskLocalPlayerAddedToDW@OnlineMatchmakerOmniscient@@CAXPEAVGenericTask@@W4eTaskManagerTaskState@@@Z(task, state);
}

/*
==============
OnlineMatchmakerOmniscient::staticTaskQosComplete
==============
*/

void __fastcall OnlineMatchmakerOmniscient::staticTaskQosComplete(GenericTask *task, eTaskManagerTaskState state)
{
  ?staticTaskQosComplete@OnlineMatchmakerOmniscient@@CAXPEAVGenericTask@@W4eTaskManagerTaskState@@@Z(task, state);
}

/*
==============
OnlineMatchmakerOmniscient::IsDisbanding
==============
*/

bool __fastcall OnlineMatchmakerOmniscient::IsDisbanding(OnlineMatchmakerOmniscient *this)
{
  return ?IsDisbanding@OnlineMatchmakerOmniscient@@QEBA_NXZ(this);
}

/*
==============
OnlineMatchmakerOmniscient::AddPlayers
==============
*/

void __fastcall OnlineMatchmakerOmniscient::AddPlayers(OnlineMatchmakerOmniscient *this)
{
  ?AddPlayers@OnlineMatchmakerOmniscient@@QEAAXXZ(this);
}

/*
==============
OnlineMatchmakerOmniscient::RunStartingMatchmaking
==============
*/

void __fastcall OnlineMatchmakerOmniscient::RunStartingMatchmaking(OnlineMatchmakerOmniscient *this)
{
  ?RunStartingMatchmaking@OnlineMatchmakerOmniscient@@AEAAXXZ(this);
}

/*
==============
OnlineMatchmakerOmniscient::SerializePlayerInfo
==============
*/

bool __fastcall OnlineMatchmakerOmniscient::SerializePlayerInfo(OnlineMatchmakerOmniscient *this, bdJSONSerializer *json, const XNADDR *xnaddr)
{
  return ?SerializePlayerInfo@OnlineMatchmakerOmniscient@@QEBA_NAEAVbdJSONSerializer@@AEBUXNADDR@@@Z(this, json, xnaddr);
}

/*
==============
OnlineMatchmakerOmniscient::GetCachedMatchmakingTokenForUID
==============
*/

unsigned __int64 __fastcall OnlineMatchmakerOmniscient::GetCachedMatchmakingTokenForUID(OnlineMatchmakerOmniscient *this, const XUID uid, bool *isPrimaryAccountOut)
{
  return ?GetCachedMatchmakingTokenForUID@OnlineMatchmakerOmniscient@@QEAA_KUXUID@@AEA_N@Z(this, uid, isPrimaryAccountOut);
}

/*
==============
OnlineMatchmakerOmniscient::GetHostUID
==============
*/

unsigned __int64 __fastcall OnlineMatchmakerOmniscient::GetHostUID(OnlineMatchmakerOmniscient *this)
{
  return ?GetHostUID@OnlineMatchmakerOmniscient@@QEBA_KXZ(this);
}

/*
==============
OnlineMatchmakerOmniscient::IsReadyToMatchmake
==============
*/

bool __fastcall OnlineMatchmakerOmniscient::IsReadyToMatchmake(OnlineMatchmakerOmniscient *this)
{
  return ?IsReadyToMatchmake@OnlineMatchmakerOmniscient@@QEBA_NXZ(this);
}

/*
==============
OnlineMatchmakerOmniscient::RunLobbyFailure
==============
*/

void __fastcall OnlineMatchmakerOmniscient::RunLobbyFailure(OnlineMatchmakerOmniscient *this)
{
  ?RunLobbyFailure@OnlineMatchmakerOmniscient@@AEAAXXZ(this);
}

/*
==============
OnlineMatchmakerOmniscient::UpdateTeamAssignments
==============
*/

void __fastcall OnlineMatchmakerOmniscient::UpdateTeamAssignments(OnlineMatchmakerOmniscient *this, const ntl::fixed_list<PlayerValue<int>,200,0> *teamAssignmentList)
{
  ?UpdateTeamAssignments@OnlineMatchmakerOmniscient@@AEAAXAEBV?$fixed_list@U?$PlayerValue@H@@$0MI@$0A@@ntl@@@Z(this, teamAssignmentList);
}

/*
==============
OnlineMatchmakerOmniscient::RemovePlayerFromLocal
==============
*/

bool __fastcall OnlineMatchmakerOmniscient::RemovePlayerFromLocal(OnlineMatchmakerOmniscient *this, const XUID xuid)
{
  return ?RemovePlayerFromLocal@OnlineMatchmakerOmniscient@@QEAA_NUXUID@@@Z(this, xuid);
}

/*
==============
OnlineMatchmakerOmniscient::TurnOnBackfill_JIP
==============
*/

void __fastcall OnlineMatchmakerOmniscient::TurnOnBackfill_JIP(OnlineMatchmakerOmniscient *this)
{
  ?TurnOnBackfill_JIP@OnlineMatchmakerOmniscient@@QEAAXXZ(this);
}

/*
==============
OnlineMatchmakerOmniscient::RunLobbyWaitingForInfo
==============
*/

void __fastcall OnlineMatchmakerOmniscient::RunLobbyWaitingForInfo(OnlineMatchmakerOmniscient *this)
{
  ?RunLobbyWaitingForInfo@OnlineMatchmakerOmniscient@@AEAAXXZ(this);
}

/*
==============
OnlineMatchId::ResetMatchId
==============
*/

void OnlineMatchId::ResetMatchId(void)
{
  ?ResetMatchId@OnlineMatchId@@SAXXZ();
}

/*
==============
OnlineMatchmakerOmniscient::ParseLobbyHostOrder
==============
*/

bool __fastcall OnlineMatchmakerOmniscient::ParseLobbyHostOrder(OnlineMatchmakerOmniscient *this, bdJSONDeserializer *jsonDeserializer, MatchMakerOmniLobbyData *lobbyDataToBeFilledIn)
{
  return ?ParseLobbyHostOrder@OnlineMatchmakerOmniscient@@AEBA_NAEAVbdJSONDeserializer@@AEAUMatchMakerOmniLobbyData@@@Z(this, jsonDeserializer, lobbyDataToBeFilledIn);
}

/*
==============
OnlineMatchmakerOmniscient::ResetCachedLocalPlayerInfos
==============
*/

void __fastcall OnlineMatchmakerOmniscient::ResetCachedLocalPlayerInfos(OnlineMatchmakerOmniscient *this)
{
  ?ResetCachedLocalPlayerInfos@OnlineMatchmakerOmniscient@@QEAAXXZ(this);
}

/*
==============
OnlineMatchmakerOmniscient::WriteFiltersJSON
==============
*/

bool __fastcall OnlineMatchmakerOmniscient::WriteFiltersJSON(OnlineMatchmakerOmniscient *this, bdJSONSerializer *jsonSerializer)
{
  return ?WriteFiltersJSON@OnlineMatchmakerOmniscient@@AEBA_NAEAVbdJSONSerializer@@@Z(this, jsonSerializer);
}

/*
==============
OnlineMatchmakerOmniscient::SerializePlayerInfoHardware
==============
*/

bool __fastcall OnlineMatchmakerOmniscient::SerializePlayerInfoHardware(OnlineMatchmakerOmniscient *this, bdJSONSerializer *json)
{
  return ?SerializePlayerInfoHardware@OnlineMatchmakerOmniscient@@AEBA_NAEAVbdJSONSerializer@@@Z(this, json);
}

/*
==============
OnlineMatchmakerOmniscient::SetPlayerCurrentStatus
==============
*/

void __fastcall OnlineMatchmakerOmniscient::SetPlayerCurrentStatus(OnlineMatchmakerOmniscient *this, OnlineMatchmakerOmniscient::Player *outplayer, MemberStatus newStatus)
{
  ?SetPlayerCurrentStatus@OnlineMatchmakerOmniscient@@AEBAXAEAUPlayer@1@W4MemberStatus@@@Z(this, outplayer, newStatus);
}

/*
==============
OnlineMatchmakerOmniscient::Allow_AcceptLobbyMergers
==============
*/

bool __fastcall OnlineMatchmakerOmniscient::Allow_AcceptLobbyMergers(OnlineMatchmakerOmniscient *this)
{
  return ?Allow_AcceptLobbyMergers@OnlineMatchmakerOmniscient@@QEAA_NXZ(this);
}

/*
==============
OnlineMatchmakerOmniscient::IsMatchmaking
==============
*/

bool __fastcall OnlineMatchmakerOmniscient::IsMatchmaking(OnlineMatchmakerOmniscient *this)
{
  return ?IsMatchmaking@OnlineMatchmakerOmniscient@@QEBA_NXZ(this);
}

/*
==============
OnlineMatchmakerOmniscient::ParsePerformanceValues
==============
*/

void __fastcall OnlineMatchmakerOmniscient::ParsePerformanceValues(OnlineMatchmakerOmniscient *this, bdJSONDeserializer *backendDoc, MatchMakerOmniLobbyData *lobbyDataToBeFilledIn)
{
  ?ParsePerformanceValues@OnlineMatchmakerOmniscient@@AEBAXAEAVbdJSONDeserializer@@AEAUMatchMakerOmniLobbyData@@@Z(this, backendDoc, lobbyDataToBeFilledIn);
}

/*
==============
OnlineMatchmakerOmniscient::GetCurrentTournamentRound
==============
*/

unsigned __int16 __fastcall OnlineMatchmakerOmniscient::GetCurrentTournamentRound(OnlineMatchmakerOmniscient *this)
{
  return ?GetCurrentTournamentRound@OnlineMatchmakerOmniscient@@QEAAGXZ(this);
}

/*
==============
OnlineMatchmakerOmniscient::IsPlayerAllowedToJoin
==============
*/

bool __fastcall OnlineMatchmakerOmniscient::IsPlayerAllowedToJoin(OnlineMatchmakerOmniscient *this, const XUID xuid)
{
  return ?IsPlayerAllowedToJoin@OnlineMatchmakerOmniscient@@QEBA_NUXUID@@@Z(this, xuid);
}

/*
==============
OnlineMatchmakerOmniscient::GetMatchmakingTokenFromDW
==============
*/

void __fastcall OnlineMatchmakerOmniscient::GetMatchmakingTokenFromDW(OnlineMatchmakerOmniscient *this, OnlineMatchmakerOmniscient::Player *outplayer)
{
  ?GetMatchmakingTokenFromDW@OnlineMatchmakerOmniscient@@AEAAXAEAUPlayer@1@@Z(this, outplayer);
}

/*
==============
OnlineMatchmakerOmniscient::staticQosCompleteCallback
==============
*/

void __fastcall OnlineMatchmakerOmniscient::staticQosCompleteCallback(const tQosEntry *result, void *data)
{
  ?staticQosCompleteCallback@OnlineMatchmakerOmniscient@@CAXAEBVtQosEntry@@PEAX@Z(result, data);
}

/*
==============
OnlineMatchmakerOmniscient::SetPlayerState
==============
*/

void __fastcall OnlineMatchmakerOmniscient::SetPlayerState(OnlineMatchmakerOmniscient *this, OnlineMatchmakerOmniscient::Player *outplayer, OnlineMatchmakerOmniscient::Player::PlayerState state)
{
  ?SetPlayerState@OnlineMatchmakerOmniscient@@AEBAXAEAUPlayer@1@W4PlayerState@21@@Z(this, outplayer, state);
}

/*
==============
OnlineMatchmakerOmniscient::UpdatePlayer
==============
*/

void __fastcall OnlineMatchmakerOmniscient::UpdatePlayer(OnlineMatchmakerOmniscient *this, OnlineMatchmakerOmniscient::Player *outplayer)
{
  ?UpdatePlayer@OnlineMatchmakerOmniscient@@AEAAXAEAUPlayer@1@@Z(this, outplayer);
}

/*
==============
OnlineMatchmakerOmniscient::RequestGameLobbyRemainIntact
==============
*/

void __fastcall OnlineMatchmakerOmniscient::RequestGameLobbyRemainIntact(OnlineMatchmakerOmniscient *this)
{
  ?RequestGameLobbyRemainIntact@OnlineMatchmakerOmniscient@@QEAAXXZ(this);
}

/*
==============
OnlineMatchmakerOmniscient::RunLobbyJoined
==============
*/

void __fastcall OnlineMatchmakerOmniscient::RunLobbyJoined(OnlineMatchmakerOmniscient *this)
{
  ?RunLobbyJoined@OnlineMatchmakerOmniscient@@AEAAXXZ(this);
}

/*
==============
OnlineMatchmakerOmniscient::GetPlayerCount
==============
*/

unsigned int __fastcall OnlineMatchmakerOmniscient::GetPlayerCount(OnlineMatchmakerOmniscient *this)
{
  return ?GetPlayerCount@OnlineMatchmakerOmniscient@@QEBAIXZ(this);
}

/*
==============
MatchmakingData::GetElapsedTimeSeconds
==============
*/

int __fastcall MatchmakingData::GetElapsedTimeSeconds(MatchmakingData *this)
{
  return ?GetElapsedTimeSeconds@MatchmakingData@@QEBAHXZ(this);
}

/*
==============
OnlineMatchmakerOmniscient::JoinAttemptFailed
==============
*/

void __fastcall OnlineMatchmakerOmniscient::JoinAttemptFailed(OnlineMatchmakerOmniscient *this)
{
  ?JoinAttemptFailed@OnlineMatchmakerOmniscient@@QEAAXXZ(this);
}

/*
==============
OnlineMatchmakerOmniscient::GetLobbyStatus
==============
*/

const char *__fastcall OnlineMatchmakerOmniscient::GetLobbyStatus(OnlineMatchmakerOmniscient *this)
{
  return ?GetLobbyStatus@OnlineMatchmakerOmniscient@@QEBAPEBDXZ(this);
}

/*
==============
OnlineMatchmakerOmniscient::PrintTeams
==============
*/

void __fastcall OnlineMatchmakerOmniscient::PrintTeams(OnlineMatchmakerOmniscient *this, PartyData *party)
{
  ?PrintTeams@OnlineMatchmakerOmniscient@@QEBAXPEAUPartyData@@@Z(this, party);
}

/*
==============
OnlineMatchmakerOmniscient::ResetLobby
==============
*/

void __fastcall OnlineMatchmakerOmniscient::ResetLobby(OnlineMatchmakerOmniscient *this)
{
  ?ResetLobby@OnlineMatchmakerOmniscient@@QEAAXXZ(this);
}

/*
==============
OnlineAsyncMatchmakingEventHandler::msgTournamentFormationLobbyDisbanded
==============
*/

void __fastcall OnlineAsyncMatchmakingEventHandler::msgTournamentFormationLobbyDisbanded(OnlineAsyncMatchmakingEventHandler *this, unsigned __int64 tournamentID)
{
  ?msgTournamentFormationLobbyDisbanded@OnlineAsyncMatchmakingEventHandler@@UEAAX_K@Z(this, tournamentID);
}

/*
==============
OnlineMatchmakerOmniscient::ConvertDWTeamtoGameTeam
==============
*/

team_t __fastcall OnlineMatchmakerOmniscient::ConvertDWTeamtoGameTeam(unsigned int dwTeam)
{
  return ?ConvertDWTeamtoGameTeam@OnlineMatchmakerOmniscient@@SA?AW4team_t@@I@Z(dwTeam);
}

/*
==============
OnlineMatchmakerOmniscient::GetRetailDebug
==============
*/

void __fastcall OnlineMatchmakerOmniscient::GetRetailDebug(OnlineMatchmakerOmniscient *this, char *destString, const int maxLength)
{
  ?GetRetailDebug@OnlineMatchmakerOmniscient@@QEBAXPEADH@Z(this, destString, maxLength);
}

/*
==============
OnlineMatchmakerOmniscient::UpdateMatchmakingIds
==============
*/

void __fastcall OnlineMatchmakerOmniscient::UpdateMatchmakingIds(OnlineMatchmakerOmniscient *this, const ntl::fixed_list<PlayerValue<unsigned __int64>,200,0> *matchmakingIdList)
{
  ?UpdateMatchmakingIds@OnlineMatchmakerOmniscient@@AEAAXAEBV?$fixed_list@U?$PlayerValue@_K@@$0MI@$0A@@ntl@@@Z(this, matchmakingIdList);
}

/*
==============
OnlineMatchmakerOmniscient::ReconcileExpectedPlayers
==============
*/

void __fastcall OnlineMatchmakerOmniscient::ReconcileExpectedPlayers(OnlineMatchmakerOmniscient *this, const ntl::fixed_list<XUID,200,0> *expectedPlayersList)
{
  ?ReconcileExpectedPlayers@OnlineMatchmakerOmniscient@@AEAAXAEBV?$fixed_list@UXUID@@$0MI@$0A@@ntl@@@Z(this, expectedPlayersList);
}

/*
==============
OnlineMatchmakerOmniscient::ClientStartGame
==============
*/

void __fastcall OnlineMatchmakerOmniscient::ClientStartGame(OnlineMatchmakerOmniscient *this)
{
  ?ClientStartGame@OnlineMatchmakerOmniscient@@QEAAXXZ(this);
}

/*
==============
OnlineMatchmakerOmniscient::AggressivelyPrunePublicPartyPlayers
==============
*/

ntl::internal::list_iterator<OnlineMatchmakerOmniscient::Player,ntl::internal::list_node<OnlineMatchmakerOmniscient::Player>,OnlineMatchmakerOmniscient::Player *,OnlineMatchmakerOmniscient::Player &> *__fastcall OnlineMatchmakerOmniscient::AggressivelyPrunePublicPartyPlayers(OnlineMatchmakerOmniscient *this, ntl::internal::list_iterator<OnlineMatchmakerOmniscient::Player,ntl::internal::list_node<OnlineMatchmakerOmniscient::Player>,OnlineMatchmakerOmniscient::Player *,OnlineMatchmakerOmniscient::Player &> *result, ntl::internal::list_iterator<OnlineMatchmakerOmniscient::Player,ntl::internal::list_node<OnlineMatchmakerOmniscient::Player>,OnlineMatchmakerOmniscient::Player *,OnlineMatchmakerOmniscient::Player &> it, const XUID userId)
{
  return ?AggressivelyPrunePublicPartyPlayers@OnlineMatchmakerOmniscient@@AEAA?AV?$list_iterator@UPlayer@OnlineMatchmakerOmniscient@@V?$list_node@UPlayer@OnlineMatchmakerOmniscient@@@internal@ntl@@PEAU12@AEAU12@@internal@ntl@@V234@UXUID@@@Z(this, result, it, userId);
}

/*
==============
OnlineMatchmakerOmniscient::ParseServiceLevels
==============
*/

void __fastcall OnlineMatchmakerOmniscient::ParseServiceLevels(OnlineMatchmakerOmniscient *this, bdJSONDeserializer *backendDoc, MatchMakerOmniLobbyData *lobbyDataToBeFilledIn)
{
  ?ParseServiceLevels@OnlineMatchmakerOmniscient@@AEBAXAEAVbdJSONDeserializer@@AEAUMatchMakerOmniLobbyData@@@Z(this, backendDoc, lobbyDataToBeFilledIn);
}

/*
==============
OnlineMatchmakerOmniscient::ParseLobbyHostDoc
==============
*/

bool __fastcall OnlineMatchmakerOmniscient::ParseLobbyHostDoc(OnlineMatchmakerOmniscient *this, const char *lobbyHostDoc, MatchMakerOmniLobbyData *lobbyData)
{
  return ?ParseLobbyHostDoc@OnlineMatchmakerOmniscient@@AEBA_NPEBDAEAUMatchMakerOmniLobbyData@@@Z(this, lobbyHostDoc, lobbyData);
}

/*
==============
OnlineMatchmakerOmniscient::PumpCallbacks
==============
*/

void __fastcall OnlineMatchmakerOmniscient::PumpCallbacks(OnlineMatchmakerOmniscient *this)
{
  ?PumpCallbacks@OnlineMatchmakerOmniscient@@AEAAXXZ(this);
}

/*
==============
OnlineMatchmakerOmniscient::UpdateLocalPlayerXnaddr
==============
*/

void __fastcall OnlineMatchmakerOmniscient::UpdateLocalPlayerXnaddr(OnlineMatchmakerOmniscient *this, const XNADDR *addr)
{
  ?UpdateLocalPlayerXnaddr@OnlineMatchmakerOmniscient@@QEAAXAEBUXNADDR@@@Z(this, addr);
}

/*
==============
OnlineMatchmakerOmniscient::CreateLobbySuccess
==============
*/

void __fastcall OnlineMatchmakerOmniscient::CreateLobbySuccess(OnlineMatchmakerOmniscient *this, const unsigned __int64 lobbyId)
{
  ?CreateLobbySuccess@OnlineMatchmakerOmniscient@@QEAAX_K@Z(this, lobbyId);
}

/*
==============
OnlineMatchmakerOmniscient::IsPaidUser
==============
*/

bool __fastcall OnlineMatchmakerOmniscient::IsPaidUser(OnlineMatchmakerOmniscient *this, const XUID xuid)
{
  return ?IsPaidUser@OnlineMatchmakerOmniscient@@QEBA_NUXUID@@@Z(this, xuid);
}

/*
==============
OnlineMatchmakerOmniscient::Pump
==============
*/

void __fastcall OnlineMatchmakerOmniscient::Pump(OnlineMatchmakerOmniscient *this)
{
  ?Pump@OnlineMatchmakerOmniscient@@QEAAXXZ(this);
}

/*
==============
OnlineMatchmakerOmniscient::GetServerDataCenter
==============
*/

const char *__fastcall OnlineMatchmakerOmniscient::GetServerDataCenter(OnlineMatchmakerOmniscient *this)
{
  return ?GetServerDataCenter@OnlineMatchmakerOmniscient@@QEBAPEBDXZ(this);
}

/*
==============
OnlineMatchmakerOmniscient::ParsePrivateMatchInfo
==============
*/

void __fastcall OnlineMatchmakerOmniscient::ParsePrivateMatchInfo(OnlineMatchmakerOmniscient *this, bdJSONDeserializer *backendDoc, MatchMakerOmniLobbyData *lobbyDataToBeFilledIn)
{
  ?ParsePrivateMatchInfo@OnlineMatchmakerOmniscient@@AEBAXAEAVbdJSONDeserializer@@AEAUMatchMakerOmniLobbyData@@@Z(this, backendDoc, lobbyDataToBeFilledIn);
}

/*
==============
MatchmakingData::Reset
==============
*/

void __fastcall MatchmakingData::Reset(MatchmakingData *this)
{
  ?Reset@MatchmakingData@@QEAAXXZ(this);
}

/*
==============
OnlineMatchmakerOmniscient::InitMatchmaking
==============
*/

bool __fastcall OnlineMatchmakerOmniscient::InitMatchmaking(OnlineMatchmakerOmniscient *this)
{
  return ?InitMatchmaking@OnlineMatchmakerOmniscient@@AEAA_NXZ(this);
}

/*
==============
OnlineMatchmakerOmniscient::UpdatePlayers
==============
*/

void __fastcall OnlineMatchmakerOmniscient::UpdatePlayers(OnlineMatchmakerOmniscient *this)
{
  ?UpdatePlayers@OnlineMatchmakerOmniscient@@AEAAXXZ(this);
}

/*
==============
OnlineMatchmakerOmniscient::IsCreatingLobby
==============
*/

bool __fastcall OnlineMatchmakerOmniscient::IsCreatingLobby(OnlineMatchmakerOmniscient *this)
{
  return ?IsCreatingLobby@OnlineMatchmakerOmniscient@@QEBA_NXZ(this);
}

/*
==============
OnlineMatchmakerOmniscient::StartGame
==============
*/

void __fastcall OnlineMatchmakerOmniscient::StartGame(OnlineMatchmakerOmniscient *this, const char *map, const char *mode)
{
  ?StartGame@OnlineMatchmakerOmniscient@@QEAAXPEBD0@Z(this, map, mode);
}

/*
==============
OnlineMatchmakerOmniscient::ParseDvarOverrides
==============
*/

void __fastcall OnlineMatchmakerOmniscient::ParseDvarOverrides(OnlineMatchmakerOmniscient *this, bdJSONDeserializer *backendDoc, MatchMakerOmniLobbyData *lobbyDataToBeFilledIn)
{
  ?ParseDvarOverrides@OnlineMatchmakerOmniscient@@AEBAXAEAVbdJSONDeserializer@@AEAUMatchMakerOmniLobbyData@@@Z(this, backendDoc, lobbyDataToBeFilledIn);
}

/*
==============
OnlineMatchmakerOmniscient::RunIdle
==============
*/

void __fastcall OnlineMatchmakerOmniscient::RunIdle(OnlineMatchmakerOmniscient *this)
{
  ?RunIdle@OnlineMatchmakerOmniscient@@AEAAXXZ(this);
}

/*
==============
OnlineMatchmakerOmniscient::TaskLocalPlayerAddedToDW
==============
*/

void __fastcall OnlineMatchmakerOmniscient::TaskLocalPlayerAddedToDW(OnlineMatchmakerOmniscient *this, GenericTask *task, eTaskManagerTaskState state)
{
  ?TaskLocalPlayerAddedToDW@OnlineMatchmakerOmniscient@@AEAAXPEAVGenericTask@@W4eTaskManagerTaskState@@@Z(this, task, state);
}

/*
==============
OnlineMatchmakerOmniscient::MergeIntoLobby
==============
*/

void __fastcall OnlineMatchmakerOmniscient::MergeIntoLobby(OnlineMatchmakerOmniscient *this, const unsigned __int64 mmID, const unsigned __int64 sourceLobbyID, const unsigned __int64 destinationLobbyID, const char *lobbyHostDoc, const unsigned int lobbyHostDocLength, const char *lobbyBackendDoc, const unsigned int lobbyBackendDocLength)
{
  ?MergeIntoLobby@OnlineMatchmakerOmniscient@@QEAAX_K00PEBDI1I@Z(this, mmID, sourceLobbyID, destinationLobbyID, lobbyHostDoc, lobbyHostDocLength, lobbyBackendDoc, lobbyBackendDocLength);
}

/*
==============
OnlineMatchmakerOmniscient::GetMemberStatusString
==============
*/

const char *__fastcall OnlineMatchmakerOmniscient::GetMemberStatusString(OnlineMatchmakerOmniscient *this, const MemberStatus status)
{
  return ?GetMemberStatusString@OnlineMatchmakerOmniscient@@QEBAPEBDW4MemberStatus@@@Z(this, status);
}

/*
==============
OnlineMatchmakerOmniscient::TaskStartMatchmaking
==============
*/

void __fastcall OnlineMatchmakerOmniscient::TaskStartMatchmaking(OnlineMatchmakerOmniscient *this, GenericTask *task, eTaskManagerTaskState state)
{
  ?TaskStartMatchmaking@OnlineMatchmakerOmniscient@@AEAAXPEAVGenericTask@@W4eTaskManagerTaskState@@@Z(this, task, state);
}

/*
==============
OnlineMatchmakerOmniscient::SetPlayerQueuedStatus
==============
*/

void __fastcall OnlineMatchmakerOmniscient::SetPlayerQueuedStatus(OnlineMatchmakerOmniscient *this, OnlineMatchmakerOmniscient::Player *outplayer, MemberStatus newStatus)
{
  ?SetPlayerQueuedStatus@OnlineMatchmakerOmniscient@@AEBAXAEAUPlayer@1@W4MemberStatus@@@Z(this, outplayer, newStatus);
}

/*
==============
OnlineMatchmakerOmniscient::QosCompleteCallback
==============
*/

void __fastcall OnlineMatchmakerOmniscient::QosCompleteCallback(OnlineMatchmakerOmniscient *this, const tQosEntry *result)
{
  ?QosCompleteCallback@OnlineMatchmakerOmniscient@@AEAAXAEBVtQosEntry@@@Z(this, result);
}

/*
==============
OnlineMatchmakerOmniscient::ResetLobbyData
==============
*/

void __fastcall OnlineMatchmakerOmniscient::ResetLobbyData(OnlineMatchmakerOmniscient *this)
{
  ?ResetLobbyData@OnlineMatchmakerOmniscient@@AEAAXXZ(this);
}

/*
==============
OnlineMatchmakerOmniscient::GetServerHostName
==============
*/

const char *__fastcall OnlineMatchmakerOmniscient::GetServerHostName(OnlineMatchmakerOmniscient *this)
{
  return ?GetServerHostName@OnlineMatchmakerOmniscient@@QEBAPEBDXZ(this);
}

/*
==============
OnlineMatchmakerOmniscient::TaskUpdateLobbyDocument
==============
*/

void __fastcall OnlineMatchmakerOmniscient::TaskUpdateLobbyDocument(OnlineMatchmakerOmniscient *this, GenericTask *task, eTaskManagerTaskState state)
{
  ?TaskUpdateLobbyDocument@OnlineMatchmakerOmniscient@@AEAAXPEAVGenericTask@@W4eTaskManagerTaskState@@@Z(this, task, state);
}

/*
==============
OnlineMatchmakerOmniscient::GetCurrentMatchmakingId
==============
*/

unsigned __int64 __fastcall OnlineMatchmakerOmniscient::GetCurrentMatchmakingId(OnlineMatchmakerOmniscient *this)
{
  return ?GetCurrentMatchmakingId@OnlineMatchmakerOmniscient@@QEBA_KXZ(this);
}

/*
==============
OnlineMatchmakerOmniscient::Disallow_AcceptLobbyMergers
==============
*/

bool __fastcall OnlineMatchmakerOmniscient::Disallow_AcceptLobbyMergers(OnlineMatchmakerOmniscient *this)
{
  return ?Disallow_AcceptLobbyMergers@OnlineMatchmakerOmniscient@@QEAA_NXZ(this);
}

/*
==============
OnlineMatchmakerOmniscient::ConvertGameTeamToDWTeam
==============
*/

unsigned int __fastcall OnlineMatchmakerOmniscient::ConvertGameTeamToDWTeam(team_t teamId)
{
  return ?ConvertGameTeamToDWTeam@OnlineMatchmakerOmniscient@@SAIW4team_t@@@Z(teamId);
}

/*
==============
OnlineMatchmakerOmniscient::RemoteFailedToJoin
==============
*/

void __fastcall OnlineMatchmakerOmniscient::RemoteFailedToJoin(OnlineMatchmakerOmniscient *this, const XUID uid)
{
  ?RemoteFailedToJoin@OnlineMatchmakerOmniscient@@QEAAXUXUID@@@Z(this, uid);
}

/*
==============
OnlineMatchmakerOmniscient::GetMigrationList
==============
*/

const ntl::fixed_list<XUID,200,0> *__fastcall OnlineMatchmakerOmniscient::GetMigrationList(OnlineMatchmakerOmniscient *this)
{
  return ?GetMigrationList@OnlineMatchmakerOmniscient@@QEBAAEBV?$fixed_list@UXUID@@$0MI@$0A@@ntl@@XZ(this);
}

/*
==============
OnlineMatchmakerOmniscient::CreateNewLobby
==============
*/

void __fastcall OnlineMatchmakerOmniscient::CreateNewLobby(OnlineMatchmakerOmniscient *this, const unsigned __int64 mmId, const unsigned __int64 lobbyId, const unsigned __int64 updateId, const char *lobbyHostDoc, const unsigned int lobbyHostDocLength, const char *lobbyBackendDoc, const unsigned int lobbyBackendDocLength)
{
  ?CreateNewLobby@OnlineMatchmakerOmniscient@@QEAAX_K00PEBDI1I@Z(this, mmId, lobbyId, updateId, lobbyHostDoc, lobbyHostDocLength, lobbyBackendDoc, lobbyBackendDocLength);
}

/*
==============
OnlineMatchmakerOmniscient::Shutdown
==============
*/

void __fastcall OnlineMatchmakerOmniscient::Shutdown(OnlineMatchmakerOmniscient *this)
{
  ?Shutdown@OnlineMatchmakerOmniscient@@QEAAXXZ(this);
}

/*
==============
OnlineMatchmakerOmniscient::UpdateLobbyDocument
==============
*/

void __fastcall OnlineMatchmakerOmniscient::UpdateLobbyDocument(OnlineMatchmakerOmniscient *this, const unsigned __int64 lobbyId, const unsigned __int64 updateId, const char *lobbyHostDoc, const unsigned int lobbyHostDocLength, const char *lobbyBackendDoc, const unsigned int lobbyBackendDocLength)
{
  ?UpdateLobbyDocument@OnlineMatchmakerOmniscient@@QEAAX_K0PEBDI1I@Z(this, lobbyId, updateId, lobbyHostDoc, lobbyHostDocLength, lobbyBackendDoc, lobbyBackendDocLength);
}

/*
==============
OnlineMatchmakerOmniscient::RequestUpdateHostDoc
==============
*/

void __fastcall OnlineMatchmakerOmniscient::RequestUpdateHostDoc(OnlineMatchmakerOmniscient *this)
{
  ?RequestUpdateHostDoc@OnlineMatchmakerOmniscient@@AEAAXXZ(this);
}

/*
==============
OnlineAsyncMatchmakingEventHandler::msgUpdateLobbyDocument
==============
*/

void __fastcall OnlineAsyncMatchmakingEventHandler::msgUpdateLobbyDocument(OnlineAsyncMatchmakingEventHandler *this, unsigned __int64 lobbyID, unsigned __int64 updateID, char *lobbyHostDoc, unsigned int lobbyHostDocLength, char *lobbyBackendDoc, unsigned int lobbyBackendDocLength)
{
  ?msgUpdateLobbyDocument@OnlineAsyncMatchmakingEventHandler@@UEAAX_K0PEADI1I@Z(this, lobbyID, updateID, lobbyHostDoc, lobbyHostDocLength, lobbyBackendDoc, lobbyBackendDocLength);
}

/*
==============
OnlineMatchmakerOmniscient::staticTaskUpdateLobbyDocument
==============
*/

void __fastcall OnlineMatchmakerOmniscient::staticTaskUpdateLobbyDocument(GenericTask *task, eTaskManagerTaskState state)
{
  ?staticTaskUpdateLobbyDocument@OnlineMatchmakerOmniscient@@CAXPEAVGenericTask@@W4eTaskManagerTaskState@@@Z(task, state);
}

/*
==============
OnlineMatchmakerOmniscient::ResetDisband
==============
*/

void __fastcall OnlineMatchmakerOmniscient::ResetDisband(OnlineMatchmakerOmniscient *this)
{
  ?ResetDisband@OnlineMatchmakerOmniscient@@QEAAXXZ(this);
}

/*
==============
OnlineMatchmakerOmniscient::UpdateSquadAssignments
==============
*/

void __fastcall OnlineMatchmakerOmniscient::UpdateSquadAssignments(OnlineMatchmakerOmniscient *this, const ntl::fixed_list<PlayerValue<int>,200,0> *squadAssignmentList)
{
  ?UpdateSquadAssignments@OnlineMatchmakerOmniscient@@AEAAXAEBV?$fixed_list@U?$PlayerValue@H@@$0MI@$0A@@ntl@@@Z(this, squadAssignmentList);
}

/*
==============
OnlineMatchmakerOmniscient::IsInDWLobby
==============
*/

bool __fastcall OnlineMatchmakerOmniscient::IsInDWLobby(OnlineMatchmakerOmniscient *this)
{
  return ?IsInDWLobby@OnlineMatchmakerOmniscient@@QEBA_NXZ(this);
}

/*
==============
OnlineMatchmakerOmniscient::IsActive
==============
*/

bool __fastcall OnlineMatchmakerOmniscient::IsActive(OnlineMatchmakerOmniscient *this)
{
  return ?IsActive@OnlineMatchmakerOmniscient@@QEBA_NXZ(this);
}

/*
==============
OnlineAsyncMatchmakingEventHandler::msgTournamentDisbanded
==============
*/

void __fastcall OnlineAsyncMatchmakingEventHandler::msgTournamentDisbanded(OnlineAsyncMatchmakingEventHandler *this, unsigned __int64 tournamentID, bdAsyncMatchMakingEventHandler::TournamentDisbandedReason reason, const char *message)
{
  ?msgTournamentDisbanded@OnlineAsyncMatchmakingEventHandler@@UEAAX_KW4TournamentDisbandedReason@bdAsyncMatchMakingEventHandler@@PEBD@Z(this, tournamentID, reason, message);
}

/*
==============
OnlineMatchmakerOmniscient::SetFirstTime
==============
*/

void __fastcall OnlineMatchmakerOmniscient::SetFirstTime(OnlineMatchmakerOmniscient *this)
{
  ?SetFirstTime@OnlineMatchmakerOmniscient@@QEAAXXZ(this);
}

/*
==============
OnlineMatchmakerOmniscient::GetPerformanceValueForPlayer
==============
*/

bool __fastcall OnlineMatchmakerOmniscient::GetPerformanceValueForPlayer(OnlineMatchmakerOmniscient *this, const XUID xuid, float *performanceValue)
{
  return ?GetPerformanceValueForPlayer@OnlineMatchmakerOmniscient@@QEBA_NUXUID@@PEAM@Z(this, xuid, performanceValue);
}

/*
==============
OnlineMatchmakerOmniscient::GetPlayerSessionStateString
==============
*/

const char *__fastcall OnlineMatchmakerOmniscient::GetPlayerSessionStateString(OnlineMatchmakerOmniscient *this, const SessionStatus sessionStatus)
{
  return ?GetPlayerSessionStateString@OnlineMatchmakerOmniscient@@QEBAPEBDW4SessionStatus@@@Z(this, sessionStatus);
}

/*
==============
OnlineMatchmakerOmniscient::ParseLobbyBackendDoc
==============
*/

bool __fastcall OnlineMatchmakerOmniscient::ParseLobbyBackendDoc(OnlineMatchmakerOmniscient *this, const char *lobbyBackendDoc, MatchMakerOmniLobbyData *lobbyDataToBeFilledIn)
{
  return ?ParseLobbyBackendDoc@OnlineMatchmakerOmniscient@@AEBA_NPEBDAEAUMatchMakerOmniLobbyData@@@Z(this, lobbyBackendDoc, lobbyDataToBeFilledIn);
}

/*
==============
OnlineMatchmakerOmniscient::SetTournamentID
==============
*/

void __fastcall OnlineMatchmakerOmniscient::SetTournamentID(OnlineMatchmakerOmniscient *this, unsigned __int64 tournamentID)
{
  ?SetTournamentID@OnlineMatchmakerOmniscient@@QEAAX_K@Z(this, tournamentID);
}

/*
==============
OnlineMatchmakerOmniscient::SearchStatusUpdate
==============
*/

void __fastcall OnlineMatchmakerOmniscient::SearchStatusUpdate(OnlineMatchmakerOmniscient *this, unsigned __int64 mmid, char *statusJSON, unsigned int jsonSize)
{
  ?SearchStatusUpdate@OnlineMatchmakerOmniscient@@QEAAX_KPEADI@Z(this, mmid, statusJSON, jsonSize);
}

/*
==============
OnlineMatchmakerOmniscient::RemovePlayerFromDW
==============
*/

bool __fastcall OnlineMatchmakerOmniscient::RemovePlayerFromDW(OnlineMatchmakerOmniscient *this, const XUID xuid)
{
  return ?RemovePlayerFromDW@OnlineMatchmakerOmniscient@@QEAA_NUXUID@@@Z(this, xuid);
}

/*
==============
OnlineMatchmakerOmniscient::CancelStartGame
==============
*/

void __fastcall OnlineMatchmakerOmniscient::CancelStartGame(OnlineMatchmakerOmniscient *this)
{
  ?CancelStartGame@OnlineMatchmakerOmniscient@@QEAAXXZ(this);
}

/*
==============
OnlineMatchmakerOmniscient::Disallow_CanLobbyMerge
==============
*/

bool __fastcall OnlineMatchmakerOmniscient::Disallow_CanLobbyMerge(OnlineMatchmakerOmniscient *this)
{
  return ?Disallow_CanLobbyMerge@OnlineMatchmakerOmniscient@@QEAA_NXZ(this);
}

/*
==============
OnlineMatchmakerOmniscient::SetState
==============
*/

void __fastcall OnlineMatchmakerOmniscient::SetState(OnlineMatchmakerOmniscient *this, MatchmakerOmniscientState newState)
{
  ?SetState@OnlineMatchmakerOmniscient@@AEAAXW4MatchmakerOmniscientState@@@Z(this, newState);
}

/*
==============
OnlineMatchmakerOmniscient::GetPlaylistFromLobbyData
==============
*/

int __fastcall OnlineMatchmakerOmniscient::GetPlaylistFromLobbyData(OnlineMatchmakerOmniscient *this)
{
  return ?GetPlaylistFromLobbyData@OnlineMatchmakerOmniscient@@QEBAHXZ(this);
}

/*
==============
OnlineMatchmakerOmniscient::staticTaskGetMatchmakingToken
==============
*/

void __fastcall OnlineMatchmakerOmniscient::staticTaskGetMatchmakingToken(GenericTask *task, eTaskManagerTaskState state)
{
  ?staticTaskGetMatchmakingToken@OnlineMatchmakerOmniscient@@CAXPEAVGenericTask@@W4eTaskManagerTaskState@@@Z(task, state);
}

/*
==============
OnlineMatchmakerOmniscient::GetContentPackName
==============
*/

const char *__fastcall OnlineMatchmakerOmniscient::GetContentPackName(int contentMask)
{
  return ?GetContentPackName@OnlineMatchmakerOmniscient@@SAPEBDH@Z(contentMask);
}

/*
==============
OnlineMatchmakerOmniscient::InitLobby
==============
*/

bool __fastcall OnlineMatchmakerOmniscient::InitLobby(OnlineMatchmakerOmniscient *this)
{
  return ?InitLobby@OnlineMatchmakerOmniscient@@AEAA_NXZ(this);
}

/*
==============
OnlineMatchmakerOmniscient::PostMigrationBecomeHost
==============
*/

void __fastcall OnlineMatchmakerOmniscient::PostMigrationBecomeHost(OnlineMatchmakerOmniscient *this)
{
  ?PostMigrationBecomeHost@OnlineMatchmakerOmniscient@@QEAAXXZ(this);
}

/*
==============
OnlineMatchmakerOmniscient::GetTeamFor
==============
*/

bool __fastcall OnlineMatchmakerOmniscient::GetTeamFor(OnlineMatchmakerOmniscient *this, const XUID uid, team_t *teamId)
{
  return ?GetTeamFor@OnlineMatchmakerOmniscient@@QEBA_NUXUID@@PEAW4team_t@@@Z(this, uid, teamId);
}

/*
==============
OnlineMatchmakerOmniscient::RunLobbyCreating
==============
*/

void __fastcall OnlineMatchmakerOmniscient::RunLobbyCreating(OnlineMatchmakerOmniscient *this)
{
  ?RunLobbyCreating@OnlineMatchmakerOmniscient@@AEAAXXZ(this);
}

/*
==============
OnlineMatchmakerOmniscient::GetPlaylistVersion
==============
*/

int __fastcall OnlineMatchmakerOmniscient::GetPlaylistVersion(OnlineMatchmakerOmniscient *this)
{
  return ?GetPlaylistVersion@OnlineMatchmakerOmniscient@@QEBAHXZ(this);
}

/*
==============
OnlineMatchmakerOmniscient::UpdatedLobbyDocumentsBecomeHost
==============
*/

void __fastcall OnlineMatchmakerOmniscient::UpdatedLobbyDocumentsBecomeHost(OnlineMatchmakerOmniscient *this)
{
  ?UpdatedLobbyDocumentsBecomeHost@OnlineMatchmakerOmniscient@@AEAAXXZ(this);
}

/*
==============
tCallbacks::AddCallbackToQueue
==============
*/

void __fastcall tCallbacks::AddCallbackToQueue(tCallbacks *this, tCallbacks::tCallbackTypes type, const tCallbackResult inviteResult)
{
  ?AddCallbackToQueue@tCallbacks@@QEAAXW4tCallbackTypes@1@W4tCallbackResult@@@Z(this, type, inviteResult);
}

/*
==============
OnlineMatchmakerOmniscient::SetPlayerInfo
==============
*/

SetPlayerInfoResult __fastcall OnlineMatchmakerOmniscient::SetPlayerInfo(OnlineMatchmakerOmniscient *this, int controllerIndex, const XNADDR *addr, unsigned int *outTaskId)
{
  return ?SetPlayerInfo@OnlineMatchmakerOmniscient@@AEAA?AW4SetPlayerInfoResult@@HAEBUXNADDR@@PEAI@Z(this, controllerIndex, addr, outTaskId);
}

/*
==============
OnlineMatchmakerOmniscient::RunLobbyIdle
==============
*/

void __fastcall OnlineMatchmakerOmniscient::RunLobbyIdle(OnlineMatchmakerOmniscient *this)
{
  ?RunLobbyIdle@OnlineMatchmakerOmniscient@@AEAAXXZ(this);
}

/*
==============
OnlineMatchmakerOmniscient::ReconcilePlayerListWithParty
==============
*/

void __fastcall OnlineMatchmakerOmniscient::ReconcilePlayerListWithParty(OnlineMatchmakerOmniscient *this, PartyData *partyData)
{
  ?ReconcilePlayerListWithParty@OnlineMatchmakerOmniscient@@AEAAXPEAUPartyData@@@Z(this, partyData);
}

/*
==============
GetPlayerCount
==============
*/
__int64 GetPlayerCount()
{
  unsigned __int16 v0; 
  signed int v1; 
  __int64 v2; 
  __int64 v3; 
  unsigned __int16 v4; 
  __int64 v6; 
  __int64 v7; 

  v0 = 0;
  v1 = 0;
  if ( (int)SvClient::ms_clientCount <= 0 )
    return 0i64;
  v2 = 0i64;
  v3 = 0i64;
  do
  {
    if ( (unsigned int)v1 >= 0x800 )
    {
      LODWORD(v7) = 2048;
      LODWORD(v6) = v1;
      if ( CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\game\\g_public.h", 207, ASSERT_TYPE_ASSERT, "(unsigned)( entityIndex ) < (unsigned)( ( 2048 ) )", "entityIndex doesn't index MAX_GENTITIES\n\t%i not in [0, %i)", v6, v7) )
        __debugbreak();
    }
    if ( !g_entities && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\game\\g_public.h", 208, ASSERT_TYPE_ASSERT, "( g_entities != nullptr )", (const char *)&queryFormat, "g_entities != nullptr") )
      __debugbreak();
    if ( g_entities[v2].r.isInUse != g_entityIsInUse[v3] && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\game\\g_public.h", 209, ASSERT_TYPE_ASSERT, "( g_entities[entityIndex].r.isInUse == g_entityIsInUse[entityIndex] )", (const char *)&queryFormat, "g_entities[entityIndex].r.isInUse == g_entityIsInUse[entityIndex]") )
      __debugbreak();
    v4 = v0 + 1;
    if ( !g_entityIsInUse[v3] )
      v4 = v0;
    ++v1;
    ++v3;
    ++v2;
    v0 = v4;
  }
  while ( v1 < (int)SvClient::ms_clientCount );
  return v4;
}

/*
==============
OnlineAsyncMatchmakingEventHandler::msgQoSHosts
==============
*/
void OnlineAsyncMatchmakingEventHandler::msgQoSHosts(OnlineAsyncMatchmakingEventHandler *this, unsigned __int64 transactionID, bdArray<bdQoSRemoteAddr> *qosHosts, unsigned __int16 numProbes)
{
  OnlineMatchmakerOmniscient *m_matchmaker; 

  if ( !qosHosts && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\online\\online_matchmaker.cpp", 7083, ASSERT_TYPE_ASSERT, "(qosHosts)", (const char *)&queryFormat, "qosHosts") )
    __debugbreak();
  Com_Printf(25, "[MM] %s - being asked to qos %d hosts\n", "OnlineAsyncMatchmakingEventHandler::msgQoSHosts", qosHosts->m_size);
  m_matchmaker = this->m_matchmaker;
  if ( m_matchmaker )
    OnlineMatchmakerOmniscient::QosHosts(m_matchmaker, transactionID, qosHosts, numProbes);
}

/*
==============
OnlineAsyncMatchmakingEventHandler::msgJoinLobby
==============
*/
void OnlineAsyncMatchmakingEventHandler::msgJoinLobby(OnlineAsyncMatchmakingEventHandler *this, unsigned __int64 mmID, unsigned __int64 lobbyID, char *lobbyHostDoc, unsigned int lobbyHostDocLength, char *lobbyBackendDoc, unsigned int lobbyBackendDocLength)
{
  OnlineMatchmakerOmniscient *m_matchmaker; 

  Com_Printf(25, "[MM] %s - received join lobby event\n", "OnlineAsyncMatchmakingEventHandler::msgJoinLobby");
  m_matchmaker = this->m_matchmaker;
  if ( m_matchmaker )
    OnlineMatchmakerOmniscient::JoinLobby(m_matchmaker, mmID, lobbyID, lobbyHostDoc, lobbyHostDocLength, lobbyBackendDoc, lobbyBackendDocLength);
}

/*
==============
OnlineAsyncMatchmakingEventHandler::msgLobbyDisbanded
==============
*/
void OnlineAsyncMatchmakingEventHandler::msgLobbyDisbanded(OnlineAsyncMatchmakingEventHandler *this, unsigned __int64 lobbyID)
{
  ;
}

/*
==============
OnlineAsyncMatchmakingEventHandler::msgLobbyDisbanded
==============
*/
void OnlineAsyncMatchmakingEventHandler::msgLobbyDisbanded(OnlineAsyncMatchmakingEventHandler *this, unsigned __int64 lobbyID, bdAsyncMatchMakingEventHandler::LobbyDisbandedReason reason)
{
  OnlineMatchmakerOmniscient *m_matchmaker; 
  unsigned __int64 m_lobbyid; 
  OnlineTimeSeriesLog *v7; 
  const dvar_t *v8; 
  PartyDisconnectReason v9; 
  const PartyData *v10; 
  PartyData *PartyData; 

  Com_Printf(131097, "[MM] %s - received lobby disbanded event with reason %d\n", "OnlineAsyncMatchmakingEventHandler::msgLobbyDisbanded", (unsigned int)reason);
  m_matchmaker = this->m_matchmaker;
  if ( m_matchmaker )
  {
    m_lobbyid = m_matchmaker->m_lobbyData.m_lobbyid;
    if ( m_lobbyid == lobbyID )
    {
      v7 = OnlineTimeSeriesLog::Get();
      OnlineTimeSeriesLog::WriteEventCounter(v7, "event.lobbydisbanded.received.count", 1u);
      OnlineMatchmakerTelemetry::DisbandLobby(&m_matchmaker->m_telemetry);
      if ( !OnlineTournament_IsInTournament() )
      {
        OnlineMatchmakerOmniscient::ResetLobby(m_matchmaker);
        v8 = DVARBOOL_onlinegame;
        if ( !DVARBOOL_onlinegame && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\universal\\dvar.h", 692, ASSERT_TYPE_ASSERT, "(dvar)", "%s\n\tDvar %s accessed after deregistration", "dvar", "onlinegame") )
          __debugbreak();
        Dvar_CheckFrontendServerThread(v8);
        if ( v8->current.enabled )
        {
          if ( Live_IsInRestrictedMatchmakingGame() || (v10 = Lobby_GetPartyData(), Party_PrivateMatchmakingAllowed(v10)) )
          {
            LOBYTE(v9) = 22;
            PartyAtomic_AbortJoinAttempt(&g_partyJoinInfo, v9);
            PartyData = Lobby_GetPartyData();
            Party_SetDisbandAfterRound(PartyData);
          }
        }
        m_matchmaker->m_callbacks.m_outstandingCallback |= 0x10u;
        m_matchmaker->m_callbacks.m_callbackWasSuccessful[4] = 1;
      }
    }
    else
    {
      Com_Printf(131097, "LobbyDisbanded - received disband for unknown lobby id %zu (our lobby id is %zu\n", lobbyID, m_lobbyid);
    }
  }
}

/*
==============
OnlineAsyncMatchmakingEventHandler::msgMergeIntoLobby
==============
*/
void OnlineAsyncMatchmakingEventHandler::msgMergeIntoLobby(OnlineAsyncMatchmakingEventHandler *this, unsigned __int64 mmID, unsigned __int64 sourceLobbyID, unsigned __int64 destinationLobbyID, char *lobbyHostDoc, unsigned int lobbyHostDocLength, char *lobbyBackendDoc, unsigned int lobbyBackendDocLength)
{
  OnlineMatchmakerOmniscient *m_matchmaker; 

  Com_Printf(25, "[MM] %s - received lobby merge\n", "OnlineAsyncMatchmakingEventHandler::msgMergeIntoLobby");
  m_matchmaker = this->m_matchmaker;
  if ( m_matchmaker )
  {
    if ( m_matchmaker->m_lobbyData.m_lobbyid == sourceLobbyID )
    {
      OnlineMatchmakerOmniscient::JoinLobby(m_matchmaker, mmID, destinationLobbyID, lobbyHostDoc, lobbyHostDocLength, lobbyBackendDoc, lobbyBackendDocLength);
      OnlineMatchmakerTelemetry::LobbyMerge(&m_matchmaker->m_telemetry);
    }
  }
}

/*
==============
OnlineAsyncMatchmakingEventHandler::msgMatchMakingSearchStatus
==============
*/
void OnlineAsyncMatchmakingEventHandler::msgMatchMakingSearchStatus(OnlineAsyncMatchmakingEventHandler *this, unsigned __int64 mmID, char *matchMakingSearchStatus, unsigned int statusBufferSize)
{
  OnlineMatchmakerOmniscient *m_matchmaker; 

  Com_Printf(25, "[MM] %s - received matchmaking search status\n", "OnlineAsyncMatchmakingEventHandler::msgMatchMakingSearchStatus");
  m_matchmaker = this->m_matchmaker;
  if ( m_matchmaker )
    OnlineMatchmakerOmniscient::SearchStatusUpdate(m_matchmaker, mmID, matchMakingSearchStatus, statusBufferSize);
}

/*
==============
OnlineAsyncMatchmakingEventHandler::msgLobbyNotFound
==============
*/
void OnlineAsyncMatchmakingEventHandler::msgLobbyNotFound(OnlineAsyncMatchmakingEventHandler *this, unsigned __int64 mmID, __int64 cause)
{
  this->msgLobbyNotFound(this, mmID, (bdAsyncMatchMakingEventHandler::LobbyNotFoundCause)cause, "Not Specified");
}

/*
==============
OnlineAsyncMatchmakingEventHandler::msgLobbyNotFound
==============
*/
void OnlineAsyncMatchmakingEventHandler::msgLobbyNotFound(OnlineAsyncMatchmakingEventHandler *this, unsigned __int64 mmID, bdAsyncMatchMakingEventHandler::LobbyNotFoundCause cause, const char *optimizerErrorMessage)
{
  OnlineMatchmakerOmniscient *m_matchmaker; 

  Com_Printf(25, "[MM] %s - lobby not found event, cause %i, optimizer error message \"%s\"\n", "OnlineAsyncMatchmakingEventHandler::msgLobbyNotFound", (unsigned int)cause, optimizerErrorMessage);
  m_matchmaker = this->m_matchmaker;
  if ( m_matchmaker )
    OnlineMatchmakerOmniscient::LobbyNotFound(m_matchmaker, mmID, cause, optimizerErrorMessage);
}

/*
==============
OnlineAsyncMatchmakingEventHandler::msgCreateNewLobby
==============
*/
void OnlineAsyncMatchmakingEventHandler::msgCreateNewLobby(OnlineAsyncMatchmakingEventHandler *this, unsigned __int64 mmID, unsigned __int64 lobbyID, unsigned __int64 updateID, char *lobbyHostDoc, unsigned int lobbyHostDocLength, char *lobbyBackendDoc, unsigned int lobbyBackendDocLength)
{
  OnlineMatchmakerOmniscient *m_matchmaker; 

  Com_Printf(25, "[MM] %s - we've been told to create a lobby\n", "OnlineAsyncMatchmakingEventHandler::msgCreateNewLobby");
  m_matchmaker = this->m_matchmaker;
  if ( m_matchmaker )
    OnlineMatchmakerOmniscient::CreateNewLobby(m_matchmaker, mmID, lobbyID, updateID, lobbyHostDoc, lobbyHostDocLength, lobbyBackendDoc, lobbyBackendDocLength);
}

/*
==============
OnlineAsyncMatchmakingEventHandler::msgUpdateLobbyDocument
==============
*/
void OnlineAsyncMatchmakingEventHandler::msgUpdateLobbyDocument(OnlineAsyncMatchmakingEventHandler *this, unsigned __int64 lobbyID, unsigned __int64 updateID, char *lobbyHostDoc, unsigned int lobbyHostDocLength, char *lobbyBackendDoc, unsigned int lobbyBackendDocLength)
{
  OnlineMatchmakerOmniscient *m_matchmaker; 

  Com_Printf(25, "[MM] %s - lobby doc has been updated\n", "OnlineAsyncMatchmakingEventHandler::msgUpdateLobbyDocument");
  m_matchmaker = this->m_matchmaker;
  if ( m_matchmaker )
    OnlineMatchmakerOmniscient::UpdateLobbyDocument(m_matchmaker, lobbyID, updateID, lobbyHostDoc, lobbyHostDocLength, lobbyBackendDoc, lobbyBackendDocLength);
}

/*
==============
OnlineAsyncMatchmakingEventHandler::msgExpectGame
==============
*/
void OnlineAsyncMatchmakingEventHandler::msgExpectGame(OnlineAsyncMatchmakingEventHandler *this, unsigned __int64 lobbyID, char *lobbyBackendDoc, unsigned int lobbyBackendDocLength)
{
  Com_Printf(131097, "[MM] %s - received lobby backend doc:\n%s\n", "OnlineAsyncMatchmakingEventHandler::msgExpectGame", lobbyBackendDoc);
}

/*
==============
OnlineAsyncMatchmakingEventHandler::msgJoinTournament
==============
*/
void OnlineAsyncMatchmakingEventHandler::msgJoinTournament(OnlineAsyncMatchmakingEventHandler *this, unsigned __int64 mmID, const char *tournamentState, unsigned int tournamentStateLength)
{
  bdJSONDeserializer v8; 
  unsigned __int64 value; 

  Com_Printf(25, "[MM] %s - \n%lu\n%s\n", "OnlineAsyncMatchmakingEventHandler::msgJoinTournament", mmID, tournamentState);
  if ( this->m_matchmaker )
  {
    bdJSONDeserializer::bdJSONDeserializer(&v8);
    bdJSONDeserializer::parse(&v8, tournamentState);
    if ( bdJSONDeserializer::getUInt64(&v8, "tournamentID", &value) )
      this->m_matchmaker->m_lobbyData.m_tournamentID = value;
    bdJSONDeserializer::~bdJSONDeserializer(&v8);
  }
  OnlineTournament_OnJoinTournament(mmID, tournamentState, tournamentStateLength);
}

/*
==============
OnlineAsyncMatchmakingEventHandler::msgUpdateTournament
==============
*/
void OnlineAsyncMatchmakingEventHandler::msgUpdateTournament(OnlineAsyncMatchmakingEventHandler *this, const char *tournamentState, unsigned int tournamentStateLength)
{
  Com_Printf(25, "[MM] %s - \n%s\n", "OnlineAsyncMatchmakingEventHandler::msgUpdateTournament", tournamentState);
  OnlineTournament_OnUpdateTournament(tournamentState, tournamentStateLength);
}

/*
==============
OnlineAsyncMatchmakingEventHandler::msgTournamentFormationLobbyDisbanded
==============
*/
void OnlineAsyncMatchmakingEventHandler::msgTournamentFormationLobbyDisbanded(OnlineAsyncMatchmakingEventHandler *this, unsigned __int64 tournamentID)
{
  Com_Printf(25, "[MM] %s - \n%llu\n", "OnlineAsyncMatchmakingEventHandler::msgTournamentFormationLobbyDisbanded", tournamentID);
  OnlineTournament_OnBracketDisbanded(tournamentID);
}

/*
==============
OnlineAsyncMatchmakingEventHandler::msgTournamentDisbanded
==============
*/
void OnlineAsyncMatchmakingEventHandler::msgTournamentDisbanded(OnlineAsyncMatchmakingEventHandler *this, unsigned __int64 tournamentID, bdAsyncMatchMakingEventHandler::TournamentDisbandedReason reason, const char *message)
{
  Com_Printf(25, "[MM] %s - \n%llu, reason %d, message: %s\n", "OnlineAsyncMatchmakingEventHandler::msgTournamentDisbanded", tournamentID, reason, message);
  OnlineTournament_OnTournamentDisbanded(tournamentID, reason, message);
}

/*
==============
MatchmakingData::MatchmakingData
==============
*/
void MatchmakingData::MatchmakingData(MatchmakingData *this)
{
  ntl::internal::pool_allocator_freelist<24> *p_m_freelist; 
  ntl::internal::pool_allocator_freelist<24> *v3; 
  MatchmakingData *mp_next; 
  ntl::internal::list_head_base<ntl::internal::list_node<PingBand> > *p_m_listHead; 
  bdBoolResult_vtbl *v6; 

  bdBoolResult::bdBoolResult(&this->m_outstandingResult);
  p_m_freelist = &this->m_pingBands.m_freelist;
  v3 = &this->m_pingBands.m_freelist;
  do
  {
    v3 -= 3;
    v3->m_head.mp_next = &p_m_freelist->m_head;
    p_m_freelist = v3;
  }
  while ( v3 > (ntl::internal::pool_allocator_freelist<24> *)&this->m_pingBands );
  this->m_pingBands.m_freelist.m_head.mp_next = &v3->m_head;
  if ( !v3 && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\libs\\ntl\\ntl\\allocator\\pool_allocator.h", 112, ASSERT_TYPE_ASSERT, "( m_head.mp_next != 0 )", "This container was memset to zero") )
    __debugbreak();
  this->m_pingBands.m_listHead.m_sentinel.mp_prev = &this->m_pingBands.m_listHead.m_sentinel;
  this->m_pingBands.m_listHead.m_sentinel.mp_next = &this->m_pingBands.m_listHead.m_sentinel;
  this->m_matchmakingId = 0i64;
  this->m_timeOut = 0;
  mp_next = (MatchmakingData *)this->m_pingBands.m_listHead.m_sentinel.mp_next;
  p_m_listHead = &this->m_pingBands.m_listHead;
  if ( mp_next != (MatchmakingData *)&this->m_pingBands.m_listHead )
  {
    do
    {
      v6 = mp_next->m_outstandingResult.__vftable;
      mp_next->m_matchmakingId = (unsigned __int64)this->m_pingBands.m_freelist.m_head.mp_next;
      this->m_pingBands.m_freelist.m_head.mp_next = (ntl::internal::pool_allocator_pointer_freelist::free_item_pointer *)mp_next;
      mp_next = (MatchmakingData *)v6;
    }
    while ( v6 != (bdBoolResult_vtbl *)p_m_listHead );
  }
  p_m_listHead->m_sentinel.mp_prev = &p_m_listHead->m_sentinel;
  this->m_pingBands.m_listHead.m_sentinel.mp_next = &this->m_pingBands.m_listHead.m_sentinel;
  *(_WORD *)&this->m_firstTime = 1;
}

/*
==============
tCallbacks::AddCallbackToQueue
==============
*/
void tCallbacks::AddCallbackToQueue(tCallbacks *this, tCallbacks::tCallbackTypes type, const tCallbackResult inviteResult)
{
  __int64 v5; 
  int v7; 

  v5 = (unsigned int)type;
  if ( (unsigned int)type >= eREMOVING_PLAYER )
  {
    v7 = 7;
    if ( CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\online\\online_matchmaker.cpp", 7929, ASSERT_TYPE_ASSERT, "(unsigned)( type ) < (unsigned)( tCallbackTypes::eEND )", "type doesn't index tCallbackTypes::eEND\n\t%i not in [0, %i)", type, v7) )
      __debugbreak();
  }
  this->m_outstandingCallback |= 1 << v5;
  if ( (inviteResult < eIDLE || (unsigned int)inviteResult > 0xFF) && CoreAssert_Handler("c:\\workspace\\iw8\\shared\\codware\\core\\core_assert.h", 385, ASSERT_TYPE_ASSERT, (const char *)&queryFormat.fmt + 3, "%s (SmallType) %s 0x%jx == (BigType) %s 0x%jx", "unsigned char __cdecl truncate_cast_impl<unsigned char,enum tCallbackResult>(enum tCallbackResult)", "unsigned", (unsigned __int8)inviteResult, "signed", inviteResult) )
    __debugbreak();
  this->m_callbackWasSuccessful[v5] = inviteResult;
}

/*
==============
OnlineMatchmakerOmniscient::AddLocalPlayer
==============
*/
void OnlineMatchmakerOmniscient::AddLocalPlayer(OnlineMatchmakerOmniscient *this, OnlineMatchmakerOmniscient::Player *outplayer)
{
  SetPlayerInfoResult v4; 
  OnlineMatchmakerOmniscient::Player::PlayerState v5; 

  v4 = OnlineMatchmakerOmniscient::SetPlayerInfo(this, outplayer->m_controllerIndex, &outplayer->m_address, &outplayer->m_taskId);
  if ( v4 )
  {
    if ( v4 == TASK_SKIPPED )
    {
      v5 = eREMOTE_WAITING_FOR_MMING_TOKEN;
    }
    else
    {
      if ( v4 != TASK_FAILED && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\online\\online_matchmaker.cpp", 4002, ASSERT_TYPE_ASSERT, (const char *)&queryFormat.fmt + 3, "Unknown tSetPlayerInfoResult (%i)", v4) )
        __debugbreak();
      v5 = eFAILURE;
    }
  }
  else
  {
    v5 = eADDING_LOCAL_PLAYER_TO_DW;
  }
  OnlineMatchmakerOmniscient::SetPlayerState(this, outplayer, v5);
}

/*
==============
OnlineMatchmakerOmniscient::AddPlayerFromDW
==============
*/
void OnlineMatchmakerOmniscient::AddPlayerFromDW(OnlineMatchmakerOmniscient *this, const XUID xuid, MemberStatus status)
{
  const dvar_t *v5; 
  const char *v6; 
  ntl::internal::list_head_base<ntl::internal::list_node<OnlineMatchmakerOmniscient::Player> > *p_m_listHead; 
  ntl::internal::list_node_base *mp_next; 
  ntl::internal::list_node_base *v9; 
  const dvar_t *v10; 
  __int64 v11; 
  ntl::internal::list_node_base *i; 
  ntl::internal::pool_allocator_freelist<232> *p_m_freelist; 
  ntl::internal::list_node<OnlineMatchmakerOmniscient::Player> *v14; 
  const char *v15; 
  const char *v16; 
  const char *v17; 
  const char *v18; 
  const char *v19; 
  OnlineMatchmakerOmniscient::Player outplayer; 
  __int64 v21[5]; 
  XUID xuida; 

  xuida.m_id = xuid.m_id;
  outplayer.m_state = eIDLE;
  XUID::NullXUID(&outplayer.m_userId);
  outplayer.m_bIsLocal = 0;
  outplayer.m_controllerIndex = -1;
  *(_WORD *)&outplayer.m_isGettingMatchmakingToken = 256;
  outplayer.m_additionalSlotsRequested = 0;
  bdUInt64Result::bdUInt64Result(&outplayer.m_matchmakingTokenResult);
  memset(&outplayer.m_matchmakingToken, 0, 28);
  outplayer.m_squadId = -1;
  outplayer.m_mmId = 0i64;
  outplayer.m_performanceValue = 0.0;
  outplayer.m_isPaidUser = 0;
  outplayer.m_taskId = 0;
  outplayer.m_lastStateSyncTime = 0i64;
  XUID::operator=(&outplayer.m_userId, &xuida);
  v5 = DVARBOOL_online_matchmaking_reduce_print_spam;
  if ( !DVARBOOL_online_matchmaking_reduce_print_spam && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\universal\\dvar.h", 692, ASSERT_TYPE_ASSERT, "(dvar)", "%s\n\tDvar %s accessed after deregistration", "dvar", "online_matchmaking_reduce_print_spam") )
    __debugbreak();
  Dvar_CheckFrontendServerThread(v5);
  if ( !v5->current.enabled )
  {
    v6 = XUID::ToDevString(&xuida);
    Com_Printf(25, "[MM] %s - adding player - %s\n", "OnlineMatchmakerOmniscient::AddPlayerFromDW", v6);
  }
  p_m_listHead = &this->m_playerList.m_listHead;
  mp_next = this->m_playerList.m_listHead.m_sentinel.mp_next;
  if ( mp_next != (ntl::internal::list_node_base *)&this->m_playerList.m_listHead )
  {
    v9 = this->m_playerList.m_listHead.m_sentinel.mp_next;
    do
    {
      if ( !v9 && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\libs\\ntl\\ntl\\list\\list.h", 97, ASSERT_TYPE_ASSERT, "( mp_node )", (const char *)&queryFormat, "mp_node") )
        __debugbreak();
      if ( XUID::operator==(&xuida, (const XUID *)&mp_next[6].mp_next) )
        break;
      if ( !mp_next && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\libs\\ntl\\ntl\\list\\list.h", 109, ASSERT_TYPE_ASSERT, "( mp_node )", (const char *)&queryFormat, "mp_node") )
        __debugbreak();
      v9 = mp_next->mp_next;
      mp_next = v9;
    }
    while ( v9 != (ntl::internal::list_node_base *)p_m_listHead );
    if ( mp_next != (ntl::internal::list_node_base *)p_m_listHead && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\online\\online_matchmaker.cpp", 3302, ASSERT_TYPE_SANITY, "( !FindPlayer( xuid, &it ) )", (const char *)&queryFormat, "!FindPlayer( xuid, &it )") )
      __debugbreak();
  }
  OnlineMatchmakerOmniscient::SetPlayerState(this, &outplayer, eNEW);
  OnlineMatchmakerOmniscient::SetPlayerCurrentStatus(this, &outplayer, status);
  if ( this->m_lobbyData.m_amITheLobbyHost )
  {
    OnlineMatchmakerOmniscient::SetPlayerQueuedStatus(this, &outplayer, eNEW);
    OnlineMatchmakerOmniscient::SetPlayerPotentiallyJoining(this, &outplayer);
  }
  else
  {
    OnlineMatchmakerOmniscient::SetPlayerQueuedStatus(this, &outplayer, status);
  }
  outplayer.m_bIsLocal = 0;
  outplayer.m_isPrimaryAccount = 1;
  v10 = DVARBOOL_online_matchmaking_use_pruning;
  if ( !DVARBOOL_online_matchmaking_use_pruning && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\universal\\dvar.h", 692, ASSERT_TYPE_ASSERT, "(dvar)", "%s\n\tDvar %s accessed after deregistration", "dvar", "online_matchmaking_use_pruning") )
    __debugbreak();
  Dvar_CheckFrontendServerThread(v10);
  if ( v10->current.enabled )
    OnlineMatchmakerOmniscient::AggressivelyPrunePlayers(this);
  v11 = 0i64;
  for ( i = this->m_playerList.m_listHead.m_sentinel.mp_next; i != (ntl::internal::list_node_base *)&this->m_playerList.m_listHead; i = i->mp_next )
    ++v11;
  if ( (unsigned __int64)(v11 + 1) > 0xC8 )
  {
    v15 = XUID::ToString(&outplayer.m_userId);
    v16 = j_va("{\"status\":\"No room to add player %s.\"}", v15);
    OnlineMatchmakerOmniscient::Log(this, "AddPlayerFromDW", v16, NULL, NULL, 0i64);
    if ( CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\online\\online_matchmaker.cpp", 3340, ASSERT_TYPE_ASSERT, (const char *)&queryFormat.fmt + 3, "AddPlayerFromDW - m_playerList out of space.") )
      __debugbreak();
  }
  else
  {
    p_m_freelist = &this->m_playerList.m_freelist;
    if ( !this->m_playerList.m_freelist.m_head.mp_next )
    {
      if ( CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\libs\\ntl\\ntl\\allocator\\pool_allocator.h", 112, ASSERT_TYPE_ASSERT, "( m_head.mp_next != 0 )", "This container was memset to zero") )
        __debugbreak();
      if ( !p_m_freelist->m_head.mp_next && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\libs\\ntl\\ntl\\allocator\\pool_allocator.h", 112, ASSERT_TYPE_ASSERT, "( m_head.mp_next != 0 )", "This container was memset to zero") )
        __debugbreak();
    }
    if ( (ntl::internal::pool_allocator_freelist<232> *)p_m_freelist->m_head.mp_next == p_m_freelist && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\libs\\ntl\\ntl\\allocator\\pool_allocator.h", 298, ASSERT_TYPE_ASSERT, "( !empty() )", "Pool out of elements to allocate (Elem size=%zu, Num elems=%zu)", 0xE8ui64, 0xC8ui64) )
      __debugbreak();
    v14 = (ntl::internal::list_node<OnlineMatchmakerOmniscient::Player> *)p_m_freelist->m_head.mp_next;
    p_m_freelist->m_head.mp_next = p_m_freelist->m_head.mp_next->mp_next;
    v14->mp_prev = NULL;
    v14->mp_next = NULL;
    OnlineMatchmakerOmniscient::Player::Player(&v14->m_data, &outplayer);
    ntl::internal::list_head_base<ntl::internal::list_node<OnlineMatchmakerOmniscient::Player>>::insert_before(&this->m_playerList.m_listHead, (ntl::internal::list_node<OnlineMatchmakerOmniscient::Player> *)&this->m_playerList.m_listHead, v14);
    OnlineMatchmakerTelemetry::AddPlayer(&this->m_telemetry, outplayer.m_userId);
  }
  this->m_lobbyData.m_lobbyDocIsDirty = 1;
  v21[0] = (__int64)"eNONE";
  v21[1] = (__int64)"eINITED";
  v21[2] = (__int64)"eCONNECTED";
  v21[3] = (__int64)"eDISCONNECTED";
  v21[4] = (__int64)"eUNKNOWN";
  v17 = (const char *)v21[outplayer.m_sessionStatus];
  v18 = XUID::ToString(&outplayer.m_userId);
  v19 = j_va("{\"player\":%s,\"player_session_status\":\"%s\"}", v18, v17);
  OnlineMatchmakerOmniscient::Log(this, "AddPlayerFromDW", v19, NULL, NULL, 0i64);
  bdUInt64Result::~bdUInt64Result((bdUInt64Result *)(&outplayer.m_matchmakingTokenResult.__vftable + 3));
  bdReferencable::~bdReferencable((bdReferencable *)(&outplayer.m_matchmakingTokenResult.__vftable + 3));
}

/*
==============
OnlineMatchmakerOmniscient::AddPlayerFromLocal
==============
*/
void OnlineMatchmakerOmniscient::AddPlayerFromLocal(OnlineMatchmakerOmniscient *this, const XUID xuid, const XNADDR *addr, const int localControllerIndex, const bool isSplitscreenSecondaryPlayer)
{
  const dvar_t *v8; 
  const char *v9; 
  bool IsNull; 
  ntl::internal::list_node<OnlineMatchmakerOmniscient::Player> *mp_node; 
  const dvar_t *v12; 
  const char *String; 
  const char *v14; 
  OnlineMatchmakerOmniscient::Player::PlayerState v15; 
  const dvar_t *v16; 
  const char *v17; 
  const char *v18; 
  bdCommonAddr *m_ptr; 
  int m_controllerIndex; 
  bool v21; 
  const char *v22; 
  unsigned __int64 m_id; 
  const PartyData *PartyData; 
  int MemberByXUID_AllowNotPresent; 
  bool v26; 
  int v27; 
  const dvar_t *v28; 
  ntl::internal::pool_allocator_freelist<232> *p_m_freelist; 
  ntl::internal::list_node<OnlineMatchmakerOmniscient::Player> *mp_next; 
  const dvar_t *v31; 
  const char *v32; 
  const char *v33; 
  MatchmakerOmniscientState m_state; 
  const char *StateString; 
  const char *v36; 
  const char *LobbyStateString; 
  const char *v38; 
  bdReference<bdCommonAddr> me; 
  ntl::internal::list_iterator<OnlineMatchmakerOmniscient::Player,ntl::internal::list_node<OnlineMatchmakerOmniscient::Player>,OnlineMatchmakerOmniscient::Player *,OnlineMatchmakerOmniscient::Player &> it; 
  bdCommonAddr *v41; 
  __int64 v42; 
  OnlineMatchmakerOmniscient::Player outplayer; 
  bdCommonAddr v44; 
  XUID xuida; 

  xuida.m_id = xuid.m_id;
  v42 = -2i64;
  outplayer.m_state = eIDLE;
  XUID::NullXUID(&outplayer.m_userId);
  outplayer.m_bIsLocal = 0;
  outplayer.m_controllerIndex = -1;
  *(_WORD *)&outplayer.m_isGettingMatchmakingToken = 256;
  outplayer.m_additionalSlotsRequested = 0;
  bdUInt64Result::bdUInt64Result(&outplayer.m_matchmakingTokenResult);
  memset(&outplayer.m_matchmakingToken, 0, 28);
  outplayer.m_squadId = -1;
  outplayer.m_mmId = 0i64;
  outplayer.m_performanceValue = 0.0;
  outplayer.m_isPaidUser = 0;
  outplayer.m_taskId = 0;
  outplayer.m_lastStateSyncTime = 0i64;
  XUID::operator=(&outplayer.m_userId, &xuida);
  outplayer.m_address = *addr;
  v8 = DVARBOOL_online_matchmaking_reduce_print_spam;
  if ( !DVARBOOL_online_matchmaking_reduce_print_spam && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\universal\\dvar.h", 692, ASSERT_TYPE_ASSERT, "(dvar)", "%s\n\tDvar %s accessed after deregistration", "dvar", "online_matchmaking_reduce_print_spam") )
    __debugbreak();
  Dvar_CheckFrontendServerThread(v8);
  if ( !v8->current.enabled )
  {
    v9 = XUID::ToDevString(&xuida);
    Com_Printf(25, "[MM] %s - adding player - %s\n", "OnlineMatchmakerOmniscient::AddPlayerFromLocal", v9);
  }
  if ( OnlineMatchmakerOmniscient::FindPlayer(this, &xuida, &it) )
  {
    IsNull = XNADDR::IsNull(&outplayer.m_address);
    mp_node = it.mp_node;
    if ( !IsNull )
    {
      if ( !it.mp_node && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\libs\\ntl\\ntl\\list\\list.h", 103, ASSERT_TYPE_ASSERT, "( mp_node )", (const char *)&queryFormat, "mp_node") )
        __debugbreak();
      if ( XNADDR::operator!=(&outplayer.m_address, &mp_node->m_data.m_address) )
      {
        v12 = DVARBOOL_online_matchmaking_reduce_print_spam;
        if ( !DVARBOOL_online_matchmaking_reduce_print_spam && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\universal\\dvar.h", 692, ASSERT_TYPE_ASSERT, "(dvar)", "%s\n\tDvar %s accessed after deregistration", "dvar", "online_matchmaking_reduce_print_spam") )
          __debugbreak();
        Dvar_CheckFrontendServerThread(v12);
        if ( !v12->current.enabled )
        {
          String = XNADDR::GetString((XNADDR *)addr);
          if ( !mp_node && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\libs\\ntl\\ntl\\list\\list.h", 103, ASSERT_TYPE_ASSERT, "( mp_node )", (const char *)&queryFormat, "mp_node") )
            __debugbreak();
          v14 = XNADDR::GetString(&mp_node->m_data.m_address);
          Com_Printf(25, "\t* adding player - we already have this player but their address (%s) has changed? Taking the new address (%s).\n", v14, String);
        }
        if ( !mp_node && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\libs\\ntl\\ntl\\list\\list.h", 103, ASSERT_TYPE_ASSERT, "( mp_node )", (const char *)&queryFormat, "mp_node") )
          __debugbreak();
        *(__m256i *)mp_node->m_data.m_address.addrBuff = *(__m256i *)addr->addrBuff;
        *(__m256i *)&mp_node->m_data.m_address.addrBuff[32] = *(__m256i *)&addr->addrBuff[32];
        *(_OWORD *)&mp_node->m_data.m_address.addrBuff[64] = *(_OWORD *)&addr->addrBuff[64];
        *(_DWORD *)&mp_node->m_data.m_address.addrBuff[80] = *(_DWORD *)&addr->addrBuff[80];
      }
    }
    if ( !mp_node && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\libs\\ntl\\ntl\\list\\list.h", 103, ASSERT_TYPE_ASSERT, "( mp_node )", (const char *)&queryFormat, "mp_node") )
      __debugbreak();
    mp_node->m_data.m_sessionStatus = eNEW;
    v15 = eREMOTE_WAITING_FOR_MMING_TOKEN;
    if ( mp_node->m_data.m_matchmakingToken )
      v15 = eREADY;
    OnlineMatchmakerOmniscient::SetPlayerState(this, &outplayer, v15);
    v16 = DVARBOOL_online_matchmaking_reduce_print_spam;
    if ( !DVARBOOL_online_matchmaking_reduce_print_spam && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\universal\\dvar.h", 692, ASSERT_TYPE_ASSERT, "(dvar)", "%s\n\tDvar %s accessed after deregistration", "dvar", "online_matchmaking_reduce_print_spam") )
      __debugbreak();
    Dvar_CheckFrontendServerThread(v16);
    if ( !v16->current.enabled )
    {
      v17 = XUID::ToString(&outplayer.m_userId);
      v18 = j_va("{\"player\":%s}", v17);
      OnlineMatchmakerOmniscient::Log(this, "AddPlayerFromLocal", v18, NULL, NULL, 0i64);
    }
    goto LABEL_85;
  }
  if ( XNADDR::IsNull(&outplayer.m_address) )
  {
    outplayer.m_bIsLocal = 0;
  }
  else
  {
    bdCommonAddr::bdCommonAddr(&v44);
    m_ptr = NET_GetLocalCommonAddr()->m_ptr;
    v41 = m_ptr;
    if ( m_ptr )
      _InterlockedExchangeAdd((volatile signed __int32 *)&m_ptr->m_refCount, 1u);
    me.m_ptr = m_ptr;
    if ( m_ptr )
      _InterlockedExchangeAdd((volatile signed __int32 *)&m_ptr->m_refCount, 1u);
    bdCommonAddr::deserialize(&v44, (bdReference<bdCommonAddr>)&me, outplayer.m_address.addrBuff);
    outplayer.m_bIsLocal = v44.m_isLoopback;
    if ( m_ptr && _InterlockedExchangeAdd((volatile signed __int32 *)&m_ptr->m_refCount, 0xFFFFFFFF) == 1 )
      ((void (__fastcall *)(bdCommonAddr *, __int64))m_ptr->~bdReferencable)(m_ptr, 1i64);
    bdCommonAddr::~bdCommonAddr(&v44);
    m_controllerIndex = outplayer.m_controllerIndex;
    if ( outplayer.m_bIsLocal )
      m_controllerIndex = localControllerIndex;
    outplayer.m_controllerIndex = m_controllerIndex;
  }
  outplayer.m_sessionStatus = eNEW;
  v21 = isSplitscreenSecondaryPlayer;
  if ( isSplitscreenSecondaryPlayer )
  {
    outplayer.m_isPrimaryAccount = 0;
    v22 = XUID::ToDevString(&outplayer.m_userId);
    Com_Printf(25, "\tPlayer %s is splitscreen\n", v22);
  }
  OnlineMatchmakerOmniscient::SetPlayerState(this, &outplayer, eNEW);
  if ( Lobby_IsInRunningLobby() )
  {
    m_id = outplayer.m_userId.m_id;
    PartyData = Lobby_GetPartyData();
    MemberByXUID_AllowNotPresent = Party_FindMemberByXUID_AllowNotPresent(PartyData, (const XUID)m_id);
    if ( MemberByXUID_AllowNotPresent < 0 )
      goto LABEL_56;
    v26 = PartyData->partyMembers[MemberByXUID_AllowNotPresent].status == 1;
  }
  else
  {
    if ( !Party_IsTheActiveParty(&g_partyData) )
      goto LABEL_56;
    v27 = Party_FindMemberByXUID_AllowNotPresent(&g_partyData, outplayer.m_userId);
    if ( v27 < 0 )
      goto LABEL_56;
    v26 = g_partyData.partyMembers[v27].status == 1;
  }
  if ( !v26 )
    OnlineMatchmakerOmniscient::SetPlayerQueuedStatus(this, &outplayer, eADDING_LOCAL_PLAYER_TO_DW);
LABEL_56:
  v28 = DVARBOOL_online_matchmaking_use_pruning;
  if ( !DVARBOOL_online_matchmaking_use_pruning && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\universal\\dvar.h", 692, ASSERT_TYPE_ASSERT, "(dvar)", "%s\n\tDvar %s accessed after deregistration", "dvar", "online_matchmaking_use_pruning") )
    __debugbreak();
  Dvar_CheckFrontendServerThread(v28);
  if ( v28->current.enabled )
    OnlineMatchmakerOmniscient::AggressivelyPrunePlayers(this);
  p_m_freelist = &this->m_playerList.m_freelist;
  if ( !this->m_playerList.m_freelist.m_head.mp_next )
  {
    if ( CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\libs\\ntl\\ntl\\allocator\\pool_allocator.h", 112, ASSERT_TYPE_ASSERT, "( m_head.mp_next != 0 )", "This container was memset to zero") )
      __debugbreak();
    if ( !p_m_freelist->m_head.mp_next && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\libs\\ntl\\ntl\\allocator\\pool_allocator.h", 112, ASSERT_TYPE_ASSERT, "( m_head.mp_next != 0 )", "This container was memset to zero") )
      __debugbreak();
  }
  if ( (ntl::internal::pool_allocator_freelist<232> *)p_m_freelist->m_head.mp_next == p_m_freelist && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\libs\\ntl\\ntl\\allocator\\pool_allocator.h", 298, ASSERT_TYPE_ASSERT, "( !empty() )", "Pool out of elements to allocate (Elem size=%zu, Num elems=%zu)", 0xE8ui64, 0xC8ui64) )
    __debugbreak();
  mp_next = (ntl::internal::list_node<OnlineMatchmakerOmniscient::Player> *)p_m_freelist->m_head.mp_next;
  p_m_freelist->m_head.mp_next = p_m_freelist->m_head.mp_next->mp_next;
  mp_next->mp_prev = NULL;
  mp_next->mp_next = NULL;
  OnlineMatchmakerOmniscient::Player::Player(&mp_next->m_data, &outplayer);
  ntl::internal::list_head_base<ntl::internal::list_node<OnlineMatchmakerOmniscient::Player>>::insert_before(&this->m_playerList.m_listHead, (ntl::internal::list_node<OnlineMatchmakerOmniscient::Player> *)&this->m_playerList.m_listHead, mp_next);
  OnlineMatchmakerTelemetry::AddPlayer(&this->m_telemetry, outplayer.m_userId);
  v31 = DVARBOOL_online_matchmaking_reduce_print_spam;
  if ( !DVARBOOL_online_matchmaking_reduce_print_spam && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\universal\\dvar.h", 692, ASSERT_TYPE_ASSERT, "(dvar)", "%s\n\tDvar %s accessed after deregistration", "dvar", "online_matchmaking_reduce_print_spam") )
    __debugbreak();
  Dvar_CheckFrontendServerThread(v31);
  if ( !v31->current.enabled )
  {
    v32 = XUID::ToString(&outplayer.m_userId);
    v33 = j_va("{\"player\":%s}", v32);
    OnlineMatchmakerOmniscient::Log(this, "AddPlayerFromLocal", v33, NULL, NULL, 0i64);
  }
  if ( v21 )
    OnlineMatchmakerOmniscient::SyncSplitscreenPlayers(this);
  if ( Party_GetActiveParty()->areWeHost && !v21 )
  {
    m_state = this->m_state;
    if ( (unsigned int)(this->m_state - 4) > 2 )
    {
      if ( m_state != eREMOVING_PLAYER || this->m_lobbyState != eADDING_LOCAL_PLAYER_TO_DW )
        goto LABEL_85;
      LobbyStateString = OnlineMatchmakerOmniscient::GetLobbyStateString(this, eADDING_LOCAL_PLAYER_TO_DW);
      v38 = XUID::ToDevString(&outplayer.m_userId);
      Com_Printf(25, "[MM] %s player %s added while in lobby state %s, will reset matchmaking\n", "OnlineMatchmakerOmniscient::AddPlayerFromLocal", v38, LobbyStateString);
    }
    else
    {
      StateString = OnlineMatchmakerOmniscient::GetStateString(this, m_state);
      v36 = XUID::ToDevString(&outplayer.m_userId);
      Com_Printf(25, "[MM] %s player %s added while in state %s, will reset matchmaking\n", "OnlineMatchmakerOmniscient::AddPlayerFromLocal", v36, StateString);
    }
    OnlineMatchmakerOmniscient::ResetMatchmaking(this);
  }
LABEL_85:
  bdUInt64Result::~bdUInt64Result((bdUInt64Result *)(&outplayer.m_matchmakingTokenResult.__vftable + 3));
  bdReferencable::~bdReferencable((bdReferencable *)(&outplayer.m_matchmakingTokenResult.__vftable + 3));
}

/*
==============
OnlineMatchmakerOmniscient::AddPlayers
==============
*/
void OnlineMatchmakerOmniscient::AddPlayers(OnlineMatchmakerOmniscient *this)
{
  const PartyData *PartyData; 

  OnlineMatchmakerOmniscient::AddPlayersFromParty(this, &g_partyData);
  PartyData = Lobby_GetPartyData();
  OnlineMatchmakerOmniscient::AddPlayersFromParty(this, PartyData);
}

/*
==============
OnlineMatchmakerOmniscient::AddPlayersFromParty
==============
*/
void OnlineMatchmakerOmniscient::AddPlayersFromParty(OnlineMatchmakerOmniscient *this, const PartyData *const party)
{
  int i; 
  int ControllerIndexFromXuid; 
  bool IsMemberSplitscreenPrimary; 
  XUID result; 
  XNADDR xnaddr; 

  for ( i = 0; i < 200; ++i )
  {
    if ( Party_IsMemberIndexDataAvailable(party, i) )
    {
      XNADDR::Clear(&xnaddr);
      Party_GetClientXNAddr(party, i, &xnaddr);
      Party_GetXuid(&result, party, i);
      ControllerIndexFromXuid = Live_GetControllerIndexFromXuid(result);
      IsMemberSplitscreenPrimary = Party_IsMemberSplitscreenPrimary(party, i);
      OnlineMatchmakerOmniscient::AddPlayerFromLocal(this, result, &xnaddr, ControllerIndexFromXuid, !IsMemberSplitscreenPrimary);
    }
  }
}

/*
==============
OnlineMatchmakerOmniscient::AggressivelyPrunePlayers
==============
*/
void OnlineMatchmakerOmniscient::AggressivelyPrunePlayers(OnlineMatchmakerOmniscient *this)
{
  const dvar_t *v1; 
  __int64 v3; 
  __int64 v4; 
  ntl::internal::list_node_base *i; 
  ntl::internal::list_head_base<ntl::internal::list_node<OnlineMatchmakerOmniscient::Player> > *p_m_listHead; 
  unsigned __int64 v7; 
  ntl::internal::list_node_base *mp_next; 
  ntl::internal::list_head_base<ntl::internal::list_node<OnlineMatchmakerOmniscient::Player> > *v9; 
  int j; 
  ntl::internal::list_node_base *v11; 
  __int64 v12; 
  ntl::internal::list_node<OnlineMatchmakerOmniscient::Player> *k; 
  XUID v14; 
  ntl::internal::list_node_base *v15; 
  __int64 v16; 
  ntl::internal::list_node_base *p_m_sentinel; 
  ntl::internal::list_head_base<ntl::internal::list_node<OnlineMatchmakerOmniscient::Player> > *v18; 
  const PartyData *PartyData; 
  ntl::internal::list_node_base *v20; 
  char *fmt; 
  ntl::internal::list_iterator<OnlineMatchmakerOmniscient::Player,ntl::internal::list_node<OnlineMatchmakerOmniscient::Player>,OnlineMatchmakerOmniscient::Player *,OnlineMatchmakerOmniscient::Player &> it; 
  ntl::internal::list_iterator<OnlineMatchmakerOmniscient::Player,ntl::internal::list_node<OnlineMatchmakerOmniscient::Player>,OnlineMatchmakerOmniscient::Player *,OnlineMatchmakerOmniscient::Player &> result; 

  v1 = DVARBOOL_online_matchmaking_reduce_print_spam;
  if ( !DVARBOOL_online_matchmaking_reduce_print_spam && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\universal\\dvar.h", 692, ASSERT_TYPE_ASSERT, "(dvar)", "%s\n\tDvar %s accessed after deregistration", "dvar", "online_matchmaking_reduce_print_spam") )
    __debugbreak();
  Dvar_CheckFrontendServerThread(v1);
  v3 = 0i64;
  if ( !v1->current.enabled )
  {
    v4 = 0i64;
    for ( i = this->m_playerList.m_listHead.m_sentinel.mp_next; i != (ntl::internal::list_node_base *)&this->m_playerList.m_listHead; ++v4 )
      i = i->mp_next;
    LODWORD(fmt) = 200;
    Com_Printf(25, "[MM] %s - size = %zu (%d)\n", "OnlineMatchmakerOmniscient::AggressivelyPrunePlayers", v4, fmt);
  }
  p_m_listHead = &this->m_playerList.m_listHead;
  v7 = 0i64;
  mp_next = this->m_playerList.m_listHead.m_sentinel.mp_next;
  v9 = (ntl::internal::list_head_base<ntl::internal::list_node<OnlineMatchmakerOmniscient::Player> > *)mp_next;
  if ( mp_next != (ntl::internal::list_node_base *)&this->m_playerList.m_listHead )
  {
    do
    {
      v9 = (ntl::internal::list_head_base<ntl::internal::list_node<OnlineMatchmakerOmniscient::Player> > *)v9->m_sentinel.mp_next;
      ++v7;
    }
    while ( v9 != p_m_listHead );
    if ( v7 >= 0xC8 )
    {
      for ( j = 0; mp_next != (ntl::internal::list_node_base *)p_m_listHead; ++j )
        mp_next = mp_next->mp_next;
      if ( CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\online\\online_matchmaker.cpp", 3398, ASSERT_TYPE_ASSERT, "( m_playerList.size() ) < ( ONLINE_MM_MAX_PLAYER_SIZE )", "%s < %s\n\t%i, %i", "m_playerList.size()", "ONLINE_MM_MAX_PLAYER_SIZE", j, 200) )
        __debugbreak();
    }
  }
  v11 = this->m_playerList.m_listHead.m_sentinel.mp_next;
  v12 = 0i64;
  if ( v11 != (ntl::internal::list_node_base *)p_m_listHead )
  {
    do
    {
      v11 = v11->mp_next;
      ++v12;
    }
    while ( v11 != (ntl::internal::list_node_base *)p_m_listHead );
    if ( v12 == 200 )
    {
      Com_PrintError(131097, "[MM] %s : m_playerList is full!  This shoudn't be possible and means we are leaking players.\n", "OnlineMatchmakerOmniscient::AggressivelyPrunePlayers");
      if ( Lobby_IsInLobby() )
      {
        for ( k = (ntl::internal::list_node<OnlineMatchmakerOmniscient::Player> *)this->m_playerList.m_listHead.m_sentinel.mp_next; k != (ntl::internal::list_node<OnlineMatchmakerOmniscient::Player> *)p_m_listHead; k = OnlineMatchmakerOmniscient::AggressivelyPrunePublicPartyPlayers(this, &result, (ntl::internal::list_iterator<OnlineMatchmakerOmniscient::Player,ntl::internal::list_node<OnlineMatchmakerOmniscient::Player>,OnlineMatchmakerOmniscient::Player *,OnlineMatchmakerOmniscient::Player &>)&it, v14)->mp_node )
        {
          if ( !k && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\libs\\ntl\\ntl\\list\\list.h", 103, ASSERT_TYPE_ASSERT, "( mp_node )", (const char *)&queryFormat, "mp_node") )
            __debugbreak();
          v14.m_id = k->m_data.m_userId.m_id;
          it.mp_node = k;
        }
      }
      else
      {
        v15 = this->m_playerList.m_listHead.m_sentinel.mp_next;
        v16 = 0i64;
        if ( v15 != (ntl::internal::list_node_base *)p_m_listHead )
        {
          do
          {
            v15 = v15->mp_next;
            ++v16;
          }
          while ( v15 != (ntl::internal::list_node_base *)p_m_listHead );
          if ( v16 == 200 )
          {
            it.mp_node = (ntl::internal::list_node<OnlineMatchmakerOmniscient::Player> *)this->m_playerList.m_listHead.m_sentinel.mp_next;
            if ( (ntl::internal::list_head_base<ntl::internal::list_node<OnlineMatchmakerOmniscient::Player> > *)it.mp_node != p_m_listHead )
            {
              do
                it.mp_node = OnlineMatchmakerOmniscient::ErasePlayer(this, &result, &it)->mp_node;
              while ( (ntl::internal::list_head_base<ntl::internal::list_node<OnlineMatchmakerOmniscient::Player> > *)it.mp_node != p_m_listHead );
              p_m_sentinel = this->m_playerList.m_listHead.m_sentinel.mp_next;
              if ( p_m_sentinel != (ntl::internal::list_node_base *)p_m_listHead )
              {
                do
                {
                  v18 = (ntl::internal::list_head_base<ntl::internal::list_node<OnlineMatchmakerOmniscient::Player> > *)p_m_sentinel->mp_next;
                  bdUInt64Result::~bdUInt64Result((bdUInt64Result *)&p_m_sentinel[9].mp_next);
                  bdReferencable::~bdReferencable((bdReferencable *)&p_m_sentinel[9].mp_next);
                  p_m_sentinel->mp_prev = (ntl::internal::list_node_base *)this->m_playerList.m_freelist.m_head.mp_next;
                  this->m_playerList.m_freelist.m_head.mp_next = (ntl::internal::pool_allocator_pointer_freelist::free_item_pointer *)p_m_sentinel;
                  p_m_sentinel = &v18->m_sentinel;
                }
                while ( v18 != p_m_listHead );
              }
            }
            p_m_listHead->m_sentinel.mp_prev = &p_m_listHead->m_sentinel;
            this->m_playerList.m_listHead.m_sentinel.mp_next = &this->m_playerList.m_listHead.m_sentinel;
            OnlineMatchmakerOmniscient::AddPlayersFromParty(this, &g_partyData);
            PartyData = Lobby_GetPartyData();
            OnlineMatchmakerOmniscient::AddPlayersFromParty(this, PartyData);
          }
        }
      }
      v20 = this->m_playerList.m_listHead.m_sentinel.mp_next;
      if ( v20 != (ntl::internal::list_node_base *)p_m_listHead )
      {
        do
        {
          v20 = v20->mp_next;
          ++v3;
        }
        while ( v20 != (ntl::internal::list_node_base *)p_m_listHead );
        if ( v3 == 200 )
        {
          if ( CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\online\\online_matchmaker.cpp", 3425, ASSERT_TYPE_ASSERT, (const char *)&queryFormat.fmt + 3, "%s - we aggressively pruned the players but we still have no room.\n", "OnlineMatchmakerOmniscient::AggressivelyPrunePlayers") )
            __debugbreak();
          Dvar_SetBool_Internal(DVARBOOL_onlinegame, 0);
          Dvar_SetBool_Internal(DVARBOOL_systemlink, 0);
          OnlineErrorManager::SetLastRecordedErrorCode(&g_onlineMgr.m_errorManager, COUNT, NULL);
          Live_ThrowError(ERR_DISCONNECT, "PLATFORM/DISCONNECTED_FROM_SERVER");
        }
      }
    }
  }
}

/*
==============
OnlineMatchmakerOmniscient::AggressivelyPrunePublicPartyPlayers
==============
*/
ntl::internal::list_iterator<OnlineMatchmakerOmniscient::Player,ntl::internal::list_node<OnlineMatchmakerOmniscient::Player>,OnlineMatchmakerOmniscient::Player *,OnlineMatchmakerOmniscient::Player &> *OnlineMatchmakerOmniscient::AggressivelyPrunePublicPartyPlayers(OnlineMatchmakerOmniscient *this, ntl::internal::list_iterator<OnlineMatchmakerOmniscient::Player,ntl::internal::list_node<OnlineMatchmakerOmniscient::Player>,OnlineMatchmakerOmniscient::Player *,OnlineMatchmakerOmniscient::Player &> *result, ntl::internal::list_iterator<OnlineMatchmakerOmniscient::Player,ntl::internal::list_node<OnlineMatchmakerOmniscient::Player>,OnlineMatchmakerOmniscient::Player *,OnlineMatchmakerOmniscient::Player &> it, const XUID userId)
{
  const PartyData *PartyData; 
  const char *v9; 
  unsigned int v10; 
  ntl::internal::list_node_base *mp_prev; 
  ntl::internal::list_node<OnlineMatchmakerOmniscient::Player> *mp_node; 
  ntl::internal::list_iterator<OnlineMatchmakerOmniscient::Player,ntl::internal::list_node<OnlineMatchmakerOmniscient::Player>,OnlineMatchmakerOmniscient::Player *,OnlineMatchmakerOmniscient::Player &> *v13; 
  const char *v14; 
  const char *v15; 
  const char *LobbyStateString; 
  ntl::internal::list_iterator<OnlineMatchmakerOmniscient::Player,ntl::internal::list_node<OnlineMatchmakerOmniscient::Player>,OnlineMatchmakerOmniscient::Player *,OnlineMatchmakerOmniscient::Player &> resulta; 
  XUID v18; 

  v18.m_id = userId.m_id;
  PartyData = Lobby_GetPartyData();
  if ( Party_FindMemberByXUID_AllowNotPresent(PartyData, userId) < 0 )
  {
    v9 = XUID::ToDevString(&v18);
    v10 = Sys_Milliseconds();
    Com_Printf(25, "\t%d %s is not in our public party any longer\n", v10, v9);
    switch ( this->m_lobbyState )
    {
      case eIDLE:
      case eFAILURE:
      case eNONE:
      case eFAILURE|eADDING_LOCAL_PLAYER_TO_DW:
      case eNONE|eADDING_LOCAL_PLAYER_TO_DW:
        goto $LN12_27;
      case eNEW:
      case eADDING_LOCAL_PLAYER_TO_DW:
        OnlineMatchmakerOmniscient::SetState(this, eFAILURE);
$LN12_27:
        v15 = XUID::ToDevString(&v18);
        LobbyStateString = OnlineMatchmakerOmniscient::GetLobbyStateString(this, (const MatchmakerLobbyState)this->m_lobbyState);
        Com_Printf(25, "\t\tLOBBY STATE is %s so removing %s\n", LobbyStateString, v15);
        goto LABEL_25;
      case eREMOTE_WAITING_FOR_MMING_TOKEN:
      case eUPDATING:
      case eREADY_TO_REMOVE:
        if ( !it.mp_node->mp_prev && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\libs\\ntl\\ntl\\list\\list.h", 103, ASSERT_TYPE_ASSERT, "( mp_node )", (const char *)&queryFormat, "mp_node") )
          __debugbreak();
        mp_prev = it.mp_node->mp_prev;
        if ( HIDWORD(it.mp_node->mp_prev[11].mp_prev) == 4 )
        {
          if ( !mp_prev && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\libs\\ntl\\ntl\\list\\list.h", 103, ASSERT_TYPE_ASSERT, "( mp_node )", (const char *)&queryFormat, "mp_node") )
            __debugbreak();
          mp_prev = it.mp_node->mp_prev;
          if ( LODWORD(it.mp_node->mp_prev[11].mp_next) == 4 )
            goto LABEL_25;
        }
        if ( !mp_prev && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\libs\\ntl\\ntl\\list\\list.h", 103, ASSERT_TYPE_ASSERT, "( mp_node )", (const char *)&queryFormat, "mp_node") )
          __debugbreak();
        if ( LODWORD(it.mp_node->mp_prev[11].mp_next) == 2 )
        {
          if ( !it.mp_node->mp_prev && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\libs\\ntl\\ntl\\list\\list.h", 97, ASSERT_TYPE_ASSERT, "( mp_node )", (const char *)&queryFormat, "mp_node") )
            __debugbreak();
          OnlineMatchmakerOmniscient::SetPlayerQueuedStatus(this, (OnlineMatchmakerOmniscient::Player *)&it.mp_node->mp_prev[1], eREADY);
        }
        break;
      case eREADY:
      case eREMOVING_PLAYER:
        v14 = XUID::ToDevString(&v18);
        Com_Printf(25, "\t\twe're a client so removing %s\n", v14);
LABEL_25:
        mp_node = OnlineMatchmakerOmniscient::ErasePlayer(this, &resulta, (ntl::internal::list_iterator<OnlineMatchmakerOmniscient::Player,ntl::internal::list_node<OnlineMatchmakerOmniscient::Player>,OnlineMatchmakerOmniscient::Player *,OnlineMatchmakerOmniscient::Player &> *)it.mp_node)->mp_node;
        goto LABEL_23;
      default:
        break;
    }
  }
  if ( !it.mp_node->mp_prev && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\libs\\ntl\\ntl\\list\\list.h", 109, ASSERT_TYPE_ASSERT, "( mp_node )", (const char *)&queryFormat, "mp_node") )
    __debugbreak();
  mp_node = (ntl::internal::list_node<OnlineMatchmakerOmniscient::Player> *)it.mp_node->mp_prev->mp_next;
LABEL_23:
  v13 = result;
  result->mp_node = mp_node;
  it.mp_node->mp_prev = mp_node;
  return v13;
}

/*
==============
OnlineMatchmakerOmniscient::AllPlayerAreReadyForMatchmaking
==============
*/
char OnlineMatchmakerOmniscient::AllPlayerAreReadyForMatchmaking(OnlineMatchmakerOmniscient *this)
{
  ntl::internal::list_node_base *mp_next; 
  ntl::internal::list_head_base<ntl::internal::list_node<OnlineMatchmakerOmniscient::Player> > *p_m_listHead; 

  mp_next = this->m_playerList.m_listHead.m_sentinel.mp_next;
  p_m_listHead = &this->m_playerList.m_listHead;
  if ( mp_next == (ntl::internal::list_node_base *)&this->m_playerList.m_listHead )
    return 0;
  while ( 1 )
  {
    if ( !mp_next && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\libs\\ntl\\ntl\\list\\list.h", 103, ASSERT_TYPE_ASSERT, "( mp_node )", (const char *)&queryFormat, "mp_node") )
      __debugbreak();
    if ( LODWORD(mp_next[1].mp_prev) != 4 )
      break;
    mp_next = mp_next->mp_next;
    if ( mp_next == (ntl::internal::list_node_base *)p_m_listHead )
      return 1;
  }
  return 0;
}

/*
==============
OnlineMatchmakerOmniscient::Allow_AcceptLobbyMergers
==============
*/
bool OnlineMatchmakerOmniscient::Allow_AcceptLobbyMergers(OnlineMatchmakerOmniscient *this)
{
  bool result; 

  if ( this->m_lobbyData.m_acceptLobbyMerges )
    return 0;
  this->m_lobbyData.m_acceptLobbyMerges = 1;
  result = 1;
  this->m_lobbyData.m_lobbyDocIsDirty = 1;
  this->m_lobbyData.m_timeToUpdateIfDirty = 0;
  return result;
}

/*
==============
OnlineMatchmakerOmniscient::Allow_CanLobbyMerge
==============
*/
bool OnlineMatchmakerOmniscient::Allow_CanLobbyMerge(OnlineMatchmakerOmniscient *this)
{
  bool result; 

  if ( this->m_lobbyData.m_canLobbyMerge )
    return 0;
  this->m_lobbyData.m_canLobbyMerge = 1;
  result = 1;
  this->m_lobbyData.m_lobbyDocIsDirty = 1;
  this->m_lobbyData.m_timeToUpdateIfDirty = 0;
  return result;
}

/*
==============
OnlineMatchmakerOmniscient::AmIHost
==============
*/
_BOOL8 OnlineMatchmakerOmniscient::AmIHost(OnlineMatchmakerOmniscient *this)
{
  return this->m_lobbyData.m_amITheLobbyHost;
}

/*
==============
OnlineMatchmakerOmniscient::ApplyDvarOverrides
==============
*/
void OnlineMatchmakerOmniscient::ApplyDvarOverrides(OnlineMatchmakerOmniscient *this)
{
  int v1; 
  MatchMakerOmniLobbyData::DvarOverride *m_dvarOverrides; 

  v1 = 0;
  if ( this->m_lobbyData.m_dvarOverrideCount > 0 )
  {
    m_dvarOverrides = this->m_lobbyData.m_dvarOverrides;
    do
    {
      PublisherVariableManager::SetDvarByString(m_dvarOverrides->dvar, m_dvarOverrides->value);
      ++v1;
      ++m_dvarOverrides;
    }
    while ( v1 < this->m_lobbyData.m_dvarOverrideCount );
  }
}

/*
==============
OnlineMatchmakerOmniscient::AreAnyPlayersConnecting
==============
*/
char OnlineMatchmakerOmniscient::AreAnyPlayersConnecting(OnlineMatchmakerOmniscient *this)
{
  ntl::internal::list_node_base *mp_next; 
  ntl::internal::list_head_base<ntl::internal::list_node<OnlineMatchmakerOmniscient::Player> > *p_m_listHead; 

  mp_next = this->m_playerList.m_listHead.m_sentinel.mp_next;
  p_m_listHead = &this->m_playerList.m_listHead;
  if ( mp_next == (ntl::internal::list_node_base *)&this->m_playerList.m_listHead )
    return 0;
  while ( 1 )
  {
    if ( !mp_next && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\libs\\ntl\\ntl\\list\\list.h", 103, ASSERT_TYPE_ASSERT, "( mp_node )", (const char *)&queryFormat, "mp_node") )
      __debugbreak();
    if ( HIDWORD(mp_next[11].mp_prev) == 1 && LODWORD(mp_next[11].mp_next) == 1 )
      break;
    mp_next = mp_next->mp_next;
    if ( mp_next == (ntl::internal::list_node_base *)p_m_listHead )
      return 0;
  }
  return 1;
}

/*
==============
OnlineMatchmakerOmniscient::CancelStartGame
==============
*/
void OnlineMatchmakerOmniscient::CancelStartGame(OnlineMatchmakerOmniscient *this)
{
  if ( this->m_lobbyData.m_gameStartedPending || this->m_lobbyData.m_gameLobbyInFinalCountdown )
  {
    Com_Printf(131097, "[MM] %s\n", "OnlineMatchmakerOmniscient::CancelStartGame");
    this->m_lobbyData.m_gameStartedPending = 0;
    this->m_lobbyData.m_gameLobbyInFinalCountdown = 0;
    OnlineMatchmakerOmniscient::UpdateMergeability(this, 1);
    this->m_lobbyData.m_lobbyDocIsDirty = 1;
  }
}

/*
==============
OnlineBootId::CheckForCreate
==============
*/
void OnlineBootId::CheckForCreate(void)
{
  const char *v0; 

  if ( !OnlineBootId::sm_currentId )
  {
    OnlineBootId::sm_currentId = CreateUniqueId();
    OnlineBootId::CheckForCreate();
    v0 = j_va("%zu", OnlineBootId::sm_currentId);
    Com_Printf(25, "[MM] Created new boot id - %s\n", v0);
  }
}

/*
==============
OnlineMatchmakerOmniscient::Player::Cleanup
==============
*/
void OnlineMatchmakerOmniscient::Player::Cleanup(OnlineMatchmakerOmniscient::Player *this)
{
  TaskManager *Instance; 

  Instance = TaskManager::GetInstance();
  TaskManager::CancelTaskById(Instance, this->m_taskId);
}

/*
==============
OnlineMatchmakerOmniscient::ClientStartGame
==============
*/
void OnlineMatchmakerOmniscient::ClientStartGame(OnlineMatchmakerOmniscient *this)
{
  OnlineMatchmakerTelemetry::MatchStart(&this->m_telemetry);
}

/*
==============
OnlineMatchmakerOmniscient::ConvertDWTeamtoGameTeam
==============
*/
__int64 OnlineMatchmakerOmniscient::ConvertDWTeamtoGameTeam(unsigned int dwTeam)
{
  return dwTeam + 1;
}

/*
==============
OnlineMatchmakerOmniscient::ConvertGameTeamToDWTeam
==============
*/
__int64 OnlineMatchmakerOmniscient::ConvertGameTeamToDWTeam(team_t teamId)
{
  return (unsigned int)(teamId - 1);
}

/*
==============
OnlineMatchmakerOmniscient::CreateLobbyFailed
==============
*/
void OnlineMatchmakerOmniscient::CreateLobbyFailed(OnlineMatchmakerOmniscient *this, const unsigned __int64 lobbyId)
{
  OnlineMatchmakerOmniscient::Log(this, "CreateLobbyFailed", (const char *)&queryFormat.fmt + 3, NULL, NULL, 0i64);
  OnlineMatchmakerOmniscient::SetLobbyState(this, eFAILURE|eADDING_LOCAL_PLAYER_TO_DW);
}

/*
==============
OnlineMatchmakerOmniscient::CreateLobbySuccess
==============
*/
void OnlineMatchmakerOmniscient::CreateLobbySuccess(OnlineMatchmakerOmniscient *this, const unsigned __int64 lobbyId)
{
  MatchmakerLobbyState m_lobbyState; 
  const char *LobbyStateString; 
  const char *v6; 

  m_lobbyState = this->m_lobbyState;
  if ( m_lobbyState == eREMOTE_WAITING_FOR_MMING_TOKEN && lobbyId && lobbyId == this->m_lobbyData.m_lobbyid )
  {
    OnlineMatchmakerOmniscient::Log(this, "CreateLobbySuccess", (const char *)&queryFormat.fmt + 3, NULL, NULL, 0i64);
    OnlineMatchmakerOmniscient::SetLobbyState(this, eREADY_TO_REMOVE);
    this->m_lobbyData.m_lobbyDocIsDirty = 1;
  }
  else
  {
    LobbyStateString = OnlineMatchmakerOmniscient::GetLobbyStateString(this, m_lobbyState);
    v6 = j_va("{\"msg\":\"lobby in wrong state - %s or lobbyId invalid %zu (stored:%zu)\"", LobbyStateString, lobbyId, this->m_lobbyData.m_lobbyid);
    OnlineMatchmakerOmniscient::Log(this, "CreateLobbySuccess", v6, NULL, NULL, 0i64);
  }
}

/*
==============
OnlineMatchmakerOmniscient::CreateNewLobby
==============
*/
void OnlineMatchmakerOmniscient::CreateNewLobby(OnlineMatchmakerOmniscient *this, const unsigned __int64 mmId, const unsigned __int64 lobbyId, const unsigned __int64 updateId, const char *lobbyHostDoc, const unsigned int lobbyHostDocLength, const char *lobbyBackendDoc)
{
  unsigned __int64 v7; 
  const char *v11; 
  const char *v12; 
  OnlineTimeSeriesLog *v13; 
  bool m_hasDedicatedServer; 
  XNADDR *Address; 
  ntl::internal::list_node_base *mp_next; 
  MemberStatus v17; 
  ntl::internal::list_node<OnlineMatchmakerOmniscient::Player> *mp_node; 
  OnlineMatchmakerOmniscient::Player::PlayerState v19; 
  int m_playList; 
  const XNADDR *v21; 
  const XSECURITY_INFO *v22; 
  const char *StateString; 
  const char *v24; 
  const char *v25; 
  ntl::internal::list_iterator<OnlineMatchmakerOmniscient::Player,ntl::internal::list_node<OnlineMatchmakerOmniscient::Player>,OnlineMatchmakerOmniscient::Player *,OnlineMatchmakerOmniscient::Player &> it; 
  const char *v27; 
  const char *v28; 
  unsigned __int64 v29; 
  __int64 v30; 
  XSECURITY_INFO v31; 
  MatchMakerOmniLobbyData lobbyData; 

  v30 = -2i64;
  v7 = updateId;
  v29 = updateId;
  v11 = lobbyHostDoc;
  v27 = lobbyHostDoc;
  v12 = lobbyBackendDoc;
  v28 = lobbyBackendDoc;
  Com_Printf(25, "[MM] %s - mmid = %zu updateid = %zu lobbyid = %zu\n\n\"%s\"\n\n\"%s\"\n\n", "OnlineMatchmakerOmniscient::CreateNewLobby", mmId, updateId, lobbyId, lobbyBackendDoc, lobbyHostDoc);
  v13 = OnlineTimeSeriesLog::Get();
  OnlineTimeSeriesLog::WriteEventCounter(v13, "event.createnewlobby.received.count", 1u);
  if ( this->m_state == eREMOVING_PLAYER )
  {
    Com_Printf(25, "\tstate is correct to create the new lobby.\n");
    OnlineMatchmakerOmniscient::SetLobbyState(this, eREMOTE_WAITING_FOR_MMING_TOKEN);
    OnlineMatchmakerOmniscient::SetState(this, eREMOVING_PLAYER);
    this->m_mmingData.m_matchmakingId = mmId;
    this->m_mmingData.m_timeOut = 0;
    this->m_lobbyData.m_lobbyid = lobbyId;
    this->m_lobbyData.m_updateId = v7;
    this->m_lobbyData.m_amITheLobbyHost = 1;
    MatchMakerOmniLobbyData::MatchMakerOmniLobbyData(&lobbyData);
    OnlineMatchmakerOmniscient::ParseLobbyHostDoc(this, lobbyHostDoc, &lobbyData);
    OnlineMatchmakerOmniscient::ParseLobbyBackendDoc(this, lobbyBackendDoc, &lobbyData);
    this->m_lobbyData.m_hostUID = lobbyData.m_hostUID;
    m_hasDedicatedServer = lobbyData.m_hasDedicatedServer;
    this->m_lobbyData.m_hasDedicatedServer = lobbyData.m_hasDedicatedServer;
    if ( m_hasDedicatedServer )
    {
      this->m_lobbyData.m_allocatedServerGuid = lobbyData.m_allocatedServerGuid;
      Core_strcpy(this->m_lobbyData.m_allocatedDataCenter, 0x40ui64, lobbyData.m_allocatedDataCenter);
      Core_strcpy(this->m_lobbyData.m_allocatedServerInfo, 0x400ui64, lobbyData.m_allocatedServerInfo);
      Core_strcpy(this->m_lobbyData.m_allocatedServerAddr, 0x400ui64, lobbyData.m_allocatedServerAddr);
    }
    Core_strcpy(this->m_lobbyData.m_hostAddressBase64, 0x71ui64, lobbyData.m_hostAddressBase64);
    Address = XSESSION_INFO::GetAddress(&lobbyData.m_hostAddress);
    *XSESSION_INFO::GetAddress(&this->m_lobbyData.m_hostAddress) = *Address;
    mp_next = lobbyData.m_playerStatusList.m_listHead.m_sentinel.mp_next;
    if ( (ntl::internal::list_head_base<ntl::internal::list_node<PlayerValue<enum MemberStatus> > > *)lobbyData.m_playerStatusList.m_listHead.m_sentinel.mp_next != &lobbyData.m_playerStatusList.m_listHead )
    {
      do
      {
        if ( !mp_next && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\libs\\ntl\\ntl\\list\\list.h", 103, ASSERT_TYPE_ASSERT, "( mp_node )", (const char *)&queryFormat, "mp_node") )
          __debugbreak();
        if ( OnlineMatchmakerOmniscient::FindPlayer(this, (const XUID *)&mp_next[1], &it) )
        {
          if ( !mp_next && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\libs\\ntl\\ntl\\list\\list.h", 103, ASSERT_TYPE_ASSERT, "( mp_node )", (const char *)&queryFormat, "mp_node") )
            __debugbreak();
          v17 = (MemberStatus)mp_next[1].mp_next;
          mp_node = it.mp_node;
          if ( !it.mp_node && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\libs\\ntl\\ntl\\list\\list.h", 97, ASSERT_TYPE_ASSERT, "( mp_node )", (const char *)&queryFormat, "mp_node") )
            __debugbreak();
          OnlineMatchmakerOmniscient::SetPlayerCurrentStatus(this, &mp_node->m_data, v17);
          if ( LODWORD(mp_next[1].mp_next) == 2 )
          {
            if ( !mp_node && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\libs\\ntl\\ntl\\list\\list.h", 103, ASSERT_TYPE_ASSERT, "( mp_node )", (const char *)&queryFormat, "mp_node") )
              __debugbreak();
            if ( !mp_node->m_data.m_bIsLocal && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\online\\online_matchmaker.cpp", 6462, ASSERT_TYPE_SANITY, "( playerListIt->m_bIsLocal )", (const char *)&queryFormat, "playerListIt->m_bIsLocal") )
              __debugbreak();
            if ( !mp_node && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\libs\\ntl\\ntl\\list\\list.h", 97, ASSERT_TYPE_ASSERT, "( mp_node )", (const char *)&queryFormat, "mp_node") )
              __debugbreak();
            OnlineMatchmakerOmniscient::SetPlayerQueuedStatus(this, &mp_node->m_data, eADDING_LOCAL_PLAYER_TO_DW);
          }
          else
          {
            if ( !mp_node && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\libs\\ntl\\ntl\\list\\list.h", 103, ASSERT_TYPE_ASSERT, "( mp_node )", (const char *)&queryFormat, "mp_node") )
              __debugbreak();
            if ( mp_node->m_data.m_bIsLocal && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\online\\online_matchmaker.cpp", 6468, ASSERT_TYPE_SANITY, "( !playerListIt->m_bIsLocal )", (const char *)&queryFormat, "!playerListIt->m_bIsLocal") )
              __debugbreak();
            if ( !mp_node && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\libs\\ntl\\ntl\\list\\list.h", 97, ASSERT_TYPE_ASSERT, "( mp_node )", (const char *)&queryFormat, "mp_node") )
              __debugbreak();
            OnlineMatchmakerOmniscient::SetPlayerQueuedStatus(this, &mp_node->m_data, eNEW);
            if ( !mp_node && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\libs\\ntl\\ntl\\list\\list.h", 97, ASSERT_TYPE_ASSERT, "( mp_node )", (const char *)&queryFormat, "mp_node") )
              __debugbreak();
            OnlineMatchmakerOmniscient::SetPlayerPotentiallyJoining(this, &mp_node->m_data);
          }
          if ( !mp_node && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\libs\\ntl\\ntl\\list\\list.h", 103, ASSERT_TYPE_ASSERT, "( mp_node )", (const char *)&queryFormat, "mp_node") )
            __debugbreak();
          v19 = eREMOTE_WAITING_FOR_MMING_TOKEN;
          if ( mp_node->m_data.m_matchmakingToken )
            v19 = eREADY;
          OnlineMatchmakerOmniscient::SetPlayerState(this, &mp_node->m_data, v19);
          OnlineMatchmakerTelemetry::AddPlayer(&this->m_telemetry, (const XUID)mp_next[1].mp_prev);
        }
        else
        {
          if ( !mp_next && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\libs\\ntl\\ntl\\list\\list.h", 103, ASSERT_TYPE_ASSERT, "( mp_node )", (const char *)&queryFormat, "mp_node") )
            __debugbreak();
          OnlineMatchmakerOmniscient::AddPlayerFromDW(this, (const XUID)mp_next[1].mp_prev, (MemberStatus)mp_next[1].mp_next);
        }
        mp_next = mp_next->mp_next;
      }
      while ( mp_next != (ntl::internal::list_node_base *)&lobbyData.m_playerStatusList.m_listHead );
      v11 = v27;
      v12 = v28;
      v7 = v29;
    }
    if ( lobbyData.m_lobbyid != this->m_lobbyData.m_lobbyid && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\online\\online_matchmaker.cpp", 6490, ASSERT_TYPE_ASSERT, "(lobbyData.m_lobbyid == m_lobbyData.m_lobbyid)", (const char *)&queryFormat, "lobbyData.m_lobbyid == m_lobbyData.m_lobbyid") )
      __debugbreak();
    this->m_lobbyData.m_key = lobbyData.m_key;
    this->m_lobbyData.m_keyId = lobbyData.m_keyId;
    m_playList = lobbyData.m_playList;
    this->m_lobbyData.m_playList = lobbyData.m_playList;
    this->m_lobbyData.m_playListVersion = lobbyData.m_playListVersion;
    this->m_lobbyData.m_mapWeights[0] = lobbyData.m_mapWeights[0];
    this->m_lobbyData.m_mapWeights[1] = lobbyData.m_mapWeights[1];
    this->m_lobbyData.m_mapWeights[2] = lobbyData.m_mapWeights[2];
    this->m_lobbyData.m_mapWeights[3] = lobbyData.m_mapWeights[3];
    this->m_lobbyData.m_mapWeights[4] = lobbyData.m_mapWeights[4];
    this->m_lobbyData.m_mapWeights[5] = lobbyData.m_mapWeights[5];
    this->m_lobbyData.m_mapWeights[6] = lobbyData.m_mapWeights[6];
    this->m_lobbyData.m_mapWeights[7] = lobbyData.m_mapWeights[7];
    this->m_lobbyData.m_mapWeights[8] = lobbyData.m_mapWeights[8];
    this->m_lobbyData.m_mapWeights[9] = lobbyData.m_mapWeights[9];
    this->m_lobbyData.m_mapWeights[10] = lobbyData.m_mapWeights[10];
    this->m_lobbyData.m_mapWeights[11] = lobbyData.m_mapWeights[11];
    this->m_lobbyData.m_mapWeights[12] = lobbyData.m_mapWeights[12];
    this->m_lobbyData.m_mapWeights[13] = lobbyData.m_mapWeights[13];
    this->m_lobbyData.m_mapWeights[14] = lobbyData.m_mapWeights[14];
    this->m_lobbyData.m_mapWeights[15] = lobbyData.m_mapWeights[15];
    this->m_lobbyData.m_mapWeights[16] = lobbyData.m_mapWeights[16];
    this->m_lobbyData.m_mapWeights[17] = lobbyData.m_mapWeights[17];
    this->m_lobbyData.m_mapWeights[18] = lobbyData.m_mapWeights[18];
    this->m_lobbyData.m_mapWeights[19] = lobbyData.m_mapWeights[19];
    Playlist_UpdateFromMatchmaker(this->m_controllerIndex, m_playList, 1);
    this->m_lobbyData.m_tournamentID = lobbyData.m_tournamentID;
    this->m_lobbyData.m_tournamentAlliesTeam = lobbyData.m_tournamentAlliesTeam;
    this->m_lobbyData.m_tournamentAxisTeam = lobbyData.m_tournamentAxisTeam;
    this->m_lobbyData.m_tournamentRound = lobbyData.m_tournamentRound;
    this->m_lobbyData.m_performanceGameType = lobbyData.m_performanceGameType;
    ntl::list<XUID,ntl::fixed_pool_allocator<ntl::internal::list_node<XUID>,200,0>>::assign<ntl::fixed_pool_allocator<ntl::internal::list_node<XUID>,200,0>>(&this->m_lobbyData.m_migrationList, &lobbyData.m_migrationList);
    memcpy_0(this->m_lobbyData.m_dvarOverrides, lobbyData.m_dvarOverrides, sizeof(this->m_lobbyData.m_dvarOverrides));
    this->m_lobbyData.m_dvarOverrideCount = lobbyData.m_dvarOverrideCount;
    this->m_lobbyData.m_privateMatchId.m_id = lobbyData.m_privateMatchId.m_id;
    v21 = XSESSION_INFO::GetAddress(&lobbyData.m_hostAddress);
    XSECURITY_INFO::XSECURITY_INFO(&v31, &lobbyData.m_keyId, &lobbyData.m_key);
    XSESSION_INFO::Set(&this->m_lobbyData.m_hostAddress, v22, v21);
    bdSecurityKey::~bdSecurityKey(&v31.m_key);
    bdSecurityID::~bdSecurityID(&v31.m_id);
    this->m_lobbyData.m_canGameStart = lobbyData.m_canGameStart;
    memcpy_0(this->m_lobbyData.m_dcPrefs._bytes_20, lobbyData.m_dcPrefs._bytes_20, 0x1000ui64);
    this->m_lobbyData.m_dcPrefs.m_numDataCenterPreferences = lobbyData.m_dcPrefs.m_numDataCenterPreferences;
    OnlineMatchmakerOmniscient::UpdateTeamAssignments(this, &lobbyData.m_teamAssignmentList);
    OnlineMatchmakerOmniscient::UpdateSquadAssignments(this, &lobbyData.m_squadAssignmentList);
    OnlineMatchmakerOmniscient::UpdateMatchmakingIds(this, &lobbyData.m_matchmakingIdList);
    OnlineMatchmakerOmniscient::UpdatePerformanceValues(this, &lobbyData.m_performanceValueList);
    OnlineMatchmakerOmniscient::UpdateServiceLevels(this, &lobbyData.m_paidUsersList, 1);
    OnlineMatchmakerOmniscient::UpdateServiceLevels(this, &lobbyData.m_freemiumUsersList, 0);
    OnlineMatchmakerOmniscient::UpdateAdditionalPlayerSlots(this, &lobbyData.m_additionalSlotsRequestedList);
    OnlineMatchmakerOmniscient::SyncSplitscreenPlayers(this);
    this->m_callbacks.m_outstandingCallback |= 2u;
    this->m_callbacks.m_callbackWasSuccessful[1] = 1;
    OnlineMatchmakerOmniscient::Log(this, "CreateNewLobby", (const char *)&queryFormat.fmt + 3, v12, v11, 0i64);
    OnlineMatchmakerTelemetry::CreateNewLobby(&this->m_telemetry, v7);
    MatchMakerOmniLobbyData::~MatchMakerOmniLobbyData(&lobbyData);
  }
  else
  {
    StateString = OnlineMatchmakerOmniscient::GetStateString(this, (const MatchmakerOmniscientState)this->m_state);
    Com_Printf(25, "\tstate isn't correct to create the new lobby. FAILURE (state = %s)\n", StateString);
    v24 = OnlineMatchmakerOmniscient::GetStateString(this, (const MatchmakerOmniscientState)this->m_state);
    v25 = j_va("{\"state\":\"failed\", \"error\"=\"state isn't correct to create the new lobby.\",\"state\"=\"%s\"}", v24);
    OnlineMatchmakerOmniscient::Log(this, "CreateNewLobby", v25, lobbyBackendDoc, lobbyHostDoc, 0i64);
  }
  if ( OnlineTournament_IsInTournament() )
    OnlineTournament_OnCreateNewLobby();
}

/*
==============
CreateUniqueId
==============
*/
unsigned __int64 CreateUniqueId()
{
  unsigned int UTC; 
  unsigned int v1; 
  const DLogGluttonInfo *GluttonInfo; 
  unsigned __int64 unoId; 
  int v4; 
  __int64 v5; 
  unsigned __int64 macAddr; 
  Hash_state md; 
  char dest[49]; 
  unsigned __int8 out[8]; 

  if ( LiveStorage_IsTimeSynced() )
    UTC = LiveStorage_GetUTC();
  else
    UTC = Sys_GetTimeAsSeconds();
  v1 = UTC;
  memset(dest, 0, sizeof(dest));
  GluttonInfo = DLog_GetGluttonInfo();
  unoId = GluttonInfo->unoId;
  if ( !unoId )
    unoId = GluttonInfo->firstPartyUserId;
  Live_GetMACAddressAsUint64(&macAddr);
  v4 = Com_sprintf_truncate<49>((char (*)[49])dest, "%0x%zu%zu", v1, unoId, macAddr);
  v5 = v4;
  if ( v4 <= 0 && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\online\\online_matchmaker.cpp", 8036, ASSERT_TYPE_ASSERT, "(len > 0)", (const char *)&queryFormat, "len > 0") )
    __debugbreak();
  memset_0(&dest[v5], 48, 49 - v5);
  dest[48] = 0;
  j_sha256_init(&md);
  j_sha256_process(&md, (const unsigned __int8 *)dest, 0x31u);
  j_sha256_done(&md, out);
  return *(_QWORD *)out;
}

/*
==============
OnlineMatchmakerOmniscient::Disallow_AcceptLobbyMergers
==============
*/
bool OnlineMatchmakerOmniscient::Disallow_AcceptLobbyMergers(OnlineMatchmakerOmniscient *this)
{
  bool result; 

  if ( !this->m_lobbyData.m_acceptLobbyMerges )
    return 0;
  this->m_lobbyData.m_acceptLobbyMerges = 0;
  result = 1;
  this->m_lobbyData.m_lobbyDocIsDirty = 1;
  this->m_lobbyData.m_timeToUpdateIfDirty = 0;
  return result;
}

/*
==============
OnlineMatchmakerOmniscient::Disallow_CanLobbyMerge
==============
*/
bool OnlineMatchmakerOmniscient::Disallow_CanLobbyMerge(OnlineMatchmakerOmniscient *this)
{
  bool result; 

  if ( !this->m_lobbyData.m_canLobbyMerge )
    return 0;
  this->m_lobbyData.m_canLobbyMerge = 0;
  result = 1;
  this->m_lobbyData.m_lobbyDocIsDirty = 1;
  this->m_lobbyData.m_timeToUpdateIfDirty = 0;
  return result;
}

/*
==============
OnlineMatchmakerOmniscient::EndGame
==============
*/
void OnlineMatchmakerOmniscient::EndGame(OnlineMatchmakerOmniscient *this)
{
  bool v2; 
  const dvar_t *v3; 
  const dvar_t *v4; 
  PartyData *PartyData; 

  OnlineMatchmakerOmniscient::Log(this, "EndGame", (const char *)&queryFormat.fmt + 3, NULL, NULL, 0i64);
  Com_Printf(131097, "[MM] %s\n", "OnlineMatchmakerOmniscient::EndGame");
  *(_WORD *)&this->m_lobbyData.m_gameStartedPending = 0;
  this->m_lobbyData.m_gameLobbyInFinalCountdown = 0;
  this->m_lobbyData.m_mapName[0] = 0;
  this->m_lobbyData.m_modeName[0] = 0;
  ++this->m_lobbyData.m_gameid;
  this->m_lobbyData.m_isGameInProgress = 0;
  this->m_lobbyData.m_shouldBackfill_JIP = 1;
  this->m_mmingData.m_firstTime = 0;
  OnlineMatchmakerOmniscient::UpdateMergeability(this, 1);
  v2 = !this->m_lobbyData.m_amITheLobbyHost;
  this->m_lobbyData.m_lobbyDocIsDirty = 1;
  if ( !v2 )
  {
    v3 = DVARBOOL_online_matchmaking_use_lobby_affinity;
    if ( !DVARBOOL_online_matchmaking_use_lobby_affinity && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\universal\\dvar.h", 692, ASSERT_TYPE_ASSERT, "(dvar)", "%s\n\tDvar %s accessed after deregistration", "dvar", "online_matchmaking_use_lobby_affinity") )
      __debugbreak();
    Dvar_CheckFrontendServerThread(v3);
    if ( v3->current.enabled )
    {
      v4 = DVARBOOL_online_matchmaking_allow_game_override_lobby_affinity;
      if ( !DVARBOOL_online_matchmaking_allow_game_override_lobby_affinity && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\universal\\dvar.h", 692, ASSERT_TYPE_ASSERT, "(dvar)", "%s\n\tDvar %s accessed after deregistration", "dvar", "online_matchmaking_allow_game_override_lobby_affinity") )
        __debugbreak();
      Dvar_CheckFrontendServerThread(v4);
      if ( v4->current.enabled && this->m_mmingData.m_requestGameLobbyRemainIntact )
      {
        Com_Printf(25, "[MM] %s - Game wants to keep lobby together, will NOT break up lobby.\n", "OnlineMatchmakerOmniscient::ShouldDisbandLobby");
      }
      else
      {
        OnlineMatchmakerOmniscient::SetLobbyState(this, eFAILURE);
        PartyData = Lobby_GetPartyData();
        Party_SetDisbandAfterRound(PartyData);
      }
    }
  }
  OnlineMatchmakerTelemetry::MatchEnd(&this->m_telemetry);
}

/*
==============
OnlineMatchmakerOmniscient::EnqueueJoinLobbyCallback
==============
*/
void OnlineMatchmakerOmniscient::EnqueueJoinLobbyCallback(OnlineMatchmakerOmniscient *this)
{
  this->m_callbacks.m_outstandingCallback |= 4u;
  this->m_callbacks.m_callbackWasSuccessful[2] = 1;
}

/*
==============
OnlineMatchmakerOmniscient::ErasePlayer
==============
*/
ntl::internal::list_iterator<OnlineMatchmakerOmniscient::Player,ntl::internal::list_node<OnlineMatchmakerOmniscient::Player>,OnlineMatchmakerOmniscient::Player *,OnlineMatchmakerOmniscient::Player &> *OnlineMatchmakerOmniscient::ErasePlayer(OnlineMatchmakerOmniscient *this, ntl::internal::list_iterator<OnlineMatchmakerOmniscient::Player,ntl::internal::list_node<OnlineMatchmakerOmniscient::Player>,OnlineMatchmakerOmniscient::Player *,OnlineMatchmakerOmniscient::Player &> *result, ntl::internal::list_iterator<OnlineMatchmakerOmniscient::Player,ntl::internal::list_node<OnlineMatchmakerOmniscient::Player>,OnlineMatchmakerOmniscient::Player *,OnlineMatchmakerOmniscient::Player &> *it)
{
  const char *v6; 
  const char *v7; 
  ntl::internal::list_node<OnlineMatchmakerOmniscient::Player> *mp_node; 
  TaskManager *Instance; 
  ntl::internal::list_node<OnlineMatchmakerOmniscient::Player> *v10; 
  ntl::internal::list_node<OnlineMatchmakerOmniscient::Player> *mp_next; 
  ntl::internal::list_iterator<OnlineMatchmakerOmniscient::Player,ntl::internal::list_node<OnlineMatchmakerOmniscient::Player>,OnlineMatchmakerOmniscient::Player *,OnlineMatchmakerOmniscient::Player &> *v12; 

  if ( !it->mp_node && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\libs\\ntl\\ntl\\list\\list.h", 103, ASSERT_TYPE_ASSERT, "( mp_node )", (const char *)&queryFormat, "mp_node") )
    __debugbreak();
  v6 = XUID::ToString(&it->mp_node->m_data.m_userId);
  v7 = j_va("{\"status\":\"erasing player %s\"}", v6);
  OnlineMatchmakerOmniscient::Log(this, "ErasePlayer", v7, NULL, NULL, 0i64);
  if ( !it->mp_node && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\libs\\ntl\\ntl\\list\\list.h", 103, ASSERT_TYPE_ASSERT, "( mp_node )", (const char *)&queryFormat, "mp_node") )
    __debugbreak();
  mp_node = it->mp_node;
  Instance = TaskManager::GetInstance();
  TaskManager::CancelTaskById(Instance, mp_node->m_data.m_taskId);
  if ( !it->mp_node && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\libs\\ntl\\ntl\\list\\list.h", 103, ASSERT_TYPE_ASSERT, "( mp_node )", (const char *)&queryFormat, "mp_node") )
    __debugbreak();
  OnlineMatchmakerTelemetry::RemovePlayer(&this->m_telemetry, it->mp_node->m_data.m_userId);
  v10 = it->mp_node;
  if ( !it->mp_node && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\libs\\ntl\\ntl\\list\\list.h", 439, ASSERT_TYPE_ASSERT, "( pos.mp_node )", (const char *)&queryFormat, "pos.mp_node") )
    __debugbreak();
  mp_next = (ntl::internal::list_node<OnlineMatchmakerOmniscient::Player> *)v10->mp_next;
  ntl::internal::list_head_base<ntl::internal::list_node<OnlineMatchmakerOmniscient::Player>>::remove(&this->m_playerList.m_listHead, v10);
  bdUInt64Result::~bdUInt64Result((bdUInt64Result *)(&v10->m_data.m_matchmakingTokenResult.__vftable + 3));
  bdReferencable::~bdReferencable((bdReferencable *)(&v10->m_data.m_matchmakingTokenResult.__vftable + 3));
  v10->mp_prev = (ntl::internal::list_node_base *)this->m_playerList.m_freelist.m_head.mp_next;
  v12 = result;
  this->m_playerList.m_freelist.m_head.mp_next = (ntl::internal::pool_allocator_pointer_freelist::free_item_pointer *)v10;
  result->mp_node = mp_next;
  return v12;
}

/*
==============
OnlineMatchmakerOmniscient::FindPlayer
==============
*/
bool OnlineMatchmakerOmniscient::FindPlayer(OnlineMatchmakerOmniscient *this, const XUID *xuid, ntl::internal::list_iterator<OnlineMatchmakerOmniscient::Player,ntl::internal::list_node<OnlineMatchmakerOmniscient::Player>,OnlineMatchmakerOmniscient::Player *,OnlineMatchmakerOmniscient::Player &> *it)
{
  ntl::internal::list_node_base *mp_next; 
  ntl::internal::list_head_base<ntl::internal::list_node<OnlineMatchmakerOmniscient::Player> > *p_m_listHead; 
  ntl::internal::list_node_base *v7; 

  mp_next = this->m_playerList.m_listHead.m_sentinel.mp_next;
  p_m_listHead = &this->m_playerList.m_listHead;
  if ( mp_next != (ntl::internal::list_node_base *)&this->m_playerList.m_listHead )
  {
    v7 = this->m_playerList.m_listHead.m_sentinel.mp_next;
    do
    {
      if ( !v7 && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\libs\\ntl\\ntl\\list\\list.h", 97, ASSERT_TYPE_ASSERT, "( mp_node )", (const char *)&queryFormat, "mp_node") )
        __debugbreak();
      if ( XUID::operator==((XUID *)xuid, (const XUID *)&mp_next[6].mp_next) )
        break;
      if ( !mp_next && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\libs\\ntl\\ntl\\list\\list.h", 109, ASSERT_TYPE_ASSERT, "( mp_node )", (const char *)&queryFormat, "mp_node") )
        __debugbreak();
      v7 = mp_next->mp_next;
      mp_next = v7;
    }
    while ( v7 != (ntl::internal::list_node_base *)p_m_listHead );
  }
  it->mp_node = (ntl::internal::list_node<OnlineMatchmakerOmniscient::Player> *)mp_next;
  return mp_next != (ntl::internal::list_node_base *)p_m_listHead;
}

/*
==============
OnlineMatchmakerOmniscient::FindPlayer
==============
*/
bool OnlineMatchmakerOmniscient::FindPlayer(OnlineMatchmakerOmniscient *this, const XUID *xuid, ntl::internal::list_iterator<OnlineMatchmakerOmniscient::Player,ntl::internal::list_node<OnlineMatchmakerOmniscient::Player> const ,OnlineMatchmakerOmniscient::Player const *,OnlineMatchmakerOmniscient::Player const &> *it)
{
  ntl::internal::list_node_base *mp_next; 
  ntl::internal::list_head_base<ntl::internal::list_node<OnlineMatchmakerOmniscient::Player> > *p_m_listHead; 
  ntl::internal::list_node_base *v7; 

  mp_next = this->m_playerList.m_listHead.m_sentinel.mp_next;
  p_m_listHead = &this->m_playerList.m_listHead;
  if ( mp_next != (ntl::internal::list_node_base *)&this->m_playerList.m_listHead )
  {
    v7 = this->m_playerList.m_listHead.m_sentinel.mp_next;
    do
    {
      if ( !v7 && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\libs\\ntl\\ntl\\list\\list.h", 97, ASSERT_TYPE_ASSERT, "( mp_node )", (const char *)&queryFormat, "mp_node") )
        __debugbreak();
      if ( XUID::operator==((XUID *)xuid, (const XUID *)&mp_next[6].mp_next) )
        break;
      if ( !mp_next && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\libs\\ntl\\ntl\\list\\list.h", 109, ASSERT_TYPE_ASSERT, "( mp_node )", (const char *)&queryFormat, "mp_node") )
        __debugbreak();
      v7 = mp_next->mp_next;
      mp_next = v7;
    }
    while ( v7 != (ntl::internal::list_node_base *)p_m_listHead );
  }
  it->mp_node = (const ntl::internal::list_node<OnlineMatchmakerOmniscient::Player> *)mp_next;
  return mp_next != (ntl::internal::list_node_base *)p_m_listHead;
}

/*
==============
OnlineMatchmakerOmniscient::GameInLobbyIntermission
==============
*/
void OnlineMatchmakerOmniscient::GameInLobbyIntermission(OnlineMatchmakerOmniscient *this)
{
  bool m_gameStartedPending; 
  bool m_shouldBackfill_JIP; 
  bool updated; 

  m_gameStartedPending = this->m_lobbyData.m_gameStartedPending;
  m_shouldBackfill_JIP = this->m_lobbyData.m_shouldBackfill_JIP;
  this->m_lobbyData.m_gameStartedPending = 0;
  updated = OnlineMatchmakerOmniscient::UpdateMergeability(this, 1);
  this->m_lobbyData.m_shouldBackfill_JIP = 1;
  if ( !m_shouldBackfill_JIP || updated || this->m_lobbyData.m_gameStartedPending != m_gameStartedPending )
    this->m_lobbyData.m_lobbyDocIsDirty = 1;
  OnlineMatchmakerTelemetry::StartIntermission(&this->m_telemetry);
}

/*
==============
OnlineMatchmakerOmniscient::GameLobbyInFinalCountdown
==============
*/
void OnlineMatchmakerOmniscient::GameLobbyInFinalCountdown(OnlineMatchmakerOmniscient *this)
{
  if ( !this->m_lobbyData.m_gameLobbyInFinalCountdown )
    *(_WORD *)&this->m_lobbyData.m_gameLobbyInFinalCountdown = 257;
}

/*
==============
OnlineBootId::GetBootId
==============
*/
unsigned __int64 OnlineBootId::GetBootId()
{
  unsigned __int64 result; 
  const char *v1; 

  result = OnlineBootId::sm_currentId;
  if ( !OnlineBootId::sm_currentId )
  {
    OnlineBootId::sm_currentId = CreateUniqueId();
    OnlineBootId::CheckForCreate();
    v1 = j_va("%zu", OnlineBootId::sm_currentId);
    Com_Printf(25, "[MM] Created new boot id - %s\n", v1);
    return OnlineBootId::sm_currentId;
  }
  return result;
}

/*
==============
OnlineBootId::GetBootIdString
==============
*/
char *OnlineBootId::GetBootIdString()
{
  OnlineBootId::CheckForCreate();
  return j_va("%zu", OnlineBootId::sm_currentId);
}

/*
==============
OnlineMatchmakerOmniscient::GetBuildName
==============
*/
void OnlineMatchmakerOmniscient::GetBuildName(OnlineMatchmakerOmniscient *this, char *buildName, unsigned int len)
{
  unsigned __int64 v3; 
  DWServicesAccess *Instance; 
  const char *EnvironmentString; 
  char v7; 
  signed __int64 v8; 
  char *v9; 
  int v10; 
  const dvar_t *v11; 
  const dvar_t *v12; 
  const dvar_t *v13; 
  const dvar_t *v14; 
  const char *v15; 
  int v16; 
  const char *v17; 
  unsigned int fmt; 
  char dest[128]; 
  char v20[1024]; 

  v3 = len;
  Instance = DWServicesAccess::GetInstance();
  EnvironmentString = DWServicesAccess::GetEnvironmentString(Instance);
  v7 = *EnvironmentString;
  v20[0] = *EnvironmentString + ((unsigned int)(*EnvironmentString - 65) < 0x1A ? 0x20 : 0);
  if ( v7 )
  {
    v8 = EnvironmentString - v20;
    v9 = v20;
    do
    {
      v10 = (v9++)[v8 + 1];
      *v9 = v10 + ((unsigned int)(v10 - 65) < 0x1A ? 0x20 : 0);
    }
    while ( (_BYTE)v10 );
  }
  v11 = DVARSTR_dedi_buildname_override;
  if ( DVARSTR_dedi_buildname_override )
  {
    Dvar_CheckFrontendServerThread(DVARSTR_dedi_buildname_override);
    if ( I_strcmp(v11->current.string, (const char *)&queryFormat.fmt + 3) )
    {
      v12 = DVARSTR_dedi_buildname_override;
      if ( !DVARSTR_dedi_buildname_override && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\universal\\dvar.h", 748, ASSERT_TYPE_ASSERT, "(dvar)", "%s\n\tDvar %s accessed after deregistration", "dvar", "dedi_buildname_override") )
        __debugbreak();
      Dvar_CheckFrontendServerThread(v12);
      Core_strcpy(buildName, v3, v12->current.string);
      return;
    }
  }
  fmt = GetProtocolVersion();
  if ( Com_sprintf(dest, 0x80ui64, "%d@%u", 0i64, fmt) < 0 && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\online\\online_matchmaker.cpp", 2297, ASSERT_TYPE_ASSERT, "((Com_sprintf( buildVersionString, sizeof( buildVersionString ), \"%d@%u\", 0, GetProtocolVersion() )) >= (0))", (const char *)&queryFormat, "Com_sprintf( buildVersionString, sizeof( buildVersionString ), \"%d@%u\", 0, GetProtocolVersion() ) >= 0") )
    __debugbreak();
  v13 = DVARSTR_online_matchmaking_restrict;
  if ( !DVARSTR_online_matchmaking_restrict || (Dvar_CheckFrontendServerThread(DVARSTR_online_matchmaking_restrict), !I_strcmp(v13->current.string, (const char *)&queryFormat.fmt + 3)) )
  {
    if ( Com_sprintf(buildName, v3, "iw8-%s-%s-%s-%s", "all", "debug", v20, dest) >= 0 )
      return;
    v15 = "Com_sprintf( buildName, len, PROJECT_NAME \"-%s-%s-%s-%s\", platform, buildType, environment, buildVersionString ) >= 0";
    v16 = 2317;
    v17 = "((Com_sprintf( buildName, len, \"iw8\" \"-%s-%s-%s-%s\", platform, buildType, environment, buildVersionString )) >= (0))";
    goto LABEL_22;
  }
  v14 = DVARSTR_online_matchmaking_restrict;
  if ( !DVARSTR_online_matchmaking_restrict && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\universal\\dvar.h", 748, ASSERT_TYPE_ASSERT, "(dvar)", "%s\n\tDvar %s accessed after deregistration", "dvar", "online_matchmaking_restrict") )
    __debugbreak();
  Dvar_CheckFrontendServerThread(v14);
  if ( Com_sprintf(buildName, v3, "iw8-%s-%s-dev_%s-%s", "all", "debug", v14->current.string, dest) < 0 )
  {
    v15 = "Com_sprintf( buildName, len, PROJECT_NAME \"-%s-%s-dev_%s-%s\", platform, buildType, Dvar_GetString( online_matchmaking_restrict ), buildVersionString ) >= 0";
    v16 = 2312;
    v17 = "((Com_sprintf( buildName, len, \"iw8\" \"-%s-%s-dev_%s-%s\", platform, buildType, Dvar_GetString_Internal_DebugName( DVARSTR_online_matchmaking_restrict, \"online_matchmaking_restrict\" ), buildVersionString )) >= (0))";
LABEL_22:
    if ( CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\online\\online_matchmaker.cpp", v16, ASSERT_TYPE_ASSERT, v17, (const char *)&queryFormat, v15) )
      __debugbreak();
  }
}

/*
==============
OnlineMatchmakerOmniscient::GetCachedMatchmakingTokenForUID
==============
*/
ntl::internal::list_node_base *OnlineMatchmakerOmniscient::GetCachedMatchmakingTokenForUID(OnlineMatchmakerOmniscient *this, const XUID uid, bool *isPrimaryAccountOut)
{
  ntl::internal::list_node_base *mp_next; 
  ntl::internal::list_head_base<ntl::internal::list_node<OnlineMatchmakerOmniscient::Player> > *p_m_listHead; 
  ntl::internal::list_node_base *result; 
  XUID xuid; 

  xuid.m_id = uid.m_id;
  mp_next = this->m_playerList.m_listHead.m_sentinel.mp_next;
  p_m_listHead = &this->m_playerList.m_listHead;
  if ( mp_next == (ntl::internal::list_node_base *)&this->m_playerList.m_listHead )
    return 0i64;
  while ( 1 )
  {
    if ( !mp_next && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\libs\\ntl\\ntl\\list\\list.h", 103, ASSERT_TYPE_ASSERT, "( mp_node )", (const char *)&queryFormat, "mp_node") )
      __debugbreak();
    if ( XUID::operator==((XUID *)&mp_next[6].mp_next, &xuid) )
    {
      if ( !mp_next && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\libs\\ntl\\ntl\\list\\list.h", 103, ASSERT_TYPE_ASSERT, "( mp_node )", (const char *)&queryFormat, "mp_node") )
        __debugbreak();
      result = mp_next[10].mp_next;
      if ( result )
      {
        if ( !LOBYTE(mp_next[7].mp_next) && LODWORD(mp_next[1].mp_prev) == 4 )
          break;
      }
    }
    if ( !mp_next && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\libs\\ntl\\ntl\\list\\list.h", 109, ASSERT_TYPE_ASSERT, "( mp_node )", (const char *)&queryFormat, "mp_node") )
      __debugbreak();
    mp_next = mp_next->mp_next;
    if ( mp_next == (ntl::internal::list_node_base *)p_m_listHead )
      return 0i64;
  }
  *isPrimaryAccountOut = BYTE1(mp_next[7].mp_next);
  return result;
}

/*
==============
OnlineMatchmakerOmniscient::GetContentPackName
==============
*/
const char *OnlineMatchmakerOmniscient::GetContentPackName(int contentMask)
{
  if ( ((contentMask - 1) & contentMask) != 0 && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\online\\online_matchmaker.cpp", 7382, ASSERT_TYPE_ASSERT, "((contentMask & (contentMask - 1)) == 0)", (const char *)&queryFormat, "(contentMask & (contentMask - 1)) == 0") )
    __debugbreak();
  if ( contentMask > 64 )
  {
    switch ( contentMask )
    {
      case 128:
        return "DLC_6";
      case 256:
        return "DLC_7";
      case 512:
        return "DLC_8";
      case 1024:
        return "DLC_9";
      case 2048:
        return "DLC_PREVIEW";
    }
  }
  else
  {
    switch ( contentMask )
    {
      case 64:
        return "DLC_5";
      case 2:
        return "MP_ORIGINAL_MAPS";
      case 4:
        return "DLC_1";
      case 8:
        return "DLC_2";
      case 16:
        return "DLC_3";
      case 32:
        return "DLC_4";
    }
  }
  if ( CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\online\\online_matchmaker.cpp", 7409, ASSERT_TYPE_ASSERT, (const char *)&queryFormat.fmt + 3, "Invalid content pack specified!") )
    __debugbreak();
  return "UNKNOWN";
}

/*
==============
OnlineMatchmakerOmniscient::GetCurrentLobbyId
==============
*/
unsigned __int64 OnlineMatchmakerOmniscient::GetCurrentLobbyId(OnlineMatchmakerOmniscient *this)
{
  return this->m_lobbyData.m_lobbyid;
}

/*
==============
OnlineMatchmakerOmniscient::GetCurrentMatchmakingId
==============
*/
unsigned __int64 OnlineMatchmakerOmniscient::GetCurrentMatchmakingId(OnlineMatchmakerOmniscient *this)
{
  return this->m_mmingData.m_matchmakingId;
}

/*
==============
OnlineMatchmakerOmniscient::GetCurrentTournamentRound
==============
*/
__int64 OnlineMatchmakerOmniscient::GetCurrentTournamentRound(OnlineMatchmakerOmniscient *this)
{
  return this->m_lobbyData.m_tournamentRound;
}

/*
==============
MatchmakingData::GetElapsedTimeSeconds
==============
*/
__int64 MatchmakingData::GetElapsedTimeSeconds(MatchmakingData *this)
{
  return (unsigned int)((Sys_Milliseconds() - this->m_startTimeMs) / 1000);
}

/*
==============
OnlineMatchmakerOmniscient::GetGameState
==============
*/
const char *OnlineMatchmakerOmniscient::GetGameState(OnlineMatchmakerOmniscient *this)
{
  if ( this->m_lobbyData.m_isGameInProgress )
    return "in_game";
  if ( !this->m_lobbyData.m_gameid )
    return "UNKNOWN";
  if ( this->m_lobbyData.m_gameLobbyInFinalCountdown )
    return "countdown";
  return "intermission";
}

/*
==============
OnlineMatchmakerOmniscient::GetHostInfo
==============
*/
XSESSION_INFO *OnlineMatchmakerOmniscient::GetHostInfo(OnlineMatchmakerOmniscient *this)
{
  return &this->m_lobbyData.m_hostAddress;
}

/*
==============
OnlineMatchmakerOmniscient::GetHostInfoForLobby
==============
*/
__int64 OnlineMatchmakerOmniscient::GetHostInfoForLobby(OnlineMatchmakerOmniscient *this, const int controllerIndex, unsigned __int64 lobbyid, void (*callback)(const int, const GetHostInfoForLobbyResult, const XSESSION_INFO *, const unsigned __int64))
{
  Windows::Foundation::IAsyncInfo *m_asyncInfo; 
  DWServicesAccess *Instance; 
  DWAsyncMatchMaking *AsyncMatchmaking; 
  TaskCreateRequest *LobbyDocuments; 
  bdRemoteTask *v12; 
  TaskManager *v13; 
  unsigned __int8 v14; 
  bdReference<bdRemoteTask> result; 
  __int64 v17; 
  TaskCreateResult pTaskCreateResult; 
  TaskCreateRequest pTaskCreateRequest; 

  v17 = -2i64;
  m_asyncInfo = NULL;
  *(_QWORD *)&pTaskCreateRequest.m_controllerIndex = -1i64;
  memset(&pTaskCreateRequest.m_appData, 0, 48);
  pTaskCreateRequest.m_cancelTaskOnSignoutEvent = 1;
  pTaskCreateRequest.m_timeoutInSeconds = 0;
  pTaskCreateResult.m_localTaskId = 0;
  pTaskCreateResult.m_task = NULL;
  if ( !s_getHostInfoForLobbyTask.m_isInUse )
  {
    if ( !lobbyid && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\online\\online_matchmaker.cpp", 7044, ASSERT_TYPE_ASSERT, "(lobbyid)", (const char *)&queryFormat, "lobbyid") )
      __debugbreak();
    if ( !callback && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\online\\online_matchmaker.cpp", 7045, ASSERT_TYPE_ASSERT, "(callback)", (const char *)&queryFormat, "callback") )
      __debugbreak();
    s_getHostInfoForLobbyTask.m_lobbyId = lobbyid;
    s_getHostInfoForLobbyTask.callback = callback;
    Instance = DWServicesAccess::GetInstance();
    AsyncMatchmaking = DWServicesAccess::GetAsyncMatchmaking(Instance, this->m_controllerIndex);
    LobbyDocuments = (TaskCreateRequest *)DWAsyncMatchMaking::getLobbyDocuments(AsyncMatchmaking, &result, lobbyid, &s_getHostInfoForLobbyTask.m_lobbyDocument);
    if ( LobbyDocuments != (TaskCreateRequest *)&pTaskCreateRequest.m_remoteDemonwareTask )
    {
      if ( pTaskCreateRequest.m_remoteDemonwareTask.m_ptr && _InterlockedExchangeAdd((volatile signed __int32 *)&pTaskCreateRequest.m_remoteDemonwareTask.m_ptr->m_refCount, 0xFFFFFFFF) == 1 && pTaskCreateRequest.m_remoteDemonwareTask.m_ptr )
        ((void (__fastcall *)(bdRemoteTask *, __int64))pTaskCreateRequest.m_remoteDemonwareTask.m_ptr->~bdReferencable)(pTaskCreateRequest.m_remoteDemonwareTask.m_ptr, 1i64);
      v12 = *(bdRemoteTask **)&LobbyDocuments->m_controllerIndex;
      pTaskCreateRequest.m_remoteDemonwareTask.m_ptr = v12;
      if ( v12 )
        _InterlockedExchangeAdd((volatile signed __int32 *)&v12->m_refCount, 1u);
    }
    if ( result.m_ptr && _InterlockedExchangeAdd((volatile signed __int32 *)&result.m_ptr->m_refCount, 0xFFFFFFFF) == 1 && result.m_ptr )
      ((void (__fastcall *)(bdRemoteTask *, __int64))result.m_ptr->~bdReferencable)(result.m_ptr, 1i64);
    pTaskCreateRequest.m_appData = this;
    pTaskCreateRequest.m_onCompletionCallback = staticGetHostInfoForLobbyComplete;
    pTaskCreateRequest.m_controllerIndex = controllerIndex;
    if ( pTaskCreateRequest.m_remoteDemonwareTask.m_ptr )
    {
      v13 = TaskManager::GetInstance();
      if ( TaskManager::CreateTask(v13, &pTaskCreateRequest, &pTaskCreateResult) )
      {
        v14 = 1;
        m_asyncInfo = pTaskCreateRequest.m_asyncInfo;
        goto LABEL_24;
      }
    }
    m_asyncInfo = pTaskCreateRequest.m_asyncInfo;
  }
  v14 = 0;
LABEL_24:
  pTaskCreateRequest.m_onCompletionCallback = NULL;
  pTaskCreateRequest.m_onUpdateCallback = NULL;
  pTaskCreateRequest.m_appSecondaryCallback = NULL;
  pTaskCreateRequest.m_timeoutInSeconds = 0;
  if ( m_asyncInfo )
  {
    m_asyncInfo->__abi_Release(m_asyncInfo);
    m_asyncInfo = NULL;
    pTaskCreateRequest.m_asyncInfo = NULL;
  }
  if ( pTaskCreateRequest.m_remoteDemonwareTask.m_ptr )
  {
    if ( _InterlockedExchangeAdd((volatile signed __int32 *)&pTaskCreateRequest.m_remoteDemonwareTask.m_ptr->m_refCount, 0xFFFFFFFF) == 1 )
    {
      if ( pTaskCreateRequest.m_remoteDemonwareTask.m_ptr )
        ((void (__fastcall *)(bdRemoteTask *, __int64))pTaskCreateRequest.m_remoteDemonwareTask.m_ptr->~bdReferencable)(pTaskCreateRequest.m_remoteDemonwareTask.m_ptr, 1i64);
      pTaskCreateRequest.m_remoteDemonwareTask.m_ptr = NULL;
    }
    m_asyncInfo = pTaskCreateRequest.m_asyncInfo;
  }
  if ( m_asyncInfo )
    m_asyncInfo->__abi_Release(m_asyncInfo);
  return v14;
}

/*
==============
OnlineMatchmakerOmniscient::GetHostInfoForLobbyComplete
==============
*/
void OnlineMatchmakerOmniscient::GetHostInfoForLobbyComplete(OnlineMatchmakerOmniscient *this, GenericTask *task, eTaskManagerTaskState state)
{
  GetHostInfoForLobbyResult v5; 
  bdLobbyErrorCode ErrorCode; 
  unsigned __int64 TransactionID; 
  unsigned __int64 v8; 
  unsigned __int64 v9; 
  XNADDR *Address; 
  unsigned int v11; 
  unsigned __int64 v12; 
  unsigned int v13; 
  unsigned int v14; 
  const XNADDR *v15; 
  const XSECURITY_INFO *v16; 
  char *fmt; 
  unsigned __int64 value; 
  bdJSONDeserializer v19; 
  bdJSONDeserializer v20; 
  __int64 v21; 
  XSECURITY_INFO v22; 
  MatchMakerOmniLobbyData v23; 
  bdJSONDeserializer buffer[2]; 
  char src[256]; 

  v21 = -2i64;
  if ( !task && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\online\\online_matchmaker.cpp", 6906, ASSERT_TYPE_ASSERT, "(task)", (const char *)&queryFormat, "task") )
    __debugbreak();
  if ( !task->m_appData && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\online\\online_matchmaker.cpp", 6907, ASSERT_TYPE_ASSERT, "(task->m_appData)", (const char *)&queryFormat, "task->m_appData") )
    __debugbreak();
  MatchMakerOmniLobbyData::MatchMakerOmniLobbyData(&v23);
  if ( state )
  {
    v5 = HALF_HALF;
    ErrorCode = bdRemoteTask::getErrorCode(task->m_remoteDemonwareTask.m_ptr);
    dwLobbyErrorCodeToString(ErrorCode, (char *const)buffer, 0x40u);
    TransactionID = bdRemoteTask::getTransactionID(task->m_remoteDemonwareTask.m_ptr);
    LODWORD(fmt) = ErrorCode;
    Com_PrintError(25, "[MM] %s : Demonware failure. Error code = %s (%d) (%zu).\n", "OnlineMatchmakerOmniscient::GetHostInfoForLobbyComplete", (const char *)buffer, fmt, TransactionID);
  }
  else
  {
    bdJSONDeserializer::bdJSONDeserializer(&v19);
    value = 0i64;
    v5 = LONG;
    if ( bdJSONDeserializer::parse(&v19, *((const char **)&s_getHostInfoForLobbyTask.m_lobbyDocument.__vftable + 2)) )
    {
      bdJSONDeserializer::bdJSONDeserializer(buffer);
      if ( bdJSONDeserializer::getObject(&v19, "listen_server", buffer) )
      {
        if ( bdJSONDeserializer::getString(buffer, "host_address", v23.m_hostAddressBase64, 0x71u) )
        {
          v8 = -1i64;
          v9 = -1i64;
          do
            ++v9;
          while ( v23.m_hostAddressBase64[v9] );
          Address = XSESSION_INFO::GetAddress(&v23.m_hostAddress);
          v11 = truncate_cast<unsigned int,unsigned __int64>(v9);
          bdBase64::decode(v23.m_hostAddressBase64, v11, (char *)Address, 0x54u);
          if ( bdJSONDeserializer::parse(&v19, s_getHostInfoForLobbyTask.m_lobbyDocument.m_backendDoc) )
          {
            bdJSONDeserializer::bdJSONDeserializer(&v20);
            if ( bdJSONDeserializer::getUInt64(&v19, "lobby_id", &value) )
            {
              if ( value != s_getHostInfoForLobbyTask.m_lobbyId && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\online\\online_matchmaker.cpp", 6943, ASSERT_TYPE_ASSERT, "(lobbyIdInTheDoc == s_getHostInfoForLobbyTask.m_lobbyId)", (const char *)&queryFormat, "lobbyIdInTheDoc == s_getHostInfoForLobbyTask.m_lobbyId") )
                __debugbreak();
              if ( bdJSONDeserializer::getObject(&v19, "dtls", &v20) )
              {
                if ( bdJSONDeserializer::getString(&v20, "security_id", src, 0x100u) )
                {
                  v12 = -1i64;
                  do
                    ++v12;
                  while ( src[v12] );
                  v13 = truncate_cast<unsigned int,unsigned __int64>(v12);
                  bdBase64::decode(src, v13, (char *)&v23.m_keyId, 8u);
                  if ( bdJSONDeserializer::getString(&v20, "security_key", src, 0x100u) )
                  {
                    do
                      ++v8;
                    while ( src[v8] );
                    v14 = truncate_cast<unsigned int,unsigned __int64>(v8);
                    bdBase64::decode(src, v14, (char *)&v23.m_key, 0x10u);
                    v5 = HALF;
                    v15 = XSESSION_INFO::GetAddress(&v23.m_hostAddress);
                    XSECURITY_INFO::XSECURITY_INFO(&v22, &v23.m_keyId, &v23.m_key);
                    XSESSION_INFO::Set(&v23.m_hostAddress, v16, v15);
                    bdSecurityKey::~bdSecurityKey(&v22.m_key);
                    bdSecurityID::~bdSecurityID(&v22.m_id);
                  }
                  else
                  {
                    Com_PrintError(25, "[MM] %s Could not find field security_key\n", "OnlineMatchmakerOmniscient::GetHostInfoForLobbyComplete");
                  }
                }
                else
                {
                  Com_PrintError(25, "[MM] %s Could not find field security_id\n", "OnlineMatchmakerOmniscient::GetHostInfoForLobbyComplete");
                }
              }
              else
              {
                Com_PrintError(25, "[MM] %s Could not find field dtls\n", "OnlineMatchmakerOmniscient::GetHostInfoForLobbyComplete");
              }
            }
            else
            {
              Com_PrintError(25, "[MM] %s Could not find field lobby_id\n", "OnlineMatchmakerOmniscient::GetHostInfoForLobbyComplete");
            }
            bdJSONDeserializer::~bdJSONDeserializer(&v20);
          }
          else
          {
            Com_PrintError(25, "[MM] %s Could not parse backend doc\n", "OnlineMatchmakerOmniscient::GetHostInfoForLobbyComplete");
          }
        }
        else
        {
          Com_PrintError(25, "[MM] %s Could not find field host_address\n", "OnlineMatchmakerOmniscient::GetHostInfoForLobbyComplete");
        }
      }
      else
      {
        Com_PrintError(25, "[MM] %s Could not find field listen_server\n", "OnlineMatchmakerOmniscient::GetHostInfoForLobbyComplete");
      }
      bdJSONDeserializer::~bdJSONDeserializer(buffer);
    }
    else
    {
      Com_PrintError(25, "[MM] %s Could not parse host doc\n", "OnlineMatchmakerOmniscient::GetHostInfoForLobbyComplete");
    }
    bdJSONDeserializer::~bdJSONDeserializer(&v19);
  }
  if ( !s_getHostInfoForLobbyTask.callback && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\online\\online_matchmaker.cpp", 7016, ASSERT_TYPE_ASSERT, "(s_getHostInfoForLobbyTask.callback)", (const char *)&queryFormat, "s_getHostInfoForLobbyTask.callback") )
    __debugbreak();
  s_getHostInfoForLobbyTask.callback(task->m_controllerIndex, v5, &v23.m_hostAddress, s_getHostInfoForLobbyTask.m_lobbyId);
  s_getHostInfoForLobbyTask.m_isInUse = 0;
  s_getHostInfoForLobbyTask.m_lobbyId = 0i64;
  s_getHostInfoForLobbyTask.callback = NULL;
  MatchMakerOmniLobbyData::~MatchMakerOmniLobbyData(&v23);
}

/*
==============
OnlineMatchmakerOmniscient::GetHostUID
==============
*/
unsigned __int64 OnlineMatchmakerOmniscient::GetHostUID(OnlineMatchmakerOmniscient *this)
{
  return this->m_lobbyData.m_hostUID;
}

/*
==============
OnlineMatchmakerOmniscient::GetLobbyStateString
==============
*/
const char *OnlineMatchmakerOmniscient::GetLobbyStateString(OnlineMatchmakerOmniscient *this, const MatchmakerLobbyState state)
{
  __int64 v3[12]; 

  v3[0] = (__int64)"eIDLE";
  v3[1] = (__int64)"eINITING";
  v3[2] = (__int64)"eWAITING_FOR_LOBBY_INFO";
  v3[3] = (__int64)"eCREATING_LOBBY";
  v3[4] = (__int64)"eJOINING_LOBBY";
  v3[5] = (__int64)"eUPDATING_LOBBY_DOCUMENT";
  v3[6] = (__int64)"eLOBBY_CREATED";
  v3[7] = (__int64)"eLOBBY_JOINED";
  v3[8] = (__int64)"eDISBAND_LOBBY";
  v3[9] = (__int64)"eDISBANDING_LOBBY";
  v3[10] = (__int64)"eFAILURE";
  v3[11] = (__int64)"eNONE";
  return (const char *)v3[state];
}

/*
==============
OnlineMatchmakerOmniscient::GetLobbyStatus
==============
*/
const char *OnlineMatchmakerOmniscient::GetLobbyStatus(OnlineMatchmakerOmniscient *this)
{
  return OnlineMatchmakerOmniscient::GetLobbyStateString(this, (const MatchmakerLobbyState)this->m_lobbyState);
}

/*
==============
OnlineMatchmakerOmniscient::GetMapWeight
==============
*/
float OnlineMatchmakerOmniscient::GetMapWeight(OnlineMatchmakerOmniscient *this, const int map_index)
{
  int v2; 
  MapWeightEntry *m_mapWeights; 
  __int64 v4; 

  v2 = 0;
  m_mapWeights = this->m_lobbyData.m_mapWeights;
  v4 = 0i64;
  while ( m_mapWeights->mapIndex != map_index )
  {
    ++v2;
    ++v4;
    ++m_mapWeights;
    if ( v4 >= 20 )
      return FLOAT_1_0;
  }
  return this->m_lobbyData.m_mapWeights[v2].mapWeight;
}

/*
==============
OnlineMatchId::GetMatchId
==============
*/
unsigned __int64 OnlineMatchId::GetMatchId()
{
  return OnlineMatchId::sm_currentId;
}

/*
==============
OnlineMatchId::GetMatchIdString
==============
*/
char *OnlineMatchId::GetMatchIdString()
{
  return j_va("%zu", OnlineMatchId::sm_currentId);
}

/*
==============
OnlineMatchmakerOmniscient::GetMatchmakingGameType
==============
*/
__int64 OnlineMatchmakerOmniscient::GetMatchmakingGameType(OnlineMatchmakerOmniscient *this)
{
  return (unsigned int)this->m_lobbyData.m_performanceGameType;
}

/*
==============
OnlineMatchmakerOmniscient::GetMatchmakingTokenFromDW
==============
*/
void OnlineMatchmakerOmniscient::GetMatchmakingTokenFromDW(OnlineMatchmakerOmniscient *this, OnlineMatchmakerOmniscient::Player *outplayer)
{
  unsigned __int64 *v4; 
  const dvar_t *v5; 
  const char *v6; 
  void (__fastcall *m_tokenUpdateCallback)(const XUID, const unsigned __int64, const bool); 
  const char *v8; 
  DWServicesAccess *Instance; 
  DWAsyncMatchMaking *AsyncMatchmaking; 
  TaskCreateRequest *MatchMakingPlayerToken; 
  bdRemoteTask *v12; 
  TaskManager *v13; 
  const char *v14; 
  const char *v15; 
  Windows::Foundation::IAsyncInfo *m_asyncInfo; 
  TaskCreateResult pTaskCreateResult; 
  TaskCreateRequest pTaskCreateRequest; 
  bdReference<bdRemoteTask> result; 

  if ( !outplayer->m_bIsLocal && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\online\\online_matchmaker.cpp", 3838, ASSERT_TYPE_ASSERT, "(outplayer.m_bIsLocal)", (const char *)&queryFormat, "outplayer.m_bIsLocal") )
    __debugbreak();
  v4 = &s_matchmakingToken[CL_Mgr_GetClientFromController(outplayer->m_controllerIndex)];
  if ( !*v4 )
    goto LABEL_11;
  v5 = DVARBOOL_online_matchmaking_cached_token;
  if ( !DVARBOOL_online_matchmaking_cached_token && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\universal\\dvar.h", 692, ASSERT_TYPE_ASSERT, "(dvar)", "%s\n\tDvar %s accessed after deregistration", "dvar", "online_matchmaking_cached_token") )
    __debugbreak();
  Dvar_CheckFrontendServerThread(v5);
  if ( v5->current.enabled )
  {
    v6 = XUID::ToDevString(&outplayer->m_userId);
    Com_Printf(25, "[MM] %s using cached token (%zu) for %s\n", "OnlineMatchmakerOmniscient::GetMatchmakingTokenFromDW", *v4, v6);
    outplayer->m_matchmakingToken = *v4;
    OnlineMatchmakerOmniscient::SetPlayerState(this, outplayer, eREADY);
    m_tokenUpdateCallback = this->m_callbacks.m_tokenUpdateCallback;
    if ( m_tokenUpdateCallback )
      ((void (__fastcall *)(unsigned __int64, unsigned __int64, bool))m_tokenUpdateCallback)(outplayer->m_userId.m_id, outplayer->m_matchmakingToken, outplayer->m_isPrimaryAccount);
  }
  else
  {
LABEL_11:
    pTaskCreateRequest.m_appTaskType = -1;
    memset(&pTaskCreateRequest.m_appSecondaryCallback, 0, 24);
    pTaskCreateRequest.m_onUpdateCallback = NULL;
    pTaskCreateRequest.m_cancelTaskOnSignoutEvent = 1;
    pTaskCreateRequest.m_timeoutInSeconds = 0;
    pTaskCreateResult.m_localTaskId = 0;
    pTaskCreateResult.m_task = NULL;
    pTaskCreateRequest.m_appData = this;
    pTaskCreateRequest.m_onCompletionCallback = OnlineMatchmakerOmniscient::staticTaskGetMatchmakingToken;
    pTaskCreateRequest.m_controllerIndex = outplayer->m_controllerIndex;
    v8 = XUID::ToDevString(&outplayer->m_userId);
    Com_Printf(25, "[MM] %s fetching token from DW for %s\n", "OnlineMatchmakerOmniscient::GetMatchmakingTokenFromDW", v8);
    Instance = DWServicesAccess::GetInstance();
    AsyncMatchmaking = DWServicesAccess::GetAsyncMatchmaking(Instance, outplayer->m_controllerIndex);
    MatchMakingPlayerToken = (TaskCreateRequest *)DWAsyncMatchMaking::getMatchMakingPlayerToken(AsyncMatchmaking, &result, &outplayer->m_matchmakingTokenResult);
    if ( MatchMakingPlayerToken != (TaskCreateRequest *)&pTaskCreateRequest.m_remoteDemonwareTask )
    {
      if ( pTaskCreateRequest.m_remoteDemonwareTask.m_ptr && _InterlockedExchangeAdd((volatile signed __int32 *)&pTaskCreateRequest.m_remoteDemonwareTask.m_ptr->m_refCount, 0xFFFFFFFF) == 1 && pTaskCreateRequest.m_remoteDemonwareTask.m_ptr )
        ((void (__fastcall *)(bdRemoteTask *, __int64))pTaskCreateRequest.m_remoteDemonwareTask.m_ptr->~bdReferencable)(pTaskCreateRequest.m_remoteDemonwareTask.m_ptr, 1i64);
      v12 = *(bdRemoteTask **)&MatchMakingPlayerToken->m_controllerIndex;
      pTaskCreateRequest.m_remoteDemonwareTask.m_ptr = v12;
      if ( v12 )
        _InterlockedExchangeAdd((volatile signed __int32 *)&v12->m_refCount, 1u);
    }
    if ( result.m_ptr && _InterlockedExchangeAdd((volatile signed __int32 *)&result.m_ptr->m_refCount, 0xFFFFFFFF) == 1 && result.m_ptr )
      ((void (__fastcall *)(bdRemoteTask *, __int64))result.m_ptr->~bdReferencable)(result.m_ptr, 1i64);
    if ( pTaskCreateRequest.m_remoteDemonwareTask.m_ptr && (v13 = TaskManager::GetInstance(), TaskManager::CreateTask(v13, &pTaskCreateRequest, &pTaskCreateResult)) )
    {
      outplayer->m_taskId = pTaskCreateResult.m_localTaskId;
      outplayer->m_isGettingMatchmakingToken = 1;
      v14 = XUID::ToString(&outplayer->m_userId);
      v15 = j_va("{\"player\":%s}", v14);
      OnlineMatchmakerOmniscient::Log(this, "GetMatchmakingTokenFromDW", v15, NULL, NULL, 0i64);
    }
    else
    {
      OnlineMatchmakerOmniscient::SetPlayerState(this, outplayer, eFAILURE);
    }
    pTaskCreateRequest.m_onCompletionCallback = NULL;
    pTaskCreateRequest.m_onUpdateCallback = NULL;
    pTaskCreateRequest.m_appSecondaryCallback = NULL;
    pTaskCreateRequest.m_timeoutInSeconds = 0;
    m_asyncInfo = pTaskCreateRequest.m_asyncInfo;
    if ( pTaskCreateRequest.m_asyncInfo )
    {
      pTaskCreateRequest.m_asyncInfo->__abi_Release(pTaskCreateRequest.m_asyncInfo);
      m_asyncInfo = NULL;
      pTaskCreateRequest.m_asyncInfo = NULL;
    }
    if ( pTaskCreateRequest.m_remoteDemonwareTask.m_ptr )
    {
      if ( _InterlockedExchangeAdd((volatile signed __int32 *)&pTaskCreateRequest.m_remoteDemonwareTask.m_ptr->m_refCount, 0xFFFFFFFF) == 1 )
      {
        if ( pTaskCreateRequest.m_remoteDemonwareTask.m_ptr )
          ((void (__fastcall *)(bdRemoteTask *, __int64))pTaskCreateRequest.m_remoteDemonwareTask.m_ptr->~bdReferencable)(pTaskCreateRequest.m_remoteDemonwareTask.m_ptr, 1i64);
        pTaskCreateRequest.m_remoteDemonwareTask.m_ptr = NULL;
      }
      m_asyncInfo = pTaskCreateRequest.m_asyncInfo;
    }
    if ( m_asyncInfo )
      m_asyncInfo->__abi_Release(m_asyncInfo);
  }
}

/*
==============
MatchmakingData::GetMaxPingForTime
==============
*/
__int64 MatchmakingData::GetMaxPingForTime(MatchmakingData *this, int timeSeconds)
{
  ntl::internal::list_node_base *mp_next; 
  ntl::internal::list_head_base<ntl::internal::list_node<PingBand> > *p_m_listHead; 
  unsigned int mp_prev_high; 
  int v5; 

  mp_next = this->m_pingBands.m_listHead.m_sentinel.mp_next;
  p_m_listHead = &this->m_pingBands.m_listHead;
  mp_prev_high = 0;
  v5 = timeSeconds;
  if ( timeSeconds < 0 )
    v5 = 0;
  if ( mp_next == (ntl::internal::list_node_base *)p_m_listHead )
    return 0i64;
  do
  {
    if ( !mp_next && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\libs\\ntl\\ntl\\list\\list.h", 103, ASSERT_TYPE_ASSERT, "( mp_node )", (const char *)&queryFormat, "mp_node") )
      __debugbreak();
    if ( SLODWORD(mp_next[1].mp_prev) > v5 )
      break;
    mp_prev_high = HIDWORD(mp_next[1].mp_prev);
    mp_next = mp_next->mp_next;
  }
  while ( mp_next != (ntl::internal::list_node_base *)p_m_listHead );
  return mp_prev_high;
}

/*
==============
OnlineMatchmakerOmniscient::GetMemberStatusString
==============
*/
const char *OnlineMatchmakerOmniscient::GetMemberStatusString(OnlineMatchmakerOmniscient *this, const MemberStatus status)
{
  __int64 v3[5]; 

  v3[0] = (__int64)"eUNACKNOWLEDGED";
  v3[1] = (__int64)"eMAY_CONNECT";
  v3[2] = (__int64)"eCONNECTED";
  v3[3] = (__int64)"eWONT_CONNECT";
  v3[4] = (__int64)"eREADY_TO_REMOVE";
  return (const char *)v3[status];
}

/*
==============
OnlineMatchmakerOmniscient::GetMigrationList
==============
*/
ntl::fixed_list<XUID,200,0> *OnlineMatchmakerOmniscient::GetMigrationList(OnlineMatchmakerOmniscient *this)
{
  return &this->m_lobbyData.m_migrationList;
}

/*
==============
tCallbacks::GetNextCallbackType
==============
*/
char tCallbacks::GetNextCallbackType(tCallbacks *this, tCallbacks::tCallbackTypes *retType, tCallbackResult *result)
{
  __int64 v6; 
  int m_outstandingCallback; 

  if ( !retType && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\online\\online_matchmaker.cpp", 7939, ASSERT_TYPE_ASSERT, "(retType)", (const char *)&queryFormat, "retType") )
    __debugbreak();
  if ( !result && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\online\\online_matchmaker.cpp", 7940, ASSERT_TYPE_ASSERT, "(result)", (const char *)&queryFormat, "result") )
    __debugbreak();
  *retType = eREMOVING_PLAYER;
  v6 = 0i64;
  while ( 1 )
  {
    m_outstandingCallback = this->m_outstandingCallback;
    if ( _bittest(&m_outstandingCallback, v6) )
      break;
    v6 = (unsigned int)(v6 + 1);
    if ( (_DWORD)v6 == 7 )
      return 0;
  }
  *retType = v6;
  *result = this->m_callbackWasSuccessful[v6];
  this->m_outstandingCallback ^= 1 << v6;
  this->m_callbackWasSuccessful[*(unsigned int *)retType] = 0;
  return 1;
}

/*
==============
OnlineMatchmakerOmniscient::GetPerformanceValueForPlayer
==============
*/
char OnlineMatchmakerOmniscient::GetPerformanceValueForPlayer(OnlineMatchmakerOmniscient *this, const XUID xuid, float *performanceValue)
{
  const ntl::internal::list_node<OnlineMatchmakerOmniscient::Player> *mp_node; 
  XUID xuida; 
  ntl::internal::list_iterator<OnlineMatchmakerOmniscient::Player,ntl::internal::list_node<OnlineMatchmakerOmniscient::Player> const ,OnlineMatchmakerOmniscient::Player const *,OnlineMatchmakerOmniscient::Player const &> it; 

  xuida.m_id = xuid.m_id;
  if ( !OnlineMatchmakerOmniscient::FindPlayer(this, &xuida, &it) )
    return 0;
  mp_node = it.mp_node;
  if ( !it.mp_node && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\libs\\ntl\\ntl\\list\\list.h", 103, ASSERT_TYPE_ASSERT, "( mp_node )", (const char *)&queryFormat, "mp_node") )
    __debugbreak();
  *performanceValue = mp_node->m_data.m_performanceValue;
  return 1;
}

/*
==============
OnlineMatchmakerOmniscient::GetPlayerCount
==============
*/
unsigned int OnlineMatchmakerOmniscient::GetPlayerCount(OnlineMatchmakerOmniscient *this)
{
  ntl::internal::list_head_base<ntl::internal::list_node<OnlineMatchmakerOmniscient::Player> > *p_m_listHead; 
  unsigned __int64 v2; 
  ntl::internal::list_head_base<ntl::internal::list_node<OnlineMatchmakerOmniscient::Player> > *i; 

  p_m_listHead = &this->m_playerList.m_listHead;
  v2 = 0i64;
  for ( i = (ntl::internal::list_head_base<ntl::internal::list_node<OnlineMatchmakerOmniscient::Player> > *)p_m_listHead->m_sentinel.mp_next; i != p_m_listHead; ++v2 )
    i = (ntl::internal::list_head_base<ntl::internal::list_node<OnlineMatchmakerOmniscient::Player> > *)i->m_sentinel.mp_next;
  return truncate_cast<unsigned int,unsigned __int64>(v2);
}

/*
==============
OnlineMatchmakerOmniscient::GetPlayerSessionStateString
==============
*/
const char *OnlineMatchmakerOmniscient::GetPlayerSessionStateString(OnlineMatchmakerOmniscient *this, const SessionStatus sessionStatus)
{
  __int64 v3[5]; 

  v3[0] = (__int64)"eNONE";
  v3[1] = (__int64)"eINITED";
  v3[2] = (__int64)"eCONNECTED";
  v3[3] = (__int64)"eDISCONNECTED";
  v3[4] = (__int64)"eUNKNOWN";
  return (const char *)v3[sessionStatus];
}

/*
==============
OnlineMatchmakerOmniscient::GetPlayerStateString
==============
*/
const char *OnlineMatchmakerOmniscient::GetPlayerStateString(OnlineMatchmakerOmniscient *this, const OnlineMatchmakerOmniscient::Player::PlayerState playerState)
{
  __int64 v3[10]; 

  v3[0] = (__int64)"eIDLE";
  v3[1] = (__int64)"eNEW";
  v3[2] = (__int64)"eADDING_LOCAL_PLAYER_TO_DW";
  v3[3] = (__int64)"eREMOTE_WAITING_FOR_MMING_TOKEN";
  v3[4] = (__int64)"eREADY";
  v3[5] = (__int64)"eUPDATING";
  v3[6] = (__int64)"eREADY_TO_REMOVE";
  v3[7] = (__int64)"eREMOVING_PLAYER";
  v3[8] = (__int64)"eFAILURE";
  v3[9] = (__int64)"eNONE";
  return (const char *)v3[playerState];
}

/*
==============
OnlineMatchmakerOmniscient::GetPlayerStatus
==============
*/
char *OnlineMatchmakerOmniscient::GetPlayerStatus(OnlineMatchmakerOmniscient *this, const unsigned int index)
{
  ntl::internal::list_head_base<ntl::internal::list_node<OnlineMatchmakerOmniscient::Player> > *p_m_listHead; 
  ntl::internal::list_node_base *mp_next; 
  unsigned __int64 v5; 
  ntl::internal::list_node_base *v6; 
  int i; 
  ntl::internal::list_head_base<ntl::internal::list_node<OnlineMatchmakerOmniscient::Player> > *v8; 
  __int64 j; 
  XUID v10; 
  const PartyData *PartyData; 
  int MemberByXUID_AllowNotPresent; 
  __int64 v13; 
  __int64 v14; 
  __int64 mp_prev_high; 
  const char *v16; 
  __int64 mp_next_high; 
  const char *v18; 
  __int64 mp_next_low; 
  const char *v20; 
  PartyData *v21; 
  const char *v23; 
  __int64 v24; 
  const char *v25; 
  __int64 v26; 
  const char *v27; 
  __int64 v28; 
  const char *v29; 
  const char *v30; 
  __int64 v31; 
  const char *v32; 
  const char *v33; 
  const char *v34; 
  const char *v35; 
  const char *v36; 
  const char *v37; 
  const char *v38; 
  const char *v39; 
  const char *v40; 
  const char *v41; 

  p_m_listHead = &this->m_playerList.m_listHead;
  mp_next = this->m_playerList.m_listHead.m_sentinel.mp_next;
  v5 = 0i64;
  if ( mp_next != (ntl::internal::list_node_base *)&this->m_playerList.m_listHead )
  {
    do
    {
      mp_next = mp_next->mp_next;
      ++v5;
    }
    while ( mp_next != (ntl::internal::list_node_base *)p_m_listHead );
  }
  if ( index >= v5 )
    return 0i64;
  v6 = this->m_playerList.m_listHead.m_sentinel.mp_next;
  for ( i = 0; v6 != (ntl::internal::list_node_base *)p_m_listHead; ++i )
  {
    if ( i == index )
      break;
    if ( !v6 && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\libs\\ntl\\ntl\\list\\list.h", 109, ASSERT_TYPE_ASSERT, "( mp_node )", (const char *)&queryFormat, "mp_node") )
      __debugbreak();
    v6 = v6->mp_next;
  }
  v8 = (ntl::internal::list_head_base<ntl::internal::list_node<OnlineMatchmakerOmniscient::Player> > *)p_m_listHead->m_sentinel.mp_next;
  for ( j = 0i64; v8 != p_m_listHead; ++j )
    v8 = (ntl::internal::list_head_base<ntl::internal::list_node<OnlineMatchmakerOmniscient::Player> > *)v8->m_sentinel.mp_next;
  if ( i == j )
    return 0i64;
  if ( !v6 && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\libs\\ntl\\ntl\\list\\list.h", 103, ASSERT_TYPE_ASSERT, "( mp_node )", (const char *)&queryFormat, "mp_node") )
    __debugbreak();
  v10.m_id = (unsigned __int64)v6[6].mp_next;
  PartyData = Lobby_GetPartyData();
  MemberByXUID_AllowNotPresent = Party_FindMemberByXUID_AllowNotPresent(PartyData, v10);
  v13 = MemberByXUID_AllowNotPresent;
  if ( MemberByXUID_AllowNotPresent <= -1 )
    goto LABEL_32;
  if ( MemberByXUID_AllowNotPresent > 200 )
  {
    LODWORD(v31) = MemberByXUID_AllowNotPresent;
    if ( CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\online\\online_matchmaker.cpp", 7466, ASSERT_TYPE_ASSERT, "( 0 ) <= ( memberIndex ) && ( memberIndex ) <= ( 200 )", "memberIndex not in [0, MAX_PARTY_MEMBERS]\n\t%i not in [%i, %i]", v31, 0i64, 200) )
      __debugbreak();
  }
  v14 = v13;
  if ( Lobby_GetPartyData()->partyMembers[v13].info.gamertag[0] )
  {
    if ( !v6 && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\libs\\ntl\\ntl\\list\\list.h", 103, ASSERT_TYPE_ASSERT, "( mp_node )", (const char *)&queryFormat, "mp_node") )
      __debugbreak();
    mp_prev_high = SHIDWORD(v6[11].mp_prev);
    v38 = "eREADY_TO_REMOVE";
    v41 = "eNONE";
    v32 = "eIDLE";
    v33 = "eNEW";
    v34 = "eADDING_LOCAL_PLAYER_TO_DW";
    v35 = "eREMOTE_WAITING_FOR_MMING_TOKEN";
    v36 = "eREADY";
    v37 = "eUPDATING";
    v39 = "eREMOVING_PLAYER";
    v40 = "eFAILURE";
    v16 = (&v32)[SLODWORD(v6[1].mp_prev)];
    v33 = "eINITED";
    v35 = "eDISCONNECTED";
    v36 = "eUNKNOWN";
    mp_next_high = SHIDWORD(v6[11].mp_next);
    v32 = "eNONE";
    v34 = "eCONNECTED";
    v18 = (&v32)[mp_next_high];
    mp_next_low = SLODWORD(v6[11].mp_next);
    v32 = "eUNACKNOWLEDGED";
    v33 = "eMAY_CONNECT";
    v35 = "eWONT_CONNECT";
    v36 = "eREADY_TO_REMOVE";
    v20 = (&v32)[mp_next_low];
    v34 = "eCONNECTED";
    v36 = "eREADY_TO_REMOVE";
    v21 = Lobby_GetPartyData();
    return j_va("%s - %s (%s) %s %s", v21->partyMembers[v14].info.gamertag, (&v32)[mp_prev_high], v20, v18, v16);
  }
  else
  {
LABEL_32:
    if ( !v6 && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\libs\\ntl\\ntl\\list\\list.h", 103, ASSERT_TYPE_ASSERT, "( mp_node )", (const char *)&queryFormat, "mp_node") )
      __debugbreak();
    v38 = "eREADY_TO_REMOVE";
    v41 = "eNONE";
    v32 = "eIDLE";
    v33 = "eNEW";
    v34 = "eADDING_LOCAL_PLAYER_TO_DW";
    v35 = "eREMOTE_WAITING_FOR_MMING_TOKEN";
    v36 = "eREADY";
    v37 = "eUPDATING";
    v39 = "eREMOVING_PLAYER";
    v40 = "eFAILURE";
    v23 = (&v32)[SLODWORD(v6[1].mp_prev)];
    v33 = "eINITED";
    v35 = "eDISCONNECTED";
    v36 = "eUNKNOWN";
    v24 = SHIDWORD(v6[11].mp_next);
    v32 = "eNONE";
    v34 = "eCONNECTED";
    v25 = (&v32)[v24];
    v26 = SLODWORD(v6[11].mp_next);
    v36 = "eREADY_TO_REMOVE";
    v32 = "eUNACKNOWLEDGED";
    v33 = "eMAY_CONNECT";
    v35 = "eWONT_CONNECT";
    v27 = (&v32)[v26];
    v28 = SHIDWORD(v6[11].mp_prev);
    v36 = "eREADY_TO_REMOVE";
    v34 = "eCONNECTED";
    v29 = (&v32)[v28];
    v30 = XUID::ToDevString((XUID *)&v6[6].mp_next);
    return j_va("%s - %s (%s) %s %s", v30, v29, v27, v25, v23);
  }
}

/*
==============
OnlineMatchmakerOmniscient::GetPlaylist
==============
*/
__int64 OnlineMatchmakerOmniscient::GetPlaylist(OnlineMatchmakerOmniscient *this)
{
  return (unsigned int)this->m_params.m_playlistId;
}

/*
==============
OnlineMatchmakerOmniscient::GetPlaylistCategory
==============
*/
__int64 OnlineMatchmakerOmniscient::GetPlaylistCategory(OnlineMatchmakerOmniscient *this)
{
  return (unsigned int)this->m_params.m_playlistCategory;
}

/*
==============
OnlineMatchmakerOmniscient::GetPlaylistFromLobbyData
==============
*/
__int64 OnlineMatchmakerOmniscient::GetPlaylistFromLobbyData(OnlineMatchmakerOmniscient *this)
{
  return (unsigned int)this->m_lobbyData.m_playList;
}

/*
==============
OnlineMatchmakerOmniscient::GetPlaylistVersion
==============
*/
__int64 OnlineMatchmakerOmniscient::GetPlaylistVersion(OnlineMatchmakerOmniscient *this)
{
  return (unsigned int)this->m_lobbyData.m_playListVersion;
}

/*
==============
OnlineMatchmakerOmniscient::GetPrivateMatchHost
==============
*/
XUID *OnlineMatchmakerOmniscient::GetPrivateMatchHost(OnlineMatchmakerOmniscient *this, XUID *result)
{
  unsigned __int64 m_id; 

  m_id = this->m_lobbyData.m_privateMatchId.m_id;
  if ( m_id )
    XUID::FromUniversalId(result, m_id);
  else
    XUID::NullXUID(result);
  return result;
}

/*
==============
OnlineMatchmakerOmniscient::GetPrivateMatchId
==============
*/
PrivateMatchId *OnlineMatchmakerOmniscient::GetPrivateMatchId(OnlineMatchmakerOmniscient *this, PrivateMatchId *result)
{
  result->m_id = (unsigned __int64)this->m_lobbyData.m_privateMatchId;
  return result;
}

/*
==============
OnlineMatchmakerOmniscient::GetRetailDebug
==============
*/
void OnlineMatchmakerOmniscient::GetRetailDebug(OnlineMatchmakerOmniscient *this, char *destString, const int maxLength)
{
  unsigned __int64 v3; 
  const char *LobbyStateString; 
  const char *StateString; 
  unsigned __int64 v8; 
  const char *v9; 
  int v10; 
  const char *v11; 
  const char *v12; 
  const char *v13; 
  unsigned __int8 ClientPlatform; 
  const char *MatchmakingStringForClientPlatform; 
  const char *v16; 
  const char *v17; 
  const char *v18; 
  const char *v19; 
  const char *v20; 
  __int64 m_tournamentTeamSize; 
  const char *v22; 
  const char *v23; 
  const char *v24; 
  const char *v25; 
  unsigned __int64 m_lobbyid; 
  const char *v27; 
  const char *v28; 
  const char *v29; 
  const char *AddressString; 
  const PartyData *ActiveParty; 
  const char *v32; 
  unsigned __int64 m_hostUID; 
  const char *v34; 
  const char *HostName; 
  char buildName[128]; 

  v3 = maxLength;
  OnlineMatchmakerOmniscient::GetBuildName(this, buildName, 0x80u);
  LobbyStateString = OnlineMatchmakerOmniscient::GetLobbyStateString(this, (const MatchmakerLobbyState)this->m_lobbyState);
  StateString = OnlineMatchmakerOmniscient::GetStateString(this, (const MatchmakerOmniscientState)this->m_state);
  v8 = v3;
  v9 = j_va("Matchmaking\n%s\n%s\n%s\n", StateString, LobbyStateString, buildName);
  I_strcat_truncate(destString, v3, v9);
  if ( this->m_state > eREADY )
  {
    v10 = Sys_Milliseconds();
    v11 = j_va("Elapsed Time: %i\n", (unsigned int)((v10 - this->m_mmingData.m_startTimeMs) / 1000));
    I_strcat_truncate(destString, v3, v11);
    if ( this->m_lobbyData.m_qosing )
    {
      v12 = j_va("QoSing %i players\n", this->m_lobbyData.m_numQoses);
      I_strcat_truncate(destString, v3, v12);
    }
    if ( Live_IsCrossPlayEnabled(this->m_controllerIndex) )
    {
      v13 = j_va("Cross Play: ENABLED\n");
    }
    else
    {
      ClientPlatform = GetClientPlatform();
      MatchmakingStringForClientPlatform = Com_GetMatchmakingStringForClientPlatform((const ClientPlatform)ClientPlatform);
      v13 = j_va("Cross Play RESTRICT: %s\n", MatchmakingStringForClientPlatform);
    }
    I_strcat_truncate(destString, v3, v13);
    v16 = j_va("Game Type: %i\n", (unsigned int)this->m_params.m_gameType);
    I_strcat_truncate(destString, v3, v16);
    v17 = j_va("Playlist Id/Cat/Ver: %i, %i, %i\n", (unsigned int)this->m_params.m_playlistId, (unsigned int)this->m_params.m_playlistCategory, (unsigned int)this->m_params.m_playlistVersion);
    I_strcat_truncate(destString, v3, v17);
    v18 = j_va("Netcode: %i\n", (unsigned int)this->m_params.m_netcodeVersion);
    I_strcat_truncate(destString, v3, v18);
    v19 = j_va("Min Players: %i\n", (unsigned int)this->m_params.m_minPlayerNeeded);
    I_strcat_truncate(destString, v3, v19);
    v20 = j_va("Max Players: %i\n", (unsigned int)this->m_params.m_maxPlayers);
    I_strcat_truncate(destString, v3, v20);
    m_tournamentTeamSize = (unsigned int)this->m_params.m_tournamentTeamSize;
    if ( (int)m_tournamentTeamSize > 0 )
    {
      v22 = j_va("Tournament Team Size: %i\n", m_tournamentTeamSize);
      I_strcat_truncate(destString, v3, v22);
    }
    if ( this->m_params.m_inviteLocalJoiningControllerIndex != -1 )
    {
      v23 = XUID::ToString(&this->m_params.m_inviteClientAttemptingToJoinUID);
      v24 = j_va("Join via Invite on: %s\n", v23);
      I_strcat_truncate(destString, v3, v24);
    }
    v25 = j_va("%s\n", this->m_lobbyData.m_statusMessage);
    I_strcat_truncate(destString, v3, v25);
    m_lobbyid = this->m_lobbyData.m_lobbyid;
    if ( m_lobbyid )
    {
      v27 = j_va("\nLobby ID: %zu\n", m_lobbyid);
      I_strcat_truncate(destString, v3, v27);
      if ( this->m_lobbyData.m_amITheLobbyHost )
      {
        I_strcat_truncate(destString, v3, "I am the host\n");
        if ( this->m_lobbyData.m_isGameInProgress )
        {
          v28 = j_va("%s\n", "In Progress");
        }
        else
        {
          v29 = "Intermission";
          if ( this->m_lobbyData.m_gameLobbyInFinalCountdown )
            v29 = "Final Countdown";
          v28 = j_va("%s\n", v29);
        }
      }
      else if ( this->m_lobbyData.m_hasDedicatedServer )
      {
        AddressString = XSESSION_INFO::GetAddressString(&this->m_lobbyData.m_hostAddress);
        v28 = j_va("%s %s\n", this->m_lobbyData.m_allocatedDataCenter, AddressString);
      }
      else
      {
        ActiveParty = Live_GetActiveParty();
        v32 = XSESSION_INFO::GetAddressString(&this->m_lobbyData.m_hostAddress);
        m_hostUID = this->m_lobbyData.m_hostUID;
        v34 = v32;
        HostName = Party_GetHostName(ActiveParty);
        v28 = j_va("Host: %s\nXUID: %zu\n%s\n", HostName, m_hostUID, v34);
      }
      I_strcat_truncate(destString, v8, v28);
    }
  }
}

/*
==============
OnlineMatchmakerOmniscient::GetServerDataCenter
==============
*/
char *OnlineMatchmakerOmniscient::GetServerDataCenter(OnlineMatchmakerOmniscient *this)
{
  return this->m_lobbyData.m_allocatedDataCenter;
}

/*
==============
OnlineMatchmakerOmniscient::GetServerHostName
==============
*/
char *OnlineMatchmakerOmniscient::GetServerHostName(OnlineMatchmakerOmniscient *this)
{
  return this->m_lobbyData.m_allocatedServerInfo;
}

/*
==============
OnlineMatchmakerOmniscient::GetSquadFor
==============
*/
char OnlineMatchmakerOmniscient::GetSquadFor(OnlineMatchmakerOmniscient *this, const XUID uid, int *squadId)
{
  const ntl::internal::list_node<OnlineMatchmakerOmniscient::Player> *mp_node; 
  XUID xuid; 
  ntl::internal::list_iterator<OnlineMatchmakerOmniscient::Player,ntl::internal::list_node<OnlineMatchmakerOmniscient::Player> const ,OnlineMatchmakerOmniscient::Player const *,OnlineMatchmakerOmniscient::Player const &> it; 

  xuid.m_id = uid.m_id;
  if ( !OnlineMatchmakerOmniscient::FindPlayer(this, &xuid, &it) )
    return 0;
  mp_node = it.mp_node;
  if ( !it.mp_node && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\libs\\ntl\\ntl\\list\\list.h", 103, ASSERT_TYPE_ASSERT, "( mp_node )", (const char *)&queryFormat, "mp_node") )
    __debugbreak();
  *squadId = mp_node->m_data.m_squadId;
  return 1;
}

/*
==============
OnlineMatchmakerOmniscient::GetStateString
==============
*/
const char *OnlineMatchmakerOmniscient::GetStateString(OnlineMatchmakerOmniscient *this, const MatchmakerOmniscientState state)
{
  __int64 v2; 
  int v5; 
  __int64 v6[14]; 

  v2 = state;
  v6[0] = (__int64)"eIDLE";
  v6[1] = (__int64)"eINITING";
  v6[2] = (__int64)"eWAITING_FOR_PLAYERS";
  v6[3] = (__int64)"eINIT_MATCHMAKING";
  v6[4] = (__int64)"eREADY_TO_START_MATCHMAKING";
  v6[5] = (__int64)"eSTART_MATCHMAKING";
  v6[6] = (__int64)"eSTARTING_MATCHMAKING";
  v6[7] = (__int64)"eSTARTED_MATCHMAKING";
  v6[8] = (__int64)"eCANCEL_MATCHMAKING";
  v6[9] = (__int64)"eCANCELING_MATCHMAKING";
  v6[10] = (__int64)"eSHUTDOWN_MATCHMAKING";
  v6[11] = (__int64)"eSHUTTING_DOWN_MATCHMAKING";
  v6[12] = (__int64)"eFAILURE";
  v6[13] = (__int64)"eNONE";
  if ( (unsigned int)state >= (eFAILURE|eREADY_TO_REMOVE) )
  {
    v5 = 14;
    if ( CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\online\\online_matchmaker.cpp", 7606, ASSERT_TYPE_ASSERT, "(unsigned)( stateIndex ) < (unsigned)( ( sizeof( *array_counter( stateString ) ) + 0 ) )", "stateIndex doesn't index ARRAY_COUNT( stateString )\n\t%i not in [0, %i)", state, v5) )
      __debugbreak();
  }
  return (const char *)v6[v2];
}

/*
==============
OnlineMatchmakerOmniscient::GetStatus
==============
*/
const char *OnlineMatchmakerOmniscient::GetStatus(OnlineMatchmakerOmniscient *this)
{
  return OnlineMatchmakerOmniscient::GetStateString(this, (const MatchmakerOmniscientState)this->m_state);
}

/*
==============
OnlineMatchmakerOmniscient::GetTeamFor
==============
*/
char OnlineMatchmakerOmniscient::GetTeamFor(OnlineMatchmakerOmniscient *this, const XUID uid, team_t *teamId)
{
  const ntl::internal::list_node<OnlineMatchmakerOmniscient::Player> *mp_node; 
  XUID xuid; 
  ntl::internal::list_iterator<OnlineMatchmakerOmniscient::Player,ntl::internal::list_node<OnlineMatchmakerOmniscient::Player> const ,OnlineMatchmakerOmniscient::Player const *,OnlineMatchmakerOmniscient::Player const &> it; 

  xuid.m_id = uid.m_id;
  if ( !OnlineMatchmakerOmniscient::FindPlayer(this, &xuid, &it) )
    return 0;
  mp_node = it.mp_node;
  if ( !it.mp_node && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\libs\\ntl\\ntl\\list\\list.h", 103, ASSERT_TYPE_ASSERT, "( mp_node )", (const char *)&queryFormat, "mp_node") )
    __debugbreak();
  *teamId = mp_node->m_data.m_dwTeamId + 1;
  return 1;
}

/*
==============
OnlineMatchmakerOmniscient::GetTournamentAlliesTeam
==============
*/
__int64 OnlineMatchmakerOmniscient::GetTournamentAlliesTeam(OnlineMatchmakerOmniscient *this)
{
  return this->m_lobbyData.m_tournamentAlliesTeam + 1;
}

/*
==============
OnlineMatchmakerOmniscient::GetTournamentAxisTeam
==============
*/
__int64 OnlineMatchmakerOmniscient::GetTournamentAxisTeam(OnlineMatchmakerOmniscient *this)
{
  return this->m_lobbyData.m_tournamentAxisTeam + 1;
}

/*
==============
OnlineMatchmakerOmniscient::GetTournamentID
==============
*/
unsigned __int64 OnlineMatchmakerOmniscient::GetTournamentID(OnlineMatchmakerOmniscient *this)
{
  return this->m_lobbyData.m_tournamentID;
}

/*
==============
OnlineMatchmakerOmniscient::GetUIState
==============
*/
__int64 OnlineMatchmakerOmniscient::GetUIState(OnlineMatchmakerOmniscient *this, MatchmakerUIStateData *outExtraInfo)
{
  __int64 result; 
  int ElapsedTimeSeconds; 
  ntl::internal::list_node_base *mp_next; 
  int mp_prev_high; 
  int v8; 
  ntl::internal::list_head_base<ntl::internal::list_node<PingBand> > *i; 
  bool v10; 

  if ( this->m_lobbyData.m_qosing )
  {
    outExtraInfo->numQoSPlayers = this->m_lobbyData.m_numQoses;
    return 3i64;
  }
  else
  {
    switch ( this->m_state )
    {
      case eIDLE:
      case eNEW:
      case eREMOTE_WAITING_FOR_MMING_TOKEN:
      case eREADY:
      case eUPDATING:
      case eREADY_TO_REMOVE:
        result = 1i64;
        break;
      case eADDING_LOCAL_PLAYER_TO_DW:
      case eREMOVING_PLAYER:
        switch ( this->m_lobbyState )
        {
          case eIDLE:
          case eNEW:
          case eADDING_LOCAL_PLAYER_TO_DW:
          case eUPDATING:
            ElapsedTimeSeconds = MatchmakingData::GetElapsedTimeSeconds(&this->m_mmingData);
            mp_next = this->m_mmingData.m_pingBands.m_listHead.m_sentinel.mp_next;
            mp_prev_high = 0;
            v8 = ElapsedTimeSeconds;
            if ( ElapsedTimeSeconds < 0 )
              v8 = 0;
            for ( i = &this->m_mmingData.m_pingBands.m_listHead; mp_next != (ntl::internal::list_node_base *)i; mp_next = mp_next->mp_next )
            {
              if ( !mp_next && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\libs\\ntl\\ntl\\list\\list.h", 103, ASSERT_TYPE_ASSERT, "( mp_node )", (const char *)&queryFormat, "mp_node") )
                __debugbreak();
              if ( SLODWORD(mp_next[1].mp_prev) > v8 )
                break;
              mp_prev_high = HIDWORD(mp_next[1].mp_prev);
            }
            result = 2i64;
            outExtraInfo->numQoSPlayers = mp_prev_high;
            break;
          case eREMOTE_WAITING_FOR_MMING_TOKEN:
          case eREADY:
          case eREADY_TO_REMOVE:
          case eREMOVING_PLAYER:
            result = 4i64;
            break;
          case eFAILURE:
          case eNONE:
          case eFAILURE|eADDING_LOCAL_PLAYER_TO_DW:
          case eNONE|eADDING_LOCAL_PLAYER_TO_DW:
            goto $LN9_37;
          default:
            v10 = CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\online\\online_matchmaker.cpp", 7348, ASSERT_TYPE_ASSERT, (const char *)&queryFormat.fmt + 3, "Unexpected matchmaker lobby state");
            goto LABEL_18;
        }
        break;
      case eFAILURE:
      case eNONE:
      case eFAILURE|eADDING_LOCAL_PLAYER_TO_DW:
      case eNONE|eADDING_LOCAL_PLAYER_TO_DW:
      case eFAILURE|eREADY:
      case eNONE|eREADY:
        goto $LN9_37;
      default:
        v10 = CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\online\\online_matchmaker.cpp", 7363, ASSERT_TYPE_ASSERT, (const char *)&queryFormat.fmt + 3, "Unexpected matchmaker state");
LABEL_18:
        if ( v10 )
          __debugbreak();
$LN9_37:
        result = 5i64;
        break;
    }
  }
  return result;
}

/*
==============
OnlineMatchmakerOmniscient::GetUpdateId
==============
*/
unsigned __int64 OnlineMatchmakerOmniscient::GetUpdateId(OnlineMatchmakerOmniscient *this)
{
  return this->m_lobbyData.m_updateId;
}

/*
==============
tCallbacks::HasCallbackType
==============
*/
unsigned __int8 tCallbacks::HasCallbackType(tCallbacks *this, tCallbacks::tCallbackTypes type)
{
  int m_outstandingCallback; 

  m_outstandingCallback = this->m_outstandingCallback;
  return _bittest(&m_outstandingCallback, type);
}

/*
==============
OnlineMatchmakerOmniscient::HasDemonwareAckedGameStart
==============
*/
_BOOL8 OnlineMatchmakerOmniscient::HasDemonwareAckedGameStart(OnlineMatchmakerOmniscient *this)
{
  Com_Printf(25, "[MM] %s\n", "OnlineMatchmakerOmniscient::HasDemonwareAckedGameStart");
  return this->m_lobbyData.m_gameStartedCurrent;
}

/*
==============
OnlineMatchmakerOmniscient::HasMigrationList
==============
*/
bool OnlineMatchmakerOmniscient::HasMigrationList(OnlineMatchmakerOmniscient *this)
{
  ntl::internal::list_head_base<ntl::internal::list_node<XUID> > *p_m_listHead; 
  __int64 v2; 
  ntl::internal::list_head_base<ntl::internal::list_node<XUID> > *i; 

  p_m_listHead = &this->m_lobbyData.m_migrationList.m_listHead;
  v2 = 0i64;
  for ( i = (ntl::internal::list_head_base<ntl::internal::list_node<XUID> > *)p_m_listHead->m_sentinel.mp_next; i != p_m_listHead; ++v2 )
    i = (ntl::internal::list_head_base<ntl::internal::list_node<XUID> > *)i->m_sentinel.mp_next;
  return v2 != 0;
}

/*
==============
OnlineAsyncMatchmakingEventHandler::Init
==============
*/
char OnlineAsyncMatchmakingEventHandler::Init(OnlineAsyncMatchmakingEventHandler *this, OnlineMatchmakerOmniscient *matchmaker)
{
  this->m_matchmaker = matchmaker;
  return 1;
}

/*
==============
OnlineMatchmakerOmniscient::Init
==============
*/
__int64 OnlineMatchmakerOmniscient::Init(OnlineMatchmakerOmniscient *this, const int localControllerIndex)
{
  unsigned __int8 v2; 
  const PartyData *PartyData; 

  v2 = 0;
  if ( this->m_state == eIDLE )
  {
    OnlineMatchmakerOmniscient::ResetBreak(this);
    OnlineMatchmakerOmniscient::AddPlayersFromParty(this, &g_partyData);
    PartyData = Lobby_GetPartyData();
    OnlineMatchmakerOmniscient::AddPlayersFromParty(this, PartyData);
    this->m_eventHandler.m_matchmaker = this;
    OnlineMatchmakerOmniscient::SetState(this, eNEW);
    this->m_controllerIndex = localControllerIndex;
    v2 = 1;
  }
  OnlineMatchmakerTelemetry::Init(&this->m_telemetry, localControllerIndex);
  return v2;
}

/*
==============
OnlineMatchmakerOmniscient::InitForInviteJoin
==============
*/
char OnlineMatchmakerOmniscient::InitForInviteJoin(OnlineMatchmakerOmniscient *this, const int controllerIndex, const XUID uidToJoinOn, void (*callback)(tCallbackResult, const unsigned __int64, const XSESSION_INFO *, void *))
{
  MatchmakerOmniscientState m_state; 
  const char *v8; 
  __int64 v9; 
  const char *v10; 
  const char *v11; 
  bool v12; 
  MatchmakerOmniscientState v13; 
  bool v14; 
  const char *v15; 
  const char *v16; 
  ntl::internal::list_node_base *mp_next; 
  const char *v18; 
  const char *v19; 
  const char *v20; 
  XUID xuid; 

  xuid.m_id = uidToJoinOn.m_id;
  m_state = this->m_state;
  v8 = XUID::ToDevString(&xuid);
  Com_Printf(25, "[MM] %s ( %d, %s ) m_state %d\n", "OnlineMatchmakerOmniscient::InitForInviteJoin", (unsigned int)controllerIndex, v8, m_state);
  v9 = 0i64;
  if ( this->m_callbacks.m_inviteCallback )
  {
    v10 = XUID::ToString(&xuid);
    v11 = j_va("{\"status\":\"Following an invite but we already are following one. This might get strange.\",\"uid\":\"%s\"}", v10);
    OnlineMatchmakerOmniscient::Log(this, "InitForInviteJoin", v11, NULL, NULL, 0i64);
  }
  this->m_params.m_inviteLocalJoiningControllerIndex = controllerIndex;
  XUID::operator=(&this->m_params.m_inviteClientAttemptingToJoinUID, &xuid);
  this->m_params.m_lobbyIdToJoin = 0i64;
  this->m_callbacks.m_inviteCallback = callback;
  v12 = OnlineMatchmakerOmniscient::Init(this, controllerIndex);
  v13 = this->m_state;
  v14 = v12;
  v15 = XUID::ToDevString(&xuid);
  v16 = "false";
  if ( v14 )
    v16 = "true";
  Com_Printf(25, "[MM] %s ( %d, %s ) Init returned %s in state %d!\n", "OnlineMatchmakerOmniscient::InitForInviteJoin", (unsigned int)controllerIndex, v15, v16, v13);
  mp_next = this->m_playerList.m_listHead.m_sentinel.mp_next;
  if ( mp_next == (ntl::internal::list_node_base *)&this->m_playerList.m_listHead )
    goto LABEL_8;
  do
  {
    mp_next = mp_next->mp_next;
    ++v9;
  }
  while ( mp_next != (ntl::internal::list_node_base *)&this->m_playerList.m_listHead );
  if ( !v9 )
  {
LABEL_8:
    v18 = XUID::ToDevString(&xuid);
    Com_PrintWarning(25, "[MM] %s ( %d, %s ) called with no players in playerList, this request will likely NOT be sent!\n", "OnlineMatchmakerOmniscient::InitForInviteJoin", (unsigned int)controllerIndex, v18);
  }
  if ( !v14 && this->m_state != eNEW )
  {
    if ( this->m_state == eREADY && this->m_mmingData.m_matchmakingId )
    {
      v19 = XUID::ToDevString(&xuid);
      Com_Printf(25, "[MM] %s ( %d, %s ) setting state eINIT_MATCHMAKING\n", "OnlineMatchmakerOmniscient::InitForInviteJoin", (unsigned int)controllerIndex, v19);
      OnlineMatchmakerOmniscient::SetState(this, eREMOTE_WAITING_FOR_MMING_TOKEN);
    }
    else
    {
      v20 = XUID::ToDevString(&xuid);
      Com_Printf(25, "[MM] %s ( %d, %s ) calling ResetLobby\n", "OnlineMatchmakerOmniscient::InitForInviteJoin", (unsigned int)controllerIndex, v20);
      OnlineMatchmakerOmniscient::ResetLobby(this);
    }
  }
  return 1;
}

/*
==============
OnlineMatchmakerOmniscient::InitForLobbyIdJoin
==============
*/
bool OnlineMatchmakerOmniscient::InitForLobbyIdJoin(OnlineMatchmakerOmniscient *this, const int controllerIndex, const unsigned __int64 lobbyIdToJoinOn, void (*callback)(tCallbackResult, const unsigned __int64, const XSESSION_INFO *, void *))
{
  __int64 v8; 
  const char *v9; 
  const XUID *v10; 
  bool v11; 
  const char *v12; 
  bool v13; 
  ntl::internal::list_node_base *mp_next; 
  bool v15; 
  unsigned __int64 m_tournamentID; 
  bool v17; 
  XUID result; 

  Com_Printf(25, "[MM] %s ( %d, %llu ) m_state %d\n", "OnlineMatchmakerOmniscient::InitForLobbyIdJoin", (unsigned int)controllerIndex, lobbyIdToJoinOn, this->m_state);
  v8 = 0i64;
  if ( this->m_callbacks.m_inviteCallback )
  {
    v9 = j_va("{\"status\":\"Following an invite but we already are following one. This might get strange.\",\"lobbyid\":\"%llu\"}", lobbyIdToJoinOn);
    OnlineMatchmakerOmniscient::Log(this, "InitForInviteJoin", v9, NULL, NULL, 0i64);
  }
  this->m_params.m_inviteLocalJoiningControllerIndex = controllerIndex;
  v10 = XUID::NullXUID(&result);
  XUID::operator=(&this->m_params.m_inviteClientAttemptingToJoinUID, v10);
  this->m_params.m_lobbyIdToJoin = lobbyIdToJoinOn;
  this->m_callbacks.m_inviteCallback = callback;
  v11 = OnlineMatchmakerOmniscient::Init(this, controllerIndex);
  v12 = "false";
  v13 = v11;
  if ( v11 )
    v12 = "true";
  Com_Printf(25, "[MM] %s ( %d, %llu ) Init returned %s in state %d!\n", "OnlineMatchmakerOmniscient::InitForLobbyIdJoin", (unsigned int)controllerIndex, lobbyIdToJoinOn, v12, this->m_state);
  mp_next = this->m_playerList.m_listHead.m_sentinel.mp_next;
  if ( mp_next == (ntl::internal::list_node_base *)&this->m_playerList.m_listHead )
    goto LABEL_8;
  do
  {
    mp_next = mp_next->mp_next;
    ++v8;
  }
  while ( mp_next != (ntl::internal::list_node_base *)&this->m_playerList.m_listHead );
  if ( !v8 )
LABEL_8:
    Com_PrintWarning(25, "[MM] %s ( %d, %llu ) called with no players in playerList, this request will likely NOT be sent!\n", "OnlineMatchmakerOmniscient::InitForLobbyIdJoin", (unsigned int)controllerIndex, lobbyIdToJoinOn);
  if ( v13 || this->m_state == eNEW )
    return 1;
  if ( this->m_state == eREADY && this->m_mmingData.m_matchmakingId )
  {
    Com_Printf(25, "[MM] %s ( %d, %llu ) setting state eINIT_MATCHMAKING\n", "OnlineMatchmakerOmniscient::InitForLobbyIdJoin", (unsigned int)controllerIndex, lobbyIdToJoinOn);
    OnlineMatchmakerOmniscient::SetState(this, eREMOTE_WAITING_FOR_MMING_TOKEN);
    return 1;
  }
  Com_Printf(25, "[MM] %s ( %d, %llu ) calling ResetLobby\n", "OnlineMatchmakerOmniscient::InitForLobbyIdJoin", (unsigned int)controllerIndex, lobbyIdToJoinOn);
  m_tournamentID = this->m_lobbyData.m_tournamentID;
  OnlineMatchmakerOmniscient::ResetLobby(this);
  v17 = !OnlineTournament_IsActive();
  v15 = 1;
  if ( !v17 )
    this->m_lobbyData.m_tournamentID = m_tournamentID;
  return v15;
}

/*
==============
OnlineMatchmakerOmniscient::InitForMatchmaking
==============
*/
char OnlineMatchmakerOmniscient::InitForMatchmaking(OnlineMatchmakerOmniscient *this, const OmniscientMatchmakingParams *params)
{
  if ( this->m_state != eADDING_LOCAL_PLAYER_TO_DW || !OnlineMatchmakerOmniscient::AllPlayerAreReadyForMatchmaking(this) )
    return 0;
  this->m_params.m_localControllerIndex = params->m_localControllerIndex;
  this->m_params.m_playlistId = params->m_playlistId;
  this->m_params.m_playlistCategory = params->m_playlistCategory;
  this->m_params.m_playlistVersion = params->m_playlistVersion;
  this->m_params.m_netcodeVersion = params->m_netcodeVersion;
  this->m_params.m_minPlayerNeeded = params->m_minPlayerNeeded;
  this->m_params.m_maxPlayers = params->m_maxPlayers;
  this->m_params.m_tournamentTeamSize = params->m_tournamentTeamSize;
  this->m_params.m_inviteLocalJoiningControllerIndex = params->m_inviteLocalJoiningControllerIndex;
  XUID::operator=(&this->m_params.m_inviteClientAttemptingToJoinUID, &params->m_inviteClientAttemptingToJoinUID);
  this->m_params.m_lobbyIdToJoin = params->m_lobbyIdToJoin;
  this->m_params.m_gameType = params->m_gameType;
  this->m_params.m_privateMatchId.m_id = params->m_privateMatchId.m_id;
  this->m_controllerIndex = params->m_localControllerIndex;
  OnlineMatchmakerOmniscient::SetState(this, eREMOTE_WAITING_FOR_MMING_TOKEN);
  return 1;
}

/*
==============
OnlineMatchmakerOmniscient::InitLobby
==============
*/
char OnlineMatchmakerOmniscient::InitLobby(OnlineMatchmakerOmniscient *this)
{
  OnlineMatchmakerOmniscient::Log(this, "InitLobby", (const char *)&queryFormat.fmt + 3, NULL, NULL, 0i64);
  OnlineMatchmakerTelemetry::ResetLobby(&this->m_telemetry);
  OnlineMatchmakerOmniscient::ResetLobbyData(this);
  return 1;
}

/*
==============
OnlineMatchmakerOmniscient::InitMatchmaking
==============
*/
char OnlineMatchmakerOmniscient::InitMatchmaking(OnlineMatchmakerOmniscient *this)
{
  OnlineMatchmakerOmniscient *v1; 
  char *m_scratchBuffer; 
  const char *LobbyStateString; 
  ntl::internal::list_node_base *mp_next; 
  __int64 UniversalId; 
  const char *v7; 
  const char *v8; 
  const char *v9; 
  const char *v10; 
  bdJSONSerializer v12; 
  const char *v13; 
  const char *v14; 
  const char *v15; 
  const char *v16; 
  const char *v17; 
  const char *v18; 
  const char *v19; 
  const char *v20; 
  const char *v21; 
  const char *v22; 

  v1 = this;
  if ( this->m_lobbyState == eIDLE && OnlineMatchmakerOmniscient::AllPlayerAreReadyForMatchmaking(this) )
    return 1;
  m_scratchBuffer = v1->m_scratchBuffer;
  bdJSONSerializer::bdJSONSerializer(&v12, v1->m_scratchBuffer, 0x4000u);
  memset_0(v1->m_scratchBuffer, 0, sizeof(v1->m_scratchBuffer));
  LobbyStateString = OnlineMatchmakerOmniscient::GetLobbyStateString(v1, (const MatchmakerLobbyState)v1->m_lobbyState);
  bdJSONSerializer::writeString(&v12, "lobby_state", LobbyStateString);
  bdJSONSerializer::writeBeginObject(&v12);
  bdJSONSerializer::writeBeginArray(&v12, "players");
  mp_next = v1->m_playerList.m_listHead.m_sentinel.mp_next;
  if ( mp_next != (ntl::internal::list_node_base *)&v1->m_playerList.m_listHead )
  {
    do
    {
      bdJSONSerializer::writeBeginObject(&v12);
      if ( !mp_next && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\libs\\ntl\\ntl\\list\\list.h", 103, ASSERT_TYPE_ASSERT, "( mp_node )", (const char *)&queryFormat, "mp_node") )
        __debugbreak();
      UniversalId = XUID::GetUniversalId((XUID *)&mp_next[6].mp_next);
      bdJSONSerializer::writeInt64(&v12, "uid", UniversalId, 0);
      if ( !mp_next && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\libs\\ntl\\ntl\\list\\list.h", 103, ASSERT_TYPE_ASSERT, "( mp_node )", (const char *)&queryFormat, "mp_node") )
        __debugbreak();
      v13 = "eIDLE";
      v14 = "eNEW";
      v15 = "eADDING_LOCAL_PLAYER_TO_DW";
      v16 = "eREMOTE_WAITING_FOR_MMING_TOKEN";
      v17 = "eREADY";
      v18 = "eUPDATING";
      v19 = "eREADY_TO_REMOVE";
      v20 = "eREMOVING_PLAYER";
      v21 = "eFAILURE";
      v22 = "eNONE";
      v7 = (&v13)[SLODWORD(mp_next[1].mp_prev)];
      v13 = "eNONE";
      v14 = "eINITED";
      v15 = "eCONNECTED";
      v16 = "eDISCONNECTED";
      v17 = "eUNKNOWN";
      v8 = (&v13)[SHIDWORD(mp_next[11].mp_next)];
      v13 = "eUNACKNOWLEDGED";
      v14 = "eMAY_CONNECT";
      v15 = "eCONNECTED";
      v16 = "eWONT_CONNECT";
      v17 = "eREADY_TO_REMOVE";
      v9 = (&v13)[SHIDWORD(mp_next[11].mp_prev)];
      v15 = "eCONNECTED";
      v17 = "eREADY_TO_REMOVE";
      v10 = j_va("q: %s c: %s s: %s state: %s", (&v13)[SLODWORD(mp_next[11].mp_next)], v9, v8, v7);
      bdJSONSerializer::writeString(&v12, "state", v10);
      bdJSONSerializer::writeEndObject(&v12);
      mp_next = mp_next->mp_next;
    }
    while ( mp_next != (ntl::internal::list_node_base *)&v1->m_playerList.m_listHead );
    v1 = this;
    m_scratchBuffer = this->m_scratchBuffer;
  }
  bdJSONSerializer::writeEndArray(&v12);
  bdJSONSerializer::writeEndObject(&v12);
  OnlineMatchmakerOmniscient::Log(v1, "InitMatchmaking", m_scratchBuffer, NULL, NULL, 0i64);
  bdJSONSerializer::~bdJSONSerializer(&v12);
  return 0;
}

/*
==============
OnlineMatchmakerOmniscient::IsActive
==============
*/
bool OnlineMatchmakerOmniscient::IsActive(OnlineMatchmakerOmniscient *this)
{
  const dvar_t *v1; 
  const PartyData *PartyData; 
  bool result; 

  v1 = DVARBOOL_onlinegame;
  if ( !DVARBOOL_onlinegame && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\universal\\dvar.h", 692, ASSERT_TYPE_ASSERT, "(dvar)", "%s\n\tDvar %s accessed after deregistration", "dvar", "onlinegame") )
    __debugbreak();
  Dvar_CheckFrontendServerThread(v1);
  result = v1->current.enabled && (Live_IsInRestrictedMatchmakingGame() || (PartyData = Lobby_GetPartyData(), Party_PrivateMatchmakingAllowed(PartyData))) && this->m_state >= eNEW;
  return result;
}

/*
==============
OnlineMatchmakerOmniscient::IsCreatingLobby
==============
*/
bool OnlineMatchmakerOmniscient::IsCreatingLobby(OnlineMatchmakerOmniscient *this)
{
  return this->m_lobbyState == eREMOTE_WAITING_FOR_MMING_TOKEN;
}

/*
==============
OnlineMatchmakerOmniscient::IsDedicatedServerLobby
==============
*/
_BOOL8 OnlineMatchmakerOmniscient::IsDedicatedServerLobby(OnlineMatchmakerOmniscient *this)
{
  return this->m_lobbyData.m_hasDedicatedServer;
}

/*
==============
OnlineMatchmakerOmniscient::IsDisbanding
==============
*/
bool OnlineMatchmakerOmniscient::IsDisbanding(OnlineMatchmakerOmniscient *this)
{
  return (unsigned int)(this->m_lobbyState - 8) <= 1;
}

/*
==============
OnlineMatchmakerOmniscient::IsGameStarted
==============
*/
_BOOL8 OnlineMatchmakerOmniscient::IsGameStarted(OnlineMatchmakerOmniscient *this)
{
  return this->m_lobbyData.m_gameStartedCurrent;
}

/*
==============
OnlineMatchmakerOmniscient::IsIdle
==============
*/
bool OnlineMatchmakerOmniscient::IsIdle(OnlineMatchmakerOmniscient *this)
{
  return this->m_state == eIDLE;
}

/*
==============
OnlineMatchmakerOmniscient::IsInDWLobby
==============
*/
bool OnlineMatchmakerOmniscient::IsInDWLobby(OnlineMatchmakerOmniscient *this)
{
  return (unsigned int)(this->m_lobbyState - 3) <= 4;
}

/*
==============
OnlineMatchmakerOmniscient::IsInited
==============
*/
bool OnlineMatchmakerOmniscient::IsInited(OnlineMatchmakerOmniscient *this)
{
  return this->m_state >= eNEW;
}

/*
==============
OnlineMatchmakerOmniscient::IsLobbyHost
==============
*/
bool OnlineMatchmakerOmniscient::IsLobbyHost(OnlineMatchmakerOmniscient *this)
{
  return (unsigned int)(this->m_lobbyState - 5) <= 1;
}

/*
==============
OnlineMatchmakerOmniscient::IsMatchmaking
==============
*/
bool OnlineMatchmakerOmniscient::IsMatchmaking(OnlineMatchmakerOmniscient *this)
{
  return this->m_state > eREADY;
}

/*
==============
OnlineMatchmakerOmniscient::IsPaidUser
==============
*/
bool OnlineMatchmakerOmniscient::IsPaidUser(OnlineMatchmakerOmniscient *this, const XUID xuid)
{
  const ntl::internal::list_node<OnlineMatchmakerOmniscient::Player> *mp_node; 
  const char *v4; 
  XUID xuida; 
  ntl::internal::list_iterator<OnlineMatchmakerOmniscient::Player,ntl::internal::list_node<OnlineMatchmakerOmniscient::Player> const ,OnlineMatchmakerOmniscient::Player const *,OnlineMatchmakerOmniscient::Player const &> it; 

  xuida.m_id = xuid.m_id;
  if ( OnlineMatchmakerOmniscient::FindPlayer(this, &xuida, &it) )
  {
    mp_node = it.mp_node;
    if ( !it.mp_node && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\libs\\ntl\\ntl\\list\\list.h", 103, ASSERT_TYPE_ASSERT, "( mp_node )", (const char *)&queryFormat, "mp_node") )
      __debugbreak();
    return mp_node->m_data.m_isPaidUser;
  }
  else
  {
    v4 = XUID::ToDevString(&xuida);
    Com_PrintError(25, "[MM] %s player %s not found\n!", "OnlineMatchmakerOmniscient::IsPaidUser", v4);
    return 0;
  }
}

/*
==============
OnlineMatchmakerOmniscient::IsPlayerAllowedToJoin
==============
*/
char OnlineMatchmakerOmniscient::IsPlayerAllowedToJoin(OnlineMatchmakerOmniscient *this, const XUID xuid, const int numAdditionalSlotsRequired)
{
  const ntl::internal::list_node<OnlineMatchmakerOmniscient::Player> *mp_node; 
  __int64 m_queuedMemberStatus; 
  __int64 m_currentMemberStatus; 
  int m_additionalSlotsRequested; 
  const char *v9; 
  const char *v10; 
  const char *v11; 
  ntl::internal::list_iterator<OnlineMatchmakerOmniscient::Player,ntl::internal::list_node<OnlineMatchmakerOmniscient::Player> const ,OnlineMatchmakerOmniscient::Player const *,OnlineMatchmakerOmniscient::Player const &> it; 
  const char *v13; 
  const char *v14; 
  const char *v15; 
  const char *v16; 
  const char *v17; 
  XUID xuida; 

  xuida.m_id = xuid.m_id;
  if ( this->m_state != eREMOVING_PLAYER || (unsigned int)(this->m_lobbyState - 3) > 5 )
    return 1;
  if ( !OnlineMatchmakerOmniscient::FindPlayer(this, &xuida, &it) )
    return 0;
  mp_node = it.mp_node;
  if ( !it.mp_node && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\libs\\ntl\\ntl\\list\\list.h", 103, ASSERT_TYPE_ASSERT, "( mp_node )", (const char *)&queryFormat, "mp_node") )
    __debugbreak();
  m_queuedMemberStatus = mp_node->m_data.m_queuedMemberStatus;
  if ( (unsigned int)(m_queuedMemberStatus - 3) > 1 && mp_node->m_data.m_additionalSlotsRequested >= numAdditionalSlotsRequired )
    return 1;
  m_currentMemberStatus = mp_node->m_data.m_currentMemberStatus;
  v13 = "eUNACKNOWLEDGED";
  v14 = "eMAY_CONNECT";
  v15 = "eCONNECTED";
  v16 = "eWONT_CONNECT";
  v17 = "eREADY_TO_REMOVE";
  m_additionalSlotsRequested = mp_node->m_data.m_additionalSlotsRequested;
  v9 = (&v13)[m_queuedMemberStatus];
  v13 = "eUNACKNOWLEDGED";
  v14 = "eMAY_CONNECT";
  v15 = "eCONNECTED";
  v16 = "eWONT_CONNECT";
  v17 = "eREADY_TO_REMOVE";
  v10 = (&v13)[m_currentMemberStatus];
  v11 = XUID::ToDevString(&xuida);
  Com_Printf(25, "[MM] %s - player %s is not allowed due to m_currentMemberStatus %s, m_queuedMemberStatus %s, m_additionalSlotsRequested %i, numAdditionaSlotsRequired %i.\n", "OnlineMatchmakerOmniscient::IsPlayerAllowedToJoin", v11, v10, v9, m_additionalSlotsRequested, numAdditionalSlotsRequired);
  return 0;
}

/*
==============
OnlineMatchmakerOmniscient::IsPlayerAllowedToJoin
==============
*/
bool OnlineMatchmakerOmniscient::IsPlayerAllowedToJoin(OnlineMatchmakerOmniscient *this, const XUID xuid)
{
  return OnlineMatchmakerOmniscient::IsPlayerAllowedToJoin(this, xuid, 0);
}

/*
==============
OnlineMatchmakerOmniscient::IsPlayerConnected
==============
*/
bool OnlineMatchmakerOmniscient::IsPlayerConnected(OnlineMatchmakerOmniscient *this, const PartyData *party, const XUID xuid)
{
  int MemberByXUID_AllowNotPresent; 

  MemberByXUID_AllowNotPresent = Party_FindMemberByXUID_AllowNotPresent(party, xuid);
  return MemberByXUID_AllowNotPresent >= 0 && party->partyMembers[MemberByXUID_AllowNotPresent].status != 1;
}

/*
==============
OnlineMatchmakerOmniscient::IsPrivateMatch
==============
*/
bool OnlineMatchmakerOmniscient::IsPrivateMatch(OnlineMatchmakerOmniscient *this)
{
  return this->m_lobbyData.m_privateMatchId.m_id != 0;
}

/*
==============
OnlineMatchmakerOmniscient::IsReadyToInitMatchmaking
==============
*/
bool OnlineMatchmakerOmniscient::IsReadyToInitMatchmaking(OnlineMatchmakerOmniscient *this)
{
  return this->m_state == eADDING_LOCAL_PLAYER_TO_DW;
}

/*
==============
OnlineMatchmakerOmniscient::IsReadyToMatchmake
==============
*/
bool OnlineMatchmakerOmniscient::IsReadyToMatchmake(OnlineMatchmakerOmniscient *this)
{
  return this->m_state == eREADY;
}

/*
==============
OnlineMatchmakerOmniscient::IsReadyToStart
==============
*/
_BOOL8 OnlineMatchmakerOmniscient::IsReadyToStart(OnlineMatchmakerOmniscient *this)
{
  return this->m_lobbyData.m_canGameStart;
}

/*
==============
OnlineMatchmakerOmniscient::IsShuttingDown
==============
*/
bool OnlineMatchmakerOmniscient::IsShuttingDown(OnlineMatchmakerOmniscient *this)
{
  return (unsigned int)(this->m_state - 10) <= 1;
}

/*
==============
OnlineMatchmakerOmniscient::IsSplitscreenPlayerAllowedToJoin
==============
*/
bool OnlineMatchmakerOmniscient::IsSplitscreenPlayerAllowedToJoin(OnlineMatchmakerOmniscient *this, const XUID primaryPlayerXuid)
{
  return OnlineMatchmakerOmniscient::IsPlayerAllowedToJoin(this, primaryPlayerXuid, 1);
}

/*
==============
OnlineMatchmakerOmniscient::IsStartingGame
==============
*/
bool OnlineMatchmakerOmniscient::IsStartingGame(OnlineMatchmakerOmniscient *this)
{
  if ( nextPrintTime_0 < Sys_Milliseconds() )
  {
    Com_Printf(25, "[MM] %s\n", "OnlineMatchmakerOmniscient::IsStartingGame");
    nextPrintTime_0 = Sys_Milliseconds() + 500;
  }
  return this->m_lobbyData.m_gameStartedPending && !this->m_lobbyData.m_gameStartedCurrent;
}

/*
==============
OnlineMatchmakerOmniscient::JoinAttemptFailed
==============
*/
void OnlineMatchmakerOmniscient::JoinAttemptFailed(OnlineMatchmakerOmniscient *this)
{
  OnlineMatchmakerOmniscient::Log(this, "JoinAttemptFailed", (const char *)&queryFormat.fmt + 3, NULL, NULL, 0i64);
  OnlineMatchmakerTelemetry::JoinLobbyFailed(&this->m_telemetry);
  OnlineMatchmakerOmniscient::ResetLobby(this);
}

/*
==============
OnlineMatchmakerOmniscient::JoinLobby
==============
*/
void OnlineMatchmakerOmniscient::JoinLobby(OnlineMatchmakerOmniscient *this, const unsigned __int64 mmId, const unsigned __int64 lobbyId, const char *lobbyHostDoc, const unsigned int lobbyHostDocLength, const char *lobbyBackendDoc)
{
  const char *v10; 
  bool v11; 
  const PartyData *PartyData; 
  bool v13; 
  const char *StateString; 
  ntl::internal::list_node<OnlineMatchmakerOmniscient::Player> *m_tournamentID; 
  const dvar_t *v16; 
  OnlineTimeSeriesLog *v17; 
  XNADDR *Address; 
  XSESSION_INFO *p_m_hostAddress; 
  bool m_hasDedicatedServer; 
  ntl::internal::list_node_base *mp_next; 
  ntl::internal::list_node<OnlineMatchmakerOmniscient::Player> *mp_node; 
  OnlineMatchmakerOmniscient::Player *p_m_data; 
  int m_state; 
  int m_playList; 
  const XNADDR *v26; 
  const XSECURITY_INFO *v27; 
  ntl::internal::list_iterator<OnlineMatchmakerOmniscient::Player,ntl::internal::list_node<OnlineMatchmakerOmniscient::Player>,OnlineMatchmakerOmniscient::Player *,OnlineMatchmakerOmniscient::Player &> it; 
  __int64 v29; 
  bdJSONDeserializer value; 
  bdJSONDeserializer v31; 
  XSECURITY_INFO v32; 
  MatchMakerOmniLobbyData lobbyData; 

  v29 = -2i64;
  Com_Printf(25, "[MM] %s - mmid = %zu lobbyid = %zu\n", "OnlineMatchmakerOmniscient::JoinLobby", mmId, lobbyId);
  Com_Printf(25, "[MM] %s - lobby backend doc = \"%s\"\n", "OnlineMatchmakerOmniscient::JoinLobby", lobbyBackendDoc);
  Com_Printf(25, "[MM] %s - lobby host doc = \"%s\"\n", "OnlineMatchmakerOmniscient::JoinLobby", lobbyHostDoc);
  v10 = "be from";
  if ( this->m_params.m_inviteLocalJoiningControllerIndex == -1 )
    v10 = "not be from";
  Com_Printf(25, "\t- this appears to %s an invite\n", v10);
  v11 = g_partyData.areWeHost == 0;
  PartyData = Lobby_GetPartyData();
  v13 = Party_PrivateMatchmakingAllowed(PartyData) && !Lobby_AreWeHost();
  if ( OnlineTournament_IsInTournament() || this->m_state == eREMOVING_PLAYER || v11 || v13 || (StateString = OnlineMatchmakerOmniscient::GetStateString(this, (const MatchmakerOmniscientState)this->m_state), Com_Printf(25, "[MM] %s called in an invalid matchmaking state - %s.\n", "OnlineMatchmakerOmniscient::JoinLobby", StateString), Dvar_GetBool_Internal_DebugName(DVARBOOL_online_should_handle_matchmaker_join_lobby_while_invite_joining_in_starting_state, "online_should_handle_matchmaker_join_lobby_while_invite_joining_in_starting_state")) && this->m_callbacks.m_inviteCallback && this->m_state == eREADY_TO_REMOVE )
  {
    bdJSONDeserializer::bdJSONDeserializer(&v31);
    bdJSONDeserializer::bdJSONDeserializer(&value);
    bdJSONDeserializer::parse(&v31, lobbyBackendDoc);
    if ( bdJSONDeserializer::getObject(&v31, "tournament", &value) )
    {
      if ( !bdJSONDeserializer::getUInt64(&value, "tournament_id", (unsigned __int64 *)&it) && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\online\\online_matchmaker.cpp", 6207, ASSERT_TYPE_ASSERT, "(tournamentObj.getUInt64( \"tournament_id\", backendDocTournamentID ))", (const char *)&queryFormat, "tournamentObj.getUInt64( \"tournament_id\", backendDocTournamentID )") )
        __debugbreak();
      m_tournamentID = (ntl::internal::list_node<OnlineMatchmakerOmniscient::Player> *)this->m_lobbyData.m_tournamentID;
      if ( m_tournamentID != it.mp_node )
      {
        Com_PrintError(25, "Tournament: received a stray msgJoinLobby from a different tournament %llu and %llu!  DemonWare needs to fix this!\n", m_tournamentID, it.mp_node);
LABEL_67:
        bdJSONDeserializer::~bdJSONDeserializer(&value);
        bdJSONDeserializer::~bdJSONDeserializer(&v31);
        return;
      }
      v16 = DVARBOOL_online_tournament_ignore_lobby_start;
      if ( !DVARBOOL_online_tournament_ignore_lobby_start && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\universal\\dvar.h", 692, ASSERT_TYPE_ASSERT, "(dvar)", "%s\n\tDvar %s accessed after deregistration", "dvar", "online_tournament_ignore_lobby_start") )
        __debugbreak();
      Dvar_CheckFrontendServerThread(v16);
      if ( v16->current.enabled )
      {
        Com_PrintWarning(25, "Tournament: received a msgJoinLobby, but ignoring it because online_tournament_ignore_lobby_start is set!\n");
        goto LABEL_67;
      }
    }
    if ( Live_IsInGameBattlesGame() )
      GameBattles_SetGameLobbyId(lobbyId);
    v17 = OnlineTimeSeriesLog::Get();
    OnlineTimeSeriesLog::WriteEventCounter(v17, "event.joinlobby.received.count", 1u);
    this->m_mmingData.m_matchmakingId = mmId;
    this->m_mmingData.m_timeOut = 0;
    this->m_lobbyData.m_lobbyid = lobbyId;
    this->m_lobbyData.m_amITheLobbyHost = 0;
    OnlineMatchmakerOmniscient::SetLobbyState(this, eREADY);
    if ( this->m_callbacks.m_inviteCallback )
    {
      this->m_callbacks.m_outstandingCallback |= 0x20u;
      this->m_callbacks.m_callbackWasSuccessful[5] = 2;
    }
    else if ( !OnlineTournament_IsInTournament() )
    {
      this->m_callbacks.m_outstandingCallback |= 4u;
      this->m_callbacks.m_callbackWasSuccessful[2] = 1;
    }
    MatchMakerOmniLobbyData::MatchMakerOmniLobbyData(&lobbyData);
    OnlineMatchmakerOmniscient::ParseLobbyHostDoc(this, lobbyHostDoc, &lobbyData);
    OnlineMatchmakerOmniscient::ParseLobbyBackendDoc(this, lobbyBackendDoc, &lobbyData);
    this->m_lobbyData.m_hostUID = lobbyData.m_hostUID;
    Core_strcpy(this->m_lobbyData.m_hostAddressBase64, 0x71ui64, lobbyData.m_hostAddressBase64);
    Address = XSESSION_INFO::GetAddress(&lobbyData.m_hostAddress);
    p_m_hostAddress = &this->m_lobbyData.m_hostAddress;
    *XSESSION_INFO::GetAddress(&this->m_lobbyData.m_hostAddress) = *Address;
    m_hasDedicatedServer = lobbyData.m_hasDedicatedServer;
    this->m_lobbyData.m_hasDedicatedServer = lobbyData.m_hasDedicatedServer;
    if ( m_hasDedicatedServer )
    {
      this->m_lobbyData.m_allocatedServerGuid = lobbyData.m_allocatedServerGuid;
      Core_strcpy(this->m_lobbyData.m_allocatedDataCenter, 0x40ui64, lobbyData.m_allocatedDataCenter);
      Core_strcpy(this->m_lobbyData.m_allocatedServerInfo, 0x400ui64, lobbyData.m_allocatedServerInfo);
      Core_strcpy(this->m_lobbyData.m_allocatedServerAddr, 0x400ui64, lobbyData.m_allocatedServerAddr);
    }
    mp_next = lobbyData.m_playerStatusList.m_listHead.m_sentinel.mp_next;
    if ( (ntl::internal::list_head_base<ntl::internal::list_node<PlayerValue<enum MemberStatus> > > *)lobbyData.m_playerStatusList.m_listHead.m_sentinel.mp_next != &lobbyData.m_playerStatusList.m_listHead )
    {
      do
      {
        if ( !mp_next && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\libs\\ntl\\ntl\\list\\list.h", 103, ASSERT_TYPE_ASSERT, "( mp_node )", (const char *)&queryFormat, "mp_node") )
          __debugbreak();
        if ( OnlineMatchmakerOmniscient::FindPlayer(this, (const XUID *)&mp_next[1], &it) )
        {
          mp_node = it.mp_node;
          if ( !it.mp_node && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\libs\\ntl\\ntl\\list\\list.h", 97, ASSERT_TYPE_ASSERT, "( mp_node )", (const char *)&queryFormat, "mp_node") )
            __debugbreak();
          OnlineMatchmakerOmniscient::SetPlayerQueuedStatus(this, &mp_node->m_data, eADDING_LOCAL_PLAYER_TO_DW);
          if ( !mp_node && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\libs\\ntl\\ntl\\list\\list.h", 97, ASSERT_TYPE_ASSERT, "( mp_node )", (const char *)&queryFormat, "mp_node") )
            __debugbreak();
          OnlineMatchmakerOmniscient::SetPlayerCurrentStatus(this, &mp_node->m_data, eADDING_LOCAL_PLAYER_TO_DW);
          if ( !mp_node && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\libs\\ntl\\ntl\\list\\list.h", 103, ASSERT_TYPE_ASSERT, "( mp_node )", (const char *)&queryFormat, "mp_node") )
            __debugbreak();
          p_m_data = &mp_node->m_data;
          m_state = mp_node->m_data.m_state;
          if ( !m_state || m_state >= 6 )
          {
            if ( mp_node->m_data.m_matchmakingToken )
              OnlineMatchmakerOmniscient::SetPlayerState(this, p_m_data, eREADY);
            else
              OnlineMatchmakerOmniscient::SetPlayerState(this, p_m_data, eREMOTE_WAITING_FOR_MMING_TOKEN);
          }
        }
        else
        {
          if ( !mp_next && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\libs\\ntl\\ntl\\list\\list.h", 103, ASSERT_TYPE_ASSERT, "( mp_node )", (const char *)&queryFormat, "mp_node") )
            __debugbreak();
          OnlineMatchmakerOmniscient::AddPlayerFromDW(this, (const XUID)mp_next[1].mp_prev, (MemberStatus)mp_next[1].mp_next);
        }
        if ( !mp_next && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\libs\\ntl\\ntl\\list\\list.h", 109, ASSERT_TYPE_ASSERT, "( mp_node )", (const char *)&queryFormat, "mp_node") )
          __debugbreak();
        mp_next = mp_next->mp_next;
      }
      while ( mp_next != (ntl::internal::list_node_base *)&lobbyData.m_playerStatusList.m_listHead );
      p_m_hostAddress = &this->m_lobbyData.m_hostAddress;
    }
    if ( lobbyData.m_lobbyid != this->m_lobbyData.m_lobbyid && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\online\\online_matchmaker.cpp", 6307, ASSERT_TYPE_ASSERT, "(lobbyData.m_lobbyid == m_lobbyData.m_lobbyid)", (const char *)&queryFormat, "lobbyData.m_lobbyid == m_lobbyData.m_lobbyid") )
      __debugbreak();
    this->m_lobbyData.m_key = lobbyData.m_key;
    this->m_lobbyData.m_keyId = lobbyData.m_keyId;
    m_playList = lobbyData.m_playList;
    this->m_lobbyData.m_playList = lobbyData.m_playList;
    this->m_lobbyData.m_playListVersion = lobbyData.m_playListVersion;
    Playlist_UpdateFromMatchmaker(this->m_controllerIndex, m_playList, 0);
    ntl::list<XUID,ntl::fixed_pool_allocator<ntl::internal::list_node<XUID>,200,0>>::assign<ntl::fixed_pool_allocator<ntl::internal::list_node<XUID>,200,0>>(&this->m_lobbyData.m_migrationList, &lobbyData.m_migrationList);
    memcpy_0(this->m_lobbyData.m_dvarOverrides, lobbyData.m_dvarOverrides, sizeof(this->m_lobbyData.m_dvarOverrides));
    this->m_lobbyData.m_dvarOverrideCount = lobbyData.m_dvarOverrideCount;
    v26 = XSESSION_INFO::GetAddress(&lobbyData.m_hostAddress);
    XSECURITY_INFO::XSECURITY_INFO(&v32, &lobbyData.m_keyId, &lobbyData.m_key);
    XSESSION_INFO::Set(p_m_hostAddress, v27, v26);
    bdSecurityKey::~bdSecurityKey(&v32.m_key);
    bdSecurityID::~bdSecurityID(&v32.m_id);
    OnlineMatchmakerOmniscient::Log(this, "JoinLobby", (const char *)&queryFormat.fmt + 3, lobbyBackendDoc, lobbyHostDoc, 0i64);
    OnlineMatchmakerTelemetry::JoinLobby(&this->m_telemetry);
    if ( OnlineTournament_IsInTournament() )
      OnlineTournament_OnJoinLobby();
    MatchMakerOmniLobbyData::~MatchMakerOmniLobbyData(&lobbyData);
    goto LABEL_67;
  }
}

/*
==============
LUI_LuaCall_OnlineMatchmakerOmniscient_GetState
==============
*/
__int64 LUI_LuaCall_OnlineMatchmakerOmniscient_GetState(lua_State *luaVM)
{
  unsigned int v2; 
  unsigned int v3; 

  v2 = LUI_LuaCall_OnlineMatchmakerOmniscient_GetState_impl(luaVM);
  if ( (int)v2 > j_lua_gettop(luaVM) )
  {
    v3 = j_lua_gettop(luaVM);
    j_luaL_error(luaVM, "lua c binding return mismatch. claiming to be returning %d items, but there are only %d in the stack", v2, v3);
  }
  return v2;
}

/*
==============
LUI_LuaCall_OnlineMatchmakerOmniscient_GetState_impl
==============
*/
__int64 LUI_LuaCall_OnlineMatchmakerOmniscient_GetState_impl(lua_State *const luaVM)
{
  __int64 result; 
  __int64 v2; 

  if ( !luaVM )
  {
    if ( CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\online\\online_matchmaker.cpp", 7855, ASSERT_TYPE_ASSERT, "(luaVM)", (const char *)&queryFormat, "luaVM") )
    {
      __debugbreak();
      return 1i64;
    }
    return 1i64;
  }
  v2 = 0i64;
  if ( OnlineMatchmakerOmniscient::ms_instance.m_state < eUPDATING )
    goto $LN20_25;
  if ( OnlineMatchmakerOmniscient::ms_instance.m_state <= eREADY_TO_REMOVE )
  {
    v2 = 1i64;
    goto $LN20_25;
  }
  if ( OnlineMatchmakerOmniscient::ms_instance.m_state != eREMOVING_PLAYER )
  {
$LN20_25:
    j_lua_pushinteger(luaVM, v2);
    return 1i64;
  }
  v2 = 2i64;
  switch ( OnlineMatchmakerOmniscient::ms_instance.m_lobbyState )
  {
    case eREMOTE_WAITING_FOR_MMING_TOKEN:
      j_lua_pushinteger(luaVM, 3i64);
      result = 1i64;
      break;
    case eREADY:
      j_lua_pushinteger(luaVM, 4i64);
      result = 1i64;
      break;
    case eUPDATING:
    case eREADY_TO_REMOVE:
      j_lua_pushinteger(luaVM, 5i64);
      result = 1i64;
      break;
    case eREMOVING_PLAYER:
      j_lua_pushinteger(luaVM, 6i64);
      result = 1i64;
      break;
    default:
      goto $LN20_25;
  }
  return result;
}

/*
==============
LUI_LuaCall_OnlineMatchmakerOmniscient_ResetDisband
==============
*/
__int64 LUI_LuaCall_OnlineMatchmakerOmniscient_ResetDisband(lua_State *luaVM)
{
  TaskManager *Instance; 
  unsigned int v3; 

  OnlineMatchmakerOmniscient::Log(&OnlineMatchmakerOmniscient::ms_instance, "ResetDisband", (const char *)&queryFormat.fmt + 3, NULL, NULL, 0i64);
  Instance = TaskManager::GetInstance();
  TaskManager::CancelTaskById(Instance, OnlineMatchmakerOmniscient::ms_instance.m_outstandingTaskId);
  if ( OnlineMatchmakerOmniscient::ms_instance.m_lobbyData.m_amITheLobbyHost )
    OnlineMatchmakerOmniscient::SetLobbyState(&OnlineMatchmakerOmniscient::ms_instance, eFAILURE);
  else
    OnlineMatchmakerOmniscient::ResetLobby(&OnlineMatchmakerOmniscient::ms_instance);
  if ( j_lua_gettop(luaVM) < 0 )
  {
    v3 = j_lua_gettop(luaVM);
    j_luaL_error(luaVM, "lua c binding return mismatch. claiming to be returning %d items, but there are only %d in the stack", 0i64, v3);
  }
  return 0i64;
}

/*
==============
OnlineMatchmakerOmniscient::LobbyDisbanded
==============
*/
void OnlineMatchmakerOmniscient::LobbyDisbanded(OnlineMatchmakerOmniscient *this, const unsigned __int64 lobbyId)
{
  unsigned __int64 m_lobbyid; 
  OnlineTimeSeriesLog *v4; 
  const dvar_t *v5; 
  PartyDisconnectReason v6; 
  const PartyData *v7; 
  PartyData *PartyData; 

  m_lobbyid = this->m_lobbyData.m_lobbyid;
  if ( m_lobbyid == lobbyId )
  {
    v4 = OnlineTimeSeriesLog::Get();
    OnlineTimeSeriesLog::WriteEventCounter(v4, "event.lobbydisbanded.received.count", 1u);
    OnlineMatchmakerTelemetry::DisbandLobby(&this->m_telemetry);
    if ( !OnlineTournament_IsInTournament() )
    {
      OnlineMatchmakerOmniscient::ResetLobby(this);
      v5 = DVARBOOL_onlinegame;
      if ( !DVARBOOL_onlinegame && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\universal\\dvar.h", 692, ASSERT_TYPE_ASSERT, "(dvar)", "%s\n\tDvar %s accessed after deregistration", "dvar", "onlinegame") )
        __debugbreak();
      Dvar_CheckFrontendServerThread(v5);
      if ( v5->current.enabled )
      {
        if ( Live_IsInRestrictedMatchmakingGame() || (v7 = Lobby_GetPartyData(), Party_PrivateMatchmakingAllowed(v7)) )
        {
          LOBYTE(v6) = 22;
          PartyAtomic_AbortJoinAttempt(&g_partyJoinInfo, v6);
          PartyData = Lobby_GetPartyData();
          Party_SetDisbandAfterRound(PartyData);
        }
      }
      this->m_callbacks.m_outstandingCallback |= 0x10u;
      this->m_callbacks.m_callbackWasSuccessful[4] = 1;
    }
  }
  else
  {
    Com_Printf(131097, "LobbyDisbanded - received disband for unknown lobby id %zu (our lobby id is %zu\n", lobbyId, m_lobbyid);
  }
}

/*
==============
OnlineMatchmakerOmniscient::LobbyNotFound
==============
*/
void OnlineMatchmakerOmniscient::LobbyNotFound(OnlineMatchmakerOmniscient *this, const unsigned __int64 mmId, const bdAsyncMatchMakingEventHandler::LobbyNotFoundCause cause, const char *optimizerErrorMessage)
{
  OnlineTimeSeriesLog *v8; 
  OnlineTimeSeriesLog *v9; 
  tCallbackResult v10; 
  unsigned __int64 m_matchmakingId; 
  const char *v12; 
  const char *v13; 

  v8 = OnlineTimeSeriesLog::Get();
  OnlineTimeSeriesLog::WriteEventCounter(v8, "event.lobbynotfound.received.count", 1u);
  v9 = OnlineTimeSeriesLog::Get();
  OnlineTimeSeriesLog::WriteEventSet(v9, "event.lobbynotfound.received.reason", (float)cause);
  switch ( cause )
  {
    case BD_NOT_ENOUGH_PLAYERS:
      v10 = eREMOVING_PLAYER;
      break;
    case BD_REQUESTED_LOBBY_DISBANDED:
      v10 = eFAILURE;
      break;
    case BD_TOO_MANY_PLAYERS:
      v10 = eREADY_TO_REMOVE;
      break;
    case BD_PARTY_MEMBER_DISCONNECTED:
      v10 = eNONE;
      break;
    case BD_INTERNAL_ERROR:
      v10 = eFAILURE|eADDING_LOCAL_PLAYER_TO_DW;
      break;
    case BD_PARTY_HOST_MIGRATION:
      v10 = eNONE|eADDING_LOCAL_PLAYER_TO_DW;
      break;
    case BD_PLAYER_NOT_IN_LOBBY:
      v10 = eREMOTE_WAITING_FOR_MMING_TOKEN;
      break;
    case BD_PRESENCE_JOIN_REFUSED:
      v10 = eUPDATING;
      break;
    case BD_SEARCH_EXPIRED:
      v10 = eFAILURE|eREADY;
      break;
    case BD_QOS_FAILED:
      v10 = eNONE|eREADY;
      break;
    case BD_OPTIMIZER_FAILURE:
      v10 = eFAILURE|eREADY_TO_REMOVE;
      break;
    case BD_DEDICATED_SERVER_REQUIRED_NOT_ALLOCATED:
      v10 = eNONE|eREADY_TO_REMOVE;
      break;
    case BD_ALREADY_IN_LOBBY:
      v10 = 16;
      break;
    case BD_ILLEGAL_MAP_PACK:
      v10 = 17;
      break;
    case BD_INCONSISTENT_BUILD_NAMES:
      v10 = 18;
      break;
    case BD_UNACCEPTABLE_PLATFORMS:
      v10 = eREMOTE_WAITING_FOR_MMING_TOKEN|0x10;
      break;
    case BD_TOURNAMENT_PRESENCE_JOIN_REFUSED:
      v10 = 20;
      break;
    default:
      v10 = eREADY;
      break;
  }
  m_matchmakingId = this->m_mmingData.m_matchmakingId;
  if ( mmId == m_matchmakingId )
  {
    this->m_mmingData.m_timeOut = 0;
    v12 = j_va("{\"error\"=\"Lobby not found due to %d, optimizer error message \"%s\".\"}", (unsigned int)cause, optimizerErrorMessage);
    OnlineMatchmakerOmniscient::Log(this, "LobbyNotFound", v12, NULL, NULL, 0i64);
    if ( this->m_callbacks.m_inviteCallback )
    {
      if ( !InviteJoinHSM::IsHSMHandlingInvitation(&g_invitationHSM) && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\online\\online_matchmaker.cpp", 5798, ASSERT_TYPE_ASSERT, "(g_invitationHSM.IsHSMHandlingInvitation())", (const char *)&queryFormat, "g_invitationHSM.IsHSMHandlingInvitation()") )
        __debugbreak();
    }
    else
    {
      if ( InviteJoinHSM::IsInSessionSearchState(&g_invitationHSM) && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\online\\online_matchmaker.cpp", 5788, ASSERT_TYPE_ASSERT, "(!g_invitationHSM.IsInSessionSearchState())", (const char *)&queryFormat, "!g_invitationHSM.IsInSessionSearchState()") )
        __debugbreak();
      OnlineMatchmakerOmniscient::SetState(this, eFAILURE|eREADY);
    }
  }
  else
  {
    v13 = j_va("{\"msg\":\"mismatched matchmaking ids - ours - %zu incoming - %zu\"", m_matchmakingId, mmId);
    OnlineMatchmakerOmniscient::Log(this, "LobbyNotFound", v13, NULL, NULL, 0i64);
  }
  if ( this->m_callbacks.m_inviteCallback )
    tCallbacks::AddCallbackToQueue(&this->m_callbacks, eUPDATING, v10);
}

/*
==============
OnlineMatchmakerOmniscient::Log
==============
*/
void OnlineMatchmakerOmniscient::Log(OnlineMatchmakerOmniscient *this, const char *action, const char *msg_string, const char *backendDoc, const char *hostDoc, const unsigned __int64 demonwareTaskId)
{
  unsigned __int64 UserId; 
  unsigned __int64 EpochTimeFromAuth_ms; 
  DWServicesAccess *Instance; 
  int m_controllerIndex; 
  unsigned __int64 m_lobbyid; 
  unsigned __int64 m_matchmakingId; 
  bool v16; 
  unsigned __int64 connectionID; 
  unsigned __int64 v18; 
  DLogContext context; 
  char buffer[4096]; 

  if ( LiveStorage_IsTimeSynced() )
  {
    UserId = 0i64;
    EpochTimeFromAuth_ms = Online_GetEpochTimeFromAuth_ms();
    connectionID = 0i64;
    Instance = DWServicesAccess::GetInstance();
    DWServicesAccess::GetConnectionID(Instance, this->m_controllerIndex, &connectionID);
    m_controllerIndex = this->m_controllerIndex;
    if ( m_controllerIndex != -1 )
      UserId = DLog_GetUserId(m_controllerIndex);
    if ( backendDoc && hostDoc )
    {
      DLog_RecordEvent<4096,char const *,unsigned __int64,char const *,unsigned __int64,char const *,unsigned __int64,char const *,char const *,char const *,char const *,char const *,char const *,char const *,char const *,char const *,unsigned __int64,char const *,unsigned __int64>(UserId, "online_omniscient_mming_log", "servertime_utc", EpochTimeFromAuth_ms, "matchmaking_id", this->m_mmingData.m_matchmakingId, "lobby_id", this->m_lobbyData.m_lobbyid, "action", action, "msg", msg_string, "lobbyDoc", backendDoc, "hostDoc", hostDoc, "demonware_taskid", demonwareTaskId, "demonware_connectionid", connectionID);
    }
    else
    {
      m_lobbyid = this->m_lobbyData.m_lobbyid;
      m_matchmakingId = this->m_mmingData.m_matchmakingId;
      v18 = connectionID;
      if ( DLog_IsActive() && DLog_CreateContext(&context, UserId, buffer, 4096) && DLog_IsActive() )
      {
        v16 = DLog_BeginEvent(&context, "online_omniscient_mming_log");
        context.autoEndEvent = 1;
        if ( v16 && DLog_UInt64(&context, "servertime_utc", EpochTimeFromAuth_ms) && DLog_UInt64(&context, "matchmaking_id", m_matchmakingId) && DLog_UInt64(&context, "lobby_id", m_lobbyid) && DLog_String(&context, "action", action, 0) && DLog_String(&context, "msg", msg_string, 0) && DLog_String(&context, "lobbyDoc", (const char *)&queryFormat.fmt + 3, 0) && DLog_String(&context, "hostDoc", (const char *)&queryFormat.fmt + 3, 0) && DLog_UInt64(&context, "demonware_taskid", demonwareTaskId) && DLog_UInt64(&context, "demonware_connectionid", v18) )
          DLog_RecordContext(&context);
      }
    }
    Com_Printf(25, "[MM] [%zu] mmid: %zu lobbyid: %zu action: %s msg %s [demonware taskid %zu]\n", EpochTimeFromAuth_ms, this->m_mmingData.m_matchmakingId, this->m_lobbyData.m_lobbyid, action, msg_string, demonwareTaskId);
  }
}

/*
==============
OnlineMatchmakerOmniscient::MergeIntoLobby
==============
*/
void OnlineMatchmakerOmniscient::MergeIntoLobby(OnlineMatchmakerOmniscient *this, const unsigned __int64 mmID, const unsigned __int64 sourceLobbyID, const unsigned __int64 destinationLobbyID, const char *lobbyHostDoc, const unsigned int lobbyHostDocLength, const char *lobbyBackendDoc, const unsigned int lobbyBackendDocLength)
{
  if ( this->m_lobbyData.m_lobbyid == sourceLobbyID )
  {
    OnlineMatchmakerOmniscient::JoinLobby(this, mmID, destinationLobbyID, lobbyHostDoc, lobbyHostDocLength, lobbyBackendDoc, lobbyBackendDocLength);
    OnlineMatchmakerTelemetry::LobbyMerge(&this->m_telemetry);
  }
}

/*
==============
OnlineMatchmakerOmniscient::ParseAdditionalPlayerSlots
==============
*/
void OnlineMatchmakerOmniscient::ParseAdditionalPlayerSlots(OnlineMatchmakerOmniscient *this, bdJSONDeserializer *backendDoc, MatchMakerOmniLobbyData *lobbyDataToBeFilledIn)
{
  unsigned int m_count; 
  unsigned int i; 
  unsigned __int64 v7; 
  ntl::internal::pool_allocator_freelist<32> *p_m_freelist; 
  ntl::internal::pool_allocator_pointer_freelist::free_item_pointer *mp_next; 
  bdJSONDeserializer *v10; 
  int v11; 
  XUID result; 
  __int128 v13; 
  bdJSONDeserializer value; 
  __int64 v15; 
  bdJSONDeserializer v16; 
  char key[32]; 

  v15 = -2i64;
  bdJSONDeserializer::bdJSONDeserializer(&value);
  if ( bdJSONDeserializer::getObject(backendDoc, "player_id_to_slots", &value) )
  {
    m_count = value.m_count;
    for ( i = 0; i < m_count; ++i )
    {
      if ( i >= 0xC8 )
        break;
      bdJSONDeserializer::bdJSONDeserializer(&v16);
      if ( bdJSONDeserializer::getFieldByIndex(&value, i, key, 0x20u, &v16) )
      {
        v7 = I_atoui64(key);
        XUID::FromUInt64(&result, v7);
        bdJSONDeserializer::getInt32(&value, key, &v11);
        *(XUID *)&v13 = result;
        DWORD2(v13) = v11;
        p_m_freelist = &lobbyDataToBeFilledIn->m_additionalSlotsRequestedList.m_freelist;
        if ( !lobbyDataToBeFilledIn->m_additionalSlotsRequestedList.m_freelist.m_head.mp_next )
        {
          if ( CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\libs\\ntl\\ntl\\allocator\\pool_allocator.h", 112, ASSERT_TYPE_ASSERT, "( m_head.mp_next != 0 )", "This container was memset to zero") )
            __debugbreak();
          if ( !p_m_freelist->m_head.mp_next && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\libs\\ntl\\ntl\\allocator\\pool_allocator.h", 112, ASSERT_TYPE_ASSERT, "( m_head.mp_next != 0 )", "This container was memset to zero") )
            __debugbreak();
        }
        if ( (ntl::internal::pool_allocator_freelist<32> *)p_m_freelist->m_head.mp_next == p_m_freelist && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\libs\\ntl\\ntl\\allocator\\pool_allocator.h", 298, ASSERT_TYPE_ASSERT, "( !empty() )", "Pool out of elements to allocate (Elem size=%zu, Num elems=%zu)", 0x20ui64, 0xC8ui64) )
          __debugbreak();
        mp_next = p_m_freelist->m_head.mp_next;
        p_m_freelist->m_head.mp_next = p_m_freelist->m_head.mp_next->mp_next;
        mp_next->mp_next = NULL;
        mp_next[1].mp_next = NULL;
        *(_OWORD *)&mp_next[2].mp_next = v13;
        ntl::internal::list_head_base<ntl::internal::list_node<PlayerValue<int>>>::insert_before(&lobbyDataToBeFilledIn->m_additionalSlotsRequestedList.m_listHead, (ntl::internal::list_node<PlayerValue<int> > *)&lobbyDataToBeFilledIn->m_additionalSlotsRequestedList.m_listHead, (ntl::internal::list_node<PlayerValue<int> > *)mp_next);
      }
      bdJSONDeserializer::~bdJSONDeserializer(&v16);
    }
    if ( m_count > 0xC8 )
    {
      LODWORD(v10) = 200;
      Com_PrintError(131097, "[MM] %s received more entries (%i) than capacity (%i)\n", "OnlineMatchmakerOmniscient::ParseAdditionalPlayerSlots", m_count, v10);
    }
  }
  bdJSONDeserializer::~bdJSONDeserializer(&value);
}

/*
==============
OnlineMatchmakerOmniscient::ParseDvarOverrides
==============
*/
void OnlineMatchmakerOmniscient::ParseDvarOverrides(OnlineMatchmakerOmniscient *this, bdJSONDeserializer *backendDoc, MatchMakerOmniLobbyData *lobbyDataToBeFilledIn)
{
  signed int v5; 
  signed int m_count; 
  const dvar_t *v7; 
  __int64 v8; 
  char *v9; 
  char *v10; 
  __int64 v11; 
  bdJSONDeserializer v12; 
  __int64 v13; 
  bdJSONDeserializer v14; 
  bdJSONDeserializer value; 
  char v16[256]; 
  char key[1024]; 

  v13 = -2i64;
  bdJSONDeserializer::bdJSONDeserializer(&value);
  memset_0(lobbyDataToBeFilledIn->m_dvarOverrides, 0, sizeof(lobbyDataToBeFilledIn->m_dvarOverrides));
  v5 = 0;
  lobbyDataToBeFilledIn->m_dvarOverrideCount = 0;
  if ( bdJSONDeserializer::getObject(backendDoc, "ruleset_payload", &value) )
  {
    bdJSONDeserializer::bdJSONDeserializer(&v12);
    if ( bdJSONDeserializer::getObject(&value, "dvar_overrides", &v12) )
    {
      bdJSONDeserializer::bdJSONDeserializer(&v14);
      m_count = 128;
      if ( (int)v12.m_count < 128 )
        m_count = v12.m_count;
      if ( v12.m_count > 0x80 )
        Com_Printf(131097, "[MM] Too many (%d) dvar overrides, max supported %d\n", v12.m_count, 128i64);
      if ( m_count > 0 )
      {
        do
        {
          if ( bdJSONDeserializer::getFieldByIndex(&v12, v5, key, 0x400u, &v14) )
          {
            if ( bdJSONDeserializer::convertToString(&v14, v16, 0x100u) )
            {
              v7 = PublisherVariableManager::RegisterDvarByString(key, v16);
              if ( v7 )
              {
                v8 = lobbyDataToBeFilledIn->m_dvarOverrideCount++;
                lobbyDataToBeFilledIn->m_dvarOverrides[v8].dvar = v7;
                v9 = lobbyDataToBeFilledIn->m_dvarOverrides[v8].value;
                v10 = v16;
                v11 = 2i64;
                do
                {
                  *(_OWORD *)v9 = *(_OWORD *)v10;
                  *((_OWORD *)v9 + 1) = *((_OWORD *)v10 + 1);
                  *((_OWORD *)v9 + 2) = *((_OWORD *)v10 + 2);
                  *((_OWORD *)v9 + 3) = *((_OWORD *)v10 + 3);
                  *((_OWORD *)v9 + 4) = *((_OWORD *)v10 + 4);
                  *((_OWORD *)v9 + 5) = *((_OWORD *)v10 + 5);
                  *((_OWORD *)v9 + 6) = *((_OWORD *)v10 + 6);
                  v9 += 128;
                  *((_OWORD *)v9 - 1) = *((_OWORD *)v10 + 7);
                  v10 += 128;
                  --v11;
                }
                while ( v11 );
              }
            }
            else
            {
              Com_PrintWarning(25, "[MM] %s failed to convert dvar_overrides for '%s'\n", "OnlineMatchmakerOmniscient::ParseDvarOverrides", key);
            }
          }
          ++v5;
        }
        while ( v5 < m_count );
      }
      bdJSONDeserializer::~bdJSONDeserializer(&v14);
    }
    bdJSONDeserializer::~bdJSONDeserializer(&v12);
  }
  bdJSONDeserializer::~bdJSONDeserializer(&value);
}

/*
==============
OnlineMatchmakerOmniscient::ParseExpectedPlayers
==============
*/
void OnlineMatchmakerOmniscient::ParseExpectedPlayers(OnlineMatchmakerOmniscient *this, bdJSONDeserializer *backendDoc, MatchMakerOmniLobbyData *lobbyDataToBeFilledIn)
{
  unsigned int i; 
  unsigned __int64 v6; 
  const dvar_t *v7; 
  XUID *v8; 
  ntl::internal::pool_allocator_freelist<24> *p_m_freelist; 
  ntl::internal::list_node<XUID> *mp_next; 
  ntl::internal::list_node_base *v11; 
  bdJSONDeserializer value; 
  __int64 v13; 
  XUID result; 
  bdJSONDeserializer v15; 
  char key[32]; 
  char v17[32]; 

  v13 = -2i64;
  bdJSONDeserializer::bdJSONDeserializer(&value);
  Com_Printf(25, "[MM] %s STARTING.\n", "OnlineMatchmakerOmniscient::ParseExpectedPlayers");
  if ( bdJSONDeserializer::getObject(backendDoc, "players", &value) )
  {
    bdJSONDeserializer::bdJSONDeserializer(&v15);
    for ( i = 0; i < 0xC8; ++i )
    {
      if ( !bdJSONDeserializer::getFieldByIndex(&value, i, key, 0x20u, &v15) )
        break;
      bdJSONDeserializer::getString(&value, key, v17, 0x20u);
      v6 = I_atoui64(key);
      v7 = DVARBOOL_online_matchmaking_reduce_print_spam;
      if ( !DVARBOOL_online_matchmaking_reduce_print_spam && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\universal\\dvar.h", 692, ASSERT_TYPE_ASSERT, "(dvar)", "%s\n\tDvar %s accessed after deregistration", "dvar", "online_matchmaking_reduce_print_spam") )
        __debugbreak();
      Dvar_CheckFrontendServerThread(v7);
      if ( !v7->current.enabled )
        Com_Printf(25, "\tAdding %zu to the list of expected players\n", v6);
      v8 = XUID::FromUniversalId(&result, v6);
      p_m_freelist = &lobbyDataToBeFilledIn->m_expectedPlayers.m_freelist;
      if ( !lobbyDataToBeFilledIn->m_expectedPlayers.m_freelist.m_head.mp_next )
      {
        if ( CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\libs\\ntl\\ntl\\allocator\\pool_allocator.h", 112, ASSERT_TYPE_ASSERT, "( m_head.mp_next != 0 )", "This container was memset to zero") )
          __debugbreak();
        if ( !p_m_freelist->m_head.mp_next && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\libs\\ntl\\ntl\\allocator\\pool_allocator.h", 112, ASSERT_TYPE_ASSERT, "( m_head.mp_next != 0 )", "This container was memset to zero") )
          __debugbreak();
      }
      if ( (ntl::internal::pool_allocator_freelist<24> *)p_m_freelist->m_head.mp_next == p_m_freelist && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\libs\\ntl\\ntl\\allocator\\pool_allocator.h", 298, ASSERT_TYPE_ASSERT, "( !empty() )", "Pool out of elements to allocate (Elem size=%zu, Num elems=%zu)", 0x18ui64, 0xC8ui64) )
        __debugbreak();
      mp_next = (ntl::internal::list_node<XUID> *)p_m_freelist->m_head.mp_next;
      p_m_freelist->m_head.mp_next = p_m_freelist->m_head.mp_next->mp_next;
      mp_next->mp_prev = NULL;
      mp_next->mp_next = NULL;
      mp_next->m_data = (XUID)v8->m_id;
      ntl::internal::list_head_base<ntl::internal::list_node<XUID>>::insert_before(&lobbyDataToBeFilledIn->m_expectedPlayers.m_listHead, (ntl::internal::list_node<XUID> *)&lobbyDataToBeFilledIn->m_expectedPlayers.m_listHead, mp_next);
    }
    if ( bdJSONDeserializer::getFieldByIndex(&value, i, key, 0x20u, &v15) )
      Com_Printf(131097, "[MM] Expected players list overflow - processed first %u players\n", i);
    bdJSONDeserializer::~bdJSONDeserializer(&v15);
  }
  v11 = lobbyDataToBeFilledIn->m_migrationList.m_listHead.m_sentinel.mp_next;
  if ( v11 == (ntl::internal::list_node_base *)&lobbyDataToBeFilledIn->m_migrationList.m_listHead )
  {
    if ( v11 != lobbyDataToBeFilledIn->m_migrationList.m_listHead.m_sentinel.mp_prev && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\libs\\ntl\\ntl\\list\\list_base.h", 95, ASSERT_TYPE_ASSERT, "( m_sentinel.mp_next == m_sentinel.mp_prev )", (const char *)&queryFormat, "m_sentinel.mp_next == m_sentinel.mp_prev") )
      __debugbreak();
    ntl::list<XUID,ntl::fixed_pool_allocator<ntl::internal::list_node<XUID>,200,0>>::assign<ntl::fixed_pool_allocator<ntl::internal::list_node<XUID>,200,0>>(&lobbyDataToBeFilledIn->m_migrationList, &lobbyDataToBeFilledIn->m_expectedPlayers);
  }
  Com_Printf(25, "[MM] %s COMPLETE.\n", "OnlineMatchmakerOmniscient::ParseExpectedPlayers");
  bdJSONDeserializer::~bdJSONDeserializer(&value);
}

/*
==============
OnlineMatchmakerOmniscient::ParseFilters
==============
*/
void OnlineMatchmakerOmniscient::ParseFilters(OnlineMatchmakerOmniscient *this, bdJSONDeserializer *backendDoc, MatchMakerOmniLobbyData *lobbyDataToBeFilledIn)
{
  signed int m_count; 
  signed int v6; 
  float *p_mapWeight; 
  int MapIndex; 
  float v9; 
  unsigned int v10; 
  float v11; 
  bdJSONDeserializer v12; 
  bdJSONDeserializer v13; 
  bdJSONDeserializer value; 
  __int64 v15; 
  bdJSONDeserializer v16; 
  char key[24]; 

  v15 = -2i64;
  bdJSONDeserializer::bdJSONDeserializer(&value);
  if ( bdJSONDeserializer::getObject(backendDoc, "ruleset_payload", &value) )
  {
    bdJSONDeserializer::bdJSONDeserializer(&v13);
    if ( bdJSONDeserializer::getObject(&value, "filter", &v13) )
    {
      if ( !bdJSONDeserializer::getInt32(&v13, "playlist_id", &lobbyDataToBeFilledIn->m_playList) && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\online\\online_matchmaker.cpp", 5278, ASSERT_TYPE_ASSERT, (const char *)&queryFormat.fmt + 3, "Unable to retrieve playlist from backend lobby document\n") )
        __debugbreak();
      if ( !bdJSONDeserializer::getInt32(&v13, "playlist_version", &lobbyDataToBeFilledIn->m_playListVersion) && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\online\\online_matchmaker.cpp", 5283, ASSERT_TYPE_ASSERT, (const char *)&queryFormat.fmt + 3, "Unable to retrieve playlist version from backend lobby document\n") )
        __debugbreak();
    }
    lobbyDataToBeFilledIn->m_mapWeights[0].mapIndex = 255;
    lobbyDataToBeFilledIn->m_mapWeights[1].mapIndex = 255;
    lobbyDataToBeFilledIn->m_mapWeights[2].mapIndex = 255;
    lobbyDataToBeFilledIn->m_mapWeights[3].mapIndex = 255;
    lobbyDataToBeFilledIn->m_mapWeights[4].mapIndex = 255;
    lobbyDataToBeFilledIn->m_mapWeights[5].mapIndex = 255;
    lobbyDataToBeFilledIn->m_mapWeights[6].mapIndex = 255;
    lobbyDataToBeFilledIn->m_mapWeights[7].mapIndex = 255;
    lobbyDataToBeFilledIn->m_mapWeights[8].mapIndex = 255;
    lobbyDataToBeFilledIn->m_mapWeights[9].mapIndex = 255;
    lobbyDataToBeFilledIn->m_mapWeights[10].mapIndex = 255;
    lobbyDataToBeFilledIn->m_mapWeights[11].mapIndex = 255;
    lobbyDataToBeFilledIn->m_mapWeights[12].mapIndex = 255;
    lobbyDataToBeFilledIn->m_mapWeights[13].mapIndex = 255;
    lobbyDataToBeFilledIn->m_mapWeights[14].mapIndex = 255;
    lobbyDataToBeFilledIn->m_mapWeights[15].mapIndex = 255;
    lobbyDataToBeFilledIn->m_mapWeights[16].mapIndex = 255;
    lobbyDataToBeFilledIn->m_mapWeights[17].mapIndex = 255;
    lobbyDataToBeFilledIn->m_mapWeights[18].mapIndex = 255;
    lobbyDataToBeFilledIn->m_mapWeights[19].mapIndex = 255;
    bdJSONDeserializer::bdJSONDeserializer(&v12);
    if ( bdJSONDeserializer::getObject(&value, "map_weights", &v12) )
    {
      m_count = v12.m_count;
      v6 = 0;
      if ( (int)v12.m_count > 0 )
      {
        p_mapWeight = &lobbyDataToBeFilledIn->m_mapWeights[0].mapWeight;
        do
        {
          if ( v6 >= 20 )
            break;
          bdJSONDeserializer::bdJSONDeserializer(&v16);
          if ( bdJSONDeserializer::getFieldByIndex(&v12, v6, key, 0x18u, &v16) && bdJSONDeserializer::getFloat32(&v16, &v11) )
          {
            MapIndex = Playlist_FindMapIndex(key);
            if ( MapIndex != 255 )
            {
              *((_DWORD *)p_mapWeight - 1) = MapIndex;
              v9 = v11;
              *p_mapWeight = v11;
              v10 = Playlist_FindMapIndex(key);
              Com_Printf(25, "[MM] Found Map Weight: (%d) %s : %f\n", v10, key, v9);
            }
          }
          bdJSONDeserializer::~bdJSONDeserializer(&v16);
          ++v6;
          p_mapWeight += 2;
        }
        while ( v6 < m_count );
      }
    }
    bdJSONDeserializer::~bdJSONDeserializer(&v12);
    bdJSONDeserializer::~bdJSONDeserializer(&v13);
  }
  bdJSONDeserializer::~bdJSONDeserializer(&value);
}

/*
==============
OnlineMatchmakerOmniscient::ParseLobbyBackendDoc
==============
*/
__int64 OnlineMatchmakerOmniscient::ParseLobbyBackendDoc(OnlineMatchmakerOmniscient *this, const char *lobbyBackendDoc, MatchMakerOmniLobbyData *lobbyDataToBeFilledIn)
{
  OnlineMatchmakerOmniscient *v5; 
  unsigned __int8 v6; 
  bool v7; 
  const char *v8; 
  const char *v9; 
  OnlineTimeSeriesLog *v10; 
  bool v11; 
  unsigned __int64 v12; 
  unsigned __int64 v13; 
  unsigned int v14; 
  const char *v15; 
  const char *v16; 
  OnlineTimeSeriesLog *v17; 
  unsigned int v18; 
  const char *v19; 
  const char *v20; 
  OnlineTimeSeriesLog *v21; 
  const char *v22; 
  const char *v23; 
  const char *v24; 
  unsigned int m_count; 
  unsigned int v26; 
  __int64 v27; 
  signed int v28; 
  signed int v29; 
  unsigned __int64 v30; 
  ntl::internal::pool_allocator_freelist<32> *p_m_freelist; 
  ntl::internal::pool_allocator_pointer_freelist::free_item_pointer *mp_next; 
  signed int v33; 
  signed int v34; 
  unsigned __int64 v35; 
  ntl::internal::pool_allocator_freelist<32> *v36; 
  ntl::internal::pool_allocator_pointer_freelist::free_item_pointer *v37; 
  const char *v38; 
  const char *v39; 
  OnlineTimeSeriesLog *v40; 
  const char *v41; 
  const char *StateString; 
  const char *v43; 
  char v45; 
  XUID result; 
  bdJSONDeserializer v47; 
  bdJSONDeserializer backendDoc; 
  OnlineMatchmakerOmniscient *v49; 
  XUID v50; 
  bdJSONDeserializer value; 
  __int128 v52; 
  char *v53; 
  __int64 v54; 
  bdJSONDeserializer key; 
  bdJSONDeserializer v56; 
  char src[256]; 

  v54 = -2i64;
  v53 = (char *)lobbyBackendDoc;
  v5 = this;
  v49 = this;
  v45 = 1;
  bdJSONDeserializer::bdJSONDeserializer(&backendDoc);
  v6 = 1;
  if ( !bdJSONDeserializer::parse(&backendDoc, lobbyBackendDoc) )
  {
    if ( CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\online\\online_matchmaker.cpp", 5696, ASSERT_TYPE_ASSERT, (const char *)&queryFormat.fmt + 3, "Unable to parse lobby document : [%s]\n", lobbyBackendDoc) )
      __debugbreak();
    StateString = OnlineMatchmakerOmniscient::GetStateString(v5, (const MatchmakerOmniscientState)v5->m_state);
    v43 = j_va("{\"state\":\"failed\", \"error\"=\"failed to parse.\",\"state\"=\"%s\"}", StateString);
    OnlineMatchmakerOmniscient::Log(v5, "ParseLobbyBackendDoc", v43, lobbyBackendDoc, NULL, 0i64);
    v40 = OnlineTimeSeriesLog::Get();
    v41 = "mming.document.backend.parse.error.count";
    goto LABEL_95;
  }
  bdJSONDeserializer::bdJSONDeserializer(&value);
  bdJSONDeserializer::getUInt64(&backendDoc, "update_time", &lobbyDataToBeFilledIn->m_dwTimestampOfLastUpdate);
  if ( bdJSONDeserializer::getObject(&backendDoc, "listen_server", &value) )
  {
    v7 = OnlineMatchmakerOmniscient::ParseLobbyHostOrder(v5, &value, lobbyDataToBeFilledIn);
  }
  else
  {
    if ( CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\online\\online_matchmaker.cpp", 5559, ASSERT_TYPE_ASSERT, (const char *)&queryFormat.fmt + 3, "Failed to get the \"listen_server\" info [%s]", lobbyBackendDoc) )
      __debugbreak();
    v8 = OnlineMatchmakerOmniscient::GetStateString(v5, (const MatchmakerOmniscientState)v5->m_state);
    v9 = j_va("{\"state\":\"failed\", \"error\"=\"something is wrong with the listen_server.\",\"state\"=\"%s\"}", v8);
    OnlineMatchmakerOmniscient::Log(v5, "ParseLobbyBackendDoc", v9, lobbyBackendDoc, NULL, 0i64);
    v10 = OnlineTimeSeriesLog::Get();
    OnlineTimeSeriesLog::WriteEventCounter(v10, "mming.document.backend.listen_server.error.count", 1u);
    v45 = 0;
    v7 = 0;
  }
  v11 = bdJSONDeserializer::getUInt64(&backendDoc, "lobby_id", &lobbyDataToBeFilledIn->m_lobbyid) && v7;
  if ( (!lobbyDataToBeFilledIn->m_lobbyid || !v11) && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\online\\online_matchmaker.cpp", 5568, ASSERT_TYPE_ASSERT, "((0 != lobbyDataToBeFilledIn.m_lobbyid ) && bRet)", "%s\n\tlobby id should never be 0 after parsing [%s]", "(0 != lobbyDataToBeFilledIn.m_lobbyid ) && bRet", lobbyBackendDoc) )
    __debugbreak();
  if ( !bdJSONDeserializer::getObject(&backendDoc, "dtls", &value) )
  {
    if ( CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\online\\online_matchmaker.cpp", 5605, ASSERT_TYPE_ASSERT, (const char *)&queryFormat.fmt + 3, "Failed to get the \"dtls\" info [%s]", lobbyBackendDoc) )
      __debugbreak();
    v23 = OnlineMatchmakerOmniscient::GetStateString(v5, (const MatchmakerOmniscientState)v5->m_state);
    v24 = j_va("{\"state\":\"failed\", \"error\"=\"something is wrong with the dtls.\",\"state\"=\"%s\"}", v23);
    OnlineMatchmakerOmniscient::Log(v5, "ParseLobbyBackendDoc", v24, lobbyBackendDoc, NULL, 0i64);
    v21 = OnlineTimeSeriesLog::Get();
    v22 = "mming.document.backend.dtls.error.count";
    goto LABEL_28;
  }
  v12 = -1i64;
  if ( bdJSONDeserializer::getString(&value, "security_id", src, 0x100u) )
  {
    v13 = -1i64;
    do
      ++v13;
    while ( src[v13] );
    v14 = truncate_cast<unsigned int,unsigned __int64>(v13);
    bdBase64::decode(src, v14, (char *)&lobbyDataToBeFilledIn->m_keyId, 8u);
  }
  else
  {
    if ( CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\online\\online_matchmaker.cpp", 5579, ASSERT_TYPE_ASSERT, (const char *)&queryFormat.fmt + 3, "Unable to retrieve security id from the backend lobby document : %s\n", lobbyBackendDoc) )
      __debugbreak();
    v15 = OnlineMatchmakerOmniscient::GetStateString(v5, (const MatchmakerOmniscientState)v5->m_state);
    v16 = j_va("{\"state\":\"failed\", \"error\"=\"something is wrong with the dtls.security_id.\",\"state\"=\"%s\"}", v15);
    OnlineMatchmakerOmniscient::Log(v5, "ParseLobbyBackendDoc", v16, lobbyBackendDoc, NULL, 0i64);
    v17 = OnlineTimeSeriesLog::Get();
    OnlineTimeSeriesLog::WriteEventCounter(v17, "mming.document.backend.dtls.security_id.error.count", 1u);
    v45 = 0;
    v11 = 0;
  }
  if ( !bdJSONDeserializer::getString(&value, "security_key", src, 0x100u) )
  {
    if ( CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\online\\online_matchmaker.cpp", 5595, ASSERT_TYPE_ASSERT, (const char *)&queryFormat.fmt + 3, "Unable to retrieve security key from the backend lobby document : %s\n", lobbyBackendDoc) )
      __debugbreak();
    v19 = OnlineMatchmakerOmniscient::GetStateString(v5, (const MatchmakerOmniscientState)v5->m_state);
    v20 = j_va("{\"state\":\"failed\", \"error\"=\"something is wrong with the dtls.security_key.\",\"state\"=\"%s\"}", v19);
    OnlineMatchmakerOmniscient::Log(v5, "ParseLobbyBackendDoc", v20, lobbyBackendDoc, NULL, 0i64);
    v21 = OnlineTimeSeriesLog::Get();
    v22 = "mming.document.backend.dtls.security_key.error.count";
LABEL_28:
    OnlineTimeSeriesLog::WriteEventCounter(v21, v22, 1u);
    v11 = 0;
    v45 = 0;
    goto LABEL_29;
  }
  do
    ++v12;
  while ( src[v12] );
  v18 = truncate_cast<unsigned int,unsigned __int64>(v12);
  bdBase64::decode(src, v18, (char *)&lobbyDataToBeFilledIn->m_key, 0x10u);
LABEL_29:
  lobbyDataToBeFilledIn->m_canGameStart = 1;
  v6 = bdJSONDeserializer::getUInt64(&backendDoc, "update_id", &lobbyDataToBeFilledIn->m_updateId) && v11;
  if ( bdJSONDeserializer::getObject(&backendDoc, "dedicated_server", &value) )
  {
    bdJSONDeserializer::bdJSONDeserializer(&v47);
    lobbyDataToBeFilledIn->m_dcPrefs.m_numDataCenterPreferences = 0;
    if ( bdJSONDeserializer::getArray(&value, "data_center_preferences", &v47) )
    {
      m_count = v47.m_count;
      if ( v47.m_count > 0x40 )
        m_count = 64;
      lobbyDataToBeFilledIn->m_dcPrefs.m_numDataCenterPreferences = m_count;
      v26 = 0;
      if ( m_count )
      {
        v27 = 0i64;
        do
        {
          bdJSONDeserializer::getString(&v47, v26++, &lobbyDataToBeFilledIn->m_dcPrefs._bytes_20[v27], 0x40u);
          v27 += 64i64;
        }
        while ( v26 < m_count );
        v5 = v49;
      }
    }
    bdJSONDeserializer::~bdJSONDeserializer(&v47);
  }
  if ( bdJSONDeserializer::getObject(&backendDoc, "tournament", &value) )
  {
    bdJSONDeserializer::bdJSONDeserializer(&v47);
    if ( !bdJSONDeserializer::getUInt64(&value, "tournament_id", &lobbyDataToBeFilledIn->m_tournamentID) && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\online\\online_matchmaker.cpp", 5649, ASSERT_TYPE_ASSERT, "(localDeserializer.getUInt64( \"tournament_id\", lobbyDataToBeFilledIn.m_tournamentID ))", (const char *)&queryFormat, "localDeserializer.getUInt64( \"tournament_id\", lobbyDataToBeFilledIn.m_tournamentID )") )
      __debugbreak();
    if ( bdJSONDeserializer::getObject(&value, "lobby_to_tournament_team_ids", &v47) )
    {
      if ( !bdJSONDeserializer::getUInt32(&v47, "0", &lobbyDataToBeFilledIn->m_tournamentAxisTeam) && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\online\\online_matchmaker.cpp", 5652, ASSERT_TYPE_ASSERT, "(tournamentTeamIds.getUInt32( \"0\", lobbyDataToBeFilledIn.m_tournamentAxisTeam ))", (const char *)&queryFormat, "tournamentTeamIds.getUInt32( \"0\", lobbyDataToBeFilledIn.m_tournamentAxisTeam )") )
        __debugbreak();
      if ( !bdJSONDeserializer::getUInt32(&v47, "1", &lobbyDataToBeFilledIn->m_tournamentAlliesTeam) && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\online\\online_matchmaker.cpp", 5653, ASSERT_TYPE_ASSERT, "(tournamentTeamIds.getUInt32( \"1\", lobbyDataToBeFilledIn.m_tournamentAlliesTeam ))", (const char *)&queryFormat, "tournamentTeamIds.getUInt32( \"1\", lobbyDataToBeFilledIn.m_tournamentAlliesTeam )") )
        __debugbreak();
      Com_Printf(25, "Tournament: received tournament lobby doc teams: TEAM_AXIS = %d, TEAM_ALLIES = %d\n", lobbyDataToBeFilledIn->m_tournamentAxisTeam, lobbyDataToBeFilledIn->m_tournamentAlliesTeam);
    }
    else
    {
      Com_PrintWarning(25, "Tournament: received tournament lobby doc but no team mapping?\n");
      *(_QWORD *)&lobbyDataToBeFilledIn->m_tournamentAlliesTeam = 1i64;
    }
    if ( !bdJSONDeserializer::getUInt16(&value, "round_id", &lobbyDataToBeFilledIn->m_tournamentRound) && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\online\\online_matchmaker.cpp", 5664, ASSERT_TYPE_ASSERT, "(localDeserializer.getUInt16( \"round_id\", lobbyDataToBeFilledIn.m_tournamentRound ))", (const char *)&queryFormat, "localDeserializer.getUInt16( \"round_id\", lobbyDataToBeFilledIn.m_tournamentRound )") )
      __debugbreak();
    bdJSONDeserializer::~bdJSONDeserializer(&v47);
  }
  lobbyDataToBeFilledIn->m_performanceGameType = eGAME_TYPE_MULTIPLAYER;
  if ( bdJSONDeserializer::getObject(&backendDoc, "performance", &value) )
  {
    if ( bdJSONDeserializer::getInt32(&value, "game_type", (int *)&result) )
      lobbyDataToBeFilledIn->m_performanceGameType = result.m_id;
    else
      Com_PrintWarning(25, "[MM] %s performance game_type field was not set!  Defaulting to eGAME_TYPE_MULTIPLAYER\n", "OnlineMatchmakerOmniscient::ParseLobbyBackendDoc");
  }
  OnlineMatchmakerOmniscient::ParseExpectedPlayers(v5, &backendDoc, lobbyDataToBeFilledIn);
  bdJSONDeserializer::bdJSONDeserializer(&v47);
  if ( bdJSONDeserializer::getObject(&backendDoc, "player_id_to_mm_id", &v47) )
  {
    v28 = v47.m_count;
    v29 = 0;
    if ( (int)v47.m_count > 0 )
    {
      do
      {
        bdJSONDeserializer::bdJSONDeserializer(&v56);
        if ( bdJSONDeserializer::getFieldByIndex(&v47, v29, (char *const)&key, 0x20u, &v56) )
        {
          v30 = I_atoui64((const char *)&key);
          XUID::FromUInt64(&result, v30);
          bdJSONDeserializer::getUInt64(&v47, (const char *const)&key, &v50.m_id);
          *(XUID *)&v52 = result;
          *((XUID *)&v52 + 1) = v50;
          p_m_freelist = &lobbyDataToBeFilledIn->m_matchmakingIdList.m_freelist;
          if ( !lobbyDataToBeFilledIn->m_matchmakingIdList.m_freelist.m_head.mp_next )
          {
            if ( CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\libs\\ntl\\ntl\\allocator\\pool_allocator.h", 112, ASSERT_TYPE_ASSERT, "( m_head.mp_next != 0 )", "This container was memset to zero") )
              __debugbreak();
            if ( !p_m_freelist->m_head.mp_next && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\libs\\ntl\\ntl\\allocator\\pool_allocator.h", 112, ASSERT_TYPE_ASSERT, "( m_head.mp_next != 0 )", "This container was memset to zero") )
              __debugbreak();
          }
          if ( (ntl::internal::pool_allocator_freelist<32> *)p_m_freelist->m_head.mp_next == p_m_freelist && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\libs\\ntl\\ntl\\allocator\\pool_allocator.h", 298, ASSERT_TYPE_ASSERT, "( !empty() )", "Pool out of elements to allocate (Elem size=%zu, Num elems=%zu)", 0x20ui64, 0xC8ui64) )
            __debugbreak();
          mp_next = p_m_freelist->m_head.mp_next;
          p_m_freelist->m_head.mp_next = p_m_freelist->m_head.mp_next->mp_next;
          mp_next->mp_next = NULL;
          mp_next[1].mp_next = NULL;
          *(_OWORD *)&mp_next[2].mp_next = v52;
          ntl::internal::list_head_base<ntl::internal::list_node<PlayerValue<unsigned __int64>>>::insert_before(&lobbyDataToBeFilledIn->m_matchmakingIdList.m_listHead, (ntl::internal::list_node<PlayerValue<unsigned __int64> > *)&lobbyDataToBeFilledIn->m_matchmakingIdList.m_listHead, (ntl::internal::list_node<PlayerValue<unsigned __int64> > *)mp_next);
        }
        bdJSONDeserializer::~bdJSONDeserializer(&v56);
        ++v29;
      }
      while ( v29 < v28 );
      v5 = v49;
    }
  }
  bdJSONDeserializer::~bdJSONDeserializer(&v47);
  bdJSONDeserializer::bdJSONDeserializer(&v47);
  if ( bdJSONDeserializer::getObject(&backendDoc, "player_id_to_performance", &v47) )
  {
    v33 = v47.m_count;
    v34 = 0;
    if ( (int)v47.m_count > 0 )
    {
      do
      {
        bdJSONDeserializer::bdJSONDeserializer(&key);
        if ( bdJSONDeserializer::getFieldByIndex(&v47, v34, (char *const)&v56, 0x20u, &key) )
        {
          v35 = I_atoui64((const char *)&v56);
          XUID::FromUInt64(&v50, v35);
          bdJSONDeserializer::getFloat32(&v47, (const char *const)&v56, (float *)&result);
          *(XUID *)&v52 = v50;
          *((float *)&v52 + 2) = *(float *)&result.m_id;
          v36 = &lobbyDataToBeFilledIn->m_performanceValueList.m_freelist;
          if ( !lobbyDataToBeFilledIn->m_performanceValueList.m_freelist.m_head.mp_next )
          {
            if ( CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\libs\\ntl\\ntl\\allocator\\pool_allocator.h", 112, ASSERT_TYPE_ASSERT, "( m_head.mp_next != 0 )", "This container was memset to zero") )
              __debugbreak();
            if ( !v36->m_head.mp_next && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\libs\\ntl\\ntl\\allocator\\pool_allocator.h", 112, ASSERT_TYPE_ASSERT, "( m_head.mp_next != 0 )", "This container was memset to zero") )
              __debugbreak();
          }
          if ( (ntl::internal::pool_allocator_freelist<32> *)v36->m_head.mp_next == v36 && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\libs\\ntl\\ntl\\allocator\\pool_allocator.h", 298, ASSERT_TYPE_ASSERT, "( !empty() )", "Pool out of elements to allocate (Elem size=%zu, Num elems=%zu)", 0x20ui64, 0xC8ui64) )
            __debugbreak();
          v37 = v36->m_head.mp_next;
          v36->m_head.mp_next = v36->m_head.mp_next->mp_next;
          v37->mp_next = NULL;
          v37[1].mp_next = NULL;
          *(_OWORD *)&v37[2].mp_next = v52;
          ntl::internal::list_head_base<ntl::internal::list_node<PlayerValue<float>>>::insert_before(&lobbyDataToBeFilledIn->m_performanceValueList.m_listHead, (ntl::internal::list_node<PlayerValue<float> > *)&lobbyDataToBeFilledIn->m_performanceValueList.m_listHead, (ntl::internal::list_node<PlayerValue<float> > *)v37);
        }
        bdJSONDeserializer::~bdJSONDeserializer(&key);
        ++v34;
      }
      while ( v34 < v33 );
      v5 = v49;
    }
  }
  bdJSONDeserializer::~bdJSONDeserializer(&v47);
  OnlineMatchmakerOmniscient::ParseServiceLevels(v5, &backendDoc, lobbyDataToBeFilledIn);
  OnlineMatchmakerOmniscient::ParseTeamInfo(v5, &backendDoc, lobbyDataToBeFilledIn);
  OnlineMatchmakerOmniscient::ParseFilters(v5, &backendDoc, lobbyDataToBeFilledIn);
  OnlineMatchmakerOmniscient::ParsePrivateMatchInfo(v5, &backendDoc, lobbyDataToBeFilledIn);
  OnlineMatchmakerOmniscient::ParseDvarOverrides(v5, &backendDoc, lobbyDataToBeFilledIn);
  OnlineMatchmakerOmniscient::ParseAdditionalPlayerSlots(v5, &backendDoc, lobbyDataToBeFilledIn);
  bdJSONDeserializer::~bdJSONDeserializer(&value);
  if ( !v6 && v45 )
  {
    v38 = OnlineMatchmakerOmniscient::GetStateString(v5, (const MatchmakerOmniscientState)v5->m_state);
    v39 = j_va("{\"state\":\"failed\", \"error\"=\"something failed, look at the doc.\",\"state\"=\"%s\"}", v38);
    OnlineMatchmakerOmniscient::Log(v5, "ParseLobbyBackendDoc", v39, v53, NULL, 0i64);
    v40 = OnlineTimeSeriesLog::Get();
    v41 = "mming.document.backend.general.error.count";
LABEL_95:
    OnlineTimeSeriesLog::WriteEventCounter(v40, v41, 1u);
  }
  bdJSONDeserializer::~bdJSONDeserializer(&backendDoc);
  return v6;
}

/*
==============
OnlineMatchmakerOmniscient::ParseLobbyHostDoc
==============
*/
__int64 OnlineMatchmakerOmniscient::ParseLobbyHostDoc(OnlineMatchmakerOmniscient *this, const char *lobbyHostDoc, MatchMakerOmniLobbyData *lobbyData)
{
  MatchMakerOmniLobbyData *v3; 
  const char *hostDoc; 
  OnlineMatchmakerOmniscient *v5; 
  unsigned __int8 v6; 
  bool UInt64; 
  bool v8; 
  unsigned __int64 v9; 
  XNADDR *Address; 
  unsigned int v11; 
  const char *StateString; 
  const char *v13; 
  OnlineTimeSeriesLog *v14; 
  const char *v15; 
  const char *v16; 
  OnlineTimeSeriesLog *v17; 
  ntl::internal::pool_allocator_freelist<32> *p_m_freelist; 
  unsigned int v19; 
  unsigned __int64 v20; 
  unsigned int v21; 
  ntl::internal::pool_allocator_pointer_freelist::free_item_pointer *mp_next; 
  const char *v23; 
  const char *v24; 
  OnlineTimeSeriesLog *v25; 
  const char *v26; 
  const char *v27; 
  OnlineTimeSeriesLog *v28; 
  const char *v29; 
  const char *v30; 
  OnlineTimeSeriesLog *v31; 
  const char *v32; 
  const char *v33; 
  OnlineTimeSeriesLog *v34; 
  bool v36; 
  unsigned int v37; 
  bdJSONDeserializer value; 
  bdJSONDeserializer v39; 
  MatchMakerOmniLobbyData *v40; 
  OnlineMatchmakerOmniscient *v41; 
  const char *v42; 
  bdJSONDeserializer v43; 
  __int128 v44; 
  bdJSONDeserializer v45; 
  bdJSONDeserializer v46; 
  __int64 v47; 
  XUID result; 
  char key[256]; 

  v47 = -2i64;
  v3 = lobbyData;
  v40 = lobbyData;
  hostDoc = lobbyHostDoc;
  v42 = lobbyHostDoc;
  v5 = this;
  v41 = this;
  v6 = 1;
  bdJSONDeserializer::bdJSONDeserializer(&v39);
  if ( bdJSONDeserializer::parse(&v39, hostDoc) )
  {
    bdJSONDeserializer::bdJSONDeserializer(&v46);
    bdJSONDeserializer::bdJSONDeserializer(&value);
    bdJSONDeserializer::bdJSONDeserializer(&v43);
    if ( bdJSONDeserializer::getObject(&v39, "listen_server", &value) )
    {
      UInt64 = bdJSONDeserializer::getUInt64(&value, "host_player_id", &v3->m_hostUID);
      v8 = bdJSONDeserializer::getString(&value, "host_address", v3->m_hostAddressBase64, 0x71u) && UInt64;
      v36 = v8;
      if ( v8 )
      {
        v9 = -1i64;
        do
          ++v9;
        while ( v3->m_hostAddressBase64[v9] );
        Address = XSESSION_INFO::GetAddress(&v3->m_hostAddress);
        v11 = truncate_cast<unsigned int,unsigned __int64>(v9);
        bdBase64::decode(v3->m_hostAddressBase64, v11, (char *)Address, 0x54u);
      }
      else
      {
        StateString = OnlineMatchmakerOmniscient::GetStateString(v5, (const MatchmakerOmniscientState)v5->m_state);
        v13 = j_va("{\"state\":\"failed\", \"error\"=\"something is wrong with the listen_server host info.\",\"state\"=\"%s\"}", StateString);
        OnlineMatchmakerOmniscient::Log(v5, "ParseLobbyHostDoc", v13, NULL, hostDoc, 0i64);
        v14 = OnlineTimeSeriesLog::Get();
        OnlineTimeSeriesLog::WriteEventCounter(v14, "mming.document.host.error.count", 1u);
        if ( CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\online\\online_matchmaker.cpp", 5000, ASSERT_TYPE_ASSERT, (const char *)&queryFormat.fmt + 3, "Failed to unpack \"listen_server\" [%s]", hostDoc) )
          __debugbreak();
      }
    }
    else
    {
      v15 = OnlineMatchmakerOmniscient::GetStateString(v5, (const MatchmakerOmniscientState)v5->m_state);
      v16 = j_va("{\"state\":\"failed\", \"error\"=\"something is wrong with the listen_server.\",\"state\"=\"%s\"}", v15);
      OnlineMatchmakerOmniscient::Log(v5, "ParseLobbyHostDoc", v16, NULL, hostDoc, 0i64);
      v17 = OnlineTimeSeriesLog::Get();
      OnlineTimeSeriesLog::WriteEventCounter(v17, "mming.document.host.listen.error.count", 1u);
      if ( CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\online\\online_matchmaker.cpp", 5008, ASSERT_TYPE_ASSERT, (const char *)&queryFormat.fmt + 3, "Failed to unpack \"listen_server\" [%s]", hostDoc) )
        __debugbreak();
      v8 = 0;
      v36 = 0;
    }
    if ( bdJSONDeserializer::getObject(&v39, "player_state", &v46) )
    {
      v37 = 0;
      bdJSONDeserializer::bdJSONDeserializer(&v45);
      if ( bdJSONDeserializer::getFieldByIndex(&v46, 0, key, 0x100u, &v45) )
      {
        p_m_freelist = &v3->m_playerStatusList.m_freelist;
        v19 = 0;
        do
        {
          ++v19;
          v20 = _strtoui64(key, NULL, 10);
          bdJSONDeserializer::getUInt32(&v45, &v37);
          v21 = v37;
          *(XUID *)&v44 = (XUID)XUID::FromUniversalId(&result, v20)->m_id;
          DWORD2(v44) = v21;
          if ( !p_m_freelist->m_head.mp_next )
          {
            if ( CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\libs\\ntl\\ntl\\allocator\\pool_allocator.h", 112, ASSERT_TYPE_ASSERT, "( m_head.mp_next != 0 )", "This container was memset to zero") )
              __debugbreak();
            if ( !p_m_freelist->m_head.mp_next && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\libs\\ntl\\ntl\\allocator\\pool_allocator.h", 112, ASSERT_TYPE_ASSERT, "( m_head.mp_next != 0 )", "This container was memset to zero") )
              __debugbreak();
          }
          if ( (ntl::internal::pool_allocator_freelist<32> *)p_m_freelist->m_head.mp_next == p_m_freelist && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\libs\\ntl\\ntl\\allocator\\pool_allocator.h", 298, ASSERT_TYPE_ASSERT, "( !empty() )", "Pool out of elements to allocate (Elem size=%zu, Num elems=%zu)", 0x20ui64, 0xC8ui64) )
            __debugbreak();
          mp_next = p_m_freelist->m_head.mp_next;
          p_m_freelist->m_head.mp_next = p_m_freelist->m_head.mp_next->mp_next;
          mp_next->mp_next = NULL;
          mp_next[1].mp_next = NULL;
          *(_OWORD *)&mp_next[2].mp_next = v44;
          ntl::internal::list_head_base<ntl::internal::list_node<PlayerValue<enum MemberStatus>>>::insert_before(&v3->m_playerStatusList.m_listHead, (ntl::internal::list_node<PlayerValue<enum MemberStatus> > *)&v3->m_playerStatusList.m_listHead, (ntl::internal::list_node<PlayerValue<enum MemberStatus> > *)mp_next);
        }
        while ( bdJSONDeserializer::getFieldByIndex(&v46, v19, key, 0x100u, &v45) );
        v8 = v36;
        v3 = v40;
        v5 = v41;
        hostDoc = v42;
      }
      bdJSONDeserializer::~bdJSONDeserializer(&v45);
    }
    else
    {
      v23 = OnlineMatchmakerOmniscient::GetStateString(v5, (const MatchmakerOmniscientState)v5->m_state);
      v24 = j_va("{\"state\":\"failed\", \"error\"=\"something is wrong with the player_state.\",\"state\"=\"%s\"}", v23);
      OnlineMatchmakerOmniscient::Log(v5, "ParseLobbyHostDoc", v24, NULL, hostDoc, 0i64);
      v25 = OnlineTimeSeriesLog::Get();
      OnlineTimeSeriesLog::WriteEventCounter(v25, "mming.document.host.player_state.error.count", 1u);
      if ( CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\online\\online_matchmaker.cpp", 5037, ASSERT_TYPE_ASSERT, (const char *)&queryFormat.fmt + 3, "Failed to unpack \"player_state\" [%s]", hostDoc) )
        __debugbreak();
      v8 = 0;
    }
    if ( bdJSONDeserializer::getObject(&v39, "dedicated_server", &v43) )
    {
      bdJSONDeserializer::getString(&v43, "info", v3->m_allocatedServerInfo, 0x400u);
      bdJSONDeserializer::getString(&v43, "address", v3->m_allocatedServerAddr, 0x400u);
      bdJSONDeserializer::getUInt64(&v43, "user_id", &v3->m_allocatedServerGuid);
      bdJSONDeserializer::getString(&v43, "data_center", v3->m_allocatedDataCenter, 0x40u);
      v3->m_hasDedicatedServer = 1;
    }
    else
    {
      v3->m_hasDedicatedServer = 0;
    }
    if ( bdJSONDeserializer::getObject(&v39, "ruleset_payload", &value) )
    {
      if ( bdJSONDeserializer::hasKey(&value, "is_merge_src") )
        bdJSONDeserializer::getBoolean(&value, "is_merge_src", &v3->m_canLobbyMerge);
      if ( bdJSONDeserializer::hasKey(&value, "is_merge_dst") )
        bdJSONDeserializer::getBoolean(&value, "is_merge_dst", &v3->m_acceptLobbyMerges);
    }
    else
    {
      v26 = OnlineMatchmakerOmniscient::GetStateString(v5, (const MatchmakerOmniscientState)v5->m_state);
      v27 = j_va("{\"state\":\"failed\", \"error\"=\"something is wrong with the ruleset_payload.\",\"state\"=\"%s\"}", v26);
      OnlineMatchmakerOmniscient::Log(v5, "ParseLobbyHostDoc", v27, NULL, hostDoc, 0i64);
      v28 = OnlineTimeSeriesLog::Get();
      OnlineTimeSeriesLog::WriteEventCounter(v28, "mming.document.host.ruleset_payload.error.count", 1u);
      if ( CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\online\\online_matchmaker.cpp", 5081, ASSERT_TYPE_ASSERT, (const char *)&queryFormat.fmt + 3, "Failed to unpack \"ruleset_payload\" [%s]", hostDoc) )
        __debugbreak();
      v8 = 0;
    }
    bdJSONDeserializer::getBoolean(&v39, "lobby_open", &v3->m_shouldBackfill_JIP);
    if ( bdJSONDeserializer::getObject(&v39, "team_balance", &value) )
    {
      v36 = 0;
      v6 = bdJSONDeserializer::getBoolean(&value, "can_change_teams", &v36) && v8;
      v3->m_gameStartedCurrent = !v36;
    }
    else
    {
      v29 = OnlineMatchmakerOmniscient::GetStateString(v5, (const MatchmakerOmniscientState)v5->m_state);
      v30 = j_va("{\"state\":\"failed\", \"error\"=\"something is wrong with the team_balance.\",\"state\"=\"%s\"}", v29);
      OnlineMatchmakerOmniscient::Log(v5, "ParseLobbyHostDoc", v30, NULL, hostDoc, 0i64);
      v31 = OnlineTimeSeriesLog::Get();
      OnlineTimeSeriesLog::WriteEventCounter(v31, "mming.document.host.ruleset_payload.error.count", 1u);
      if ( CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\online\\online_matchmaker.cpp", 5103, ASSERT_TYPE_ASSERT, (const char *)&queryFormat.fmt + 3, "Failed to unpack \"team_balance\" [%s]", hostDoc) )
        __debugbreak();
      v6 = 0;
    }
    bdJSONDeserializer::~bdJSONDeserializer(&v43);
    bdJSONDeserializer::~bdJSONDeserializer(&value);
    bdJSONDeserializer::~bdJSONDeserializer(&v46);
  }
  else
  {
    v32 = OnlineMatchmakerOmniscient::GetStateString(v5, (const MatchmakerOmniscientState)v5->m_state);
    v33 = j_va("{\"state\":\"failed\", \"error\"=\"something is wrong with the team_balance.\",\"state\"=\"%s\"}", v32);
    OnlineMatchmakerOmniscient::Log(v5, "ParseLobbyHostDoc", v33, NULL, hostDoc, 0i64);
    v34 = OnlineTimeSeriesLog::Get();
    OnlineTimeSeriesLog::WriteEventCounter(v34, "mming.document.host.ruleset_payload.error.count", 1u);
    if ( CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\online\\online_matchmaker.cpp", 5112, ASSERT_TYPE_ASSERT, (const char *)&queryFormat.fmt + 3, "Failed to parse the host doc [%s]", hostDoc) )
      __debugbreak();
  }
  bdJSONDeserializer::~bdJSONDeserializer(&v39);
  return v6;
}

/*
==============
OnlineMatchmakerOmniscient::ParseLobbyHostOrder
==============
*/
_BOOL8 OnlineMatchmakerOmniscient::ParseLobbyHostOrder(OnlineMatchmakerOmniscient *this, bdJSONDeserializer *jsonDeserializer, MatchMakerOmniLobbyData *lobbyDataToBeFilledIn)
{
  bool Array; 
  ntl::internal::pool_allocator_pointer_freelist::free_item_pointer *mp_next; 
  ntl::internal::list_head_base<ntl::internal::list_node<XUID> > *p_m_listHead; 
  ntl::internal::pool_allocator_pointer_freelist::free_item_pointer *v9; 
  unsigned int v10; 
  ntl::internal::pool_allocator_freelist<24> *p_m_freelist; 
  XUID *v12; 
  ntl::internal::list_node<XUID> *v13; 
  const char *v14; 
  bdJSONDeserializer value; 
  unsigned __int64 id; 
  XUID result; 

  bdJSONDeserializer::bdJSONDeserializer(&value);
  Array = bdJSONDeserializer::getArray(jsonDeserializer, "lobby_host_order", &value);
  mp_next = (ntl::internal::pool_allocator_pointer_freelist::free_item_pointer *)lobbyDataToBeFilledIn->m_migrationList.m_listHead.m_sentinel.mp_next;
  p_m_listHead = &lobbyDataToBeFilledIn->m_migrationList.m_listHead;
  if ( mp_next != (ntl::internal::pool_allocator_pointer_freelist::free_item_pointer *)&lobbyDataToBeFilledIn->m_migrationList.m_listHead )
  {
    do
    {
      v9 = mp_next[1].mp_next;
      mp_next->mp_next = (ntl::internal::pool_allocator_pointer_freelist::free_item_pointer *)lobbyDataToBeFilledIn->m_migrationList.m_freelist.m_head;
      lobbyDataToBeFilledIn->m_migrationList.m_freelist.m_head.mp_next = mp_next;
      mp_next = v9;
    }
    while ( v9 != (ntl::internal::pool_allocator_pointer_freelist::free_item_pointer *)p_m_listHead );
  }
  p_m_listHead->m_sentinel.mp_prev = &p_m_listHead->m_sentinel;
  lobbyDataToBeFilledIn->m_migrationList.m_listHead.m_sentinel.mp_next = &lobbyDataToBeFilledIn->m_migrationList.m_listHead.m_sentinel;
  if ( Array )
  {
    v10 = 0;
    if ( value.m_count > 0xC8 )
    {
      v14 = j_va("\"status\":\"somehow the migration list won't fit the passed in migration list\",\"list\":\"%s\"}", jsonDeserializer->m_ptr);
      OnlineMatchmakerOmniscient::Log(this, "ParseLobbyHostOrder", v14, NULL, NULL, 0i64);
      Array = 0;
    }
    else if ( bdJSONDeserializer::getUInt64(&value, 0, &id) )
    {
      p_m_freelist = &lobbyDataToBeFilledIn->m_migrationList.m_freelist;
      do
      {
        v12 = XUID::FromUniversalId(&result, id);
        if ( !p_m_freelist->m_head.mp_next )
        {
          if ( CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\libs\\ntl\\ntl\\allocator\\pool_allocator.h", 112, ASSERT_TYPE_ASSERT, "( m_head.mp_next != 0 )", "This container was memset to zero") )
            __debugbreak();
          if ( !p_m_freelist->m_head.mp_next && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\libs\\ntl\\ntl\\allocator\\pool_allocator.h", 112, ASSERT_TYPE_ASSERT, "( m_head.mp_next != 0 )", "This container was memset to zero") )
            __debugbreak();
        }
        if ( (ntl::internal::pool_allocator_freelist<24> *)p_m_freelist->m_head.mp_next == p_m_freelist && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\libs\\ntl\\ntl\\allocator\\pool_allocator.h", 298, ASSERT_TYPE_ASSERT, "( !empty() )", "Pool out of elements to allocate (Elem size=%zu, Num elems=%zu)", 0x18ui64, 0xC8ui64) )
          __debugbreak();
        v13 = (ntl::internal::list_node<XUID> *)p_m_freelist->m_head.mp_next;
        p_m_freelist->m_head.mp_next = p_m_freelist->m_head.mp_next->mp_next;
        v13->mp_prev = NULL;
        v13->mp_next = NULL;
        v13->m_data = (XUID)v12->m_id;
        ntl::internal::list_head_base<ntl::internal::list_node<XUID>>::insert_before(p_m_listHead, (ntl::internal::list_node<XUID> *)p_m_listHead, v13);
        ++v10;
      }
      while ( bdJSONDeserializer::getUInt64(&value, v10, &id) );
    }
  }
  bdJSONDeserializer::~bdJSONDeserializer(&value);
  return Array;
}

/*
==============
OnlineMatchmakerOmniscient::ParseMatchmakingIds
==============
*/
void OnlineMatchmakerOmniscient::ParseMatchmakingIds(OnlineMatchmakerOmniscient *this, bdJSONDeserializer *backendDoc, MatchMakerOmniLobbyData *lobbyDataToBeFilledIn)
{
  signed int m_count; 
  signed int i; 
  unsigned __int64 v7; 
  ntl::internal::pool_allocator_freelist<32> *p_m_freelist; 
  ntl::internal::pool_allocator_pointer_freelist::free_item_pointer *mp_next; 
  __int128 result; 
  __int128 v11; 
  bdJSONDeserializer value; 
  __int64 v13; 
  bdJSONDeserializer v14; 
  char key[32]; 

  v13 = -2i64;
  bdJSONDeserializer::bdJSONDeserializer(&value);
  if ( bdJSONDeserializer::getObject(backendDoc, "player_id_to_mm_id", &value) )
  {
    m_count = value.m_count;
    for ( i = 0; i < m_count; ++i )
    {
      bdJSONDeserializer::bdJSONDeserializer(&v14);
      if ( bdJSONDeserializer::getFieldByIndex(&value, i, key, 0x20u, &v14) )
      {
        v7 = I_atoui64(key);
        XUID::FromUInt64((XUID *)&result, v7);
        bdJSONDeserializer::getUInt64(&value, key, (unsigned __int64 *)&result + 1);
        v11 = result;
        p_m_freelist = &lobbyDataToBeFilledIn->m_matchmakingIdList.m_freelist;
        if ( !lobbyDataToBeFilledIn->m_matchmakingIdList.m_freelist.m_head.mp_next )
        {
          if ( CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\libs\\ntl\\ntl\\allocator\\pool_allocator.h", 112, ASSERT_TYPE_ASSERT, "( m_head.mp_next != 0 )", "This container was memset to zero") )
            __debugbreak();
          if ( !p_m_freelist->m_head.mp_next && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\libs\\ntl\\ntl\\allocator\\pool_allocator.h", 112, ASSERT_TYPE_ASSERT, "( m_head.mp_next != 0 )", "This container was memset to zero") )
            __debugbreak();
        }
        if ( (ntl::internal::pool_allocator_freelist<32> *)p_m_freelist->m_head.mp_next == p_m_freelist && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\libs\\ntl\\ntl\\allocator\\pool_allocator.h", 298, ASSERT_TYPE_ASSERT, "( !empty() )", "Pool out of elements to allocate (Elem size=%zu, Num elems=%zu)", 0x20ui64, 0xC8ui64) )
          __debugbreak();
        mp_next = p_m_freelist->m_head.mp_next;
        p_m_freelist->m_head.mp_next = p_m_freelist->m_head.mp_next->mp_next;
        mp_next->mp_next = NULL;
        mp_next[1].mp_next = NULL;
        *(_OWORD *)&mp_next[2].mp_next = v11;
        ntl::internal::list_head_base<ntl::internal::list_node<PlayerValue<unsigned __int64>>>::insert_before(&lobbyDataToBeFilledIn->m_matchmakingIdList.m_listHead, (ntl::internal::list_node<PlayerValue<unsigned __int64> > *)&lobbyDataToBeFilledIn->m_matchmakingIdList.m_listHead, (ntl::internal::list_node<PlayerValue<unsigned __int64> > *)mp_next);
      }
      bdJSONDeserializer::~bdJSONDeserializer(&v14);
    }
  }
  bdJSONDeserializer::~bdJSONDeserializer(&value);
}

/*
==============
OnlineMatchmakerOmniscient::ParsePerformanceValues
==============
*/
void OnlineMatchmakerOmniscient::ParsePerformanceValues(OnlineMatchmakerOmniscient *this, bdJSONDeserializer *backendDoc, MatchMakerOmniLobbyData *lobbyDataToBeFilledIn)
{
  signed int m_count; 
  signed int i; 
  unsigned __int64 v7; 
  ntl::internal::pool_allocator_freelist<32> *p_m_freelist; 
  ntl::internal::pool_allocator_pointer_freelist::free_item_pointer *mp_next; 
  float v10; 
  XUID result; 
  __int128 v12; 
  bdJSONDeserializer value; 
  __int64 v14; 
  bdJSONDeserializer v15; 
  char key[32]; 

  v14 = -2i64;
  bdJSONDeserializer::bdJSONDeserializer(&value);
  if ( bdJSONDeserializer::getObject(backendDoc, "player_id_to_performance", &value) )
  {
    m_count = value.m_count;
    for ( i = 0; i < m_count; ++i )
    {
      bdJSONDeserializer::bdJSONDeserializer(&v15);
      if ( bdJSONDeserializer::getFieldByIndex(&value, i, key, 0x20u, &v15) )
      {
        v7 = I_atoui64(key);
        XUID::FromUInt64(&result, v7);
        bdJSONDeserializer::getFloat32(&value, key, &v10);
        *(XUID *)&v12 = result;
        *((float *)&v12 + 2) = v10;
        p_m_freelist = &lobbyDataToBeFilledIn->m_performanceValueList.m_freelist;
        if ( !lobbyDataToBeFilledIn->m_performanceValueList.m_freelist.m_head.mp_next )
        {
          if ( CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\libs\\ntl\\ntl\\allocator\\pool_allocator.h", 112, ASSERT_TYPE_ASSERT, "( m_head.mp_next != 0 )", "This container was memset to zero") )
            __debugbreak();
          if ( !p_m_freelist->m_head.mp_next && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\libs\\ntl\\ntl\\allocator\\pool_allocator.h", 112, ASSERT_TYPE_ASSERT, "( m_head.mp_next != 0 )", "This container was memset to zero") )
            __debugbreak();
        }
        if ( (ntl::internal::pool_allocator_freelist<32> *)p_m_freelist->m_head.mp_next == p_m_freelist && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\libs\\ntl\\ntl\\allocator\\pool_allocator.h", 298, ASSERT_TYPE_ASSERT, "( !empty() )", "Pool out of elements to allocate (Elem size=%zu, Num elems=%zu)", 0x20ui64, 0xC8ui64) )
          __debugbreak();
        mp_next = p_m_freelist->m_head.mp_next;
        p_m_freelist->m_head.mp_next = p_m_freelist->m_head.mp_next->mp_next;
        mp_next->mp_next = NULL;
        mp_next[1].mp_next = NULL;
        *(_OWORD *)&mp_next[2].mp_next = v12;
        ntl::internal::list_head_base<ntl::internal::list_node<PlayerValue<float>>>::insert_before(&lobbyDataToBeFilledIn->m_performanceValueList.m_listHead, (ntl::internal::list_node<PlayerValue<float> > *)&lobbyDataToBeFilledIn->m_performanceValueList.m_listHead, (ntl::internal::list_node<PlayerValue<float> > *)mp_next);
      }
      bdJSONDeserializer::~bdJSONDeserializer(&v15);
    }
  }
  bdJSONDeserializer::~bdJSONDeserializer(&value);
}

/*
==============
OnlineMatchmakerOmniscient::ParsePrivateMatchInfo
==============
*/
void OnlineMatchmakerOmniscient::ParsePrivateMatchInfo(OnlineMatchmakerOmniscient *this, bdJSONDeserializer *backendDoc, MatchMakerOmniLobbyData *lobbyDataToBeFilledIn)
{
  bool v5; 
  unsigned __int64 v6; 
  unsigned int v7; 
  bool v8; 
  unsigned __int64 v9; 
  bdJSONDeserializer value; 
  __int64 v11; 
  bdJSONDeserializer v12; 
  bdJSONDeserializer v13; 
  char s0[128]; 

  v11 = -2i64;
  bdJSONDeserializer::bdJSONDeserializer(&value);
  if ( !bdJSONDeserializer::getObject(backendDoc, "ruleset_payload", &value) )
    goto LABEL_18;
  if ( bdJSONDeserializer::getBoolean(&value, "private_lobby", &v8) && v8 )
  {
    v9 = 0i64;
    bdJSONDeserializer::bdJSONDeserializer(&v12);
    if ( bdJSONDeserializer::getObject(backendDoc, "private_lobby", &v12) )
    {
      if ( bdJSONDeserializer::getUInt64(&v12, "initial_party_host", &v9) )
      {
LABEL_10:
        lobbyDataToBeFilledIn->m_privateMatchId.m_id = v9;
        bdJSONDeserializer::~bdJSONDeserializer(&v12);
        goto LABEL_11;
      }
      v5 = CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\online\\online_matchmaker.cpp", 5341, ASSERT_TYPE_ASSERT, (const char *)&queryFormat.fmt + 3, "[MM] Private MM: ruleset has private_lobby true but no initial host data.");
    }
    else
    {
      v5 = CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\online\\online_matchmaker.cpp", 5346, ASSERT_TYPE_ASSERT, (const char *)&queryFormat.fmt + 3, "[MM] Private MM: ruleset has private_lobby true but no private_lobby data.");
    }
    if ( v5 )
      __debugbreak();
    goto LABEL_10;
  }
LABEL_11:
  bdJSONDeserializer::bdJSONDeserializer(&v13);
  if ( bdJSONDeserializer::getObject(&value, "filter", &v13) && bdJSONDeserializer::getString(&v13, "online_matchmaking_restrict", s0, 0x80u) )
  {
    if ( I_strstr(s0, "game_battles") )
    {
      Com_Printf(25, "[MM] GAMEBATTLES MM: read match id filter: %s\n", s0);
      v6 = I_atoui64(s0);
      v7 = truncate_cast<unsigned int,unsigned __int64>(v6);
      if ( v7 != GameBattles_GetCurrentMatchId() && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\online\\online_matchmaker.cpp", 5366, ASSERT_TYPE_ASSERT, "(truncate_cast<uint32_t>( I_atoui64( matchID ) ) == GameBattles_GetCurrentMatchId())", (const char *)&queryFormat, "truncate_cast<uint32_t>( I_atoui64( matchID ) ) == GameBattles_GetCurrentMatchId()") )
        __debugbreak();
    }
  }
  bdJSONDeserializer::~bdJSONDeserializer(&v13);
LABEL_18:
  bdJSONDeserializer::~bdJSONDeserializer(&value);
}

/*
==============
OnlineMatchmakerOmniscient::ParseServiceLevels
==============
*/
void OnlineMatchmakerOmniscient::ParseServiceLevels(OnlineMatchmakerOmniscient *this, bdJSONDeserializer *backendDoc, MatchMakerOmniLobbyData *lobbyDataToBeFilledIn)
{
  signed int m_count; 
  signed int i; 
  unsigned __int64 v7; 
  __int64 v8; 
  __int64 v9; 
  int v10; 
  int v11; 
  int v13; 
  int v14; 
  ntl::internal::pool_allocator_freelist<24> *p_m_freelist; 
  ntl::internal::list_head_base<ntl::internal::list_node<XUID> > *p_m_listHead; 
  ntl::internal::list_node<XUID> *mp_next; 
  XUID result; 
  bdJSONDeserializer value; 
  __int64 v20; 
  bdJSONDeserializer v21; 
  char key[32]; 
  char v23[32]; 

  v20 = -2i64;
  bdJSONDeserializer::bdJSONDeserializer(&value);
  if ( bdJSONDeserializer::getObject(backendDoc, "player_id_to_service_level", &value) )
  {
    m_count = value.m_count;
    for ( i = 0; i < m_count; ++i )
    {
      bdJSONDeserializer::bdJSONDeserializer(&v21);
      if ( bdJSONDeserializer::getFieldByIndex(&value, i, key, 0x20u, &v21) )
      {
        v7 = I_atoui64(key);
        XUID::FromUInt64(&result, v7);
        bdJSONDeserializer::getString(&value, key, v23, 0x20u);
        v8 = 0x7FFFFFFFi64;
        v9 = 0i64;
        while ( 1 )
        {
          v10 = (unsigned __int8)aPd[v9];
          v11 = (unsigned __int8)v23[v9++];
          if ( !v8-- )
          {
LABEL_13:
            p_m_freelist = &lobbyDataToBeFilledIn->m_paidUsersList.m_freelist;
            if ( !lobbyDataToBeFilledIn->m_paidUsersList.m_freelist.m_head.mp_next )
            {
              if ( CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\libs\\ntl\\ntl\\allocator\\pool_allocator.h", 112, ASSERT_TYPE_ASSERT, "( m_head.mp_next != 0 )", "This container was memset to zero") )
                __debugbreak();
              if ( !p_m_freelist->m_head.mp_next && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\libs\\ntl\\ntl\\allocator\\pool_allocator.h", 112, ASSERT_TYPE_ASSERT, "( m_head.mp_next != 0 )", "This container was memset to zero") )
                __debugbreak();
            }
            if ( (ntl::internal::pool_allocator_freelist<24> *)p_m_freelist->m_head.mp_next == p_m_freelist && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\libs\\ntl\\ntl\\allocator\\pool_allocator.h", 298, ASSERT_TYPE_ASSERT, "( !empty() )", "Pool out of elements to allocate (Elem size=%zu, Num elems=%zu)", 0x18ui64, 0xC8ui64) )
              __debugbreak();
            p_m_listHead = &lobbyDataToBeFilledIn->m_paidUsersList.m_listHead;
            goto LABEL_23;
          }
          if ( v10 != v11 )
          {
            v13 = v10 + 32;
            if ( (unsigned int)(v10 - 65) > 0x19 )
              v13 = v10;
            v10 = v13;
            v14 = v11 + 32;
            if ( (unsigned int)(v11 - 65) > 0x19 )
              v14 = v11;
            if ( v10 != v14 )
              break;
          }
          if ( !v10 )
            goto LABEL_13;
        }
        p_m_freelist = &lobbyDataToBeFilledIn->m_freemiumUsersList.m_freelist;
        if ( !lobbyDataToBeFilledIn->m_freemiumUsersList.m_freelist.m_head.mp_next )
        {
          if ( CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\libs\\ntl\\ntl\\allocator\\pool_allocator.h", 112, ASSERT_TYPE_ASSERT, "( m_head.mp_next != 0 )", "This container was memset to zero") )
            __debugbreak();
          if ( !p_m_freelist->m_head.mp_next && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\libs\\ntl\\ntl\\allocator\\pool_allocator.h", 112, ASSERT_TYPE_ASSERT, "( m_head.mp_next != 0 )", "This container was memset to zero") )
            __debugbreak();
        }
        if ( (ntl::internal::pool_allocator_freelist<24> *)p_m_freelist->m_head.mp_next == p_m_freelist && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\libs\\ntl\\ntl\\allocator\\pool_allocator.h", 298, ASSERT_TYPE_ASSERT, "( !empty() )", "Pool out of elements to allocate (Elem size=%zu, Num elems=%zu)", 0x18ui64, 0xC8ui64) )
          __debugbreak();
        p_m_listHead = &lobbyDataToBeFilledIn->m_freemiumUsersList.m_listHead;
LABEL_23:
        mp_next = (ntl::internal::list_node<XUID> *)p_m_freelist->m_head.mp_next;
        p_m_freelist->m_head.mp_next = p_m_freelist->m_head.mp_next->mp_next;
        mp_next->mp_prev = NULL;
        mp_next->mp_next = NULL;
        mp_next->m_data = result;
        ntl::internal::list_head_base<ntl::internal::list_node<XUID>>::insert_before(p_m_listHead, (ntl::internal::list_node<XUID> *)p_m_listHead, mp_next);
      }
      bdJSONDeserializer::~bdJSONDeserializer(&v21);
    }
  }
  bdJSONDeserializer::~bdJSONDeserializer(&value);
}

/*
==============
OnlineMatchmakerOmniscient::ParseTeamInfo
==============
*/
__int64 OnlineMatchmakerOmniscient::ParseTeamInfo(OnlineMatchmakerOmniscient *this, bdJSONDeserializer *backendDoc, MatchMakerOmniLobbyData *lobbyDataToBeFilledIn)
{
  unsigned int v5; 
  __int64 v6; 
  unsigned int m_count; 
  unsigned int v8; 
  ntl::internal::pool_allocator_freelist<32> *p_m_freelist; 
  ntl::internal::pool_allocator_pointer_freelist::free_item_pointer *mp_next; 
  signed int v11; 
  signed int v12; 
  unsigned int v13; 
  unsigned int v14; 
  unsigned int v15; 
  ntl::internal::pool_allocator_freelist<32> *v16; 
  ntl::internal::pool_allocator_pointer_freelist::free_item_pointer *v17; 
  bdJSONDeserializer *v19; 
  bdJSONDeserializer *v20; 
  bdJSONDeserializer *v21; 
  unsigned __int8 v22; 
  unsigned int i; 
  signed int j; 
  int v25; 
  unsigned __int64 id; 
  XUID result; 
  XUID v28[2]; 
  bdJSONDeserializer v29; 
  bdJSONDeserializer v30; 
  bdJSONDeserializer value; 
  bdJSONDeserializer v32; 
  __int64 v33; 
  bdJSONDeserializer key; 
  char v35[32]; 

  v33 = -2i64;
  v22 = 0;
  bdJSONDeserializer::bdJSONDeserializer(&value);
  bdJSONDeserializer::bdJSONDeserializer(&v30);
  bdJSONDeserializer::bdJSONDeserializer(&v32);
  Com_Printf(25, "[MM] %s STARTING.\n", "OnlineMatchmakerOmniscient::ParseTeamInfo");
  if ( bdJSONDeserializer::getObject(backendDoc, "team_balance", &value) )
  {
    if ( bdJSONDeserializer::getObject(&value, "teams", &v30) )
    {
      v22 = 1;
      bdJSONDeserializer::bdJSONDeserializer(&v29);
      v5 = 0;
      for ( i = 0; v5 < v30.m_count; i = v5 )
      {
        if ( bdJSONDeserializer::getFieldByIndex(&v30, v5, (char *const)&key, 0x20u, &v29) )
        {
          v6 = (unsigned int)atoi((const char *)&key);
          m_count = v29.m_count;
          LODWORD(v19) = v29.m_count;
          Com_Printf(25, "[MM] %s - DW team %i count %d\n", "OnlineMatchmakerOmniscient::ParseTeamInfo", v6, v19);
          v8 = 0;
          if ( m_count )
          {
            do
            {
              if ( bdJSONDeserializer::getUInt64(&v29, v8, &id) )
              {
                XUID::FromUInt64(&result, id);
                v28[0] = result;
                LODWORD(v28[1].m_id) = v6;
                p_m_freelist = &lobbyDataToBeFilledIn->m_teamAssignmentList.m_freelist;
                if ( !lobbyDataToBeFilledIn->m_teamAssignmentList.m_freelist.m_head.mp_next )
                {
                  if ( CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\libs\\ntl\\ntl\\allocator\\pool_allocator.h", 112, ASSERT_TYPE_ASSERT, "( m_head.mp_next != 0 )", "This container was memset to zero") )
                    __debugbreak();
                  if ( !p_m_freelist->m_head.mp_next && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\libs\\ntl\\ntl\\allocator\\pool_allocator.h", 112, ASSERT_TYPE_ASSERT, "( m_head.mp_next != 0 )", "This container was memset to zero") )
                    __debugbreak();
                }
                if ( (ntl::internal::pool_allocator_freelist<32> *)p_m_freelist->m_head.mp_next == p_m_freelist && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\libs\\ntl\\ntl\\allocator\\pool_allocator.h", 298, ASSERT_TYPE_ASSERT, "( !empty() )", "Pool out of elements to allocate (Elem size=%zu, Num elems=%zu)", 0x20ui64, 0xC8ui64) )
                  __debugbreak();
                mp_next = p_m_freelist->m_head.mp_next;
                p_m_freelist->m_head.mp_next = p_m_freelist->m_head.mp_next->mp_next;
                mp_next->mp_next = NULL;
                mp_next[1].mp_next = NULL;
                *(_OWORD *)&mp_next[2].mp_next = *(_OWORD *)&v28[0].m_id;
                ntl::internal::list_head_base<ntl::internal::list_node<PlayerValue<int>>>::insert_before(&lobbyDataToBeFilledIn->m_teamAssignmentList.m_listHead, (ntl::internal::list_node<PlayerValue<int> > *)&lobbyDataToBeFilledIn->m_teamAssignmentList.m_listHead, (ntl::internal::list_node<PlayerValue<int> > *)mp_next);
              }
              else
              {
                LODWORD(v20) = v8;
                Com_Printf(25, "[MM] %s - value at team [%d] array index [%d] is not a uint64! (getUInt64 failed)\n", "OnlineMatchmakerOmniscient::ParseTeamInfo", (unsigned int)v6, v20);
              }
              ++v8;
            }
            while ( v8 < m_count );
            v5 = i;
          }
        }
        ++v5;
      }
      bdJSONDeserializer::~bdJSONDeserializer(&v29);
    }
    else
    {
      Com_Printf(25, "[MM] %s - no key \"teams\" found in JSON for backend doc.\n", "OnlineMatchmakerOmniscient::ParseTeamInfo");
    }
    if ( bdJSONDeserializer::getInt32(&value, "squad_size", &v25) )
    {
      Com_Printf(25, "[MM] %s - squad size %i\n", "OnlineMatchmakerOmniscient::ParseTeamInfo", (unsigned int)v25);
      if ( bdJSONDeserializer::getObject(&value, "squads", &v32) )
      {
        bdJSONDeserializer::bdJSONDeserializer(&key);
        v11 = v32.m_count;
        LODWORD(id) = v32.m_count;
        v12 = 0;
        for ( j = 0; v12 < v11; j = v12 )
        {
          if ( bdJSONDeserializer::getFieldByIndex(&v32, v12, v35, 0x20u, &key) )
          {
            v13 = atoi(v35);
            v14 = key.m_count;
            if ( key.m_count > v25 && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\online\\online_matchmaker.cpp", 5238, ASSERT_TYPE_ASSERT, "(numPlayersOnSquad <= static_cast<uint>( squadSize ))", (const char *)&queryFormat, "numPlayersOnSquad <= static_cast<uint>( squadSize )") )
              __debugbreak();
            v15 = 0;
            if ( v14 )
            {
              do
              {
                if ( bdJSONDeserializer::getUInt64(&key, v15, &result.m_id) )
                {
                  XUID::FromUInt64(v28, result.m_id);
                  *(XUID *)&v29.m_type = v28[0];
                  LODWORD(v29.m_ptr) = v13;
                  v16 = &lobbyDataToBeFilledIn->m_squadAssignmentList.m_freelist;
                  if ( !lobbyDataToBeFilledIn->m_squadAssignmentList.m_freelist.m_head.mp_next )
                  {
                    if ( CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\libs\\ntl\\ntl\\allocator\\pool_allocator.h", 112, ASSERT_TYPE_ASSERT, "( m_head.mp_next != 0 )", "This container was memset to zero") )
                      __debugbreak();
                    if ( !v16->m_head.mp_next && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\libs\\ntl\\ntl\\allocator\\pool_allocator.h", 112, ASSERT_TYPE_ASSERT, "( m_head.mp_next != 0 )", "This container was memset to zero") )
                      __debugbreak();
                  }
                  if ( (ntl::internal::pool_allocator_freelist<32> *)v16->m_head.mp_next == v16 && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\libs\\ntl\\ntl\\allocator\\pool_allocator.h", 298, ASSERT_TYPE_ASSERT, "( !empty() )", "Pool out of elements to allocate (Elem size=%zu, Num elems=%zu)", 0x20ui64, 0xC8ui64) )
                    __debugbreak();
                  v17 = v16->m_head.mp_next;
                  v16->m_head.mp_next = v16->m_head.mp_next->mp_next;
                  v17->mp_next = NULL;
                  v17[1].mp_next = NULL;
                  *(_OWORD *)&v17[2].mp_next = *(_OWORD *)&v29.m_type;
                  ntl::internal::list_head_base<ntl::internal::list_node<PlayerValue<int>>>::insert_before(&lobbyDataToBeFilledIn->m_squadAssignmentList.m_listHead, (ntl::internal::list_node<PlayerValue<int> > *)&lobbyDataToBeFilledIn->m_squadAssignmentList.m_listHead, (ntl::internal::list_node<PlayerValue<int> > *)v17);
                }
                else
                {
                  LODWORD(v21) = v15;
                  Com_PrintError(25, "[MM] %s - value at squad [%d] array index [%d] is not a uint64! (getUInt64 failed)\n", "OnlineMatchmakerOmniscient::ParseTeamInfo", v13, v21);
                }
                ++v15;
              }
              while ( v15 < v14 );
              v12 = j;
              v11 = id;
            }
          }
          ++v12;
        }
        bdJSONDeserializer::~bdJSONDeserializer(&key);
      }
      else
      {
        Com_Printf(25, "[MM] %s - no key \"squads\" found in JSON for backend doc.\n", "OnlineMatchmakerOmniscient::ParseTeamInfo");
      }
    }
  }
  bdJSONDeserializer::~bdJSONDeserializer(&v32);
  bdJSONDeserializer::~bdJSONDeserializer(&v30);
  bdJSONDeserializer::~bdJSONDeserializer(&value);
  return v22;
}

/*
==============
OnlineMatchmakerOmniscient::PostMigrationBecomeHost
==============
*/
void OnlineMatchmakerOmniscient::PostMigrationBecomeHost(OnlineMatchmakerOmniscient *this)
{
  DWServicesAccess *Instance; 
  DWAsyncMatchMaking *AsyncMatchmaking; 
  TaskCreateRequest *LobbyDocuments; 
  bdRemoteTask *v5; 
  TaskManager *v6; 
  OnlineTimeSeriesLog *v7; 
  Windows::Foundation::IAsyncInfo *m_asyncInfo; 
  TaskCreateResult pTaskCreateResult; 
  TaskCreateRequest pTaskCreateRequest; 
  bdReference<bdRemoteTask> result; 

  *(_QWORD *)&pTaskCreateRequest.m_controllerIndex = -1i64;
  memset(&pTaskCreateRequest.m_appData, 0, 48);
  pTaskCreateRequest.m_cancelTaskOnSignoutEvent = 1;
  pTaskCreateRequest.m_timeoutInSeconds = 0;
  pTaskCreateResult.m_localTaskId = 0;
  pTaskCreateResult.m_task = NULL;
  Com_Printf(25, "[MM] %s\n", "OnlineMatchmakerOmniscient::PostMigrationBecomeHost");
  OnlineMatchmakerOmniscient::SetState(this, eREMOVING_PLAYER);
  Instance = DWServicesAccess::GetInstance();
  AsyncMatchmaking = DWServicesAccess::GetAsyncMatchmaking(Instance, this->m_controllerIndex);
  LobbyDocuments = (TaskCreateRequest *)DWAsyncMatchMaking::getLobbyDocuments(AsyncMatchmaking, &result, this->m_lobbyData.m_lobbyid, &this->m_lobbyDocuments);
  if ( LobbyDocuments != (TaskCreateRequest *)&pTaskCreateRequest.m_remoteDemonwareTask )
  {
    if ( pTaskCreateRequest.m_remoteDemonwareTask.m_ptr && _InterlockedExchangeAdd((volatile signed __int32 *)&pTaskCreateRequest.m_remoteDemonwareTask.m_ptr->m_refCount, 0xFFFFFFFF) == 1 && pTaskCreateRequest.m_remoteDemonwareTask.m_ptr )
      ((void (__fastcall *)(bdRemoteTask *, __int64))pTaskCreateRequest.m_remoteDemonwareTask.m_ptr->~bdReferencable)(pTaskCreateRequest.m_remoteDemonwareTask.m_ptr, 1i64);
    v5 = *(bdRemoteTask **)&LobbyDocuments->m_controllerIndex;
    pTaskCreateRequest.m_remoteDemonwareTask.m_ptr = v5;
    if ( v5 )
      _InterlockedExchangeAdd((volatile signed __int32 *)&v5->m_refCount, 1u);
  }
  if ( result.m_ptr && _InterlockedExchangeAdd((volatile signed __int32 *)&result.m_ptr->m_refCount, 0xFFFFFFFF) == 1 && result.m_ptr )
    ((void (__fastcall *)(bdRemoteTask *, __int64))result.m_ptr->~bdReferencable)(result.m_ptr, 1i64);
  pTaskCreateRequest.m_appData = this;
  pTaskCreateRequest.m_onCompletionCallback = OnlineMatchmakerOmniscient::staticTaskGetLobbyDocuments;
  pTaskCreateRequest.m_controllerIndex = this->m_controllerIndex;
  if ( pTaskCreateRequest.m_remoteDemonwareTask.m_ptr )
  {
    v6 = TaskManager::GetInstance();
    if ( TaskManager::CreateTask(v6, &pTaskCreateRequest, &pTaskCreateResult) )
      this->m_outstandingTaskId = pTaskCreateResult.m_localTaskId;
  }
  v7 = OnlineTimeSeriesLog::Get();
  OnlineTimeSeriesLog::WriteEventCounter(v7, "mming.getlobbydocuments.initiate.count", 1u);
  OnlineMatchmakerOmniscient::Log(this, "PostMigrationBecomeHost", (const char *)&queryFormat.fmt + 3, NULL, NULL, 0i64);
  pTaskCreateRequest.m_onCompletionCallback = NULL;
  pTaskCreateRequest.m_onUpdateCallback = NULL;
  pTaskCreateRequest.m_appSecondaryCallback = NULL;
  pTaskCreateRequest.m_timeoutInSeconds = 0;
  m_asyncInfo = pTaskCreateRequest.m_asyncInfo;
  if ( pTaskCreateRequest.m_asyncInfo )
  {
    pTaskCreateRequest.m_asyncInfo->__abi_Release(pTaskCreateRequest.m_asyncInfo);
    m_asyncInfo = NULL;
    pTaskCreateRequest.m_asyncInfo = NULL;
  }
  if ( pTaskCreateRequest.m_remoteDemonwareTask.m_ptr )
  {
    if ( _InterlockedExchangeAdd((volatile signed __int32 *)&pTaskCreateRequest.m_remoteDemonwareTask.m_ptr->m_refCount, 0xFFFFFFFF) == 1 )
    {
      if ( pTaskCreateRequest.m_remoteDemonwareTask.m_ptr )
        ((void (__fastcall *)(bdRemoteTask *, __int64))pTaskCreateRequest.m_remoteDemonwareTask.m_ptr->~bdReferencable)(pTaskCreateRequest.m_remoteDemonwareTask.m_ptr, 1i64);
      pTaskCreateRequest.m_remoteDemonwareTask.m_ptr = NULL;
    }
    m_asyncInfo = pTaskCreateRequest.m_asyncInfo;
  }
  if ( m_asyncInfo )
    m_asyncInfo->__abi_Release(m_asyncInfo);
}

/*
==============
OnlineMatchmakerOmniscient::PostMigrationNoLongerHost
==============
*/
void OnlineMatchmakerOmniscient::PostMigrationNoLongerHost(OnlineMatchmakerOmniscient *this)
{
  Com_Printf(25, "[MM] %s\n", "OnlineMatchmakerOmniscient::PostMigrationNoLongerHost");
  if ( (unsigned int)(this->m_lobbyState - 5) <= 1 )
  {
    OnlineMatchmakerTelemetry::LobbyMigration(&this->m_telemetry);
    OnlineMatchmakerOmniscient::SetLobbyState(this, eREMOVING_PLAYER);
    OnlineMatchmakerOmniscient::Log(this, "PostMigrationNoLongerHost", (const char *)&queryFormat.fmt + 3, NULL, NULL, 0i64);
  }
}

/*
==============
OnlineMatchmakerOmniscient::PrintTeams
==============
*/
void OnlineMatchmakerOmniscient::PrintTeams(OnlineMatchmakerOmniscient *this, PartyData *party)
{
  ntl::internal::list_node_base *i; 
  int MemberByXUID_AllowNotPresent; 
  unsigned int mp_prev; 
  const char *v7; 
  int MemberTeam; 
  unsigned int v9; 
  int v10; 
  const char *v11; 
  char *fmt; 
  __int64 v13; 

  if ( !party && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\online\\online_matchmaker.cpp", 7722, ASSERT_TYPE_ASSERT, "(party)", (const char *)&queryFormat, "party") )
    __debugbreak();
  Com_Printf(25, "[MM] %s\n", "OnlineMatchmakerOmniscient::PrintTeams");
  for ( i = this->m_playerList.m_listHead.m_sentinel.mp_next; i != (ntl::internal::list_node_base *)&this->m_playerList.m_listHead; i = i->mp_next )
  {
    if ( !i && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\libs\\ntl\\ntl\\list\\list.h", 103, ASSERT_TYPE_ASSERT, "( mp_node )", (const char *)&queryFormat, "mp_node") )
      __debugbreak();
    MemberByXUID_AllowNotPresent = Party_FindMemberByXUID_AllowNotPresent(party, (const XUID)i[6].mp_next);
    if ( MemberByXUID_AllowNotPresent == -1 )
    {
      mp_prev = (unsigned int)i[12].mp_prev;
      v7 = XUID::ToDevString((XUID *)&i[6].mp_next);
      LODWORD(fmt) = mp_prev + 1;
      Com_Printf(25, "[MM] %s - DW team: %i, Game team: %i. But the player isn't in the party (probably hasn't joined yet)\n", v7, mp_prev, fmt);
    }
    else
    {
      MemberTeam = Party_GetMemberTeam(party, MemberByXUID_AllowNotPresent);
      v9 = (unsigned int)i[12].mp_prev;
      v10 = MemberTeam;
      v11 = XUID::ToDevString((XUID *)&i[6].mp_next);
      LODWORD(v13) = v10;
      LODWORD(fmt) = v9 + 1;
      Com_Printf(25, "[MM] %s - DW team: %i, Game team: %i. Party team: %d\n", v11, v9, fmt, v13);
    }
  }
}

/*
==============
OnlineMatchmakerOmniscient::Pump
==============
*/
void OnlineMatchmakerOmniscient::Pump(OnlineMatchmakerOmniscient *this)
{
  DWServicesAccess *Instance; 
  DWServicesAccess *v3; 
  DWLobbyService *DWLobbyService; 
  int v5; 
  ntl::internal::list_head_base<ntl::internal::list_node<OnlineMatchmakerOmniscient::Player> > *p_m_listHead; 
  __int64 v7; 
  ntl::internal::list_node_base *mp_next; 
  ntl::internal::list_node_base *v9; 
  __int64 i; 
  unsigned __int16 m_outstandingCallback; 
  unsigned __int16 v12; 
  const dvar_t *v13; 

  switch ( this->m_state )
  {
    case eIDLE:
    case eREMOVING_PLAYER:
    case eNONE:
    case eNONE|eADDING_LOCAL_PLAYER_TO_DW:
    case eNONE|eREADY:
      break;
    case eNEW:
      Instance = DWServicesAccess::GetInstance();
      if ( DWServicesAccess::isReady(Instance, this->m_controllerIndex) )
      {
        v3 = DWServicesAccess::GetInstance();
        DWLobbyService = DWServicesAccess::GetDWLobbyService(v3, this->m_controllerIndex);
        DWLobbyService::registerPushMessageHandler(DWLobbyService, &this->m_eventHandler);
        OnlineMatchmakerOmniscient::SetState(this, eADDING_LOCAL_PLAYER_TO_DW);
      }
      break;
    case eADDING_LOCAL_PLAYER_TO_DW:
      if ( OnlineMatchmakerOmniscient::AllPlayerAreReadyForMatchmaking(this) && (XUID::IsValid(&this->m_params.m_inviteClientAttemptingToJoinUID) || this->m_params.m_lobbyIdToJoin) )
        OnlineMatchmakerOmniscient::SetState(this, eREMOTE_WAITING_FOR_MMING_TOKEN);
      break;
    case eREMOTE_WAITING_FOR_MMING_TOKEN:
      Com_Printf(25, "[MM] %s : Ready to init omniscient matchmaking.\n", "OnlineMatchmakerOmniscient::RunInitMatchmaking");
      if ( OnlineMatchmakerOmniscient::InitMatchmaking(this) )
      {
        OnlineMatchmakerOmniscient::SetState(this, eREADY);
      }
      else
      {
        Com_PrintError(25, "[MM] %s : Failed to init matchmaking.\n", "OnlineMatchmakerOmniscient::RunInitMatchmaking");
        OnlineMatchmakerOmniscient::SetState(this, eFAILURE|eREADY);
      }
      break;
    case eREADY:
      if ( (XUID::IsValid(&this->m_params.m_inviteClientAttemptingToJoinUID) || this->m_params.m_lobbyIdToJoin) && OnlineMatchmakerOmniscient::AllPlayerAreReadyForMatchmaking(this) )
        OnlineMatchmakerOmniscient::SetState(this, eUPDATING);
      break;
    case eUPDATING:
      if ( this->m_mmingData.m_timeTillNextStart_ms < Online_GetEpochTimeFromAuth_ms() )
      {
        v5 = Sys_Milliseconds();
        Com_Printf(25, "[MM] %s - starting matchmaking because it's been %i ms since the last time.\n", "OnlineMatchmakerOmniscient::RunStartMatchmaking", (unsigned int)(v5 - this->m_mmingData.m_startTimeMs));
        p_m_listHead = &this->m_playerList.m_listHead;
        v7 = 0i64;
        mp_next = this->m_playerList.m_listHead.m_sentinel.mp_next;
        if ( mp_next == (ntl::internal::list_node_base *)&this->m_playerList.m_listHead )
          goto LABEL_21;
        do
        {
          mp_next = mp_next->mp_next;
          ++v7;
        }
        while ( mp_next != (ntl::internal::list_node_base *)p_m_listHead );
        if ( v7 && OnlineMatchmakerOmniscient::StartMatchmaking(this) )
        {
          OnlineMatchmakerOmniscient::SetState(this, eREADY_TO_REMOVE);
        }
        else
        {
LABEL_21:
          v9 = this->m_playerList.m_listHead.m_sentinel.mp_next;
          for ( i = 0i64; v9 != (ntl::internal::list_node_base *)p_m_listHead; ++i )
            v9 = v9->mp_next;
          Com_Printf(25, "[MM] %s - canceling matchmaking. We have %zu players or StartMatchmaking returned false.\n", "OnlineMatchmakerOmniscient::RunStartMatchmaking", i);
          OnlineMatchmakerOmniscient::SetState(this, eFAILURE);
          this->m_mmingData.m_timeOut = 0;
        }
      }
      break;
    case eREADY_TO_REMOVE:
      if ( this->m_mmingData.m_timeOut && Sys_Milliseconds() > this->m_mmingData.m_timeOut )
      {
        this->m_mmingData.m_timeOut = 0;
        OnlineMatchmakerOmniscient::SetState(this, eFAILURE);
      }
      break;
    case eFAILURE:
      OnlineMatchmakerOmniscient::RunCancelMatchmaking(this);
      break;
    case eFAILURE|eADDING_LOCAL_PLAYER_TO_DW:
      OnlineMatchmakerOmniscient::RunShutdownMatchmaking(this);
      break;
    case eFAILURE|eREADY:
      OnlineMatchmakerOmniscient::ResetLobby(this);
      if ( this->m_callbacks.m_inviteCallback )
      {
        m_outstandingCallback = this->m_callbacks.m_outstandingCallback;
        if ( (m_outstandingCallback & 0x20) == 0 )
        {
          this->m_callbacks.m_outstandingCallback = m_outstandingCallback | 0x20;
          this->m_callbacks.m_callbackWasSuccessful[5] = 3;
        }
      }
      else if ( this->m_callbacks.m_failureCallback )
      {
        v12 = this->m_callbacks.m_outstandingCallback;
        if ( (v12 & 0x40) == 0 )
        {
          this->m_callbacks.m_outstandingCallback = v12 | 0x40;
          this->m_callbacks.m_callbackWasSuccessful[6] = 0;
        }
      }
      break;
    default:
      if ( CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\online\\online_matchmaker.cpp", 1446, ASSERT_TYPE_ASSERT, (const char *)&queryFormat.fmt + 3, "Unknown state") )
        __debugbreak();
      break;
  }
  switch ( this->m_lobbyState )
  {
    case eIDLE:
      if ( this->m_state == eREMOVING_PLAYER )
        OnlineMatchmakerOmniscient::SetLobbyState(this, eNEW);
      break;
    case eNEW:
      OnlineMatchmakerOmniscient::Log(this, "InitLobby", (const char *)&queryFormat.fmt + 3, NULL, NULL, 0i64);
      OnlineMatchmakerTelemetry::ResetLobby(&this->m_telemetry);
      OnlineMatchmakerOmniscient::ResetLobbyData(this);
      OnlineMatchmakerOmniscient::SetLobbyState(this, eADDING_LOCAL_PLAYER_TO_DW);
      break;
    case eADDING_LOCAL_PLAYER_TO_DW:
      if ( this->m_state != eREMOVING_PLAYER )
        OnlineMatchmakerOmniscient::ResetLobbyData(this);
      break;
    case eFAILURE:
      OnlineMatchmakerOmniscient::RunLobbyDisband(this);
      break;
    case eFAILURE|eADDING_LOCAL_PLAYER_TO_DW:
      OnlineMatchmakerOmniscient::ResetLobby(this);
      break;
    case eNONE|eADDING_LOCAL_PLAYER_TO_DW:
      if ( CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\online\\online_matchmaker.cpp", 1981, ASSERT_TYPE_ASSERT, (const char *)&queryFormat.fmt + 3, "This is unexpected! RunLobbyNone()!\n") )
        __debugbreak();
      break;
    default:
      break;
  }
  OnlineMatchmakerOmniscient::UpdatePlayers(this);
  v13 = DVARBOOL_online_matchmaking_gamestarted_updates_hostdocs;
  if ( !DVARBOOL_online_matchmaking_gamestarted_updates_hostdocs && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\universal\\dvar.h", 692, ASSERT_TYPE_ASSERT, "(dvar)", "%s\n\tDvar %s accessed after deregistration", "dvar", "online_matchmaking_gamestarted_updates_hostdocs") )
    __debugbreak();
  Dvar_CheckFrontendServerThread(v13);
  if ( v13->current.enabled && this->m_lobbyState != eUPDATING && this->m_lobbyData.m_gameStartedPending != this->m_lobbyData.m_gameStartedCurrent )
    this->m_lobbyData.m_lobbyDocIsDirty = 1;
  OnlineMatchmakerOmniscient::UpdateHostDoc(this);
  Qos::Pump(&this->m_qos);
  OnlineMatchmakerOmniscient::PumpCallbacks(this);
}

/*
==============
OnlineMatchmakerOmniscient::PumpCallbacks
==============
*/
void OnlineMatchmakerOmniscient::PumpCallbacks(OnlineMatchmakerOmniscient *this)
{
  int m_outstandingCallback; 
  unsigned int i; 
  tCallbackResult v4; 
  const char *v5; 
  void (__fastcall *m_createLobbyCallback)(const unsigned __int64, const XSESSION_INFO *, const bool); 
  const char *v7; 
  void (__fastcall *m_joinLobbyCallback)(const unsigned __int64, const XUID, const XSESSION_INFO *, const bool); 
  bool m_hasDedicatedServer; 
  XUID *v10; 
  const char *v11; 
  void (__fastcall *m_lobbyUpdatedCallback)(const unsigned __int64); 
  const char *v13; 
  const char *v14; 
  void (__fastcall *m_inviteCallback)(tCallbackResult, const unsigned __int64, const XSESSION_INFO *, void *); 
  const XUID *v16; 
  const char *v17; 
  void (*m_failureCallback)(void); 
  XUID result; 
  XUID v20; 

LABEL_1:
  m_outstandingCallback = this->m_callbacks.m_outstandingCallback;
  for ( i = 0; i != 7; ++i )
  {
    if ( _bittest(&m_outstandingCallback, i) )
    {
      v4 = this->m_callbacks.m_callbackWasSuccessful[i];
      this->m_callbacks.m_outstandingCallback = m_outstandingCallback ^ (1 << i);
      this->m_callbacks.m_callbackWasSuccessful[i] = 0;
      switch ( i )
      {
        case 1u:
          v5 = j_va("{\"type\":\"eCREATE\",\"value\":\"%d\"}", (unsigned int)v4);
          OnlineMatchmakerOmniscient::Log(this, "PumpCallbacks", v5, NULL, NULL, 0i64);
          m_createLobbyCallback = this->m_callbacks.m_createLobbyCallback;
          if ( m_createLobbyCallback )
            m_createLobbyCallback(this->m_lobbyData.m_lobbyid, &this->m_lobbyData.m_hostAddress, this->m_lobbyData.m_hasDedicatedServer);
          break;
        case 2u:
          v7 = j_va("{\"type\":\"eJOINLOBBY\",\"value\":\"%d\"}", (unsigned int)v4);
          OnlineMatchmakerOmniscient::Log(this, "PumpCallbacks", v7, NULL, NULL, 0i64);
          m_joinLobbyCallback = this->m_callbacks.m_joinLobbyCallback;
          if ( m_joinLobbyCallback )
          {
            m_hasDedicatedServer = this->m_lobbyData.m_hasDedicatedServer;
            v10 = XUID::FromUInt64(&result, this->m_lobbyData.m_hostUID);
            ((void (__fastcall *)(unsigned __int64, unsigned __int64, XSESSION_INFO *, bool))m_joinLobbyCallback)(this->m_lobbyData.m_lobbyid, v10->m_id, &this->m_lobbyData.m_hostAddress, m_hasDedicatedServer);
            OnlineMatchmakerOmniscient::SetLobbyState(this, eREMOVING_PLAYER);
          }
          break;
        case 3u:
          v11 = j_va("{\"type\":\"eLOBBYUPDATED\",\"value\":\"%d\"}", (unsigned int)v4);
          OnlineMatchmakerOmniscient::Log(this, "PumpCallbacks", v11, NULL, NULL, 0i64);
          m_lobbyUpdatedCallback = this->m_callbacks.m_lobbyUpdatedCallback;
          goto LABEL_11;
        case 4u:
          v13 = j_va("{\"type\":\"eLOBBYDISBANDED\",\"value\":\"%d\"}", (unsigned int)v4);
          OnlineMatchmakerOmniscient::Log(this, "PumpCallbacks", v13, NULL, NULL, 0i64);
          m_lobbyUpdatedCallback = this->m_callbacks.m_lobbyDisbandedCallback;
LABEL_11:
          if ( m_lobbyUpdatedCallback )
            m_lobbyUpdatedCallback(this->m_lobbyData.m_lobbyid);
          break;
        case 5u:
          v14 = j_va("{\"type\":\"eINVITE\",\"value\":\"%d\"}", (unsigned int)v4);
          OnlineMatchmakerOmniscient::Log(this, "PumpCallbacks", v14, NULL, NULL, 0i64);
          m_inviteCallback = this->m_callbacks.m_inviteCallback;
          if ( m_inviteCallback )
            m_inviteCallback(v4, this->m_lobbyData.m_lobbyid, &this->m_lobbyData.m_hostAddress, this->m_callbacks.m_data);
          Com_Printf(25, "[MM] %s : Resetting all fields.\n", "OnlineMatchmakerOmniscient::ResetInviteData");
          this->m_callbacks.m_inviteCallback = NULL;
          v16 = XUID::NullXUID(&v20);
          XUID::operator=(&this->m_params.m_inviteClientAttemptingToJoinUID, v16);
          this->m_params.m_lobbyIdToJoin = 0i64;
          this->m_params.m_inviteLocalJoiningControllerIndex = -1;
          break;
        case 6u:
          v17 = j_va("{\"type\":\"eFAILURE\",\"value\":\"%d\"}", (unsigned int)v4);
          OnlineMatchmakerOmniscient::Log(this, "PumpCallbacks", v17, NULL, NULL, 0i64);
          m_failureCallback = this->m_callbacks.m_failureCallback;
          if ( m_failureCallback )
            m_failureCallback();
          break;
        default:
          goto LABEL_1;
      }
      goto LABEL_1;
    }
  }
}

/*
==============
OnlineMatchmakerOmniscient::PumpLobby
==============
*/
void OnlineMatchmakerOmniscient::PumpLobby(OnlineMatchmakerOmniscient *this)
{
  switch ( this->m_lobbyState )
  {
    case eIDLE:
      if ( this->m_state == eREMOVING_PLAYER )
        OnlineMatchmakerOmniscient::SetLobbyState(this, eNEW);
      break;
    case eNEW:
      OnlineMatchmakerOmniscient::Log(this, "InitLobby", (const char *)&queryFormat.fmt + 3, NULL, NULL, 0i64);
      OnlineMatchmakerTelemetry::ResetLobby(&this->m_telemetry);
      OnlineMatchmakerOmniscient::ResetLobbyData(this);
      OnlineMatchmakerOmniscient::SetLobbyState(this, eADDING_LOCAL_PLAYER_TO_DW);
      break;
    case eADDING_LOCAL_PLAYER_TO_DW:
      if ( this->m_state != eREMOVING_PLAYER )
        OnlineMatchmakerOmniscient::ResetLobbyData(this);
      break;
    case eFAILURE:
      OnlineMatchmakerOmniscient::RunLobbyDisband(this);
      break;
    case eFAILURE|eADDING_LOCAL_PLAYER_TO_DW:
      OnlineMatchmakerOmniscient::ResetLobby(this);
      break;
    case eNONE|eADDING_LOCAL_PLAYER_TO_DW:
      if ( CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\online\\online_matchmaker.cpp", 1981, ASSERT_TYPE_ASSERT, (const char *)&queryFormat.fmt + 3, "This is unexpected! RunLobbyNone()!\n") )
        __debugbreak();
      break;
    default:
      return;
  }
}

/*
==============
OnlineMatchmakerOmniscient::QosCompleteCallback
==============
*/
void OnlineMatchmakerOmniscient::QosCompleteCallback(OnlineMatchmakerOmniscient *this, const tQosEntry *result)
{
  const tQosEntry *v2; 
  OnlineMatchmakerOmniscient *v3; 
  bdQoSProbeInfo *m_data; 
  ntl::internal::list_node_base *mp_next; 
  __int64 p_m_listHead; 
  unsigned int m_size; 
  unsigned int m_capacity; 
  unsigned int v9; 
  bdQoSProbeInfo *v10; 
  char *p_m_latency; 
  float *v12; 
  __int64 v13; 
  __int64 v14; 
  bdQoSProbeInfo *v15; 
  __int64 v16; 
  __int64 v17; 
  bool v18; 
  bdQoSProbeInfo *v19; 
  __int64 mp_next_high; 
  const char *v21; 
  OnlineTimeSeriesLog *v22; 
  DWServicesAccess *Instance; 
  DWAsyncMatchMaking *AsyncMatchmaking; 
  TaskCreateRequest *v25; 
  bdRemoteTask *v26; 
  TaskManager *v27; 
  OnlineTimeSeriesLog *v28; 
  Windows::Foundation::IAsyncInfo *m_asyncInfo; 
  bdQoSProbeInfo *v30; 
  __int64 v31; 
  char *fmt; 
  char *fmta; 
  bdArray<bdQoSProbeInfo> p; 
  TaskCreateRequest pTaskCreateRequest; 
  ntl::internal::list_head_base<ntl::internal::list_node<QosDestinationEndpoint> > *v36; 
  bdReference<bdRemoteTask> resulta; 
  OnlineMatchmakerOmniscient *v38; 
  const tQosEntry *v39; 
  bdQoSProbeInfo *v40; 
  __int64 v41; 
  char *v42; 
  bdQoSProbeInfo *v43; 
  TaskCreateResult pTaskCreateResult; 
  bdJSONSerializer v45; 
  char str[24]; 

  v41 = -2i64;
  v2 = result;
  v39 = result;
  v3 = this;
  v38 = this;
  Com_Printf(25, "[MM] %s - received qos complete callback. transaction id is %zu.\n", "OnlineMatchmakerOmniscient::QosCompleteCallback", result->m_DWQosTransactionId);
  m_data = NULL;
  p.m_data = NULL;
  *(_QWORD *)&p.m_capacity = 0i64;
  v3->m_lobbyData.m_qosing = 0;
  v3->m_lobbyData.m_numQoses = 0;
  memset_0(v3->m_scratchBuffer, 0, sizeof(v3->m_scratchBuffer));
  bdJSONSerializer::bdJSONSerializer(&v45, v3->m_scratchBuffer, 0x4000u);
  bdJSONSerializer::writeBeginObject(&v45);
  bdJSONSerializer::writeString(&v45, "state", "success");
  bdJSONSerializer::writeBeginArray(&v45, "qos_results");
  mp_next = v2->m_addressesToQos.m_listHead.m_sentinel.mp_next;
  p_m_listHead = (__int64)&v2->m_addressesToQos.m_listHead;
  v36 = &v2->m_addressesToQos.m_listHead;
  if ( mp_next != (ntl::internal::list_node_base *)&v2->m_addressesToQos.m_listHead )
  {
    while ( 1 )
    {
      if ( !mp_next && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\libs\\ntl\\ntl\\list\\list.h", 103, ASSERT_TYPE_ASSERT, "( mp_node )", (const char *)&queryFormat, "mp_node") )
        __debugbreak();
      m_size = p.m_size;
      if ( p.m_size != p.m_capacity )
      {
        m_data = p.m_data;
        goto LABEL_28;
      }
      m_capacity = p.m_capacity;
      if ( !p.m_capacity )
        m_capacity = 1;
      v9 = p.m_capacity + m_capacity;
      if ( !(p.m_capacity + m_capacity) )
        goto LABEL_17;
      v10 = (bdQoSProbeInfo *)bdMemory::allocate(280i64 * v9);
      m_data = v10;
      if ( p.m_size )
        break;
LABEL_26:
      bdMemory::deallocate(p.m_data);
      p.m_data = m_data;
      p.m_capacity = v9;
      m_size = p.m_size;
LABEL_28:
      v17 = m_size;
      v18 = &m_data[v17] == NULL;
      v19 = &m_data[v17];
      v43 = v19;
      v40 = v19;
      if ( !v18 )
      {
        bdQoSProbeInfo::bdQoSProbeInfo(v19, (const bdQoSProbeInfo *)&mp_next[3].mp_next);
        m_size = p.m_size;
      }
      p.m_size = m_size + 1;
      if ( !mp_next && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\libs\\ntl\\ntl\\list\\list.h", 103, ASSERT_TYPE_ASSERT, "( mp_node )", (const char *)&queryFormat, "mp_node") )
        __debugbreak();
      bdAddr::toString((bdAddr *)&mp_next[4], str, 0x18ui64);
      bdJSONSerializer::writeBeginObject(&v45);
      bdJSONSerializer::writeString(&v45, "address", str);
      if ( !mp_next && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\libs\\ntl\\ntl\\list\\list.h", 103, ASSERT_TYPE_ASSERT, "( mp_node )", (const char *)&queryFormat, "mp_node") )
        __debugbreak();
      bdJSONSerializer::writeFloat32(&v45, "median_latency", *(const float *)&mp_next[13].mp_next, 0);
      bdJSONSerializer::writeEndObject(&v45);
      mp_next_high = HIDWORD(mp_next[15].mp_next);
      v21 = "PACKET LOSS";
      if ( (_DWORD)mp_next_high == HIDWORD(mp_next[20].mp_prev) )
        v21 = (char *)&queryFormat.fmt + 3;
      LODWORD(fmt) = HIDWORD(mp_next[20].mp_prev);
      Com_Printf(25, "[QoS] %s received %i/%i probes to %s\n", v21, mp_next_high, fmt, str);
      LODWORD(fmta) = LODWORD(mp_next[21].mp_next) - HIDWORD(mp_next[21].mp_prev);
      BB_Print(0, "online_omniscient_qos_probe", "num_probes %u time_to_complete_ms %u min_latency_value_sec %f latency_value_sec %f", HIDWORD(mp_next[21].mp_next), fmta, *(float *)&mp_next[15].mp_next, *(float *)&mp_next[13].mp_next);
      mp_next = mp_next->mp_next;
      m_data = NULL;
      if ( mp_next == (ntl::internal::list_node_base *)p_m_listHead )
      {
        v3 = v38;
        v2 = v39;
        goto LABEL_40;
      }
    }
    p_m_latency = (char *)&v10->m_latency;
    v12 = &p.m_data->m_latency;
    v13 = p.m_size;
    do
    {
      v42 = p_m_latency - 160;
      v40 = (bdQoSProbeInfo *)(p_m_latency - 160);
      if ( p_m_latency != (char *)160 )
      {
        v14 = *((_QWORD *)v12 - 20);
        *((_QWORD *)p_m_latency - 20) = v14;
        if ( v14 )
          _InterlockedExchangeAdd((volatile signed __int32 *)(v14 + 8), 1u);
        bdAddr::bdAddr((bdAddr *)p_m_latency - 1, (const bdAddr *)v12 - 1);
        *(float *)p_m_latency = *v12;
        *((_QWORD *)p_m_latency + 1) = *((_QWORD *)v12 + 1);
        *((float *)p_m_latency + 4) = v12[4];
        p_m_latency[20] = *((_BYTE *)v12 + 20);
        *((float *)p_m_latency + 6) = v12[6];
        *((float *)p_m_latency + 7) = v12[7];
        *((float *)p_m_latency + 8) = v12[8];
        *((float *)p_m_latency + 9) = v12[9];
        *(__m256i *)(p_m_latency + 40) = *(__m256i *)(v12 + 10);
        *(__m256i *)(p_m_latency + 72) = *(__m256i *)(v12 + 18);
        *((float *)p_m_latency + 26) = v12[26];
        *((float *)p_m_latency + 27) = v12[27];
        *((float *)p_m_latency + 28) = v12[28];
        *((float *)p_m_latency + 29) = v12[29];
      }
      p_m_latency += 280;
      v12 += 70;
      --v13;
    }
    while ( v13 );
    m_size = p.m_size;
    p_m_listHead = (__int64)v36;
LABEL_17:
    if ( m_size )
    {
      v15 = p.m_data;
      v16 = m_size;
      do
      {
        if ( v15->m_addr.m_ptr && _InterlockedExchangeAdd((volatile signed __int32 *)&v15->m_addr.m_ptr->m_refCount, 0xFFFFFFFF) == 1 )
        {
          if ( v15->m_addr.m_ptr )
            ((void (__fastcall *)(bdCommonAddr *, __int64))v15->m_addr.m_ptr->~bdReferencable)(v15->m_addr.m_ptr, 1i64);
          v15->m_addr.m_ptr = NULL;
        }
        ++v15;
        --v16;
      }
      while ( v16 );
      p_m_listHead = (__int64)v36;
    }
    goto LABEL_26;
  }
LABEL_40:
  bdJSONSerializer::writeEndArray(&v45);
  bdJSONSerializer::writeEndObject(&v45);
  OnlineMatchmakerOmniscient::Log(v3, "QosCompleteCallback", v3->m_scratchBuffer, NULL, NULL, 0i64);
  v22 = OnlineTimeSeriesLog::Get();
  OnlineTimeSeriesLog::WriteEventCounter(v22, "event.qoshosts.completed.count", 1u);
  pTaskCreateRequest.m_appTaskType = -1;
  memset(&pTaskCreateRequest.m_appSecondaryCallback, 0, 24);
  pTaskCreateRequest.m_onUpdateCallback = NULL;
  pTaskCreateRequest.m_cancelTaskOnSignoutEvent = 1;
  pTaskCreateRequest.m_timeoutInSeconds = 0;
  pTaskCreateResult.m_localTaskId = 0;
  pTaskCreateResult.m_task = NULL;
  pTaskCreateRequest.m_appData = v3;
  pTaskCreateRequest.m_onCompletionCallback = OnlineMatchmakerOmniscient::staticTaskQosComplete;
  pTaskCreateRequest.m_controllerIndex = v3->m_controllerIndex;
  Instance = DWServicesAccess::GetInstance();
  AsyncMatchmaking = DWServicesAccess::GetAsyncMatchmaking(Instance, v3->m_controllerIndex);
  v25 = (TaskCreateRequest *)DWAsyncMatchMaking::qosHostsReply(AsyncMatchmaking, &resulta, v2->m_DWQosTransactionId, &p);
  if ( v25 != (TaskCreateRequest *)&pTaskCreateRequest.m_remoteDemonwareTask )
  {
    if ( pTaskCreateRequest.m_remoteDemonwareTask.m_ptr && _InterlockedExchangeAdd((volatile signed __int32 *)&pTaskCreateRequest.m_remoteDemonwareTask.m_ptr->m_refCount, 0xFFFFFFFF) == 1 && pTaskCreateRequest.m_remoteDemonwareTask.m_ptr )
      ((void (__fastcall *)(bdRemoteTask *, __int64))pTaskCreateRequest.m_remoteDemonwareTask.m_ptr->~bdReferencable)(pTaskCreateRequest.m_remoteDemonwareTask.m_ptr, 1i64);
    v26 = *(bdRemoteTask **)&v25->m_controllerIndex;
    pTaskCreateRequest.m_remoteDemonwareTask.m_ptr = v26;
    if ( v26 )
      _InterlockedExchangeAdd((volatile signed __int32 *)&v26->m_refCount, 1u);
  }
  if ( resulta.m_ptr && _InterlockedExchangeAdd((volatile signed __int32 *)&resulta.m_ptr->m_refCount, 0xFFFFFFFF) == 1 && resulta.m_ptr )
    ((void (__fastcall *)(bdRemoteTask *, __int64))resulta.m_ptr->~bdReferencable)(resulta.m_ptr, 1i64);
  if ( !pTaskCreateRequest.m_remoteDemonwareTask.m_ptr || (v27 = TaskManager::GetInstance(), !TaskManager::CreateTask(v27, &pTaskCreateRequest, &pTaskCreateResult)) )
    Com_PrintError(25, "[MM] %s - failed to send the qos reply for transaction %zu.\n", "OnlineMatchmakerOmniscient::QosCompleteCallback", v2->m_DWQosTransactionId);
  v28 = OnlineTimeSeriesLog::Get();
  OnlineTimeSeriesLog::WriteEventCounter(v28, "mming.qoshostsreply.initiate.count", 1u);
  pTaskCreateRequest.m_onCompletionCallback = NULL;
  pTaskCreateRequest.m_onUpdateCallback = NULL;
  pTaskCreateRequest.m_appSecondaryCallback = NULL;
  pTaskCreateRequest.m_timeoutInSeconds = 0;
  m_asyncInfo = pTaskCreateRequest.m_asyncInfo;
  if ( pTaskCreateRequest.m_asyncInfo )
  {
    pTaskCreateRequest.m_asyncInfo->__abi_Release(pTaskCreateRequest.m_asyncInfo);
    m_asyncInfo = NULL;
    pTaskCreateRequest.m_asyncInfo = NULL;
  }
  if ( pTaskCreateRequest.m_remoteDemonwareTask.m_ptr )
  {
    if ( _InterlockedExchangeAdd((volatile signed __int32 *)&pTaskCreateRequest.m_remoteDemonwareTask.m_ptr->m_refCount, 0xFFFFFFFF) == 1 )
    {
      if ( pTaskCreateRequest.m_remoteDemonwareTask.m_ptr )
        ((void (__fastcall *)(bdRemoteTask *, __int64))pTaskCreateRequest.m_remoteDemonwareTask.m_ptr->~bdReferencable)(pTaskCreateRequest.m_remoteDemonwareTask.m_ptr, 1i64);
      pTaskCreateRequest.m_remoteDemonwareTask.m_ptr = NULL;
    }
    m_asyncInfo = pTaskCreateRequest.m_asyncInfo;
  }
  if ( m_asyncInfo )
    m_asyncInfo->__abi_Release(m_asyncInfo);
  bdJSONSerializer::~bdJSONSerializer(&v45);
  if ( p.m_size )
  {
    v30 = p.m_data;
    v31 = p.m_size;
    do
    {
      if ( v30->m_addr.m_ptr && _InterlockedExchangeAdd((volatile signed __int32 *)&v30->m_addr.m_ptr->m_refCount, 0xFFFFFFFF) == 1 )
      {
        if ( v30->m_addr.m_ptr )
          ((void (__fastcall *)(bdCommonAddr *, __int64))v30->m_addr.m_ptr->~bdReferencable)(v30->m_addr.m_ptr, 1i64);
        v30->m_addr.m_ptr = NULL;
      }
      ++v30;
      --v31;
    }
    while ( v31 );
  }
  bdMemory::deallocate(p.m_data);
}

/*
==============
OnlineMatchmakerOmniscient::QosHosts
==============
*/
void OnlineMatchmakerOmniscient::QosHosts(OnlineMatchmakerOmniscient *this, const unsigned __int64 transactionId, const bdArray<bdQoSRemoteAddr> *qosHosts, const unsigned __int16 numProbes)
{
  const char *v8; 
  unsigned int v9; 
  unsigned int m_size; 
  __int64 v11; 
  bdQoSRemoteAddr *v12; 
  bdCommonAddr *m_ptr; 
  bdAddr *PublicAddr; 
  bdAddr *LocalAddrByIndex; 
  OnlineTimeSeriesLog *v16; 
  char *fmt; 
  unsigned int v19; 
  bdCommonAddr *v20; 
  bdSecurityID id; 
  bdSecurityKey key; 
  char buffer[24]; 
  char v24[40]; 
  char v25[48]; 
  char str[48]; 

  if ( !qosHosts && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\online\\online_matchmaker.cpp", 4864, ASSERT_TYPE_ASSERT, "(qosHosts)", (const char *)&queryFormat, "qosHosts") )
    __debugbreak();
  Com_Printf(25, "[MM] %s - qosing hosts now. transaction id is %zu.\n", "OnlineMatchmakerOmniscient::QosHosts", transactionId);
  if ( qosHosts )
  {
    v8 = j_va("{\"num_hosts\"=%d,\"num_probes\"=%d", qosHosts->m_size, numProbes);
    v9 = 0;
    OnlineMatchmakerOmniscient::Log(this, "QosHosts", v8, NULL, NULL, transactionId);
    this->m_lobbyData.m_qosing = 1;
    this->m_lobbyData.m_numQoses = qosHosts->m_size;
    m_size = qosHosts->m_size;
    v19 = m_size;
    v20 = NULL;
    bdSecurityID::bdSecurityID(&id);
    bdSecurityKey::bdSecurityKey(&key);
    if ( m_size )
    {
      v11 = 0i64;
      do
      {
        if ( v9 < qosHosts->m_size )
        {
          v12 = &qosHosts->m_data[v11];
          if ( v12 != (bdQoSRemoteAddr *)&v20 )
          {
            if ( v20 && _InterlockedExchangeAdd((volatile signed __int32 *)&v20->m_refCount, 0xFFFFFFFF) == 1 && v20 )
              ((void (__fastcall *)(bdCommonAddr *, __int64))v20->~bdReferencable)(v20, 1i64);
            m_ptr = v12->m_addr.m_ptr;
            v20 = m_ptr;
            if ( m_ptr )
              _InterlockedExchangeAdd((volatile signed __int32 *)&m_ptr->m_refCount, 1u);
          }
          id = v12->m_id;
          key = v12->m_key;
          m_size = v19;
        }
        PublicAddr = (bdAddr *)bdCommonAddr::getPublicAddr(v20);
        bdAddr::toString(PublicAddr, str, 0x2Aui64);
        LocalAddrByIndex = (bdAddr *)bdCommonAddr::getLocalAddrByIndex(v20, 0);
        bdAddr::toString(LocalAddrByIndex, v25, 0x2Aui64);
        bdSecurityInfo::toString(&id, buffer, 0x12u);
        bdSecurityInfo::toString(&key, v24, 0x24u);
        LODWORD(fmt) = bdCommonAddr::getLocalAddrs(v20)->m_size;
        Com_Printf(25, "\tpublic: %s private: %s (%d) sec id = %s sec key = %s\n", str, v25, fmt, buffer, v24);
        ++v9;
        ++v11;
      }
      while ( v9 < m_size );
    }
    v16 = OnlineTimeSeriesLog::Get();
    OnlineTimeSeriesLog::WriteEventCounter(v16, "event.qoshosts.received.count", 1u);
    Qos::Probe(&this->m_qos, transactionId, qosHosts, numProbes, OnlineMatchmakerOmniscient::staticQosCompleteCallback, this);
    bdSecurityKey::~bdSecurityKey(&key);
    bdSecurityID::~bdSecurityID(&id);
    if ( v20 && _InterlockedExchangeAdd((volatile signed __int32 *)&v20->m_refCount, 0xFFFFFFFF) == 1 )
    {
      if ( v20 )
        ((void (__fastcall *)(bdCommonAddr *, __int64))v20->~bdReferencable)(v20, 1i64);
    }
  }
}

/*
==============
OnlineMatchmakerOmniscient::ReadyToStartGame
==============
*/
void OnlineMatchmakerOmniscient::ReadyToStartGame(OnlineMatchmakerOmniscient *this)
{
  bool v2; 

  if ( !this->m_lobbyData.m_gameStartedPending )
  {
    Com_Printf(131097, "[MM] %s\n", "OnlineMatchmakerOmniscient::ReadyToStartGame");
    v2 = !this->m_lobbyData.m_canLobbyMerge;
    *(_WORD *)&this->m_lobbyData.m_gameStartedPending = 1;
    if ( !v2 )
    {
      this->m_lobbyData.m_canLobbyMerge = 0;
      this->m_lobbyData.m_timeToUpdateIfDirty = 0;
    }
    this->m_lobbyData.m_lobbyDocIsDirty = 1;
  }
}

/*
==============
OnlineMatchmakerOmniscient::ReconcileExpectedPlayers
==============
*/
void OnlineMatchmakerOmniscient::ReconcileExpectedPlayers(OnlineMatchmakerOmniscient *this, const ntl::fixed_list<XUID,200,0> *expectedPlayersList)
{
  const XUID *mp_next; 
  ntl::internal::list_head_base<ntl::internal::list_node<XUID> > *i; 
  ntl::internal::list_node_base *v6; 
  ntl::internal::list_head_base<ntl::internal::list_node<OnlineMatchmakerOmniscient::Player> > *j; 
  XUID *v8; 
  ntl::internal::list_node_base *m_id; 
  const char *v10; 
  const char *StateString; 
  const char *v12; 
  const char *v13; 
  OnlineTimeSeriesLog *v14; 
  ntl::internal::list_iterator<OnlineMatchmakerOmniscient::Player,ntl::internal::list_node<OnlineMatchmakerOmniscient::Player> const ,OnlineMatchmakerOmniscient::Player const *,OnlineMatchmakerOmniscient::Player const &> it; 

  Com_Printf(25, "[MM] %s STARTING.\n", "OnlineMatchmakerOmniscient::ReconcileExpectedPlayers");
  mp_next = (const XUID *)expectedPlayersList->m_listHead.m_sentinel.mp_next;
  for ( i = &expectedPlayersList->m_listHead; mp_next != (const XUID *)i; mp_next = (const XUID *)mp_next[1].m_id )
  {
    if ( !mp_next && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\libs\\ntl\\ntl\\list\\list.h", 97, ASSERT_TYPE_ASSERT, "( mp_node )", (const char *)&queryFormat, "mp_node") )
      __debugbreak();
    if ( !OnlineMatchmakerOmniscient::FindPlayer(this, mp_next + 2, &it) )
    {
      if ( !mp_next && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\libs\\ntl\\ntl\\list\\list.h", 97, ASSERT_TYPE_ASSERT, "( mp_node )", (const char *)&queryFormat, "mp_node") )
        __debugbreak();
      OnlineMatchmakerOmniscient::AddPlayerFromDW(this, mp_next[2], eNEW);
    }
    if ( !mp_next && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\libs\\ntl\\ntl\\list\\list.h", 109, ASSERT_TYPE_ASSERT, "( mp_node )", (const char *)&queryFormat, "mp_node") )
      __debugbreak();
  }
  v6 = this->m_playerList.m_listHead.m_sentinel.mp_next;
  for ( j = &this->m_playerList.m_listHead; v6 != (ntl::internal::list_node_base *)j; v6 = v6->mp_next )
  {
    if ( !v6 && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\libs\\ntl\\ntl\\list\\list.h", 103, ASSERT_TYPE_ASSERT, "( mp_node )", (const char *)&queryFormat, "mp_node") )
      __debugbreak();
    v8 = (XUID *)expectedPlayersList->m_listHead.m_sentinel.mp_next;
    if ( i == (ntl::internal::list_head_base<ntl::internal::list_node<XUID> > *)v8 )
      goto LABEL_41;
    m_id = expectedPlayersList->m_listHead.m_sentinel.mp_next;
    do
    {
      if ( !m_id && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\libs\\ntl\\ntl\\list\\list.h", 97, ASSERT_TYPE_ASSERT, "( mp_node )", (const char *)&queryFormat, "mp_node") )
        __debugbreak();
      if ( XUID::operator==(v8 + 2, (const XUID *)&v6[6].mp_next) )
        break;
      if ( !v8 && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\libs\\ntl\\ntl\\list\\list.h", 109, ASSERT_TYPE_ASSERT, "( mp_node )", (const char *)&queryFormat, "mp_node") )
        __debugbreak();
      m_id = (ntl::internal::list_node_base *)v8[1].m_id;
      v8 = (XUID *)m_id;
    }
    while ( m_id != (ntl::internal::list_node_base *)i );
    j = &this->m_playerList.m_listHead;
    if ( i == (ntl::internal::list_head_base<ntl::internal::list_node<XUID> > *)v8 )
    {
LABEL_41:
      if ( !v6 && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\libs\\ntl\\ntl\\list\\list.h", 103, ASSERT_TYPE_ASSERT, "( mp_node )", (const char *)&queryFormat, "mp_node") )
        __debugbreak();
      if ( BYTE1(v6[7].mp_next) )
      {
        v10 = XUID::ToDevString((XUID *)&v6[6].mp_next);
        Com_Printf(25, "\t\tPrimary account player %s unknown to DW in expected player list!\n", v10);
        StateString = OnlineMatchmakerOmniscient::GetStateString(this, (const MatchmakerOmniscientState)this->m_state);
        v12 = XUID::ToString((XUID *)&v6[6].mp_next);
        v13 = j_va("{\"state\":\"failed\", \"error\"=\"Found primary player that the backend is unaware of [%s]\",\"state\"=\"%s\"}", v12, StateString);
        OnlineMatchmakerOmniscient::Log(this, "ReconcileExpectedPlayers", v13, NULL, NULL, 0i64);
        v14 = OnlineTimeSeriesLog::Get();
        OnlineTimeSeriesLog::WriteEventCounter(v14, "mming.ReconcileExpectedPlayers.unexpected_local.error.count", 1u);
      }
    }
    if ( !v6 && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\libs\\ntl\\ntl\\list\\list.h", 109, ASSERT_TYPE_ASSERT, "( mp_node )", (const char *)&queryFormat, "mp_node") )
      __debugbreak();
  }
  Com_Printf(25, "[MM] %s COMPLETE.\n", "OnlineMatchmakerOmniscient::ReconcileExpectedPlayers");
}

/*
==============
OnlineMatchmakerOmniscient::ReconcilePlayerListWithParty
==============
*/
void OnlineMatchmakerOmniscient::ReconcilePlayerListWithParty(OnlineMatchmakerOmniscient *this, PartyData *partyData)
{
  ntl::internal::list_node<OnlineMatchmakerOmniscient::Player> *mp_next; 
  ntl::internal::list_head_base<ntl::internal::list_node<OnlineMatchmakerOmniscient::Player> > *p_m_listHead; 
  ntl::internal::list_node<OnlineMatchmakerOmniscient::Player> *v6; 
  ntl::internal::list_iterator<OnlineMatchmakerOmniscient::Player,ntl::internal::list_node<OnlineMatchmakerOmniscient::Player>,OnlineMatchmakerOmniscient::Player *,OnlineMatchmakerOmniscient::Player &> it; 
  ntl::internal::list_iterator<OnlineMatchmakerOmniscient::Player,ntl::internal::list_node<OnlineMatchmakerOmniscient::Player>,OnlineMatchmakerOmniscient::Player *,OnlineMatchmakerOmniscient::Player &> result; 

  mp_next = (ntl::internal::list_node<OnlineMatchmakerOmniscient::Player> *)this->m_playerList.m_listHead.m_sentinel.mp_next;
  p_m_listHead = &this->m_playerList.m_listHead;
  it.mp_node = mp_next;
  if ( mp_next != (ntl::internal::list_node<OnlineMatchmakerOmniscient::Player> *)&this->m_playerList.m_listHead )
  {
    v6 = mp_next;
    do
    {
      if ( !v6 && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\libs\\ntl\\ntl\\list\\list.h", 103, ASSERT_TYPE_ASSERT, "( mp_node )", (const char *)&queryFormat, "mp_node") )
        __debugbreak();
      if ( Party_FindMemberByXUID_AllowNotPresent(partyData, mp_next->m_data.m_userId) >= 0 )
      {
        v6 = (ntl::internal::list_node<OnlineMatchmakerOmniscient::Player> *)mp_next->mp_next;
        mp_next = v6;
        it.mp_node = v6;
      }
      else
      {
        mp_next = OnlineMatchmakerOmniscient::ErasePlayer(this, &result, &it)->mp_node;
        it.mp_node = mp_next;
        v6 = mp_next;
      }
    }
    while ( mp_next != (ntl::internal::list_node<OnlineMatchmakerOmniscient::Player> *)p_m_listHead );
  }
  OnlineMatchmakerOmniscient::AddPlayersFromParty(this, partyData);
}

/*
==============
OnlineMatchmakerOmniscient::RegisterLUIFunctions
==============
*/
void OnlineMatchmakerOmniscient::RegisterLUIFunctions(lua_State *luaVM)
{
  int v2; 
  LUIMethod<OnlineMatchmakerOmniscient> *v3; 
  int i; 

  if ( luaVM )
  {
    j_lua_getfield(luaVM, -10002, "Matchmaking");
    if ( !j_lua_type(luaVM, -1) )
    {
      j_lua_settop(luaVM, -2);
      j_lua_createtable(luaVM, 0, 0);
      j_lua_setfield(luaVM, -10002, "Matchmaking");
      j_lua_getfield(luaVM, -10002, "Matchmaking");
    }
    if ( j_lua_type(luaVM, -1) != 5 && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\lui\\lui.h", 193, ASSERT_TYPE_ASSERT, "((lua_type(luaVM, (-1)) == 5))", (const char *)&queryFormat, "lua_istable( luaVM, -1 )") )
      __debugbreak();
    v2 = j_lua_gettop(luaVM);
    v3 = LUIMethod<OnlineMatchmakerOmniscient>::list;
    for ( i = v2; v3; v3 = v3->next )
    {
      j_lua_pushstring(luaVM, v3->name);
      j_lua_pushcclosure(luaVM, v3->func, 0);
      j_lua_settable(luaVM, i);
    }
    j_lua_settop(luaVM, -2);
  }
  else if ( CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\online\\online_matchmaker.cpp", 7834, ASSERT_TYPE_ASSERT, "(luaVM)", (const char *)&queryFormat, "luaVM") )
  {
    __debugbreak();
  }
}

/*
==============
OnlineMatchmakerOmniscient::RemoteFailedToJoin
==============
*/
void OnlineMatchmakerOmniscient::RemoteFailedToJoin(OnlineMatchmakerOmniscient *this, const XUID uid)
{
  const char *v3; 
  ntl::internal::list_node<OnlineMatchmakerOmniscient::Player> *mp_node; 
  XUID v5; 
  XUID xuid; 
  ntl::internal::list_iterator<OnlineMatchmakerOmniscient::Player,ntl::internal::list_node<OnlineMatchmakerOmniscient::Player>,OnlineMatchmakerOmniscient::Player *,OnlineMatchmakerOmniscient::Player &> it; 

  v5.m_id = uid.m_id;
  OnlineMatchmakerOmniscient::Log(this, "RemoteFailedToJoin", (const char *)&queryFormat.fmt + 3, NULL, NULL, 0i64);
  if ( XUID::IsValid(&v5) )
  {
    xuid.m_id = v5.m_id;
    v3 = XUID::ToDevString(&xuid);
    Com_Printf(25, "[MM] %s - removing player - %s\n", "OnlineMatchmakerOmniscient::RemovePlayerFromLocal", v3);
    if ( OnlineMatchmakerOmniscient::FindPlayer(this, &xuid, &it) )
    {
      mp_node = it.mp_node;
      if ( !it.mp_node && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\libs\\ntl\\ntl\\list\\list.h", 103, ASSERT_TYPE_ASSERT, "( mp_node )", (const char *)&queryFormat, "mp_node") )
        __debugbreak();
      mp_node->m_data.m_sessionStatus = eADDING_LOCAL_PLAYER_TO_DW;
    }
  }
}

/*
==============
OnlineMatchmakerOmniscient::RemovePlayerFromDW
==============
*/
char OnlineMatchmakerOmniscient::RemovePlayerFromDW(OnlineMatchmakerOmniscient *this, const XUID xuid)
{
  const char *v3; 
  ntl::internal::list_node<OnlineMatchmakerOmniscient::Player> *mp_node; 
  const char *v5; 
  const char *v6; 
  const char *v7; 
  const char *v8; 
  ntl::internal::list_iterator<OnlineMatchmakerOmniscient::Player,ntl::internal::list_node<OnlineMatchmakerOmniscient::Player>,OnlineMatchmakerOmniscient::Player *,OnlineMatchmakerOmniscient::Player &> it; 
  __int64 v11[5]; 
  XUID xuida; 

  xuida.m_id = xuid.m_id;
  v3 = XUID::ToDevString(&xuida);
  Com_Printf(25, "[MM] %s - removing player - %s\n", "OnlineMatchmakerOmniscient::RemovePlayerFromDW", v3);
  if ( !OnlineMatchmakerOmniscient::FindPlayer(this, &xuida, &it) )
    return 0;
  mp_node = it.mp_node;
  if ( !it.mp_node && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\libs\\ntl\\ntl\\list\\list.h", 103, ASSERT_TYPE_ASSERT, "( mp_node )", (const char *)&queryFormat, "mp_node") )
    __debugbreak();
  v11[0] = (__int64)"eNONE";
  v11[1] = (__int64)"eINITED";
  v11[2] = (__int64)"eCONNECTED";
  v11[3] = (__int64)"eDISCONNECTED";
  v11[4] = (__int64)"eUNKNOWN";
  v5 = (const char *)v11[mp_node->m_data.m_sessionStatus];
  v6 = XUID::ToString(&xuida);
  v7 = j_va("{\"status\":\"removing player\",\"player\":%s,\"player_session_status\":\"%s\"}", v6, v5);
  OnlineMatchmakerOmniscient::Log(this, "RemovePlayerFromDW", v7, NULL, NULL, 0i64);
  v8 = XUID::ToString(&xuida);
  Com_Printf(131097, "[MM] %s removing player %s and setting to eWONT_CONNECT\n", "OnlineMatchmakerOmniscient::RemovePlayerFromDW", v8);
  OnlineMatchmakerOmniscient::SetPlayerQueuedStatus(this, &mp_node->m_data, eREMOTE_WAITING_FOR_MMING_TOKEN);
  return 1;
}

/*
==============
OnlineMatchmakerOmniscient::RemovePlayerFromLocal
==============
*/
char OnlineMatchmakerOmniscient::RemovePlayerFromLocal(OnlineMatchmakerOmniscient *this, const XUID xuid)
{
  const char *v3; 
  ntl::internal::list_node<OnlineMatchmakerOmniscient::Player> *mp_node; 
  XUID xuida; 
  ntl::internal::list_iterator<OnlineMatchmakerOmniscient::Player,ntl::internal::list_node<OnlineMatchmakerOmniscient::Player>,OnlineMatchmakerOmniscient::Player *,OnlineMatchmakerOmniscient::Player &> it; 

  xuida.m_id = xuid.m_id;
  v3 = XUID::ToDevString(&xuida);
  Com_Printf(25, "[MM] %s - removing player - %s\n", "OnlineMatchmakerOmniscient::RemovePlayerFromLocal", v3);
  if ( !OnlineMatchmakerOmniscient::FindPlayer(this, &xuida, &it) )
    return 0;
  mp_node = it.mp_node;
  if ( !it.mp_node && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\libs\\ntl\\ntl\\list\\list.h", 103, ASSERT_TYPE_ASSERT, "( mp_node )", (const char *)&queryFormat, "mp_node") )
    __debugbreak();
  mp_node->m_data.m_sessionStatus = eADDING_LOCAL_PLAYER_TO_DW;
  return 1;
}

/*
==============
OnlineMatchmakerOmniscient::RequestGameLobbyRemainIntact
==============
*/
void OnlineMatchmakerOmniscient::RequestGameLobbyRemainIntact(OnlineMatchmakerOmniscient *this)
{
  Com_Printf(131097, "[MM] %s\n", "OnlineMatchmakerOmniscient::RequestGameLobbyRemainIntact");
  this->m_mmingData.m_requestGameLobbyRemainIntact = 1;
}

/*
==============
OnlineMatchmakerOmniscient::RequestUpdateHostDoc
==============
*/
void OnlineMatchmakerOmniscient::RequestUpdateHostDoc(OnlineMatchmakerOmniscient *this)
{
  this->m_lobbyData.m_lobbyDocIsDirty = 1;
}

/*
==============
MatchMakerOmniLobbyData::Reset
==============
*/
void MatchMakerOmniLobbyData::Reset(MatchMakerOmniLobbyData *this)
{
  ntl::internal::list_head_base<ntl::internal::list_node<XUID> > *p_m_listHead; 
  ntl::internal::pool_allocator_pointer_freelist::free_item_pointer *mp_next; 
  ntl::internal::pool_allocator_pointer_freelist::free_item_pointer *v4; 
  ntl::internal::list_head_base<ntl::internal::list_node<PlayerValue<enum MemberStatus> > > *v5; 
  ntl::internal::pool_allocator_pointer_freelist::free_item_pointer *v6; 
  ntl::internal::pool_allocator_pointer_freelist::free_item_pointer *v7; 
  ntl::internal::list_head_base<ntl::internal::list_node<XUID> > *v8; 
  ntl::internal::pool_allocator_pointer_freelist::free_item_pointer *v9; 
  ntl::internal::pool_allocator_pointer_freelist::free_item_pointer *v10; 
  ntl::internal::list_head_base<ntl::internal::list_node<PlayerValue<int> > > *v11; 
  ntl::internal::pool_allocator_pointer_freelist::free_item_pointer *v12; 
  ntl::internal::pool_allocator_pointer_freelist::free_item_pointer *v13; 
  ntl::internal::list_head_base<ntl::internal::list_node<PlayerValue<int> > > *v14; 
  ntl::internal::pool_allocator_pointer_freelist::free_item_pointer *v15; 
  ntl::internal::pool_allocator_pointer_freelist::free_item_pointer *v16; 
  ntl::internal::list_head_base<ntl::internal::list_node<PlayerValue<unsigned __int64> > > *v17; 
  ntl::internal::pool_allocator_pointer_freelist::free_item_pointer *v18; 
  ntl::internal::pool_allocator_pointer_freelist::free_item_pointer *v19; 
  ntl::internal::list_head_base<ntl::internal::list_node<PlayerValue<float> > > *v20; 
  ntl::internal::pool_allocator_pointer_freelist::free_item_pointer *v21; 
  ntl::internal::pool_allocator_pointer_freelist::free_item_pointer *v22; 
  ntl::internal::list_head_base<ntl::internal::list_node<XUID> > *v23; 
  ntl::internal::pool_allocator_pointer_freelist::free_item_pointer *v24; 
  ntl::internal::pool_allocator_pointer_freelist::free_item_pointer *v25; 
  ntl::internal::list_head_base<ntl::internal::list_node<XUID> > *v26; 
  ntl::internal::pool_allocator_pointer_freelist::free_item_pointer *v27; 
  ntl::internal::pool_allocator_pointer_freelist::free_item_pointer *v28; 
  ntl::internal::list_head_base<ntl::internal::list_node<PlayerValue<int> > > *v29; 
  ntl::internal::pool_allocator_pointer_freelist::free_item_pointer *v30; 
  ntl::internal::pool_allocator_pointer_freelist::free_item_pointer *v31; 

  this->m_lobbyDocIsDirty = 0;
  *(_QWORD *)&this->m_timeToUpdateIfDirty = 0i64;
  p_m_listHead = &this->m_expectedPlayers.m_listHead;
  this->m_timeToSendKeepAliveMax_ms = 0;
  this->m_lobbyid = 0i64;
  this->m_updateId = 0i64;
  this->m_amITheLobbyHost = 0;
  *(_WORD *)&this->m_canGameStart = 0;
  this->m_gameStartedCurrent = 0;
  this->m_qosing = 0;
  this->m_numQoses = 0;
  this->m_tournamentID = 0i64;
  this->m_tournamentRound = 0;
  mp_next = (ntl::internal::pool_allocator_pointer_freelist::free_item_pointer *)this->m_expectedPlayers.m_listHead.m_sentinel.mp_next;
  if ( mp_next != (ntl::internal::pool_allocator_pointer_freelist::free_item_pointer *)&this->m_expectedPlayers.m_listHead )
  {
    do
    {
      v4 = mp_next[1].mp_next;
      mp_next->mp_next = (ntl::internal::pool_allocator_pointer_freelist::free_item_pointer *)this->m_expectedPlayers.m_freelist.m_head;
      this->m_expectedPlayers.m_freelist.m_head.mp_next = mp_next;
      mp_next = v4;
    }
    while ( v4 != (ntl::internal::pool_allocator_pointer_freelist::free_item_pointer *)p_m_listHead );
  }
  p_m_listHead->m_sentinel.mp_prev = &p_m_listHead->m_sentinel;
  p_m_listHead->m_sentinel.mp_next = &p_m_listHead->m_sentinel;
  v5 = &this->m_playerStatusList.m_listHead;
  v6 = (ntl::internal::pool_allocator_pointer_freelist::free_item_pointer *)this->m_playerStatusList.m_listHead.m_sentinel.mp_next;
  if ( v6 != (ntl::internal::pool_allocator_pointer_freelist::free_item_pointer *)&this->m_playerStatusList.m_listHead )
  {
    do
    {
      v7 = v6[1].mp_next;
      v6->mp_next = (ntl::internal::pool_allocator_pointer_freelist::free_item_pointer *)this->m_playerStatusList.m_freelist.m_head;
      this->m_playerStatusList.m_freelist.m_head.mp_next = v6;
      v6 = v7;
    }
    while ( v7 != (ntl::internal::pool_allocator_pointer_freelist::free_item_pointer *)v5 );
  }
  v5->m_sentinel.mp_prev = &v5->m_sentinel;
  this->m_playerStatusList.m_listHead.m_sentinel.mp_next = &this->m_playerStatusList.m_listHead.m_sentinel;
  v8 = &this->m_migrationList.m_listHead;
  v9 = (ntl::internal::pool_allocator_pointer_freelist::free_item_pointer *)this->m_migrationList.m_listHead.m_sentinel.mp_next;
  if ( v9 != (ntl::internal::pool_allocator_pointer_freelist::free_item_pointer *)&this->m_migrationList.m_listHead )
  {
    do
    {
      v10 = v9[1].mp_next;
      v9->mp_next = (ntl::internal::pool_allocator_pointer_freelist::free_item_pointer *)this->m_migrationList.m_freelist.m_head;
      this->m_migrationList.m_freelist.m_head.mp_next = v9;
      v9 = v10;
    }
    while ( v10 != (ntl::internal::pool_allocator_pointer_freelist::free_item_pointer *)v8 );
  }
  v8->m_sentinel.mp_prev = &v8->m_sentinel;
  this->m_migrationList.m_listHead.m_sentinel.mp_next = &this->m_migrationList.m_listHead.m_sentinel;
  v11 = &this->m_teamAssignmentList.m_listHead;
  v12 = (ntl::internal::pool_allocator_pointer_freelist::free_item_pointer *)this->m_teamAssignmentList.m_listHead.m_sentinel.mp_next;
  if ( v12 != (ntl::internal::pool_allocator_pointer_freelist::free_item_pointer *)&this->m_teamAssignmentList.m_listHead )
  {
    do
    {
      v13 = v12[1].mp_next;
      v12->mp_next = (ntl::internal::pool_allocator_pointer_freelist::free_item_pointer *)this->m_teamAssignmentList.m_freelist.m_head;
      this->m_teamAssignmentList.m_freelist.m_head.mp_next = v12;
      v12 = v13;
    }
    while ( v13 != (ntl::internal::pool_allocator_pointer_freelist::free_item_pointer *)v11 );
  }
  v11->m_sentinel.mp_prev = &v11->m_sentinel;
  this->m_teamAssignmentList.m_listHead.m_sentinel.mp_next = &this->m_teamAssignmentList.m_listHead.m_sentinel;
  v14 = &this->m_squadAssignmentList.m_listHead;
  v15 = (ntl::internal::pool_allocator_pointer_freelist::free_item_pointer *)this->m_squadAssignmentList.m_listHead.m_sentinel.mp_next;
  if ( v15 != (ntl::internal::pool_allocator_pointer_freelist::free_item_pointer *)&this->m_squadAssignmentList.m_listHead )
  {
    do
    {
      v16 = v15[1].mp_next;
      v15->mp_next = (ntl::internal::pool_allocator_pointer_freelist::free_item_pointer *)this->m_squadAssignmentList.m_freelist.m_head;
      this->m_squadAssignmentList.m_freelist.m_head.mp_next = v15;
      v15 = v16;
    }
    while ( v16 != (ntl::internal::pool_allocator_pointer_freelist::free_item_pointer *)v14 );
  }
  v14->m_sentinel.mp_prev = &v14->m_sentinel;
  this->m_squadAssignmentList.m_listHead.m_sentinel.mp_next = &this->m_squadAssignmentList.m_listHead.m_sentinel;
  v17 = &this->m_matchmakingIdList.m_listHead;
  v18 = (ntl::internal::pool_allocator_pointer_freelist::free_item_pointer *)this->m_matchmakingIdList.m_listHead.m_sentinel.mp_next;
  if ( v18 != (ntl::internal::pool_allocator_pointer_freelist::free_item_pointer *)&this->m_matchmakingIdList.m_listHead )
  {
    do
    {
      v19 = v18[1].mp_next;
      v18->mp_next = (ntl::internal::pool_allocator_pointer_freelist::free_item_pointer *)this->m_matchmakingIdList.m_freelist.m_head;
      this->m_matchmakingIdList.m_freelist.m_head.mp_next = v18;
      v18 = v19;
    }
    while ( v19 != (ntl::internal::pool_allocator_pointer_freelist::free_item_pointer *)v17 );
  }
  v17->m_sentinel.mp_prev = &v17->m_sentinel;
  this->m_matchmakingIdList.m_listHead.m_sentinel.mp_next = &this->m_matchmakingIdList.m_listHead.m_sentinel;
  v20 = &this->m_performanceValueList.m_listHead;
  v21 = (ntl::internal::pool_allocator_pointer_freelist::free_item_pointer *)this->m_performanceValueList.m_listHead.m_sentinel.mp_next;
  if ( v21 != (ntl::internal::pool_allocator_pointer_freelist::free_item_pointer *)&this->m_performanceValueList.m_listHead )
  {
    do
    {
      v22 = v21[1].mp_next;
      v21->mp_next = (ntl::internal::pool_allocator_pointer_freelist::free_item_pointer *)this->m_performanceValueList.m_freelist.m_head;
      this->m_performanceValueList.m_freelist.m_head.mp_next = v21;
      v21 = v22;
    }
    while ( v22 != (ntl::internal::pool_allocator_pointer_freelist::free_item_pointer *)v20 );
  }
  v20->m_sentinel.mp_prev = &v20->m_sentinel;
  this->m_performanceValueList.m_listHead.m_sentinel.mp_next = &this->m_performanceValueList.m_listHead.m_sentinel;
  v23 = &this->m_paidUsersList.m_listHead;
  v24 = (ntl::internal::pool_allocator_pointer_freelist::free_item_pointer *)this->m_paidUsersList.m_listHead.m_sentinel.mp_next;
  if ( v24 != (ntl::internal::pool_allocator_pointer_freelist::free_item_pointer *)&this->m_paidUsersList.m_listHead )
  {
    do
    {
      v25 = v24[1].mp_next;
      v24->mp_next = (ntl::internal::pool_allocator_pointer_freelist::free_item_pointer *)this->m_paidUsersList.m_freelist.m_head;
      this->m_paidUsersList.m_freelist.m_head.mp_next = v24;
      v24 = v25;
    }
    while ( v25 != (ntl::internal::pool_allocator_pointer_freelist::free_item_pointer *)v23 );
  }
  v23->m_sentinel.mp_prev = &v23->m_sentinel;
  this->m_paidUsersList.m_listHead.m_sentinel.mp_next = &this->m_paidUsersList.m_listHead.m_sentinel;
  v26 = &this->m_freemiumUsersList.m_listHead;
  v27 = (ntl::internal::pool_allocator_pointer_freelist::free_item_pointer *)this->m_freemiumUsersList.m_listHead.m_sentinel.mp_next;
  if ( v27 != (ntl::internal::pool_allocator_pointer_freelist::free_item_pointer *)&this->m_freemiumUsersList.m_listHead )
  {
    do
    {
      v28 = v27[1].mp_next;
      v27->mp_next = (ntl::internal::pool_allocator_pointer_freelist::free_item_pointer *)this->m_freemiumUsersList.m_freelist.m_head;
      this->m_freemiumUsersList.m_freelist.m_head.mp_next = v27;
      v27 = v28;
    }
    while ( v28 != (ntl::internal::pool_allocator_pointer_freelist::free_item_pointer *)v26 );
  }
  v26->m_sentinel.mp_prev = &v26->m_sentinel;
  this->m_freemiumUsersList.m_listHead.m_sentinel.mp_next = &this->m_freemiumUsersList.m_listHead.m_sentinel;
  v29 = &this->m_additionalSlotsRequestedList.m_listHead;
  v30 = (ntl::internal::pool_allocator_pointer_freelist::free_item_pointer *)this->m_additionalSlotsRequestedList.m_listHead.m_sentinel.mp_next;
  if ( v30 != (ntl::internal::pool_allocator_pointer_freelist::free_item_pointer *)&this->m_additionalSlotsRequestedList.m_listHead )
  {
    do
    {
      v31 = v30[1].mp_next;
      v30->mp_next = (ntl::internal::pool_allocator_pointer_freelist::free_item_pointer *)this->m_additionalSlotsRequestedList.m_freelist.m_head;
      this->m_additionalSlotsRequestedList.m_freelist.m_head.mp_next = v30;
      v30 = v31;
    }
    while ( v31 != (ntl::internal::pool_allocator_pointer_freelist::free_item_pointer *)v29 );
  }
  v29->m_sentinel.mp_prev = &v29->m_sentinel;
  this->m_additionalSlotsRequestedList.m_listHead.m_sentinel.mp_next = &this->m_additionalSlotsRequestedList.m_listHead.m_sentinel;
  this->m_gameid = 0;
  *(_WORD *)&this->m_shouldBackfill_JIP = 257;
  this->m_acceptLobbyMerges = 1;
  this->m_dcPrefs.m_numDataCenterPreferences = 0;
  this->m_hasDedicatedServer = 0;
  this->m_isGameInProgress = 0;
  memset_0(this->m_dvarOverrides, 0, sizeof(this->m_dvarOverrides));
  this->m_dvarOverrideCount = 0;
}

/*
==============
MatchmakingData::Reset
==============
*/
void MatchmakingData::Reset(MatchmakingData *this)
{
  ntl::internal::list_head_base<ntl::internal::list_node<PingBand> > *p_m_listHead; 
  MatchmakingData *mp_next; 
  bdBoolResult_vtbl *v3; 

  p_m_listHead = &this->m_pingBands.m_listHead;
  this->m_matchmakingId = 0i64;
  this->m_timeOut = 0;
  mp_next = (MatchmakingData *)this->m_pingBands.m_listHead.m_sentinel.mp_next;
  if ( mp_next != (MatchmakingData *)&this->m_pingBands.m_listHead )
  {
    do
    {
      v3 = mp_next->m_outstandingResult.__vftable;
      mp_next->m_matchmakingId = (unsigned __int64)this->m_pingBands.m_freelist.m_head.mp_next;
      this->m_pingBands.m_freelist.m_head.mp_next = (ntl::internal::pool_allocator_pointer_freelist::free_item_pointer *)mp_next;
      mp_next = (MatchmakingData *)v3;
    }
    while ( v3 != (bdBoolResult_vtbl *)p_m_listHead );
  }
  p_m_listHead->m_sentinel.mp_prev = &p_m_listHead->m_sentinel;
  this->m_pingBands.m_listHead.m_sentinel.mp_next = &this->m_pingBands.m_listHead.m_sentinel;
  this->m_requestGameLobbyRemainIntact = 0;
}

/*
==============
OnlineAsyncMatchmakingEventHandler::Reset
==============
*/
void OnlineAsyncMatchmakingEventHandler::Reset(OnlineAsyncMatchmakingEventHandler *this)
{
  this->m_matchmaker = NULL;
}

/*
==============
tCallbacks::Reset
==============
*/
void tCallbacks::Reset(tCallbacks *this)
{
  this->m_outstandingCallback = 0;
  *(_DWORD *)this->m_callbackWasSuccessful = 0;
  *(_WORD *)&this->m_callbackWasSuccessful[4] = 0;
  this->m_callbackWasSuccessful[6] = 0;
}

/*
==============
OnlineMatchmakerOmniscient::ResetBreak
==============
*/
void OnlineMatchmakerOmniscient::ResetBreak(OnlineMatchmakerOmniscient *this)
{
  ntl::internal::list_head_base<ntl::internal::list_node<OnlineMatchmakerOmniscient::Player> > *p_m_listHead; 
  ntl::internal::list_node_base *mp_next; 
  ntl::internal::list_head_base<ntl::internal::list_node<OnlineMatchmakerOmniscient::Player> > *v4; 
  ntl::internal::list_iterator<OnlineMatchmakerOmniscient::Player,ntl::internal::list_node<OnlineMatchmakerOmniscient::Player>,OnlineMatchmakerOmniscient::Player *,OnlineMatchmakerOmniscient::Player &> it; 
  ntl::internal::list_iterator<OnlineMatchmakerOmniscient::Player,ntl::internal::list_node<OnlineMatchmakerOmniscient::Player>,OnlineMatchmakerOmniscient::Player *,OnlineMatchmakerOmniscient::Player &> result; 

  OnlineMatchmakerOmniscient::Log(this, "ResetBreak", (const char *)&queryFormat.fmt + 3, NULL, NULL, 0i64);
  this->m_callbacks.m_lastLobbyStateCallbackMade = eNONE|eADDING_LOCAL_PLAYER_TO_DW;
  p_m_listHead = &this->m_playerList.m_listHead;
  it.mp_node = (ntl::internal::list_node<OnlineMatchmakerOmniscient::Player> *)this->m_playerList.m_listHead.m_sentinel.mp_next;
  if ( (ntl::internal::list_head_base<ntl::internal::list_node<OnlineMatchmakerOmniscient::Player> > *)it.mp_node != &this->m_playerList.m_listHead )
  {
    do
      it.mp_node = OnlineMatchmakerOmniscient::ErasePlayer(this, &result, &it)->mp_node;
    while ( (ntl::internal::list_head_base<ntl::internal::list_node<OnlineMatchmakerOmniscient::Player> > *)it.mp_node != p_m_listHead );
    mp_next = this->m_playerList.m_listHead.m_sentinel.mp_next;
    if ( mp_next != (ntl::internal::list_node_base *)p_m_listHead )
    {
      do
      {
        v4 = (ntl::internal::list_head_base<ntl::internal::list_node<OnlineMatchmakerOmniscient::Player> > *)mp_next->mp_next;
        bdUInt64Result::~bdUInt64Result((bdUInt64Result *)&mp_next[9].mp_next);
        bdReferencable::~bdReferencable((bdReferencable *)&mp_next[9].mp_next);
        mp_next->mp_prev = (ntl::internal::list_node_base *)this->m_playerList.m_freelist.m_head.mp_next;
        this->m_playerList.m_freelist.m_head.mp_next = (ntl::internal::pool_allocator_pointer_freelist::free_item_pointer *)mp_next;
        mp_next = &v4->m_sentinel;
      }
      while ( v4 != p_m_listHead );
    }
  }
  p_m_listHead->m_sentinel.mp_prev = &p_m_listHead->m_sentinel;
  this->m_playerList.m_listHead.m_sentinel.mp_next = &this->m_playerList.m_listHead.m_sentinel;
}

/*
==============
OnlineMatchmakerOmniscient::ResetCachedLocalPlayerInfos
==============
*/
void OnlineMatchmakerOmniscient::ResetCachedLocalPlayerInfos(OnlineMatchmakerOmniscient *this)
{
  s_matchmakingToken[0] = 0i64;
  qword_14B3631F8 = 0i64;
  *(_QWORD *)s_playerInfoChecksum[0].hash = 0i64;
  qword_14B3631D8 = 0i64;
  qword_14B3631E0 = 0i64;
  qword_14B3631E8 = 0i64;
  OnlineMatchmakerOmniscient::SetState(this, eIDLE);
}

/*
==============
OnlineMatchmakerOmniscient::ResetDisband
==============
*/
void OnlineMatchmakerOmniscient::ResetDisband(OnlineMatchmakerOmniscient *this)
{
  TaskManager *Instance; 

  OnlineMatchmakerOmniscient::Log(this, "ResetDisband", (const char *)&queryFormat.fmt + 3, NULL, NULL, 0i64);
  Instance = TaskManager::GetInstance();
  TaskManager::CancelTaskById(Instance, this->m_outstandingTaskId);
  if ( this->m_lobbyData.m_amITheLobbyHost )
    OnlineMatchmakerOmniscient::SetLobbyState(this, eFAILURE);
  else
    OnlineMatchmakerOmniscient::ResetLobby(this);
}

/*
==============
OnlineMatchmakerOmniscient::ResetInviteData
==============
*/
void OnlineMatchmakerOmniscient::ResetInviteData(OnlineMatchmakerOmniscient *this)
{
  const XUID *v2; 
  XUID result; 

  Com_Printf(25, "[MM] %s : Resetting all fields.\n", "OnlineMatchmakerOmniscient::ResetInviteData");
  this->m_callbacks.m_inviteCallback = NULL;
  v2 = XUID::NullXUID(&result);
  XUID::operator=(&this->m_params.m_inviteClientAttemptingToJoinUID, v2);
  this->m_params.m_lobbyIdToJoin = 0i64;
  this->m_params.m_inviteLocalJoiningControllerIndex = -1;
}

/*
==============
OnlineMatchmakerOmniscient::ResetLobby
==============
*/
void OnlineMatchmakerOmniscient::ResetLobby(OnlineMatchmakerOmniscient *this)
{
  const char *LobbyStateString; 
  const char *StateString; 
  const char *v4; 
  bool v5; 

  LobbyStateString = OnlineMatchmakerOmniscient::GetLobbyStateString(this, (const MatchmakerLobbyState)this->m_lobbyState);
  StateString = OnlineMatchmakerOmniscient::GetStateString(this, (const MatchmakerOmniscientState)this->m_state);
  v4 = j_va("{\"state\"=\"%s\",\"lobbystate\"=\"%s\"}", StateString, LobbyStateString);
  OnlineMatchmakerOmniscient::Log(this, "ResetLobby", v4, NULL, NULL, 0i64);
  v5 = this->m_lobbyState == eFAILURE;
  this->m_lobbyData.m_amITheLobbyHost = 0;
  if ( !v5 )
  {
    MatchMakerOmniLobbyData::Reset(&this->m_lobbyData);
    OnlineMatchmakerOmniscient::SetLobbyState(this, eIDLE);
    OnlineMatchmakerOmniscient::ResetMatchmaking(this);
    this->m_lobbyData.m_privateMatchId.m_id = 0i64;
  }
}

/*
==============
OnlineMatchmakerOmniscient::ResetLobbyData
==============
*/
void OnlineMatchmakerOmniscient::ResetLobbyData(OnlineMatchmakerOmniscient *this)
{
  OnlineMatchmakerOmniscient::Log(this, "ResetLobbyData", (const char *)&queryFormat.fmt + 3, NULL, NULL, 0i64);
  OnlineMatchmakerOmniscient::SetLobbyState(this, eIDLE);
  this->m_lobbyData.m_lobbyid = 0i64;
  this->m_lobbyData.m_updateId = 0i64;
  this->m_lobbyData.m_playList = -1;
  *(_QWORD *)&this->m_lobbyData.m_timeToSendKeepAlive_ms = 0i64;
}

/*
==============
OnlineMatchId::ResetMatchId
==============
*/
void OnlineMatchId::ResetMatchId(void)
{
  const char *v0; 

  OnlineMatchId::sm_currentId = CreateUniqueId();
  v0 = j_va("%zu", OnlineMatchId::sm_currentId);
  Com_Printf(131097, "[MM] MatchId - %s\n", v0);
}

/*
==============
OnlineMatchmakerOmniscient::ResetMatchmaking
==============
*/
void OnlineMatchmakerOmniscient::ResetMatchmaking(OnlineMatchmakerOmniscient *this)
{
  const char *LobbyStateString; 
  const char *StateString; 
  const char *v4; 
  TaskManager *Instance; 
  MatchmakerOmniscientState m_state; 
  ntl::internal::list_node<OnlineMatchmakerOmniscient::Player> *mp_next; 
  ntl::internal::list_node<OnlineMatchmakerOmniscient::Player> *v8; 
  ntl::internal::list_iterator<OnlineMatchmakerOmniscient::Player,ntl::internal::list_node<OnlineMatchmakerOmniscient::Player>,OnlineMatchmakerOmniscient::Player *,OnlineMatchmakerOmniscient::Player &> it; 
  ntl::internal::list_iterator<OnlineMatchmakerOmniscient::Player,ntl::internal::list_node<OnlineMatchmakerOmniscient::Player>,OnlineMatchmakerOmniscient::Player *,OnlineMatchmakerOmniscient::Player &> result; 

  LobbyStateString = OnlineMatchmakerOmniscient::GetLobbyStateString(this, (const MatchmakerLobbyState)this->m_lobbyState);
  StateString = OnlineMatchmakerOmniscient::GetStateString(this, (const MatchmakerOmniscientState)this->m_state);
  v4 = j_va("{\"state\"=\"%s\",\"lobbystate\"=\"%s\"}", StateString, LobbyStateString);
  OnlineMatchmakerOmniscient::Log(this, "ResetMatchmaking", v4, NULL, NULL, 0i64);
  Instance = TaskManager::GetInstance();
  TaskManager::CancelTaskById(Instance, this->m_outstandingTaskId);
  m_state = this->m_state;
  if ( this->m_mmingData.m_matchmakingId )
  {
    if ( (unsigned int)(m_state - 4) <= 3 )
    {
      OnlineMatchmakerOmniscient::SetState(this, eFAILURE|eADDING_LOCAL_PLAYER_TO_DW);
    }
    else if ( (unsigned int)(m_state - 9) > 1 )
    {
      this->m_mmingData.m_matchmakingId = 0i64;
    }
  }
  else if ( (unsigned int)(m_state - 10) > 1 )
  {
    if ( m_state > eADDING_LOCAL_PLAYER_TO_DW )
      OnlineMatchmakerOmniscient::SetState(this, eADDING_LOCAL_PLAYER_TO_DW);
    Com_Printf(25, "[MM] %s : Resetting all matchmaking data and callbacks.\n", "OnlineMatchmakerOmniscient::ResetMatchmaking");
    OnlineMatchmakerTelemetry::ResetMatchmaking(&this->m_telemetry);
    mp_next = (ntl::internal::list_node<OnlineMatchmakerOmniscient::Player> *)this->m_playerList.m_listHead.m_sentinel.mp_next;
    it.mp_node = mp_next;
    if ( mp_next != (ntl::internal::list_node<OnlineMatchmakerOmniscient::Player> *)&this->m_playerList.m_listHead )
    {
      v8 = mp_next;
      do
      {
        if ( !v8 && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\libs\\ntl\\ntl\\list\\list.h", 103, ASSERT_TYPE_ASSERT, "( mp_node )", (const char *)&queryFormat, "mp_node") )
          __debugbreak();
        if ( Party_FindMemberByXUID_AllowNotPresent(&g_partyData, mp_next->m_data.m_userId) >= 0 )
        {
          v8 = (ntl::internal::list_node<OnlineMatchmakerOmniscient::Player> *)mp_next->mp_next;
          mp_next = v8;
          it.mp_node = v8;
        }
        else
        {
          mp_next = OnlineMatchmakerOmniscient::ErasePlayer(this, &result, &it)->mp_node;
          it.mp_node = mp_next;
          v8 = mp_next;
        }
      }
      while ( mp_next != (ntl::internal::list_node<OnlineMatchmakerOmniscient::Player> *)&this->m_playerList.m_listHead );
    }
    OnlineMatchmakerOmniscient::AddPlayersFromParty(this, &g_partyData);
    MatchmakingData::Reset(&this->m_mmingData);
    this->m_callbacks.m_outstandingCallback = 0;
    *(_DWORD *)this->m_callbacks.m_callbackWasSuccessful = 0;
    *(_WORD *)&this->m_callbacks.m_callbackWasSuccessful[4] = 0;
    this->m_callbacks.m_callbackWasSuccessful[6] = 0;
  }
}

/*
==============
OnlineMatchmakerOmniscient::RunCancelMatchmaking
==============
*/
void OnlineMatchmakerOmniscient::RunCancelMatchmaking(OnlineMatchmakerOmniscient *this)
{
  DWServicesAccess *Instance; 
  DWAsyncMatchMaking *AsyncMatchmaking; 
  TaskCreateRequest *matched; 
  bdRemoteTask *v5; 
  TaskManager *v6; 
  OnlineTimeSeriesLog *v7; 
  const char *v8; 
  const char *v9; 
  Windows::Foundation::IAsyncInfo *m_asyncInfo; 
  OnlineTimeSeriesLog *v11; 
  TaskCreateResult pTaskCreateResult; 
  TaskCreateRequest pTaskCreateRequest; 
  bdReference<bdRemoteTask> result; 

  if ( this->m_mmingData.m_matchmakingId )
  {
    *(_QWORD *)&pTaskCreateRequest.m_controllerIndex = -1i64;
    memset(&pTaskCreateRequest.m_appData, 0, 48);
    pTaskCreateRequest.m_cancelTaskOnSignoutEvent = 1;
    pTaskCreateRequest.m_timeoutInSeconds = 0;
    pTaskCreateResult.m_localTaskId = 0;
    pTaskCreateResult.m_task = NULL;
    Instance = DWServicesAccess::GetInstance();
    AsyncMatchmaking = DWServicesAccess::GetAsyncMatchmaking(Instance, this->m_controllerIndex);
    matched = (TaskCreateRequest *)DWAsyncMatchMaking::cancelMatchMaking(AsyncMatchmaking, &result, this->m_mmingData.m_matchmakingId, &this->m_mmingData.m_outstandingResult);
    if ( matched != (TaskCreateRequest *)&pTaskCreateRequest.m_remoteDemonwareTask )
    {
      v5 = *(bdRemoteTask **)&matched->m_controllerIndex;
      pTaskCreateRequest.m_remoteDemonwareTask.m_ptr = v5;
      if ( v5 )
        _InterlockedExchangeAdd((volatile signed __int32 *)&v5->m_refCount, 1u);
    }
    if ( result.m_ptr && _InterlockedExchangeAdd((volatile signed __int32 *)&result.m_ptr->m_refCount, 0xFFFFFFFF) == 1 && result.m_ptr )
      ((void (__fastcall *)(bdRemoteTask *, __int64))result.m_ptr->~bdReferencable)(result.m_ptr, 1i64);
    pTaskCreateRequest.m_appData = this;
    pTaskCreateRequest.m_onCompletionCallback = OnlineMatchmakerOmniscient::staticTaskCancelMatchmaking;
    pTaskCreateRequest.m_controllerIndex = this->m_controllerIndex;
    if ( pTaskCreateRequest.m_remoteDemonwareTask.m_ptr && (v6 = TaskManager::GetInstance(), TaskManager::CreateTask(v6, &pTaskCreateRequest, &pTaskCreateResult)) )
    {
      OnlineMatchmakerOmniscient::SetState(this, eNONE);
      v7 = OnlineTimeSeriesLog::Get();
      v8 = "mming.cancelmatchmaking.initiate.count";
    }
    else
    {
      v9 = "IS NOT";
      if ( !pTaskCreateRequest.m_remoteDemonwareTask.m_ptr )
        v9 = "IS";
      Com_PrintError(25, "[MM] %s : Failed to cancel. Remote task %s NULL.\n", "OnlineMatchmakerOmniscient::RunCancelMatchmaking", v9);
      OnlineMatchmakerOmniscient::SetState(this, eFAILURE|eREADY);
      v7 = OnlineTimeSeriesLog::Get();
      v8 = "mming.cancelmatchmaking.failure.count";
    }
    OnlineTimeSeriesLog::WriteEventCounter(v7, v8, 1u);
    pTaskCreateRequest.m_onCompletionCallback = NULL;
    pTaskCreateRequest.m_onUpdateCallback = NULL;
    pTaskCreateRequest.m_appSecondaryCallback = NULL;
    pTaskCreateRequest.m_timeoutInSeconds = 0;
    m_asyncInfo = pTaskCreateRequest.m_asyncInfo;
    if ( pTaskCreateRequest.m_asyncInfo )
    {
      pTaskCreateRequest.m_asyncInfo->__abi_Release(pTaskCreateRequest.m_asyncInfo);
      m_asyncInfo = NULL;
      pTaskCreateRequest.m_asyncInfo = NULL;
    }
    if ( pTaskCreateRequest.m_remoteDemonwareTask.m_ptr )
    {
      if ( _InterlockedExchangeAdd((volatile signed __int32 *)&pTaskCreateRequest.m_remoteDemonwareTask.m_ptr->m_refCount, 0xFFFFFFFF) == 1 )
      {
        if ( pTaskCreateRequest.m_remoteDemonwareTask.m_ptr )
          ((void (__fastcall *)(bdRemoteTask *, __int64))pTaskCreateRequest.m_remoteDemonwareTask.m_ptr->~bdReferencable)(pTaskCreateRequest.m_remoteDemonwareTask.m_ptr, 1i64);
        pTaskCreateRequest.m_remoteDemonwareTask.m_ptr = NULL;
      }
      m_asyncInfo = pTaskCreateRequest.m_asyncInfo;
    }
    if ( m_asyncInfo )
      m_asyncInfo->__abi_Release(m_asyncInfo);
  }
  else
  {
    Com_PrintError(25, "[MM] %s : Failed to cancel. matchmaking id is 0\n", "OnlineMatchmakerOmniscient::RunCancelMatchmaking");
    OnlineMatchmakerOmniscient::SetState(this, eFAILURE|eREADY);
    v11 = OnlineTimeSeriesLog::Get();
    OnlineTimeSeriesLog::WriteEventCounter(v11, "mming.cancelmatchmaking.failure.count", 1u);
  }
}

/*
==============
OnlineMatchmakerOmniscient::RunCancelingMatchmaking
==============
*/
void OnlineMatchmakerOmniscient::RunCancelingMatchmaking(OnlineMatchmakerOmniscient *this)
{
  ;
}

/*
==============
OnlineMatchmakerOmniscient::RunFailure
==============
*/
void OnlineMatchmakerOmniscient::RunFailure(OnlineMatchmakerOmniscient *this)
{
  unsigned __int16 m_outstandingCallback; 
  unsigned __int16 v3; 

  OnlineMatchmakerOmniscient::ResetLobby(this);
  if ( this->m_callbacks.m_inviteCallback )
  {
    m_outstandingCallback = this->m_callbacks.m_outstandingCallback;
    if ( (m_outstandingCallback & 0x20) == 0 )
    {
      this->m_callbacks.m_outstandingCallback = m_outstandingCallback | 0x20;
      this->m_callbacks.m_callbackWasSuccessful[5] = 3;
    }
  }
  else if ( this->m_callbacks.m_failureCallback )
  {
    v3 = this->m_callbacks.m_outstandingCallback;
    if ( (v3 & 0x40) == 0 )
    {
      this->m_callbacks.m_outstandingCallback = v3 | 0x40;
      this->m_callbacks.m_callbackWasSuccessful[6] = 0;
    }
  }
}

/*
==============
OnlineMatchmakerOmniscient::RunIdle
==============
*/
void OnlineMatchmakerOmniscient::RunIdle(OnlineMatchmakerOmniscient *this)
{
  ;
}

/*
==============
OnlineMatchmakerOmniscient::RunInitMatchmaking
==============
*/
void OnlineMatchmakerOmniscient::RunInitMatchmaking(OnlineMatchmakerOmniscient *this)
{
  Com_Printf(25, "[MM] %s : Ready to init omniscient matchmaking.\n", "OnlineMatchmakerOmniscient::RunInitMatchmaking");
  if ( OnlineMatchmakerOmniscient::InitMatchmaking(this) )
  {
    OnlineMatchmakerOmniscient::SetState(this, eREADY);
  }
  else
  {
    Com_PrintError(25, "[MM] %s : Failed to init matchmaking.\n", "OnlineMatchmakerOmniscient::RunInitMatchmaking");
    OnlineMatchmakerOmniscient::SetState(this, eFAILURE|eREADY);
  }
}

/*
==============
OnlineMatchmakerOmniscient::RunIniting
==============
*/
void OnlineMatchmakerOmniscient::RunIniting(OnlineMatchmakerOmniscient *this)
{
  DWServicesAccess *Instance; 
  DWServicesAccess *v3; 
  DWLobbyService *DWLobbyService; 

  Instance = DWServicesAccess::GetInstance();
  if ( DWServicesAccess::isReady(Instance, this->m_controllerIndex) )
  {
    v3 = DWServicesAccess::GetInstance();
    DWLobbyService = DWServicesAccess::GetDWLobbyService(v3, this->m_controllerIndex);
    DWLobbyService::registerPushMessageHandler(DWLobbyService, &this->m_eventHandler);
    OnlineMatchmakerOmniscient::SetState(this, eADDING_LOCAL_PLAYER_TO_DW);
  }
}

/*
==============
OnlineMatchmakerOmniscient::RunLobbyCreated
==============
*/
void OnlineMatchmakerOmniscient::RunLobbyCreated(OnlineMatchmakerOmniscient *this)
{
  ;
}

/*
==============
OnlineMatchmakerOmniscient::RunLobbyCreating
==============
*/
void OnlineMatchmakerOmniscient::RunLobbyCreating(OnlineMatchmakerOmniscient *this)
{
  ;
}

/*
==============
OnlineMatchmakerOmniscient::RunLobbyDisband
==============
*/
void OnlineMatchmakerOmniscient::RunLobbyDisband(OnlineMatchmakerOmniscient *this)
{
  DWServicesAccess *Instance; 
  DWAsyncMatchMaking *AsyncMatchmaking; 
  TaskCreateRequest *v4; 
  bdRemoteTask *v5; 
  TaskManager *v6; 
  OnlineTimeSeriesLog *v7; 
  const char *v8; 
  const char *v9; 
  Windows::Foundation::IAsyncInfo *m_asyncInfo; 
  TaskCreateResult pTaskCreateResult; 
  TaskCreateRequest pTaskCreateRequest; 
  bdReference<bdRemoteTask> result; 

  OnlineMatchmakerOmniscient::Log(this, "RunLobbyDisband", (const char *)&queryFormat.fmt + 3, NULL, NULL, 0i64);
  *(_QWORD *)&pTaskCreateRequest.m_controllerIndex = -1i64;
  memset(&pTaskCreateRequest.m_appData, 0, 48);
  pTaskCreateRequest.m_cancelTaskOnSignoutEvent = 1;
  pTaskCreateRequest.m_timeoutInSeconds = 0;
  pTaskCreateResult.m_localTaskId = 0;
  pTaskCreateResult.m_task = NULL;
  *(_QWORD *)this->m_response._bytes_20 = this->m_responseBuffer;
  *(_DWORD *)&this->m_response._bytes_20[8] = 0x4000;
  Instance = DWServicesAccess::GetInstance();
  AsyncMatchmaking = DWServicesAccess::GetAsyncMatchmaking(Instance, this->m_controllerIndex);
  v4 = (TaskCreateRequest *)DWAsyncMatchMaking::lobbyDisbanded(AsyncMatchmaking, &result, this->m_lobbyData.m_lobbyid);
  if ( v4 != (TaskCreateRequest *)&pTaskCreateRequest.m_remoteDemonwareTask )
  {
    if ( pTaskCreateRequest.m_remoteDemonwareTask.m_ptr && _InterlockedExchangeAdd((volatile signed __int32 *)&pTaskCreateRequest.m_remoteDemonwareTask.m_ptr->m_refCount, 0xFFFFFFFF) == 1 && pTaskCreateRequest.m_remoteDemonwareTask.m_ptr )
      ((void (__fastcall *)(bdRemoteTask *, __int64))pTaskCreateRequest.m_remoteDemonwareTask.m_ptr->~bdReferencable)(pTaskCreateRequest.m_remoteDemonwareTask.m_ptr, 1i64);
    v5 = *(bdRemoteTask **)&v4->m_controllerIndex;
    pTaskCreateRequest.m_remoteDemonwareTask.m_ptr = v5;
    if ( v5 )
      _InterlockedExchangeAdd((volatile signed __int32 *)&v5->m_refCount, 1u);
  }
  if ( result.m_ptr && _InterlockedExchangeAdd((volatile signed __int32 *)&result.m_ptr->m_refCount, 0xFFFFFFFF) == 1 && result.m_ptr )
    ((void (__fastcall *)(bdRemoteTask *, __int64))result.m_ptr->~bdReferencable)(result.m_ptr, 1i64);
  pTaskCreateRequest.m_appData = this;
  pTaskCreateRequest.m_onCompletionCallback = OnlineMatchmakerOmniscient::staticTaskLobbyDisbanded;
  pTaskCreateRequest.m_controllerIndex = this->m_controllerIndex;
  if ( pTaskCreateRequest.m_remoteDemonwareTask.m_ptr && (v6 = TaskManager::GetInstance(), TaskManager::CreateTask(v6, &pTaskCreateRequest, &pTaskCreateResult)) )
  {
    this->m_outstandingTaskId = pTaskCreateResult.m_localTaskId;
    OnlineMatchmakerOmniscient::SetLobbyState(this, eNONE);
    v7 = OnlineTimeSeriesLog::Get();
    v8 = "mming.lobbyDisbanded.initiate.count";
  }
  else
  {
    v9 = "IS NOT";
    if ( !pTaskCreateRequest.m_remoteDemonwareTask.m_ptr )
      v9 = "IS";
    Com_PrintError(25, "[MM] %s : Remote task %s NULL.\n", "OnlineMatchmakerOmniscient::RunLobbyDisband", v9);
    OnlineMatchmakerOmniscient::SetLobbyState(this, eFAILURE|eADDING_LOCAL_PLAYER_TO_DW);
    v7 = OnlineTimeSeriesLog::Get();
    v8 = "mming.lobbyDisbanded.failure.count";
  }
  OnlineTimeSeriesLog::WriteEventCounter(v7, v8, 1u);
  pTaskCreateRequest.m_onCompletionCallback = NULL;
  pTaskCreateRequest.m_onUpdateCallback = NULL;
  pTaskCreateRequest.m_appSecondaryCallback = NULL;
  pTaskCreateRequest.m_timeoutInSeconds = 0;
  m_asyncInfo = pTaskCreateRequest.m_asyncInfo;
  if ( pTaskCreateRequest.m_asyncInfo )
  {
    pTaskCreateRequest.m_asyncInfo->__abi_Release(pTaskCreateRequest.m_asyncInfo);
    m_asyncInfo = NULL;
    pTaskCreateRequest.m_asyncInfo = NULL;
  }
  if ( pTaskCreateRequest.m_remoteDemonwareTask.m_ptr )
  {
    if ( _InterlockedExchangeAdd((volatile signed __int32 *)&pTaskCreateRequest.m_remoteDemonwareTask.m_ptr->m_refCount, 0xFFFFFFFF) == 1 )
    {
      if ( pTaskCreateRequest.m_remoteDemonwareTask.m_ptr )
        ((void (__fastcall *)(bdRemoteTask *, __int64))pTaskCreateRequest.m_remoteDemonwareTask.m_ptr->~bdReferencable)(pTaskCreateRequest.m_remoteDemonwareTask.m_ptr, 1i64);
      pTaskCreateRequest.m_remoteDemonwareTask.m_ptr = NULL;
    }
    m_asyncInfo = pTaskCreateRequest.m_asyncInfo;
  }
  if ( m_asyncInfo )
    m_asyncInfo->__abi_Release(m_asyncInfo);
}

/*
==============
OnlineMatchmakerOmniscient::RunLobbyDisbanding
==============
*/
void OnlineMatchmakerOmniscient::RunLobbyDisbanding(OnlineMatchmakerOmniscient *this)
{
  ;
}

/*
==============
OnlineMatchmakerOmniscient::RunLobbyFailure
==============
*/

void __fastcall OnlineMatchmakerOmniscient::RunLobbyFailure(OnlineMatchmakerOmniscient *this)
{
  OnlineMatchmakerOmniscient::ResetLobby(this);
}

/*
==============
OnlineMatchmakerOmniscient::RunLobbyIdle
==============
*/
void OnlineMatchmakerOmniscient::RunLobbyIdle(OnlineMatchmakerOmniscient *this)
{
  if ( this->m_state == eREMOVING_PLAYER )
    OnlineMatchmakerOmniscient::SetLobbyState(this, eNEW);
}

/*
==============
OnlineMatchmakerOmniscient::RunLobbyIniting
==============
*/
void OnlineMatchmakerOmniscient::RunLobbyIniting(OnlineMatchmakerOmniscient *this)
{
  OnlineMatchmakerOmniscient::Log(this, "InitLobby", (const char *)&queryFormat.fmt + 3, NULL, NULL, 0i64);
  OnlineMatchmakerTelemetry::ResetLobby(&this->m_telemetry);
  OnlineMatchmakerOmniscient::ResetLobbyData(this);
  OnlineMatchmakerOmniscient::SetLobbyState(this, eADDING_LOCAL_PLAYER_TO_DW);
}

/*
==============
OnlineMatchmakerOmniscient::RunLobbyJoined
==============
*/
void OnlineMatchmakerOmniscient::RunLobbyJoined(OnlineMatchmakerOmniscient *this)
{
  ;
}

/*
==============
OnlineMatchmakerOmniscient::RunLobbyJoining
==============
*/
void OnlineMatchmakerOmniscient::RunLobbyJoining(OnlineMatchmakerOmniscient *this)
{
  ;
}

/*
==============
OnlineMatchmakerOmniscient::RunLobbyNone
==============
*/
void OnlineMatchmakerOmniscient::RunLobbyNone(OnlineMatchmakerOmniscient *this)
{
  if ( CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\online\\online_matchmaker.cpp", 1981, ASSERT_TYPE_ASSERT, (const char *)&queryFormat.fmt + 3, "This is unexpected! RunLobbyNone()!\n") )
    __debugbreak();
}

/*
==============
OnlineMatchmakerOmniscient::RunLobbyUpdatingDocument
==============
*/
void OnlineMatchmakerOmniscient::RunLobbyUpdatingDocument(OnlineMatchmakerOmniscient *this)
{
  ;
}

/*
==============
OnlineMatchmakerOmniscient::RunLobbyWaitingForInfo
==============
*/
void OnlineMatchmakerOmniscient::RunLobbyWaitingForInfo(OnlineMatchmakerOmniscient *this)
{
  if ( this->m_state != eREMOVING_PLAYER )
    OnlineMatchmakerOmniscient::ResetLobbyData(this);
}

/*
==============
OnlineMatchmakerOmniscient::RunNone
==============
*/
void OnlineMatchmakerOmniscient::RunNone(OnlineMatchmakerOmniscient *this)
{
  ;
}

/*
==============
OnlineMatchmakerOmniscient::RunReadyToStartMatchmaking
==============
*/
void OnlineMatchmakerOmniscient::RunReadyToStartMatchmaking(OnlineMatchmakerOmniscient *this)
{
  if ( (XUID::IsValid(&this->m_params.m_inviteClientAttemptingToJoinUID) || this->m_params.m_lobbyIdToJoin) && OnlineMatchmakerOmniscient::AllPlayerAreReadyForMatchmaking(this) )
    OnlineMatchmakerOmniscient::SetState(this, eUPDATING);
}

/*
==============
OnlineMatchmakerOmniscient::RunShutdownMatchmaking
==============
*/
void OnlineMatchmakerOmniscient::RunShutdownMatchmaking(OnlineMatchmakerOmniscient *this)
{
  DWServicesAccess *Instance; 
  DWAsyncMatchMaking *AsyncMatchmaking; 
  TaskCreateRequest *matched; 
  bdRemoteTask *v5; 
  TaskManager *v6; 
  OnlineTimeSeriesLog *v7; 
  const char *v8; 
  const char *v9; 
  Windows::Foundation::IAsyncInfo *m_asyncInfo; 
  OnlineTimeSeriesLog *v11; 
  TaskCreateResult pTaskCreateResult; 
  TaskCreateRequest pTaskCreateRequest; 
  bdReference<bdRemoteTask> result; 

  if ( !this->m_mmingData.m_matchmakingId && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\online\\online_matchmaker.cpp", 1821, ASSERT_TYPE_ASSERT, "(m_mmingData.m_matchmakingId)", (const char *)&queryFormat, "m_mmingData.m_matchmakingId", -2i64) )
    __debugbreak();
  if ( this->m_mmingData.m_matchmakingId )
  {
    *(_QWORD *)&pTaskCreateRequest.m_controllerIndex = -1i64;
    memset(&pTaskCreateRequest.m_appData, 0, 48);
    pTaskCreateRequest.m_cancelTaskOnSignoutEvent = 1;
    pTaskCreateRequest.m_timeoutInSeconds = 0;
    pTaskCreateResult.m_localTaskId = 0;
    pTaskCreateResult.m_task = NULL;
    Instance = DWServicesAccess::GetInstance();
    AsyncMatchmaking = DWServicesAccess::GetAsyncMatchmaking(Instance, this->m_controllerIndex);
    matched = (TaskCreateRequest *)DWAsyncMatchMaking::shutdownMatchMaking(AsyncMatchmaking, &result, this->m_mmingData.m_matchmakingId, &this->m_mmingData.m_outstandingResult);
    if ( matched != (TaskCreateRequest *)&pTaskCreateRequest.m_remoteDemonwareTask )
    {
      if ( pTaskCreateRequest.m_remoteDemonwareTask.m_ptr && _InterlockedExchangeAdd((volatile signed __int32 *)&pTaskCreateRequest.m_remoteDemonwareTask.m_ptr->m_refCount, 0xFFFFFFFF) == 1 && pTaskCreateRequest.m_remoteDemonwareTask.m_ptr )
        ((void (__fastcall *)(bdRemoteTask *, __int64))pTaskCreateRequest.m_remoteDemonwareTask.m_ptr->~bdReferencable)(pTaskCreateRequest.m_remoteDemonwareTask.m_ptr, 1i64);
      v5 = *(bdRemoteTask **)&matched->m_controllerIndex;
      pTaskCreateRequest.m_remoteDemonwareTask.m_ptr = v5;
      if ( v5 )
        _InterlockedExchangeAdd((volatile signed __int32 *)&v5->m_refCount, 1u);
    }
    if ( result.m_ptr && _InterlockedExchangeAdd((volatile signed __int32 *)&result.m_ptr->m_refCount, 0xFFFFFFFF) == 1 && result.m_ptr )
      ((void (__fastcall *)(bdRemoteTask *, __int64))result.m_ptr->~bdReferencable)(result.m_ptr, 1i64);
    pTaskCreateRequest.m_appData = this;
    pTaskCreateRequest.m_onCompletionCallback = OnlineMatchmakerOmniscient::staticTaskShutdownMatchmaking;
    pTaskCreateRequest.m_controllerIndex = this->m_controllerIndex;
    if ( pTaskCreateRequest.m_remoteDemonwareTask.m_ptr && (v6 = TaskManager::GetInstance(), TaskManager::CreateTask(v6, &pTaskCreateRequest, &pTaskCreateResult)) )
    {
      OnlineMatchmakerOmniscient::SetState(this, eNONE|eADDING_LOCAL_PLAYER_TO_DW);
      v7 = OnlineTimeSeriesLog::Get();
      v8 = "mming.shutdownmatchmaking.initiate.count";
    }
    else
    {
      v9 = "IS NOT";
      if ( !pTaskCreateRequest.m_remoteDemonwareTask.m_ptr )
        v9 = "IS";
      Com_PrintError(25, "[MM] %s : Failed to cancel. Remote task %s NULL.\n", "OnlineMatchmakerOmniscient::RunShutdownMatchmaking", v9);
      OnlineMatchmakerOmniscient::SetState(this, eFAILURE|eREADY);
      v7 = OnlineTimeSeriesLog::Get();
      v8 = "mming.shutdownmatchmaking.failure.count";
    }
    OnlineTimeSeriesLog::WriteEventCounter(v7, v8, 1u);
    pTaskCreateRequest.m_onCompletionCallback = NULL;
    pTaskCreateRequest.m_onUpdateCallback = NULL;
    pTaskCreateRequest.m_appSecondaryCallback = NULL;
    pTaskCreateRequest.m_timeoutInSeconds = 0;
    m_asyncInfo = pTaskCreateRequest.m_asyncInfo;
    if ( pTaskCreateRequest.m_asyncInfo )
    {
      pTaskCreateRequest.m_asyncInfo->__abi_Release(pTaskCreateRequest.m_asyncInfo);
      m_asyncInfo = NULL;
      pTaskCreateRequest.m_asyncInfo = NULL;
    }
    if ( pTaskCreateRequest.m_remoteDemonwareTask.m_ptr )
    {
      if ( _InterlockedExchangeAdd((volatile signed __int32 *)&pTaskCreateRequest.m_remoteDemonwareTask.m_ptr->m_refCount, 0xFFFFFFFF) == 1 )
      {
        if ( pTaskCreateRequest.m_remoteDemonwareTask.m_ptr )
          ((void (__fastcall *)(bdRemoteTask *, __int64))pTaskCreateRequest.m_remoteDemonwareTask.m_ptr->~bdReferencable)(pTaskCreateRequest.m_remoteDemonwareTask.m_ptr, 1i64);
        pTaskCreateRequest.m_remoteDemonwareTask.m_ptr = NULL;
      }
      m_asyncInfo = pTaskCreateRequest.m_asyncInfo;
    }
    if ( m_asyncInfo )
      m_asyncInfo->__abi_Release(m_asyncInfo);
  }
  else
  {
    Com_PrintError(25, "[MM] %s : Failed to cancel. Matchmaking id is 0.\n", "OnlineMatchmakerOmniscient::RunShutdownMatchmaking");
    OnlineMatchmakerOmniscient::SetState(this, eFAILURE|eREADY);
    v11 = OnlineTimeSeriesLog::Get();
    OnlineTimeSeriesLog::WriteEventCounter(v11, "mming.shutdownmatchmaking.failure.count", 1u);
  }
}

/*
==============
OnlineMatchmakerOmniscient::RunShuttingDownMatchmaking
==============
*/
void OnlineMatchmakerOmniscient::RunShuttingDownMatchmaking(OnlineMatchmakerOmniscient *this)
{
  ;
}

/*
==============
OnlineMatchmakerOmniscient::RunStartMatchmaking
==============
*/
void OnlineMatchmakerOmniscient::RunStartMatchmaking(OnlineMatchmakerOmniscient *this)
{
  int v2; 
  ntl::internal::list_head_base<ntl::internal::list_node<OnlineMatchmakerOmniscient::Player> > *p_m_listHead; 
  __int64 v4; 
  ntl::internal::list_node_base *mp_next; 
  ntl::internal::list_node_base *v6; 
  __int64 i; 

  if ( this->m_mmingData.m_timeTillNextStart_ms < Online_GetEpochTimeFromAuth_ms() )
  {
    v2 = Sys_Milliseconds();
    Com_Printf(25, "[MM] %s - starting matchmaking because it's been %i ms since the last time.\n", "OnlineMatchmakerOmniscient::RunStartMatchmaking", (unsigned int)(v2 - this->m_mmingData.m_startTimeMs));
    p_m_listHead = &this->m_playerList.m_listHead;
    v4 = 0i64;
    mp_next = this->m_playerList.m_listHead.m_sentinel.mp_next;
    if ( mp_next == (ntl::internal::list_node_base *)&this->m_playerList.m_listHead )
      goto LABEL_7;
    do
    {
      mp_next = mp_next->mp_next;
      ++v4;
    }
    while ( mp_next != (ntl::internal::list_node_base *)p_m_listHead );
    if ( v4 && OnlineMatchmakerOmniscient::StartMatchmaking(this) )
    {
      OnlineMatchmakerOmniscient::SetState(this, eREADY_TO_REMOVE);
    }
    else
    {
LABEL_7:
      v6 = this->m_playerList.m_listHead.m_sentinel.mp_next;
      for ( i = 0i64; v6 != (ntl::internal::list_node_base *)p_m_listHead; ++i )
        v6 = v6->mp_next;
      Com_Printf(25, "[MM] %s - canceling matchmaking. We have %zu players or StartMatchmaking returned false.\n", "OnlineMatchmakerOmniscient::RunStartMatchmaking", i);
      OnlineMatchmakerOmniscient::SetState(this, eFAILURE);
      this->m_mmingData.m_timeOut = 0;
    }
  }
}

/*
==============
OnlineMatchmakerOmniscient::RunStartedMatchmaking
==============
*/
void OnlineMatchmakerOmniscient::RunStartedMatchmaking(OnlineMatchmakerOmniscient *this)
{
  ;
}

/*
==============
OnlineMatchmakerOmniscient::RunStartingMatchmaking
==============
*/
void OnlineMatchmakerOmniscient::RunStartingMatchmaking(OnlineMatchmakerOmniscient *this)
{
  if ( this->m_mmingData.m_timeOut )
  {
    if ( Sys_Milliseconds() > this->m_mmingData.m_timeOut )
    {
      this->m_mmingData.m_timeOut = 0;
      OnlineMatchmakerOmniscient::SetState(this, eFAILURE);
    }
  }
}

/*
==============
OnlineMatchmakerOmniscient::RunWaitingForPlayers
==============
*/
void OnlineMatchmakerOmniscient::RunWaitingForPlayers(OnlineMatchmakerOmniscient *this)
{
  if ( OnlineMatchmakerOmniscient::AllPlayerAreReadyForMatchmaking(this) && (XUID::IsValid(&this->m_params.m_inviteClientAttemptingToJoinUID) || this->m_params.m_lobbyIdToJoin) )
    OnlineMatchmakerOmniscient::SetState(this, eREMOTE_WAITING_FOR_MMING_TOKEN);
}

/*
==============
OnlineMatchmakerOmniscient::SearchStatusUpdate
==============
*/
void OnlineMatchmakerOmniscient::SearchStatusUpdate(OnlineMatchmakerOmniscient *this, unsigned __int64 mmid, char *statusJSON, unsigned int jsonSize)
{
  OnlineMatchmakerOmniscient *v5; 
  const char *v6; 
  int v7; 
  unsigned int v8; 
  int v9; 
  int v10; 
  bool v11; 
  char v12; 
  unsigned int m_count; 
  unsigned int i; 
  char v15; 
  char v16; 
  char *hostDoc; 
  unsigned __int64 demonwareTaskId; 
  bool v19[4]; 
  int v20; 
  int v21; 
  bdJSONDeserializer v22; 
  bdJSONDeserializer v23; 
  __int64 v24; 
  bdJSONDeserializer v25; 
  bdJSONDeserializer value; 
  bdJSONDeserializer v27; 

  v24 = -2i64;
  v5 = this;
  v6 = j_va("\"status\":\"received update =\"%s\"", statusJSON);
  v7 = 0;
  OnlineMatchmakerOmniscient::Log(v5, "SearchStatusUpdate", v6, NULL, NULL, 0i64);
  v8 = 0;
  v9 = 0;
  v10 = 0;
  bdJSONDeserializer::bdJSONDeserializer(&v27);
  v11 = bdJSONDeserializer::parse(&v27, statusJSON);
  if ( !v11 )
    goto LABEL_17;
  bdJSONDeserializer::bdJSONDeserializer(&value);
  v12 = bdJSONDeserializer::getObject(&v27, "filter_keys", &value) && v11;
  if ( v12 )
  {
    bdJSONDeserializer::bdJSONDeserializer(&v25);
    v12 &= bdJSONDeserializer::getArray(&value, "data", &v25);
    if ( v12 )
    {
      bdJSONDeserializer::bdJSONDeserializer(&v23);
      v12 &= bdJSONDeserializer::getArray(&v25, &v23);
      if ( v12 )
      {
        m_count = v23.m_count;
        for ( i = 0; i < m_count; ++i )
        {
          bdJSONDeserializer::bdJSONDeserializer(&v22);
          v12 &= bdJSONDeserializer::getArray(&v23, i, &v22);
          if ( v12 )
          {
            v19[0] = 0;
            v20 = 0;
            v21 = 0;
            v15 = bdJSONDeserializer::getBoolean(&v22, 1u, v19) & v12;
            v16 = bdJSONDeserializer::getInt32(&v22, 2u, &v21) & v15;
            v12 = bdJSONDeserializer::getInt32(&v22, 3u, &v20) & v16;
            if ( v12 )
            {
              if ( v19[0] )
              {
                v8 += v20;
                v9 += v21;
              }
              else
              {
                v10 += v20;
                v7 += v21;
              }
            }
          }
          bdJSONDeserializer::~bdJSONDeserializer(&v22);
        }
        v5 = this;
      }
      bdJSONDeserializer::~bdJSONDeserializer(&v23);
    }
    bdJSONDeserializer::~bdJSONDeserializer(&v25);
  }
  bdJSONDeserializer::~bdJSONDeserializer(&value);
  if ( v12 )
  {
    LODWORD(demonwareTaskId) = v7;
    LODWORD(hostDoc) = v9;
    Com_sprintf_truncate<256>((char (*)[256])v5->m_lobbyData.m_statusMessage, "Total Players Searching %i\nSearching with our Params %i\nPlayers in Matching Param Lobbies with Open Slots %i\nPlayers in Other Lobbies with Open Slots %i", v10 + v8, v8, hostDoc, demonwareTaskId);
  }
  else
  {
LABEL_17:
    Com_sprintf_truncate<256>((char (*)[256])v5->m_lobbyData.m_statusMessage, "Failed to parse status update");
  }
  bdJSONDeserializer::~bdJSONDeserializer(&v27);
}

/*
==============
OnlineMatchmakerOmniscient::SerializePlayerInfo
==============
*/
bool OnlineMatchmakerOmniscient::SerializePlayerInfo(OnlineMatchmakerOmniscient *this, bdJSONSerializer *json, const XNADDR *xnaddr)
{
  XB3ConsoleType XB3ConsoleType; 
  const char *v7; 
  char buildName[256]; 

  bdJSONSerializer::writeBeginObject(json, "dedicated_server");
  OnlineMatchmakerOmniscient::GetBuildName(this, buildName, 0x100u);
  if ( !bdJSONSerializer::writeString(json, "build_name", buildName) || !bdJSONSerializer::writeEndObject(json) || !OnlineMatchmakerOmniscient::SerializePlayerInfoListenServerDetails(this, json, xnaddr) || !OnlineMatchmakerOmniscient::SerializePlayerInfoGameState(this, json) )
    return 0;
  XB3ConsoleType = Sys_GetXB3ConsoleType();
  v7 = "xb1";
  if ( XB3ConsoleType == XB3_CONSOLE_SCORPIO )
    v7 = "xb1x";
  return bdJSONSerializer::writeString(json, "hardware", v7);
}

/*
==============
OnlineMatchmakerOmniscient::SerializePlayerInfoDedicatedServerDetails
==============
*/
bool OnlineMatchmakerOmniscient::SerializePlayerInfoDedicatedServerDetails(OnlineMatchmakerOmniscient *this, bdJSONSerializer *json)
{
  char buildName[256]; 

  bdJSONSerializer::writeBeginObject(json, "dedicated_server");
  OnlineMatchmakerOmniscient::GetBuildName(this, buildName, 0x100u);
  return bdJSONSerializer::writeString(json, "build_name", buildName) && bdJSONSerializer::writeEndObject(json);
}

/*
==============
OnlineMatchmakerOmniscient::SerializePlayerInfoGameState
==============
*/
bool OnlineMatchmakerOmniscient::SerializePlayerInfoGameState(OnlineMatchmakerOmniscient *this, bdJSONSerializer *json)
{
  bool v3; 
  int KnownContentPackCount; 
  bool v5; 
  int v6; 
  int IndexedContentPackID; 
  const char *v8; 

  v3 = bdJSONSerializer::writeBeginObject(json, "game_state");
  KnownContentPackCount = Content_GetKnownContentPackCount();
  v5 = v3 && bdJSONSerializer::writeBeginArray(json, "map_packs");
  v6 = 0;
  if ( KnownContentPackCount > 0 )
  {
    while ( !Content_ContentPackIsAvailable(v6) )
    {
LABEL_41:
      if ( ++v6 >= KnownContentPackCount )
        return v5 && bdJSONSerializer::writeEndArray(json) && bdJSONSerializer::writeEndObject(json);
    }
    IndexedContentPackID = Content_GetIndexedContentPackID(v6);
    if ( ((IndexedContentPackID - 1) & IndexedContentPackID) != 0 && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\online\\online_matchmaker.cpp", 7382, ASSERT_TYPE_ASSERT, "((contentMask & (contentMask - 1)) == 0)", (const char *)&queryFormat, "(contentMask & (contentMask - 1)) == 0") )
      __debugbreak();
    if ( IndexedContentPackID > 64 )
    {
      switch ( IndexedContentPackID )
      {
        case 128:
          v8 = "DLC_6";
          break;
        case 256:
          v8 = "DLC_7";
          break;
        case 512:
          v8 = "DLC_8";
          break;
        case 1024:
          v8 = "DLC_9";
          break;
        case 2048:
          v8 = "DLC_PREVIEW";
          break;
        default:
          goto LABEL_28;
      }
    }
    else
    {
      switch ( IndexedContentPackID )
      {
        case 64:
          v8 = "DLC_5";
          break;
        case 2:
          v8 = "MP_ORIGINAL_MAPS";
          break;
        case 4:
          v8 = "DLC_1";
          break;
        case 8:
          v8 = "DLC_2";
          break;
        case 16:
          v8 = "DLC_3";
          break;
        case 32:
          v8 = "DLC_4";
          break;
        default:
LABEL_28:
          if ( CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\online\\online_matchmaker.cpp", 7409, ASSERT_TYPE_ASSERT, (const char *)&queryFormat.fmt + 3, "Invalid content pack specified!") )
            __debugbreak();
          v8 = "UNKNOWN";
          break;
      }
    }
    if ( *v8 )
      v5 = v5 && bdJSONSerializer::writeString(json, v8);
    goto LABEL_41;
  }
  return v5 && bdJSONSerializer::writeEndArray(json) && bdJSONSerializer::writeEndObject(json);
}

/*
==============
OnlineMatchmakerOmniscient::SerializePlayerInfoHardware
==============
*/
bool OnlineMatchmakerOmniscient::SerializePlayerInfoHardware(OnlineMatchmakerOmniscient *this, bdJSONSerializer *json)
{
  XB3ConsoleType XB3ConsoleType; 
  const char *v4; 

  XB3ConsoleType = Sys_GetXB3ConsoleType();
  v4 = "xb1";
  if ( XB3ConsoleType == XB3_CONSOLE_SCORPIO )
    v4 = "xb1x";
  return bdJSONSerializer::writeString(json, "hardware", v4);
}

/*
==============
OnlineMatchmakerOmniscient::SerializePlayerInfoListenServerDetails
==============
*/
bool OnlineMatchmakerOmniscient::SerializePlayerInfoListenServerDetails(OnlineMatchmakerOmniscient *this, bdJSONSerializer *json, const XNADDR *xnaddr)
{
  const bdSecurityID *SecurityId; 
  const bdSecurityKey *SecurityKey; 
  int LocalNatType; 
  bool v8; 
  char v9; 
  const char *RelayDatacenter; 
  bool v11; 
  char dest[128]; 

  if ( !bdJSONSerializer::writeBeginObject(json, "listen_server") )
    goto LABEL_9;
  memset_0(dest, 0, 0x72ui64);
  bdBase64::encode((const char *)xnaddr, 0x54u, dest, 0x72u);
  if ( !bdJSONSerializer::writeString(json, "local_address", dest) )
    goto LABEL_9;
  SecurityId = XSESSION_INFO::GetSecurityId(&QosPayload::ms_qosPayload.m_session);
  memset_0(dest, 0, 0x72ui64);
  bdBase64::encode((const char *)SecurityId, 8u, dest, 0x72u);
  if ( !bdJSONSerializer::writeString(json, "security_id", dest) )
    goto LABEL_9;
  SecurityKey = XSESSION_INFO::GetSecurityKey(&QosPayload::ms_qosPayload.m_session);
  memset_0(dest, 0, 0x72ui64);
  bdBase64::encode((const char *)SecurityKey, 0x10u, dest, 0x72u);
  if ( bdJSONSerializer::writeString(json, "security_key", dest) && (LocalNatType = Live_GetLocalNatType(), bdJSONSerializer::writeInt32(json, "nat", LocalNatType, 0)) && (v8 = Live_IsOnWifi(), bdJSONSerializer::writeBoolean(json, "wifi", v8)) && bdJSONSerializer::writeInt32(json, "mb_ram", 0, 0) )
    v9 = 1;
  else
LABEL_9:
    v9 = 0;
  if ( !NET_IsRelayStarted() || NET_IsRelayFailed() )
  {
    v11 = v9 == 0;
  }
  else
  {
    if ( !v9 )
      return 0;
    RelayDatacenter = NET_GetRelayDatacenter();
    v11 = !bdJSONSerializer::writeString(json, "relay_data_center", RelayDatacenter);
  }
  return !v11 && bdJSONSerializer::writeEndObject(json);
}

/*
==============
OnlineMatchmakerOmniscient::SetCallbacks
==============
*/
void OnlineMatchmakerOmniscient::SetCallbacks(OnlineMatchmakerOmniscient *this, void (*createCallback)(const unsigned __int64, const XSESSION_INFO *, const bool), void (*joinCallback)(const unsigned __int64, const XUID, const XSESSION_INFO *, const bool), void (*lobbyUpdatedCallback)(const unsigned __int64), void (*lobbyDisbandedCallback)(const unsigned __int64), void (*failureCallback)(), void (*tokenUpdateCallback)(const XUID, const unsigned __int64, const bool), bool (*requestMatchmakingInfoCallback)(const XUID), void *data)
{
  this->m_callbacks.m_lobbyDisbandedCallback = lobbyDisbandedCallback;
  this->m_callbacks.m_failureCallback = failureCallback;
  this->m_callbacks.m_tokenUpdateCallback = tokenUpdateCallback;
  this->m_callbacks.m_requestMatchmakingInfoCallback = requestMatchmakingInfoCallback;
  this->m_callbacks.m_data = data;
  this->m_callbacks.m_createLobbyCallback = createCallback;
  this->m_callbacks.m_joinLobbyCallback = joinCallback;
  this->m_callbacks.m_lobbyUpdatedCallback = lobbyUpdatedCallback;
}

/*
==============
OnlineMatchmakerOmniscient::SetFirstTime
==============
*/
void OnlineMatchmakerOmniscient::SetFirstTime(OnlineMatchmakerOmniscient *this)
{
  this->m_mmingData.m_firstTime = 1;
}

/*
==============
OnlineMatchmakerOmniscient::SetLobbyState
==============
*/
void OnlineMatchmakerOmniscient::SetLobbyState(OnlineMatchmakerOmniscient *this, MatchmakerLobbyState newState)
{
  MatchmakerLobbyState m_lobbyState; 
  const char *LobbyStateString; 
  const char *v6; 
  const char *v7; 
  const char *v8; 
  MatchmakerLobbyState hostDoc; 
  MatchmakerLobbyState v10; 

  m_lobbyState = this->m_lobbyState;
  if ( newState != m_lobbyState )
  {
    LobbyStateString = OnlineMatchmakerOmniscient::GetLobbyStateString(this, newState);
    v6 = OnlineMatchmakerOmniscient::GetLobbyStateString(this, m_lobbyState);
    v10 = newState;
    hostDoc = m_lobbyState;
    Com_Printf(25, "[MM] %s current state = %s (%d) new state = %s (%d).\n", "OnlineMatchmakerOmniscient::SetLobbyState", v6, hostDoc, LobbyStateString, v10);
    v7 = OnlineMatchmakerOmniscient::GetLobbyStateString(this, (const MatchmakerLobbyState)this->m_lobbyState);
    v8 = j_va("{ \"current_state\":\"%s\",\"new_state\":\"%s\"}", v7, LobbyStateString);
    OnlineMatchmakerOmniscient::Log(this, "SetLobbyState", v8, NULL, NULL, 0i64);
    this->m_lobbyState = newState;
  }
}

/*
==============
OnlineMatchId::SetMatchId
==============
*/
void OnlineMatchId::SetMatchId(const unsigned __int64 matchId)
{
  OnlineMatchId::sm_currentId = matchId;
}

/*
==============
OnlineMatchmakerOmniscient::SetMatchmakingTokenForUID
==============
*/
void OnlineMatchmakerOmniscient::SetMatchmakingTokenForUID(OnlineMatchmakerOmniscient *this, const XUID uid, const unsigned __int64 matchmakingToken, const bool isPrimaryAccount)
{
  ntl::internal::list_node<OnlineMatchmakerOmniscient::Player> *mp_node; 
  const dvar_t *v8; 
  const char *v9; 
  const char *v10; 
  ntl::internal::list_iterator<OnlineMatchmakerOmniscient::Player,ntl::internal::list_node<OnlineMatchmakerOmniscient::Player>,OnlineMatchmakerOmniscient::Player *,OnlineMatchmakerOmniscient::Player &> it; 
  XUID xuid; 

  xuid.m_id = uid.m_id;
  if ( OnlineMatchmakerOmniscient::FindPlayer(this, &xuid, &it) && matchmakingToken )
  {
    mp_node = it.mp_node;
    if ( !it.mp_node && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\libs\\ntl\\ntl\\list\\list.h", 103, ASSERT_TYPE_ASSERT, "( mp_node )", (const char *)&queryFormat, "mp_node") )
      __debugbreak();
    if ( mp_node->m_data.m_matchmakingToken != matchmakingToken )
    {
      v8 = DVARBOOL_online_matchmaking_reduce_print_spam;
      if ( !DVARBOOL_online_matchmaking_reduce_print_spam && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\universal\\dvar.h", 692, ASSERT_TYPE_ASSERT, "(dvar)", "%s\n\tDvar %s accessed after deregistration", "dvar", "online_matchmaking_reduce_print_spam") )
        __debugbreak();
      Dvar_CheckFrontendServerThread(v8);
      if ( !v8->current.enabled )
      {
        v9 = "false";
        if ( isPrimaryAccount )
          v9 = "true";
        v10 = XUID::ToDevString(&xuid);
        Com_Printf(25, "[MM] %s - %s (is primary = %s) gets matchmaking token %zu\n", "OnlineMatchmakerOmniscient::SetMatchmakingTokenForUID", v10, v9, matchmakingToken);
      }
      if ( !mp_node && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\libs\\ntl\\ntl\\list\\list.h", 103, ASSERT_TYPE_ASSERT, "( mp_node )", (const char *)&queryFormat, "mp_node") )
        __debugbreak();
      mp_node->m_data.m_matchmakingToken = matchmakingToken;
      mp_node->m_data.m_isPrimaryAccount = isPrimaryAccount;
      mp_node->m_data.m_isGettingMatchmakingToken = 0;
      OnlineMatchmakerOmniscient::SetPlayerState(this, &mp_node->m_data, eREADY);
    }
  }
}

/*
==============
OnlineMatchmakerOmniscient::SetPartyPotentiallyJoining
==============
*/
void OnlineMatchmakerOmniscient::SetPartyPotentiallyJoining(OnlineMatchmakerOmniscient *this, const XUID partyHostXuid)
{
  ntl::internal::list_node<OnlineMatchmakerOmniscient::Player> *mp_node; 
  ntl::internal::list_node_base *i; 
  const char *v5; 
  const char *v6; 
  XUID xuid; 
  ntl::internal::list_iterator<OnlineMatchmakerOmniscient::Player,ntl::internal::list_node<OnlineMatchmakerOmniscient::Player>,OnlineMatchmakerOmniscient::Player *,OnlineMatchmakerOmniscient::Player &> it; 

  xuid.m_id = partyHostXuid.m_id;
  if ( OnlineMatchmakerOmniscient::FindPlayer(this, &xuid, &it) )
  {
    mp_node = it.mp_node;
    if ( !it.mp_node && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\libs\\ntl\\ntl\\list\\list.h", 97, ASSERT_TYPE_ASSERT, "( mp_node )", (const char *)&queryFormat, "mp_node") )
      __debugbreak();
    OnlineMatchmakerOmniscient::SetPlayerPotentiallyJoining(this, &mp_node->m_data);
    for ( i = this->m_playerList.m_listHead.m_sentinel.mp_next; i != (ntl::internal::list_node_base *)&this->m_playerList.m_listHead; i = i->mp_next )
    {
      if ( !mp_node && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\libs\\ntl\\ntl\\list\\list.h", 103, ASSERT_TYPE_ASSERT, "( mp_node )", (const char *)&queryFormat, "mp_node") )
        __debugbreak();
      if ( !i && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\libs\\ntl\\ntl\\list\\list.h", 103, ASSERT_TYPE_ASSERT, "( mp_node )", (const char *)&queryFormat, "mp_node") )
        __debugbreak();
      if ( (ntl::internal::list_node_base *)mp_node->m_data.m_mmId == i[12].mp_next )
      {
        if ( !mp_node && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\libs\\ntl\\ntl\\list\\list.h", 103, ASSERT_TYPE_ASSERT, "( mp_node )", (const char *)&queryFormat, "mp_node") )
          __debugbreak();
        if ( XUID::operator!=(&mp_node->m_data.m_userId, (const XUID *)&i[6].mp_next) )
        {
          if ( !mp_node && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\libs\\ntl\\ntl\\list\\list.h", 103, ASSERT_TYPE_ASSERT, "( mp_node )", (const char *)&queryFormat, "mp_node") )
            __debugbreak();
          v5 = XUID::ToDevString(&mp_node->m_data.m_userId);
          v6 = XUID::ToString((XUID *)&i[6].mp_next);
          Com_Printf(25, "\t player %s in same party as %s, will refresh potentially joining timeout\n", v6, v5);
          OnlineMatchmakerOmniscient::SetPlayerPotentiallyJoining(this, (OnlineMatchmakerOmniscient::Player *)&i[1]);
        }
      }
    }
  }
}

/*
==============
OnlineMatchmakerOmniscient::SetPlayerCurrentStatus
==============
*/
void OnlineMatchmakerOmniscient::SetPlayerCurrentStatus(OnlineMatchmakerOmniscient *this, OnlineMatchmakerOmniscient::Player *outplayer, MemberStatus newStatus)
{
  __int64 v3; 
  const dvar_t *v6; 
  __int64 m_currentMemberStatus; 
  __int64 m_queuedMemberStatus; 
  const char *v9; 
  const char *v10; 
  __int64 v11; 
  __int64 v12; 
  const char *v13; 
  const char *v14; 
  const char *v15; 
  const char *v16; 
  const char *v17; 
  const char *v18; 
  const char *v19; 
  const char *v20; 
  const char *v21; 
  const char *v22; 
  const char *v23; 
  const char *v24; 
  __int64 v25[5]; 

  v3 = newStatus;
  if ( newStatus != outplayer->m_currentMemberStatus )
  {
    v6 = DVARBOOL_online_matchmaking_reduce_print_spam;
    if ( !DVARBOOL_online_matchmaking_reduce_print_spam && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\universal\\dvar.h", 692, ASSERT_TYPE_ASSERT, "(dvar)", "%s\n\tDvar %s accessed after deregistration", "dvar", "online_matchmaking_reduce_print_spam") )
      __debugbreak();
    Dvar_CheckFrontendServerThread(v6);
    if ( !v6->current.enabled )
    {
      m_currentMemberStatus = outplayer->m_currentMemberStatus;
      m_queuedMemberStatus = outplayer->m_queuedMemberStatus;
      v15 = "eUNACKNOWLEDGED";
      v16 = "eMAY_CONNECT";
      v17 = "eCONNECTED";
      v18 = "eWONT_CONNECT";
      v19 = "eREADY_TO_REMOVE";
      v9 = (&v15)[m_currentMemberStatus];
      v15 = "eUNACKNOWLEDGED";
      v20 = "eUNACKNOWLEDGED";
      v21 = "eMAY_CONNECT";
      v22 = "eCONNECTED";
      v23 = "eWONT_CONNECT";
      v24 = "eREADY_TO_REMOVE";
      v16 = "eMAY_CONNECT";
      v17 = "eCONNECTED";
      v18 = "eWONT_CONNECT";
      v19 = "eREADY_TO_REMOVE";
      v10 = XUID::ToDevString(&outplayer->m_userId);
      Com_Printf(25, "[MM] %s for player %s queued status = %s current status = %s new current status = %s.\n", "OnlineMatchmakerOmniscient::SetPlayerCurrentStatus", v10, (&v15)[m_queuedMemberStatus], v9, (&v20)[v3]);
    }
    v11 = outplayer->m_currentMemberStatus;
    v12 = outplayer->m_queuedMemberStatus;
    v20 = "eUNACKNOWLEDGED";
    v15 = "eUNACKNOWLEDGED";
    v25[0] = (__int64)"eUNACKNOWLEDGED";
    v21 = "eMAY_CONNECT";
    v22 = "eCONNECTED";
    v23 = "eWONT_CONNECT";
    v24 = "eREADY_TO_REMOVE";
    v16 = "eMAY_CONNECT";
    v17 = "eCONNECTED";
    v18 = "eWONT_CONNECT";
    v19 = "eREADY_TO_REMOVE";
    v25[1] = (__int64)"eMAY_CONNECT";
    v25[2] = (__int64)"eCONNECTED";
    v25[3] = (__int64)"eWONT_CONNECT";
    v25[4] = (__int64)"eREADY_TO_REMOVE";
    v13 = XUID::ToString(&outplayer->m_userId);
    v14 = j_va("{ \"player\": \"%s\",\"current_queued_status\":\"%s\",\"current_status\":\"%s\",\"new_current_status\":\"%s\"}", v13, (const char *)v25[v12], (&v15)[v11], (&v20)[v3]);
    OnlineMatchmakerOmniscient::Log(this, "SetPlayerCurrentStatus", v14, NULL, NULL, 0i64);
    outplayer->m_currentMemberStatus = v3;
  }
}

/*
==============
OnlineMatchmakerOmniscient::SetPlayerInfo
==============
*/
__int64 OnlineMatchmakerOmniscient::SetPlayerInfo(OnlineMatchmakerOmniscient *this, int controllerIndex, const XNADDR *addr, unsigned int *outTaskId)
{
  __int64 ClientFromController; 
  char *v9; 
  XB3ConsoleType XB3ConsoleType; 
  const char *v11; 
  __int64 v12; 
  const dvar_t *v13; 
  unsigned int v14; 
  DWServicesAccess *Instance; 
  DWAsyncMatchMaking *AsyncMatchmaking; 
  __int64 v17; 
  TaskCreateRequest *v18; 
  bdRemoteTask *v19; 
  TaskManager *v20; 
  OnlineTimeSeriesLog *v21; 
  int v22; 
  OnlineTimeSeriesLog *v23; 
  Windows::Foundation::IAsyncInfo *m_asyncInfo; 
  TaskCreateRequest pTaskCreateRequest; 
  bdReference<bdRemoteTask> result; 
  TaskCreateResult pTaskCreateResult; 
  __int64 v29; 
  checksum128_t checksum; 
  bdJSONSerializer json; 
  char buildName[256]; 

  v29 = -2i64;
  bdJSONSerializer::bdJSONSerializer(&json);
  ClientFromController = CL_Mgr_GetClientFromController(controllerIndex);
  v9 = s_jsonScratchBuffer[ClientFromController];
  memset_0(v9, 0, 0x10000ui64);
  bdJSONSerializer::setBuffer(&json, v9, 0x10000u);
  bdJSONSerializer::writeBeginObject(&json);
  bdJSONSerializer::writeBeginObject(&json, "dedicated_server");
  OnlineMatchmakerOmniscient::GetBuildName(this, buildName, 0x100u);
  if ( !bdJSONSerializer::writeString(&json, "build_name", buildName) || !bdJSONSerializer::writeEndObject(&json) || !OnlineMatchmakerOmniscient::SerializePlayerInfoListenServerDetails(this, &json, addr) || !OnlineMatchmakerOmniscient::SerializePlayerInfoGameState(this, &json) )
    goto LABEL_45;
  XB3ConsoleType = Sys_GetXB3ConsoleType();
  v11 = "xb1";
  if ( XB3ConsoleType == XB3_CONSOLE_SCORPIO )
    v11 = "xb1x";
  if ( bdJSONSerializer::writeString(&json, "hardware", v11) && bdJSONSerializer::writeEndObject(&json) )
  {
    if ( !bdJSONSerializer::validate(&json) && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\online\\online_matchmaker.cpp", 3931, ASSERT_TYPE_ASSERT, "(json.validate())", (const char *)&queryFormat, "json.validate()") )
      __debugbreak();
    Core_StringChecksum(v9, &checksum);
    v12 = ClientFromController;
    if ( *(_QWORD *)checksum.hash != *(_QWORD *)s_playerInfoChecksum[v12].hash || *(_QWORD *)&checksum.hash[2] != *(_QWORD *)&s_playerInfoChecksum[v12].hash[2] )
      goto LABEL_19;
    v13 = DVARBOOL_online_matchmaking_cached_player_info;
    if ( !DVARBOOL_online_matchmaking_cached_player_info && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\universal\\dvar.h", 692, ASSERT_TYPE_ASSERT, "(dvar)", "%s\n\tDvar %s accessed after deregistration", "dvar", "online_matchmaking_cached_player_info") )
      __debugbreak();
    Dvar_CheckFrontendServerThread(v13);
    if ( v13->current.enabled )
    {
      Com_Printf(25, "[MM] %s - NOT sending to Demonware because info matches the previous value\n", "OnlineMatchmakerOmniscient::SetPlayerInfo");
      v14 = 1;
    }
    else
    {
LABEL_19:
      pTaskCreateRequest.m_appTaskType = -1;
      memset(&pTaskCreateRequest.m_appSecondaryCallback, 0, 24);
      pTaskCreateRequest.m_onUpdateCallback = NULL;
      pTaskCreateRequest.m_cancelTaskOnSignoutEvent = 1;
      pTaskCreateRequest.m_timeoutInSeconds = 0;
      pTaskCreateResult.m_localTaskId = 0;
      pTaskCreateResult.m_task = NULL;
      pTaskCreateRequest.m_appData = this;
      pTaskCreateRequest.m_onCompletionCallback = OnlineMatchmakerOmniscient::staticTaskLocalPlayerAddedToDW;
      pTaskCreateRequest.m_controllerIndex = controllerIndex;
      Instance = DWServicesAccess::GetInstance();
      AsyncMatchmaking = DWServicesAccess::GetAsyncMatchmaking(Instance, controllerIndex);
      v17 = -1i64;
      do
        ++v17;
      while ( v9[v17] );
      v18 = (TaskCreateRequest *)DWAsyncMatchMaking::setPlayerInfo(AsyncMatchmaking, &result, v9, (int)v17 + 1);
      if ( v18 != (TaskCreateRequest *)&pTaskCreateRequest.m_remoteDemonwareTask )
      {
        v19 = *(bdRemoteTask **)&v18->m_controllerIndex;
        pTaskCreateRequest.m_remoteDemonwareTask.m_ptr = v19;
        if ( v19 )
          _InterlockedExchangeAdd((volatile signed __int32 *)&v19->m_refCount, 1u);
      }
      if ( result.m_ptr && _InterlockedExchangeAdd((volatile signed __int32 *)&result.m_ptr->m_refCount, 0xFFFFFFFF) == 1 && result.m_ptr )
        ((void (__fastcall *)(bdRemoteTask *, __int64))result.m_ptr->~bdReferencable)(result.m_ptr, 1i64);
      if ( pTaskCreateRequest.m_remoteDemonwareTask.m_ptr && (v20 = TaskManager::GetInstance(), TaskManager::CreateTask(v20, &pTaskCreateRequest, &pTaskCreateResult)) )
      {
        s_playerInfoChecksum[v12] = checksum;
        if ( outTaskId )
          *outTaskId = pTaskCreateResult.m_localTaskId;
        Com_Printf(25, "[MM] %s - sending to Demonware %s\n", "OnlineMatchmakerOmniscient::SetPlayerInfo", v9);
        v21 = OnlineTimeSeriesLog::Get();
        OnlineTimeSeriesLog::WriteEventCounter(v21, "mming.setplayerinfo.initiate.count", 1u);
        OnlineMatchmakerOmniscient::Log(this, "setPlayerInfo", v9, NULL, NULL, 0i64);
        v22 = 0;
      }
      else
      {
        Com_PrintError(25, "[MM] %s - failed to create the task to add the player to the matchmaker.\n", "OnlineMatchmakerOmniscient::SetPlayerInfo");
        v23 = OnlineTimeSeriesLog::Get();
        OnlineTimeSeriesLog::WriteEventCounter(v23, "mming.setplayerinfo.failure.count", 1u);
        v22 = 2;
      }
      pTaskCreateRequest.m_onCompletionCallback = NULL;
      pTaskCreateRequest.m_onUpdateCallback = NULL;
      pTaskCreateRequest.m_appSecondaryCallback = NULL;
      pTaskCreateRequest.m_timeoutInSeconds = 0;
      m_asyncInfo = pTaskCreateRequest.m_asyncInfo;
      if ( pTaskCreateRequest.m_asyncInfo )
      {
        pTaskCreateRequest.m_asyncInfo->__abi_Release(pTaskCreateRequest.m_asyncInfo);
        m_asyncInfo = NULL;
        pTaskCreateRequest.m_asyncInfo = NULL;
      }
      if ( pTaskCreateRequest.m_remoteDemonwareTask.m_ptr )
      {
        if ( _InterlockedExchangeAdd((volatile signed __int32 *)&pTaskCreateRequest.m_remoteDemonwareTask.m_ptr->m_refCount, 0xFFFFFFFF) == 1 )
        {
          if ( pTaskCreateRequest.m_remoteDemonwareTask.m_ptr )
            ((void (__fastcall *)(bdRemoteTask *, __int64))pTaskCreateRequest.m_remoteDemonwareTask.m_ptr->~bdReferencable)(pTaskCreateRequest.m_remoteDemonwareTask.m_ptr, 1i64);
          pTaskCreateRequest.m_remoteDemonwareTask.m_ptr = NULL;
        }
        m_asyncInfo = pTaskCreateRequest.m_asyncInfo;
      }
      if ( m_asyncInfo )
        m_asyncInfo->__abi_Release(m_asyncInfo);
      v14 = v22;
    }
  }
  else
  {
LABEL_45:
    v14 = 2;
  }
  bdJSONSerializer::~bdJSONSerializer(&json);
  return v14;
}

/*
==============
OnlineMatchmakerOmniscient::SetPlayerPotentiallyJoining
==============
*/
void OnlineMatchmakerOmniscient::SetPlayerPotentiallyJoining(OnlineMatchmakerOmniscient *this, OnlineMatchmakerOmniscient::Player *outplayer)
{
  const dvar_t *v3; 
  int integer; 
  unsigned int v5; 
  const char *v6; 
  char *fmt; 

  if ( !this->m_lobbyData.m_amITheLobbyHost && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\online\\online_matchmaker.cpp", 889, ASSERT_TYPE_SANITY, "( m_lobbyData.m_amITheLobbyHost )", (const char *)&queryFormat, "m_lobbyData.m_amITheLobbyHost") )
    __debugbreak();
  if ( outplayer->m_currentMemberStatus == eNEW || outplayer->m_queuedMemberStatus == eNEW )
  {
    v3 = DVARINT_online_matchmaking_initial_connect_timeout_ms;
    if ( !DVARINT_online_matchmaking_initial_connect_timeout_ms && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\universal\\dvar.h", 699, ASSERT_TYPE_ASSERT, "(dvar)", "%s\n\tDvar %s accessed after deregistration", "dvar", "online_matchmaking_initial_connect_timeout_ms") )
      __debugbreak();
    Dvar_CheckFrontendServerThread(v3);
    integer = v3->current.integer;
    v5 = Sys_Milliseconds() + integer;
    outplayer->m_timeUntilWontConnect_ms = v5;
    v6 = XUID::ToString(&outplayer->m_userId);
    LODWORD(fmt) = v5;
    Com_Printf(25, "[MM] %s player %s, setting m_timeUntilWontConnect_ms to %i\n", "OnlineMatchmakerOmniscient::SetPlayerPotentiallyJoining", v6, fmt);
  }
}

/*
==============
OnlineMatchmakerOmniscient::SetPlayerQueuedStatus
==============
*/
void OnlineMatchmakerOmniscient::SetPlayerQueuedStatus(OnlineMatchmakerOmniscient *this, OnlineMatchmakerOmniscient::Player *outplayer, MemberStatus newStatus)
{
  __int64 m_queuedMemberStatus; 
  __int64 v5; 
  const char *v7; 
  const dvar_t *v8; 
  __int64 v9; 
  __int64 m_currentMemberStatus; 
  const char *v11; 
  const dvar_t *v12; 
  __int64 v13; 
  __int64 v14; 
  const char *v15; 
  const char *v16; 
  const char *v17; 
  const char *v18; 
  const char *v19; 
  const char *v20; 
  const char *v21; 
  const char *v22; 
  const char *v23; 
  const char *v24; 
  const char *v25; 
  const char *v26; 
  const char *v27; 
  const char *v28; 
  const char *v29; 
  const char *v30; 
  const char *v31; 

  m_queuedMemberStatus = outplayer->m_queuedMemberStatus;
  v5 = newStatus;
  if ( newStatus != (_DWORD)m_queuedMemberStatus )
  {
    if ( outplayer->m_currentMemberStatus == eADDING_LOCAL_PLAYER_TO_DW && newStatus == eNEW )
    {
      v21 = "eREADY_TO_REMOVE";
      v26 = "eREADY_TO_REMOVE";
      v17 = "eUNACKNOWLEDGED";
      v18 = "eMAY_CONNECT";
      v19 = "eCONNECTED";
      v20 = "eWONT_CONNECT";
      v22 = "eUNACKNOWLEDGED";
      v23 = "eMAY_CONNECT";
      v24 = "eCONNECTED";
      v25 = "eWONT_CONNECT";
      v7 = XUID::ToDevString(&outplayer->m_userId);
      Com_PrintWarning(25, "[MM] %s Invalid status transition for player %s queued status = %s current status = %s new queued status = %s.\n", "OnlineMatchmakerOmniscient::SetPlayerQueuedStatus", v7, (&v22)[m_queuedMemberStatus], "eCONNECTED", "eMAY_CONNECT");
    }
    v8 = DVARBOOL_online_matchmaking_reduce_print_spam;
    if ( !DVARBOOL_online_matchmaking_reduce_print_spam && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\universal\\dvar.h", 692, ASSERT_TYPE_ASSERT, "(dvar)", "%s\n\tDvar %s accessed after deregistration", "dvar", "online_matchmaking_reduce_print_spam") )
      __debugbreak();
    Dvar_CheckFrontendServerThread(v8);
    if ( !v8->current.enabled )
    {
      v9 = outplayer->m_queuedMemberStatus;
      v25 = "eWONT_CONNECT";
      v30 = "eWONT_CONNECT";
      v20 = "eWONT_CONNECT";
      v22 = "eUNACKNOWLEDGED";
      m_currentMemberStatus = outplayer->m_currentMemberStatus;
      v23 = "eMAY_CONNECT";
      v24 = "eCONNECTED";
      v26 = "eREADY_TO_REMOVE";
      v27 = "eUNACKNOWLEDGED";
      v28 = "eMAY_CONNECT";
      v29 = "eCONNECTED";
      v31 = "eREADY_TO_REMOVE";
      v17 = "eUNACKNOWLEDGED";
      v18 = "eMAY_CONNECT";
      v19 = "eCONNECTED";
      v21 = "eREADY_TO_REMOVE";
      v11 = XUID::ToDevString(&outplayer->m_userId);
      Com_Printf(25, "[MM] %s for player %s queued status = %s current status = %s new queued status = %s.\n", "OnlineMatchmakerOmniscient::SetPlayerQueuedStatus", v11, (&v17)[v9], (&v27)[m_currentMemberStatus], (&v22)[v5]);
    }
    v12 = DVARBOOL_online_matchmaking_reduce_print_spam;
    if ( !DVARBOOL_online_matchmaking_reduce_print_spam && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\universal\\dvar.h", 692, ASSERT_TYPE_ASSERT, "(dvar)", "%s\n\tDvar %s accessed after deregistration", "dvar", "online_matchmaking_reduce_print_spam") )
      __debugbreak();
    Dvar_CheckFrontendServerThread(v12);
    if ( !v12->current.enabled )
    {
      v13 = outplayer->m_queuedMemberStatus;
      v20 = "eWONT_CONNECT";
      v30 = "eWONT_CONNECT";
      v25 = "eWONT_CONNECT";
      v17 = "eUNACKNOWLEDGED";
      v14 = outplayer->m_currentMemberStatus;
      v18 = "eMAY_CONNECT";
      v19 = "eCONNECTED";
      v21 = "eREADY_TO_REMOVE";
      v27 = "eUNACKNOWLEDGED";
      v28 = "eMAY_CONNECT";
      v29 = "eCONNECTED";
      v31 = "eREADY_TO_REMOVE";
      v22 = "eUNACKNOWLEDGED";
      v23 = "eMAY_CONNECT";
      v24 = "eCONNECTED";
      v26 = "eREADY_TO_REMOVE";
      v15 = XUID::ToString(&outplayer->m_userId);
      v16 = j_va("{ \"player\": \"%s\",\"current_queued_status\":\"%s\",\"current_status\":\"%s\",\"new_queued_status\":\"%s\"}", v15, (&v22)[v13], (&v27)[v14], (&v17)[v5]);
      OnlineMatchmakerOmniscient::Log(this, "SetPlayerQueuedStatus", v16, NULL, NULL, 0i64);
    }
    outplayer->m_queuedMemberStatus = v5;
    outplayer->m_lastStateSyncTime = Sys_Microseconds();
  }
}

/*
==============
OnlineMatchmakerOmniscient::SetPlayerState
==============
*/
void OnlineMatchmakerOmniscient::SetPlayerState(OnlineMatchmakerOmniscient *this, OnlineMatchmakerOmniscient::Player *outplayer, OnlineMatchmakerOmniscient::Player::PlayerState state)
{
  const dvar_t *v6; 
  OnlineMatchmakerOmniscient::Player::PlayerState m_state; 
  const char *v8; 
  const char *PlayerStateString; 
  const char *v10; 
  const dvar_t *v11; 
  const char *v12; 
  const char *v13; 
  const char *v14; 
  const char *v15; 
  unsigned __int64 demonwareTaskId; 

  if ( state != outplayer->m_state )
  {
    v6 = DVARBOOL_online_matchmaking_reduce_print_spam;
    if ( !DVARBOOL_online_matchmaking_reduce_print_spam && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\universal\\dvar.h", 692, ASSERT_TYPE_ASSERT, "(dvar)", "%s\n\tDvar %s accessed after deregistration", "dvar", "online_matchmaking_reduce_print_spam") )
      __debugbreak();
    Dvar_CheckFrontendServerThread(v6);
    if ( !v6->current.enabled )
    {
      m_state = outplayer->m_state;
      v8 = XUID::ToDevString(&outplayer->m_userId);
      PlayerStateString = OnlineMatchmakerOmniscient::GetPlayerStateString(this, state);
      v10 = OnlineMatchmakerOmniscient::GetPlayerStateString(this, m_state);
      LODWORD(demonwareTaskId) = m_state;
      Com_Printf(25, "[MM] %s for player %s current state = %s (%d) new state = %s (%d).\n", "OnlineMatchmakerOmniscient::SetPlayerState", v8, v10, demonwareTaskId, PlayerStateString, state);
    }
    v11 = DVARBOOL_online_matchmaking_reduce_print_spam;
    if ( !DVARBOOL_online_matchmaking_reduce_print_spam && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\universal\\dvar.h", 692, ASSERT_TYPE_ASSERT, "(dvar)", "%s\n\tDvar %s accessed after deregistration", "dvar", "online_matchmaking_reduce_print_spam") )
      __debugbreak();
    Dvar_CheckFrontendServerThread(v11);
    if ( !v11->current.enabled )
    {
      v12 = OnlineMatchmakerOmniscient::GetPlayerStateString(this, (const OnlineMatchmakerOmniscient::Player::PlayerState)outplayer->m_state);
      v13 = XUID::ToString(&outplayer->m_userId);
      v14 = OnlineMatchmakerOmniscient::GetPlayerStateString(this, state);
      v15 = j_va("{ \"player\": \"%s\",\"current_state\":\"%s\",\"new_state\":\"%s\"}", v13, v12, v14);
      OnlineMatchmakerOmniscient::Log(this, "SetPlayerState", v15, NULL, NULL, 0i64);
    }
    outplayer->m_state = state;
  }
}

/*
==============
OnlineMatchmakerOmniscient::SetState
==============
*/
void OnlineMatchmakerOmniscient::SetState(OnlineMatchmakerOmniscient *this, MatchmakerOmniscientState newState)
{
  const char *StateString; 
  MatchmakerOmniscientState m_state; 
  const char *v6; 
  const char *v7; 
  const char *v8; 
  const char *v9; 
  const char *v10; 
  MatchmakerOmniscientState hostDoc; 
  MatchmakerOmniscientState v12; 

  if ( newState != this->m_state )
  {
    StateString = OnlineMatchmakerOmniscient::GetStateString(this, newState);
    m_state = this->m_state;
    v6 = StateString;
    v7 = OnlineMatchmakerOmniscient::GetStateString(this, (const MatchmakerOmniscientState)this->m_state);
    v12 = newState;
    hostDoc = m_state;
    Com_Printf(25, "[MM] %s current state = %s (%d) new state = %s (%d).\n", "OnlineMatchmakerOmniscient::SetState", v7, hostDoc, v6, v12);
    v8 = OnlineMatchmakerOmniscient::GetStateString(this, newState);
    v9 = OnlineMatchmakerOmniscient::GetStateString(this, (const MatchmakerOmniscientState)this->m_state);
    v10 = j_va("{ \"current_state\":\"%s\",\"new_state\":\"%s\"}", v9, v8);
    OnlineMatchmakerOmniscient::Log(this, "SetState", v10, NULL, NULL, 0i64);
    this->m_state = newState;
  }
}

/*
==============
OnlineMatchmakerOmniscient::SetTournamentID
==============
*/
void OnlineMatchmakerOmniscient::SetTournamentID(OnlineMatchmakerOmniscient *this, unsigned __int64 tournamentID)
{
  this->m_lobbyData.m_tournamentID = tournamentID;
}

/*
==============
OnlineMatchmakerOmniscient::ShouldDisbandLobby
==============
*/
bool OnlineMatchmakerOmniscient::ShouldDisbandLobby(OnlineMatchmakerOmniscient *this)
{
  const dvar_t *v1; 
  bool enabled; 
  const dvar_t *v4; 

  v1 = DVARBOOL_online_matchmaking_use_lobby_affinity;
  if ( !DVARBOOL_online_matchmaking_use_lobby_affinity && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\universal\\dvar.h", 692, ASSERT_TYPE_ASSERT, "(dvar)", "%s\n\tDvar %s accessed after deregistration", "dvar", "online_matchmaking_use_lobby_affinity") )
    __debugbreak();
  Dvar_CheckFrontendServerThread(v1);
  enabled = v1->current.enabled;
  if ( !enabled )
    return enabled;
  v4 = DVARBOOL_online_matchmaking_allow_game_override_lobby_affinity;
  if ( !DVARBOOL_online_matchmaking_allow_game_override_lobby_affinity && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\universal\\dvar.h", 692, ASSERT_TYPE_ASSERT, "(dvar)", "%s\n\tDvar %s accessed after deregistration", "dvar", "online_matchmaking_allow_game_override_lobby_affinity") )
    __debugbreak();
  Dvar_CheckFrontendServerThread(v4);
  if ( !v4->current.enabled || !this->m_mmingData.m_requestGameLobbyRemainIntact )
    return enabled;
  Com_Printf(25, "[MM] %s - Game wants to keep lobby together, will NOT break up lobby.\n", "OnlineMatchmakerOmniscient::ShouldDisbandLobby");
  return 0;
}

/*
==============
OnlineMatchmakerOmniscient::Shutdown
==============
*/
void OnlineMatchmakerOmniscient::Shutdown(OnlineMatchmakerOmniscient *this)
{
  unsigned __int64 m_tournamentID; 

  OnlineMatchmakerOmniscient::Log(this, "Shutdown", (const char *)&queryFormat.fmt + 3, NULL, NULL, 0i64);
  m_tournamentID = this->m_lobbyData.m_tournamentID;
  OnlineMatchmakerOmniscient::ResetLobby(this);
  this->m_mmingData.m_firstTime = 0;
  if ( OnlineTournament_IsActive() )
    this->m_lobbyData.m_tournamentID = m_tournamentID;
}

/*
==============
OnlineMatchmakerOmniscient::StartGame
==============
*/
void OnlineMatchmakerOmniscient::StartGame(OnlineMatchmakerOmniscient *this, const char *map, const char *mode)
{
  bool v5; 

  Core_strcpy(this->m_lobbyData.m_mapName, 0x18ui64, map);
  Core_strcpy(this->m_lobbyData.m_modeName, 0x10ui64, mode);
  v5 = !this->m_lobbyData.m_shouldBackfill_JIP;
  this->m_lobbyData.m_isGameInProgress = 1;
  this->m_lobbyData.m_gameLobbyInFinalCountdown = 0;
  this->m_mmingData.m_requestGameLobbyRemainIntact = 0;
  if ( v5 && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\online\\online_matchmaker.cpp", 629, ASSERT_TYPE_ASSERT, "(m_lobbyData.m_shouldBackfill_JIP)", (const char *)&queryFormat, "m_lobbyData.m_shouldBackfill_JIP") )
    __debugbreak();
  if ( this->m_lobbyData.m_performanceGameType == eGAME_TYPE_COMPETITIVE_MULTIPLAYER )
    Com_Printf(25, "[MM] eGAME_TYPE_COMPETITIVE_MULTIPLAYER specified for this game, JIP will be disabled automatically via the back-end MM ruleset\n");
  if ( this->m_lobbyData.m_canLobbyMerge )
  {
    this->m_lobbyData.m_canLobbyMerge = 0;
    this->m_lobbyData.m_timeToUpdateIfDirty = 0;
  }
  this->m_lobbyData.m_lobbyDocIsDirty = 1;
  OnlineMatchmakerTelemetry::MatchStart(&this->m_telemetry);
}

/*
==============
OnlineMatchmakerOmniscient::StartMatchmaking
==============
*/
__int64 OnlineMatchmakerOmniscient::StartMatchmaking(OnlineMatchmakerOmniscient *this)
{
  unsigned __int8 v2; 
  void *m_requestBuffer; 
  ntl::internal::list_head_base<ntl::internal::list_node<OnlineMatchmakerOmniscient::Player> > *p_m_listHead; 
  __int64 v5; 
  ntl::internal::list_node_base *mp_next; 
  ntl::internal::list_node_base *i; 
  unsigned __int64 UniversalId; 
  char v9; 
  ntl::internal::list_node_base *j; 
  char v11; 
  char v12; 
  __int64 v13; 
  ntl::internal::list_node_base *v14; 
  ntl::internal::list_node_base *k; 
  ntl::internal::list_node_base *v16; 
  unsigned __int64 v17; 
  const char *v18; 
  char v19; 
  unsigned __int64 m_lobbyIdToJoin; 
  const char *v21; 
  char v22; 
  int v23; 
  bdRemoteTask *m_id; 
  bool v25; 
  const PartyData *ActiveParty; 
  char v27; 
  ntl::internal::list_node_base *v28; 
  int MemberByXUID; 
  const char *v30; 
  char v31; 
  bool MemberHeadset; 
  char v33; 
  bool IsMemberSplitscreen; 
  char v35; 
  bool MemberUsingGamepad; 
  const char *v37; 
  char v38; 
  int StatsGroupForGameMode; 
  StatsSource ActiveStatsSource; 
  char v41; 
  const char *ArrayStringByIndex; 
  __int64 v43; 
  char v44; 
  char v45; 
  int v46; 
  int ArrayIntByIndex; 
  const dvar_t *v48; 
  const PartyData *PartyData; 
  bool v50; 
  unsigned __int8 ClientPlatform; 
  const char *MatchmakingStringForClientPlatform; 
  bool v53; 
  bool v54; 
  bool v55; 
  bool v56; 
  bool v57; 
  bool v58; 
  bool v59; 
  bool v60; 
  bool v61; 
  int ProtocolVersion; 
  char v63; 
  unsigned int CurrentMatchId; 
  const dvar_t *v65; 
  char v66; 
  char v67; 
  const dvar_t *v68; 
  bool v69; 
  const char *v70; 
  char v71; 
  const dvar_t *v72; 
  const dvar_t *v73; 
  char v74; 
  const dvar_t *v75; 
  const dvar_t *v76; 
  const dvar_t *v77; 
  char v78; 
  char v79; 
  char v80; 
  char v81; 
  MatchmakingGameType m_gameType; 
  char v83; 
  char v84; 
  char v85; 
  char v86; 
  unsigned __int64 v87; 
  unsigned __int64 v88; 
  XUID *Xuid; 
  unsigned __int64 v90; 
  const char *EnvironmentName; 
  DWServicesAccess *Instance; 
  unsigned int TitleID; 
  DWServicesAccess *v94; 
  DWAsyncMatchMaking *AsyncMatchmaking; 
  unsigned int v96; 
  TaskCreateRequest *started; 
  bdRemoteTask *v98; 
  const dvar_t *v99; 
  __int64 integer; 
  TaskManager *v101; 
  OnlineTimeSeriesLog *v102; 
  Windows::Foundation::IAsyncInfo *m_asyncInfo; 
  bool v105; 
  bdReference<bdRemoteTask> v106; 
  TaskCreateRequest pTaskCreateRequest; 
  XUID result; 
  unsigned __int64 outLobbyId; 
  TaskCreateResult pTaskCreateResult; 
  __int64 v111; 
  DDLContext context; 
  bdJSONSerializer jsonSerializer; 
  char dest[128]; 
  char v115[16384]; 

  v111 = -2i64;
  *(_QWORD *)&pTaskCreateRequest.m_controllerIndex = -1i64;
  memset(&pTaskCreateRequest.m_appData, 0, 48);
  pTaskCreateRequest.m_cancelTaskOnSignoutEvent = 1;
  pTaskCreateRequest.m_timeoutInSeconds = 0;
  pTaskCreateResult.m_localTaskId = 0;
  pTaskCreateResult.m_task = NULL;
  memset_0(this->m_lobbyData.m_statusMessage, 0, sizeof(this->m_lobbyData.m_statusMessage));
  Core_strcpy(this->m_lobbyData.m_statusMessage, 0x100ui64, "Waiting for the matchmaker to send a status message.");
  v2 = 0;
  m_requestBuffer = this->m_requestBuffer;
  result.m_id = (unsigned __int64)this->m_requestBuffer;
  bdJSONSerializer::bdJSONSerializer(&jsonSerializer, this->m_requestBuffer, 0x4000u);
  memset_0(this->m_requestBuffer, 0, sizeof(this->m_requestBuffer));
  if ( !bdJSONSerializer::writeBeginObject(&jsonSerializer) )
    goto LABEL_153;
  bdJSONSerializer::writeBeginArray(&jsonSerializer, "members");
  p_m_listHead = &this->m_playerList.m_listHead;
  v5 = 0i64;
  mp_next = this->m_playerList.m_listHead.m_sentinel.mp_next;
  if ( mp_next == (ntl::internal::list_node_base *)&this->m_playerList.m_listHead )
    goto LABEL_166;
  do
  {
    ++v5;
    mp_next = mp_next->mp_next;
  }
  while ( mp_next != (ntl::internal::list_node_base *)p_m_listHead );
  if ( !v5 )
  {
LABEL_166:
    if ( CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\online\\online_matchmaker.cpp", 2379, ASSERT_TYPE_ASSERT, "(0 < m_playerList.size())", (const char *)&queryFormat, "0 < m_playerList.size()") )
      __debugbreak();
  }
  for ( i = this->m_playerList.m_listHead.m_sentinel.mp_next; i != (ntl::internal::list_node_base *)p_m_listHead; i = i->mp_next )
  {
    if ( !i && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\libs\\ntl\\ntl\\list\\list.h", 103, ASSERT_TYPE_ASSERT, "( mp_node )", (const char *)&queryFormat, "mp_node") )
      __debugbreak();
    if ( BYTE1(i[7].mp_next) )
    {
      UniversalId = XUID::GetUniversalId((XUID *)&i[6].mp_next);
      bdJSONSerializer::writeUInt64(&jsonSerializer, UniversalId, 0);
    }
  }
  bdJSONSerializer::writeEndArray(&jsonSerializer);
  v9 = bdJSONSerializer::writeBeginArray(&jsonSerializer, "tokens");
  for ( j = this->m_playerList.m_listHead.m_sentinel.mp_next; j != (ntl::internal::list_node_base *)p_m_listHead; j = j->mp_next )
  {
    if ( !j && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\libs\\ntl\\ntl\\list\\list.h", 103, ASSERT_TYPE_ASSERT, "( mp_node )", (const char *)&queryFormat, "mp_node") )
      __debugbreak();
    if ( BYTE1(j[7].mp_next) )
      v9 &= bdJSONSerializer::writeUInt64(&jsonSerializer, (const unsigned __int64)j[10].mp_next, 0);
  }
  v11 = bdJSONSerializer::writeEndArray(&jsonSerializer) & v9;
  v12 = bdJSONSerializer::writeBeginObject(&jsonSerializer, "player_id_to_slots") & v11;
  v13 = 0i64;
  v14 = this->m_playerList.m_listHead.m_sentinel.mp_next;
  if ( v14 == (ntl::internal::list_node_base *)p_m_listHead )
    goto LABEL_167;
  do
  {
    ++v13;
    v14 = v14->mp_next;
  }
  while ( v14 != (ntl::internal::list_node_base *)p_m_listHead );
  if ( !v13 )
  {
LABEL_167:
    if ( CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\online\\online_matchmaker.cpp", 2406, ASSERT_TYPE_ASSERT, "(0 < m_playerList.size())", (const char *)&queryFormat, "0 < m_playerList.size()") )
      __debugbreak();
  }
  for ( k = this->m_playerList.m_listHead.m_sentinel.mp_next; k != (ntl::internal::list_node_base *)p_m_listHead; k = k->mp_next )
  {
    if ( !k && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\libs\\ntl\\ntl\\list\\list.h", 103, ASSERT_TYPE_ASSERT, "( mp_node )", (const char *)&queryFormat, "mp_node") )
      __debugbreak();
    if ( BYTE1(k[7].mp_next) )
    {
      v16 = this->m_playerList.m_listHead.m_sentinel.mp_next;
      v17 = 0i64;
      if ( v16 != (ntl::internal::list_node_base *)p_m_listHead )
      {
        while ( 1 )
        {
          if ( !v16 && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\libs\\ntl\\ntl\\list\\list.h", 103, ASSERT_TYPE_ASSERT, "( mp_node )", (const char *)&queryFormat, "mp_node") )
            __debugbreak();
          if ( v16[10].mp_next == k[10].mp_next && !BYTE1(v16[7].mp_next) )
            break;
          v16 = v16->mp_next;
          if ( v16 == (ntl::internal::list_node_base *)p_m_listHead )
          {
            v17 = 0i64;
            goto LABEL_39;
          }
        }
        v17 = 1i64;
      }
LABEL_39:
      v18 = XUID::ToString((XUID *)&k[6].mp_next);
      v12 &= bdJSONSerializer::writeUInt64(&jsonSerializer, v18, v17, 0);
    }
  }
  v19 = bdJSONSerializer::writeEndObject(&jsonSerializer) & v12;
  if ( XUID::IsNull(&this->m_params.m_inviteClientAttemptingToJoinUID) )
  {
    m_lobbyIdToJoin = this->m_params.m_lobbyIdToJoin;
    if ( !m_lobbyIdToJoin )
    {
      m_id = (bdRemoteTask *)this->m_params.m_privateMatchId.m_id;
      v106.m_ptr = m_id;
      v25 = m_id != NULL;
      v105 = m_id != NULL;
      ActiveParty = Party_GetActiveParty();
      v27 = bdJSONSerializer::writeBeginObject(&jsonSerializer, "player_ruleset_payloads") & v19;
      v28 = this->m_playerList.m_listHead.m_sentinel.mp_next;
      if ( v28 != (ntl::internal::list_node_base *)p_m_listHead )
      {
        do
        {
          if ( !v28 && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\libs\\ntl\\ntl\\list\\list.h", 103, ASSERT_TYPE_ASSERT, "( mp_node )", (const char *)&queryFormat, "mp_node") )
            __debugbreak();
          if ( BYTE1(v28[7].mp_next) )
          {
            MemberByXUID = Party_FindMemberByXUID(ActiveParty, (const XUID)v28[6].mp_next);
            if ( MemberByXUID == -1 )
            {
              m_id = v106.m_ptr;
            }
            else
            {
              v30 = XUID::ToString((XUID *)&v28[6].mp_next);
              v31 = bdJSONSerializer::writeBeginObject(&jsonSerializer, v30) & v27;
              MemberHeadset = Party_GetMemberHeadset(ActiveParty, MemberByXUID);
              v33 = bdJSONSerializer::writeBoolean(&jsonSerializer, "mic", MemberHeadset) & v31;
              IsMemberSplitscreen = Party_IsMemberSplitscreen(ActiveParty, MemberByXUID);
              v35 = bdJSONSerializer::writeBoolean(&jsonSerializer, "splitscreen", IsMemberSplitscreen) & v33;
              MemberUsingGamepad = Party_GetMemberUsingGamepad(ActiveParty, MemberByXUID);
              v37 = "mkey";
              if ( MemberUsingGamepad )
                v37 = "gpad";
              v38 = bdJSONSerializer::writeString(&jsonSerializer, "control_scheme", v37) & v35;
              m_id = v106.m_ptr;
              if ( !v106.m_ptr )
              {
                StatsGroupForGameMode = Com_PlayerData_GetStatsGroupForGameMode();
                ActiveStatsSource = LiveStorage_GetActiveStatsSource(this->m_controllerIndex);
                if ( CL_PlayerData_GetDDLBuffer(&context, this->m_controllerIndex, ActiveStatsSource, (StatsGroup)StatsGroupForGameMode) && !StatsGroupForGameMode )
                {
                  v41 = bdJSONSerializer::writeBeginArray(&jsonSerializer, "recent_maps") & v38;
                  do
                  {
                    ArrayStringByIndex = Com_PlayerData_GetArrayStringByIndex(&context, (const scr_string_t)scr_const.mapsPlayed, StatsGroupForGameMode, STATSGROUP_RANKED);
                    v43 = -1i64;
                    do
                      ++v43;
                    while ( ArrayStringByIndex[v43] );
                    if ( (_DWORD)v43 )
                      v41 &= bdJSONSerializer::writeString(&jsonSerializer, ArrayStringByIndex);
                    ++StatsGroupForGameMode;
                  }
                  while ( StatsGroupForGameMode < 20 );
                  v44 = bdJSONSerializer::writeEndArray(&jsonSerializer) & v41;
                  v45 = bdJSONSerializer::writeBeginArray(&jsonSerializer, "recent_playlist_ids") & v44;
                  v46 = 0;
                  p_m_listHead = &this->m_playerList.m_listHead;
                  do
                  {
                    ArrayIntByIndex = Com_PlayerData_GetArrayIntByIndex(&context, (const scr_string_t)scr_const.playlistIdsPlayed, v46, STATSGROUP_RANKED);
                    if ( ArrayIntByIndex )
                      v45 &= bdJSONSerializer::writeInt32(&jsonSerializer, ArrayIntByIndex, 0);
                    ++v46;
                  }
                  while ( v46 < 5 );
                  v38 = bdJSONSerializer::writeEndArray(&jsonSerializer) & v45;
                }
                v48 = DVARBOOL_online_mm_lobby_affinity;
                if ( !DVARBOOL_online_mm_lobby_affinity && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\universal\\dvar.h", 692, ASSERT_TYPE_ASSERT, "(dvar)", "%s\n\tDvar %s accessed after deregistration", "dvar", "online_mm_lobby_affinity") )
                  __debugbreak();
                Dvar_CheckFrontendServerThread(v48);
                if ( v48->current.enabled && !this->m_mmingData.m_firstTime )
                {
                  PartyData = Lobby_GetPartyData();
                  if ( Party_GetSavedLobbyId(PartyData, &outLobbyId) )
                    v38 &= bdJSONSerializer::writeUInt64(&jsonSerializer, "affinity_id", outLobbyId, 0);
                }
              }
              v27 = bdJSONSerializer::writeEndObject(&jsonSerializer) & v38;
            }
          }
          v28 = v28->mp_next;
        }
        while ( v28 != (ntl::internal::list_node_base *)p_m_listHead );
        v25 = v105;
      }
      v50 = bdJSONSerializer::writeEndObject(&jsonSerializer) & v27;
      if ( !Live_IsCrossPlayEnabled(this->m_controllerIndex) )
      {
        bdJSONSerializer::writeBeginArray(&jsonSerializer, "acceptable_platforms");
        ClientPlatform = GetClientPlatform();
        MatchmakingStringForClientPlatform = Com_GetMatchmakingStringForClientPlatform((const ClientPlatform)ClientPlatform);
        bdJSONSerializer::writeString(&jsonSerializer, MatchmakingStringForClientPlatform);
        v50 = bdJSONSerializer::writeEndArray(&jsonSerializer);
      }
      v53 = Playlist_WritePlaylistLobbySlotsJSON(this->m_params.m_playlistId, v25, &jsonSerializer) && v50;
      v54 = Playlist_WritePlaylistTeamInfoJSON(this->m_params.m_playlistId, this->m_params.m_playlistCategory, v25, &jsonSerializer) && v53;
      v55 = Playlist_WritePlaylistDedicatedServerJSON(this->m_params.m_playlistId, v25, &jsonSerializer) && v54;
      v56 = Playlist_WritePlaylistConfigInfoJSON(this->m_params.m_playlistId, this->m_params.m_playlistCategory, v25, &jsonSerializer) && v55;
      v57 = bdJSONSerializer::writeBeginObject(&jsonSerializer, "ruleset_payload") && v56;
      v58 = Playlist_WritePlaylistMapsJSON(this->m_params.m_playlistId, v25, &jsonSerializer) && v57;
      v59 = bdJSONSerializer::writeBeginObject(&jsonSerializer, "filter");
      v60 = bdJSONSerializer::writeString(&jsonSerializer, "matchmaking_version", "1.0") && v59;
      v61 = bdJSONSerializer::writeInt32(&jsonSerializer, "playlist_id", this->m_params.m_playlistId, 0) && v60;
      ProtocolVersion = GetProtocolVersion();
      v63 = bdJSONSerializer::writeInt32(&jsonSerializer, "netcode_version", ProtocolVersion, 0) && v61;
      if ( Live_IsInGameBattlesGame() )
      {
        memset_0(dest, 0, sizeof(dest));
        CurrentMatchId = GameBattles_GetCurrentMatchId();
        Com_sprintf(dest, 0x80ui64, "%ugame_battles", CurrentMatchId);
        v63 &= bdJSONSerializer::writeString(&jsonSerializer, "online_matchmaking_restrict", dest);
      }
      if ( DVARSTR_online_matchmaking_restrict && !Live_IsInGameBattlesGame() )
      {
        v65 = DVARSTR_online_matchmaking_restrict;
        if ( !DVARSTR_online_matchmaking_restrict && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\universal\\dvar.h", 748, ASSERT_TYPE_ASSERT, "(dvar)", "%s\n\tDvar %s accessed after deregistration", "dvar", "online_matchmaking_restrict") )
          __debugbreak();
        Dvar_CheckFrontendServerThread(v65);
        v63 &= bdJSONSerializer::writeString(&jsonSerializer, "online_matchmaking_restrict", v65->current.string);
      }
      v66 = bdJSONSerializer::writeInt32(&jsonSerializer, "playlist_version", this->m_params.m_playlistVersion, 0) & v63;
      v67 = bdJSONSerializer::writeEndObject(&jsonSerializer) & v66 & v58;
      if ( m_id )
      {
        v67 &= bdJSONSerializer::writeBoolean(&jsonSerializer, "should_enforce_matching_dlc", 0);
        v69 = 1;
        v70 = "private_lobby";
      }
      else
      {
        v68 = DVARBOOL_online_matchmaking_do_not_use_dlc_mming;
        if ( !DVARBOOL_online_matchmaking_do_not_use_dlc_mming && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\universal\\dvar.h", 692, ASSERT_TYPE_ASSERT, "(dvar)", "%s\n\tDvar %s accessed after deregistration", "dvar", "online_matchmaking_do_not_use_dlc_mming") )
          __debugbreak();
        Dvar_CheckFrontendServerThread(v68);
        v69 = !v68->current.enabled;
        v70 = "should_enforce_matching_dlc";
      }
      v71 = bdJSONSerializer::writeBoolean(&jsonSerializer, v70, v69) & v67;
      v72 = DVARBOOL_online_matchmaking_force_host;
      if ( DVARBOOL_online_matchmaking_force_host )
      {
        Dvar_CheckFrontendServerThread(DVARBOOL_online_matchmaking_force_host);
        if ( v72->current.enabled )
          v71 &= bdJSONSerializer::writeBoolean(&jsonSerializer, "force_host_of_empty_new_lobby", 1);
      }
      v73 = DVARBOOL_online_matchmaking_only_join_existing_lobbies;
      if ( !DVARBOOL_online_matchmaking_only_join_existing_lobbies && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\universal\\dvar.h", 692, ASSERT_TYPE_ASSERT, "(dvar)", "%s\n\tDvar %s accessed after deregistration", "dvar", "online_matchmaking_only_join_existing_lobbies") )
        __debugbreak();
      Dvar_CheckFrontendServerThread(v73);
      v74 = bdJSONSerializer::writeBoolean(&jsonSerializer, "only_join_existing_lobbies", v73->current.enabled) & v71;
      v75 = DVARBOOL_online_matchmaking_use_lobby_affinity;
      if ( !DVARBOOL_online_matchmaking_use_lobby_affinity && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\universal\\dvar.h", 692, ASSERT_TYPE_ASSERT, "(dvar)", "%s\n\tDvar %s accessed after deregistration", "dvar", "online_matchmaking_use_lobby_affinity") )
        __debugbreak();
      Dvar_CheckFrontendServerThread(v75);
      if ( v75->current.enabled )
      {
        v76 = DVARBOOL_online_matchmaking_use_jip;
        if ( !DVARBOOL_online_matchmaking_use_jip && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\universal\\dvar.h", 692, ASSERT_TYPE_ASSERT, "(dvar)", "%s\n\tDvar %s accessed after deregistration", "dvar", "online_matchmaking_use_jip") )
          __debugbreak();
        Dvar_CheckFrontendServerThread(v76);
        if ( v76->current.enabled )
          v74 &= bdJSONSerializer::writeBoolean(&jsonSerializer, "join_in_progress", this->m_mmingData.m_firstTime);
      }
      v77 = DVARINT_online_matchmaking_min_slots_scale_percent;
      if ( !DVARINT_online_matchmaking_min_slots_scale_percent && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\universal\\dvar.h", 699, ASSERT_TYPE_ASSERT, "(dvar)", "%s\n\tDvar %s accessed after deregistration", "dvar", "online_matchmaking_min_slots_scale_percent") )
        __debugbreak();
      Dvar_CheckFrontendServerThread(v77);
      v78 = bdJSONSerializer::writeInt32(&jsonSerializer, "min_slots_scale_percent", v77->current.integer, 0) & v74;
      v79 = bdJSONSerializer::writeEndObject(&jsonSerializer) & v78;
      if ( this->m_params.m_tournamentTeamSize > 0 )
      {
        v80 = bdJSONSerializer::writeBeginObject(&jsonSerializer, "tournament") & v79;
        v81 = bdJSONSerializer::writeInt32(&jsonSerializer, "team_size", this->m_params.m_tournamentTeamSize, 0) & v80;
        v79 = bdJSONSerializer::writeEndObject(&jsonSerializer) & v81;
      }
      m_gameType = this->m_params.m_gameType;
      if ( (unsigned int)m_gameType > eGAME_TYPE_BM && m_gameType != eGAME_TYPE_COMPETITIVE_MULTIPLAYER && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\online\\online_matchmaker.cpp", 2569, ASSERT_TYPE_SANITY, "(m_params.m_gameType == eGAME_TYPE_COOP || m_params.m_gameType == eGAME_TYPE_MULTIPLAYER || m_params.m_gameType == eGAME_TYPE_CAMPAIGN || m_params.m_gameType == eGAME_TYPE_GROUND_WAR || m_params.m_gameType == eGAME_TYPE_BR || m_params.m_gameType == eGAME_TYPE_BM || m_params.m_gameType == eGAME_TYPE_COMPETITIVE_MULTIPLAYER)", "%s\n\t\"Incorrect matchmaking_game_type set in playlist, valid values are 0,1,2,3,4,5,11\"", "m_params.m_gameType == eGAME_TYPE_COOP || m_params.m_gameType == eGAME_TYPE_MULTIPLAYER || m_params.m_gameType == eGAME_TYPE_CAMPAIGN || m_params.m_gameType == eGAME_TYPE_GROUND_WAR || m_params.m_gameType == eGAME_TYPE_BR || m_params.m_gameType == eGAME_TYPE_BM || m_params.m_gameType == eGAME_TYPE_COMPETITIVE_MULTIPLAYER") )
        __debugbreak();
      v83 = bdJSONSerializer::writeBeginObject(&jsonSerializer, "performance") & v79;
      v84 = bdJSONSerializer::writeUInt32(&jsonSerializer, "game_type", this->m_params.m_gameType, 0) & v83;
      v22 = bdJSONSerializer::writeEndObject(&jsonSerializer) & v84;
      if ( m_id )
      {
        v85 = bdJSONSerializer::writeBeginObject(&jsonSerializer, "private_lobby") & v22;
        v86 = bdJSONSerializer::writeUInt64(&jsonSerializer, "initial_lobby_host", this->m_params.m_privateMatchId.m_id, 0) & v85;
        v22 = bdJSONSerializer::writeEndObject(&jsonSerializer) & v86;
      }
      v23 = Sys_Milliseconds() + 30000;
      goto LABEL_126;
    }
    v21 = "lobby_id_to_presence_join";
  }
  else
  {
    if ( this->m_params.m_lobbyIdToJoin && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\online\\online_matchmaker.cpp", 2428, ASSERT_TYPE_ASSERT, "(m_params.m_lobbyIdToJoin == 0)", (const char *)&queryFormat, "m_params.m_lobbyIdToJoin == 0") )
      __debugbreak();
    m_lobbyIdToJoin = XUID::GetUniversalId(&this->m_params.m_inviteClientAttemptingToJoinUID);
    v21 = "player_id_to_presence_join";
  }
  v22 = bdJSONSerializer::writeUInt64(&jsonSerializer, v21, m_lobbyIdToJoin, 0) & v19;
  v23 = Sys_Milliseconds() + 10000;
LABEL_126:
  this->m_mmingData.m_timeOut = v23;
  v2 = bdJSONSerializer::writeEndObject(&jsonSerializer) & v22;
  if ( !bdJSONSerializer::validate(&jsonSerializer) && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\online\\online_matchmaker.cpp", 2586, ASSERT_TYPE_ASSERT, "(jsonSerialize.validate())", (const char *)&queryFormat, "jsonSerialize.validate()") )
    __debugbreak();
  if ( v2 )
  {
    if ( !bdJSONSerializer::validate(&jsonSerializer) && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\online\\online_matchmaker.cpp", 2590, ASSERT_TYPE_ASSERT, "(jsonSerialize.validate())", (const char *)&queryFormat, "jsonSerialize.validate()") )
      __debugbreak();
    *(_DWORD *)&this->m_response._bytes_20[8] = 0x4000;
    *(_QWORD *)this->m_response._bytes_20 = this->m_responseBuffer;
    memset_0(this->m_responseBuffer, 0, sizeof(this->m_responseBuffer));
    m_requestBuffer = this->m_requestBuffer;
    Com_Printf(25, "[MM] %s - \n\"%s\"\n", "OnlineMatchmakerOmniscient::StartMatchmaking", this->m_requestBuffer);
    Com_sprintf<16384>((char (*)[16384])v115, "{\"request_buffer\":\"%s\"}", this->m_requestBuffer);
    OnlineMatchmakerOmniscient::Log(this, "StartMatchmaking", v115, NULL, NULL, 0i64);
    v87 = Online_GetEpochTimeFromAuth_s() + 300;
    v88 = Online_GetEpochTimeFromAuth_s() - 60;
    Xuid = Live_GetXuid(&result, this->m_controllerIndex);
    v90 = XUID::GetUniversalId(Xuid);
    EnvironmentName = dwGetEnvironmentName();
    Instance = DWServicesAccess::GetInstance();
    TitleID = DWServicesAccess::GetTitleID(Instance);
    Com_Printf(25, "[MM] https:
    v94 = DWServicesAccess::GetInstance();
    AsyncMatchmaking = DWServicesAccess::GetAsyncMatchmaking(v94, this->m_controllerIndex);
    v96 = bdJSONSerializer::length(&jsonSerializer);
    started = (TaskCreateRequest *)DWAsyncMatchMaking::startSearch(AsyncMatchmaking, &v106, this->m_requestBuffer, v96 + 1, &this->m_response);
    if ( started != (TaskCreateRequest *)&pTaskCreateRequest.m_remoteDemonwareTask )
    {
      if ( pTaskCreateRequest.m_remoteDemonwareTask.m_ptr && _InterlockedExchangeAdd((volatile signed __int32 *)&pTaskCreateRequest.m_remoteDemonwareTask.m_ptr->m_refCount, 0xFFFFFFFF) == 1 && pTaskCreateRequest.m_remoteDemonwareTask.m_ptr )
        ((void (__fastcall *)(bdRemoteTask *, __int64))pTaskCreateRequest.m_remoteDemonwareTask.m_ptr->~bdReferencable)(pTaskCreateRequest.m_remoteDemonwareTask.m_ptr, 1i64);
      v98 = *(bdRemoteTask **)&started->m_controllerIndex;
      pTaskCreateRequest.m_remoteDemonwareTask.m_ptr = v98;
      if ( v98 )
        _InterlockedExchangeAdd((volatile signed __int32 *)&v98->m_refCount, 1u);
    }
    if ( v106.m_ptr && _InterlockedExchangeAdd((volatile signed __int32 *)&v106.m_ptr->m_refCount, 0xFFFFFFFF) == 1 )
    {
      if ( v106.m_ptr )
        ((void (__fastcall *)(bdRemoteTask *, __int64))v106.m_ptr->~bdReferencable)(v106.m_ptr, 1i64);
      v106.m_ptr = NULL;
    }
    v99 = DVARINT_online_matchmaking_startmatchmaking_interval_ms;
    if ( !DVARINT_online_matchmaking_startmatchmaking_interval_ms && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\universal\\dvar.h", 699, ASSERT_TYPE_ASSERT, "(dvar)", "%s\n\tDvar %s accessed after deregistration", "dvar", "online_matchmaking_startmatchmaking_interval_ms") )
      __debugbreak();
    Dvar_CheckFrontendServerThread(v99);
    integer = v99->current.integer;
    this->m_mmingData.m_timeTillNextStart_ms = integer + Online_GetEpochTimeFromAuth_ms();
    pTaskCreateRequest.m_appData = this;
    pTaskCreateRequest.m_onCompletionCallback = OnlineMatchmakerOmniscient::staticTaskStartMatchmaking;
    pTaskCreateRequest.m_controllerIndex = this->m_controllerIndex;
    if ( pTaskCreateRequest.m_remoteDemonwareTask.m_ptr && (v101 = TaskManager::GetInstance(), TaskManager::CreateTask(v101, &pTaskCreateRequest, &pTaskCreateResult)) )
    {
      this->m_outstandingTaskId = pTaskCreateResult.m_localTaskId;
      v2 = 1;
      this->m_mmingData.m_startTimeMs = Sys_Milliseconds();
      v102 = OnlineTimeSeriesLog::Get();
      OnlineTimeSeriesLog::WriteEventCounter(v102, "mming.startmatchmaking.initiate.count", 1u);
      OnlineMatchmakerTelemetry::StartSearch(&this->m_telemetry, &this->m_params);
    }
    else
    {
      v2 = 0;
    }
  }
  else
  {
    m_requestBuffer = (void *)result.m_id;
  }
LABEL_153:
  memset_0(m_requestBuffer, 0, 0x4000ui64);
  bdJSONSerializer::~bdJSONSerializer(&jsonSerializer);
  pTaskCreateRequest.m_onCompletionCallback = NULL;
  pTaskCreateRequest.m_onUpdateCallback = NULL;
  pTaskCreateRequest.m_appSecondaryCallback = NULL;
  pTaskCreateRequest.m_timeoutInSeconds = 0;
  m_asyncInfo = pTaskCreateRequest.m_asyncInfo;
  if ( pTaskCreateRequest.m_asyncInfo )
  {
    pTaskCreateRequest.m_asyncInfo->__abi_Release(pTaskCreateRequest.m_asyncInfo);
    m_asyncInfo = NULL;
    pTaskCreateRequest.m_asyncInfo = NULL;
  }
  if ( pTaskCreateRequest.m_remoteDemonwareTask.m_ptr )
  {
    if ( _InterlockedExchangeAdd((volatile signed __int32 *)&pTaskCreateRequest.m_remoteDemonwareTask.m_ptr->m_refCount, 0xFFFFFFFF) == 1 )
    {
      if ( pTaskCreateRequest.m_remoteDemonwareTask.m_ptr )
        ((void (__fastcall *)(bdRemoteTask *, __int64))pTaskCreateRequest.m_remoteDemonwareTask.m_ptr->~bdReferencable)(pTaskCreateRequest.m_remoteDemonwareTask.m_ptr, 1i64);
      pTaskCreateRequest.m_remoteDemonwareTask.m_ptr = NULL;
    }
    m_asyncInfo = pTaskCreateRequest.m_asyncInfo;
  }
  if ( m_asyncInfo )
    m_asyncInfo->__abi_Release(m_asyncInfo);
  return v2;
}

/*
==============
OnlineMatchmakerOmniscient::StartNextSearchRound
==============
*/
char OnlineMatchmakerOmniscient::StartNextSearchRound(OnlineMatchmakerOmniscient *this)
{
  if ( this->m_state != eREADY )
    return 0;
  OnlineMatchmakerOmniscient::SetState(this, eUPDATING);
  return 1;
}

/*
==============
OnlineMatchmakerOmniscient::SyncSplitscreenPlayers
==============
*/
void OnlineMatchmakerOmniscient::SyncSplitscreenPlayers(OnlineMatchmakerOmniscient *this)
{
  OnlineMatchmakerOmniscient *v1; 
  PartyData *PartyData; 
  const dvar_t *v3; 
  ntl::internal::list_node_base *mp_next; 
  ntl::internal::list_head_base<ntl::internal::list_node<OnlineMatchmakerOmniscient::Player> > *p_m_listHead; 
  ntl::internal::list_node_base *v6; 
  int mp_prev_high; 
  int mp_prev; 
  int v9; 
  int v10; 
  const char *v11; 
  const char *v12; 
  int v13; 
  char *fmt; 
  __int64 v15; 
  __int64 v16; 
  __int64 v17; 
  bool enabled; 
  ntl::internal::list_head_base<ntl::internal::list_node<OnlineMatchmakerOmniscient::Player> > *i; 
  PartyData *party; 

  v1 = this;
  PartyData = Lobby_GetPartyData();
  v3 = DVARBOOL_online_matchmaking_update_party_team_squad_assignments;
  party = PartyData;
  if ( !DVARBOOL_online_matchmaking_update_party_team_squad_assignments && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\universal\\dvar.h", 692, ASSERT_TYPE_ASSERT, "(dvar)", "%s\n\tDvar %s accessed after deregistration", "dvar", "online_matchmaking_update_party_team_squad_assignments") )
    __debugbreak();
  Dvar_CheckFrontendServerThread(v3);
  mp_next = v1->m_playerList.m_listHead.m_sentinel.mp_next;
  enabled = v3->current.enabled;
  p_m_listHead = &v1->m_playerList.m_listHead;
  for ( i = &v1->m_playerList.m_listHead; mp_next != (ntl::internal::list_node_base *)p_m_listHead; mp_next = mp_next->mp_next )
  {
    if ( !mp_next )
    {
      if ( CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\libs\\ntl\\ntl\\list\\list.h", 103, ASSERT_TYPE_ASSERT, "( mp_node )", (const char *)&queryFormat, "mp_node") )
        __debugbreak();
      p_m_listHead = &v1->m_playerList.m_listHead;
    }
    if ( !BYTE1(mp_next[7].mp_next) )
    {
      v6 = v1->m_playerList.m_listHead.m_sentinel.mp_next;
      if ( v6 != mp_next )
      {
        while ( 1 )
        {
          if ( !v6 && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\libs\\ntl\\ntl\\list\\list.h", 103, ASSERT_TYPE_ASSERT, "( mp_node )", (const char *)&queryFormat, "mp_node") )
            __debugbreak();
          if ( !XNADDR::IsNull((XNADDR *)((char *)&v6[1].mp_prev + 4)) )
          {
            if ( !v6 && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\libs\\ntl\\ntl\\list\\list.h", 103, ASSERT_TYPE_ASSERT, "( mp_node )", (const char *)&queryFormat, "mp_node") )
              __debugbreak();
            if ( XNADDR::operator==((XNADDR *)((char *)&v6[1].mp_prev + 4), (const XNADDR *)((char *)&mp_next[1].mp_prev + 4)) )
            {
              if ( !v6 && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\libs\\ntl\\ntl\\list\\list.h", 103, ASSERT_TYPE_ASSERT, "( mp_node )", (const char *)&queryFormat, "mp_node") )
                __debugbreak();
              if ( LODWORD(v6[12].mp_prev) != LODWORD(mp_next[12].mp_prev) || HIDWORD(v6[12].mp_prev) != HIDWORD(mp_next[12].mp_prev) )
                break;
            }
          }
          if ( !v6 && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\libs\\ntl\\ntl\\list\\list.h", 109, ASSERT_TYPE_ASSERT, "( mp_node )", (const char *)&queryFormat, "mp_node") )
            __debugbreak();
          v6 = v6->mp_next;
          if ( v6 == mp_next )
            goto LABEL_34;
        }
        if ( !v6 && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\libs\\ntl\\ntl\\list\\list.h", 103, ASSERT_TYPE_ASSERT, "( mp_node )", (const char *)&queryFormat, "mp_node") )
          __debugbreak();
        mp_prev_high = HIDWORD(v6[12].mp_prev);
        mp_prev = (int)v6[12].mp_prev;
        v9 = HIDWORD(mp_next[12].mp_prev);
        v10 = (int)mp_next[12].mp_prev;
        v11 = XUID::ToDevString((XUID *)&v6[6].mp_next);
        v12 = XUID::ToDevString((XUID *)&mp_next[6].mp_next);
        LODWORD(v17) = mp_prev_high;
        LODWORD(v16) = mp_prev;
        LODWORD(v15) = v9;
        LODWORD(fmt) = v10;
        Com_Printf(25, "\tChanging splitscreen user %s to match primary user %s, from team %i squad %i to team %i squad %i\n", v12, v11, fmt, v15, v16, v17);
        v13 = (int)v6[12].mp_prev;
        LODWORD(mp_next[12].mp_prev) = v13;
        HIDWORD(mp_next[12].mp_prev) = HIDWORD(v6[12].mp_prev);
        if ( enabled )
        {
          PartyHost_SetTeam(party, (const XUID)mp_next[6].mp_next, (team_t)(v13 + 1));
          PartyHost_SetSquad(party, (const XUID)mp_next[6].mp_next, HIDWORD(mp_next[12].mp_prev));
        }
LABEL_34:
        v1 = this;
        p_m_listHead = i;
      }
    }
  }
}

/*
==============
OnlineMatchmakerOmniscient::TaskCancelMatchmaking
==============
*/
void OnlineMatchmakerOmniscient::TaskCancelMatchmaking(OnlineMatchmakerOmniscient *this, GenericTask *task, eTaskManagerTaskState state)
{
  bdLobbyErrorCode ErrorCode; 
  bdLobbyErrorCode v7; 
  unsigned __int64 TransactionID; 
  unsigned __int64 demonwareTaskId; 
  const char *v10; 
  OnlineTimeSeriesLog *v11; 
  unsigned __int64 m_matchmakingId; 
  unsigned __int64 v13; 
  unsigned __int64 v14; 
  OnlineTimeSeriesLog *v15; 
  bdLobbyErrorCode hostDoc; 
  char buffer[64]; 

  ErrorCode = bdRemoteTask::getErrorCode(task->m_remoteDemonwareTask.m_ptr);
  v7 = ErrorCode;
  if ( state )
  {
    dwLobbyErrorCodeToString(ErrorCode, buffer, 0x40u);
    TransactionID = bdRemoteTask::getTransactionID(task->m_remoteDemonwareTask.m_ptr);
    hostDoc = v7;
    Com_PrintError(25, "[MM] %s : Demonware failure. Error code = %s (%d) (%zu).\n", "OnlineMatchmakerOmniscient::TaskCancelMatchmaking", buffer, hostDoc, TransactionID);
    demonwareTaskId = bdRemoteTask::getTransactionID(task->m_remoteDemonwareTask.m_ptr);
    v10 = j_va("{\"state\":\"failed\", \"demonware_error\"=\"%s\"}", buffer);
    OnlineMatchmakerOmniscient::Log(this, "TaskCancelMatchmaking", v10, NULL, NULL, demonwareTaskId);
    v11 = OnlineTimeSeriesLog::Get();
    OnlineTimeSeriesLog::WriteEventCounter(v11, "mming.cancelmatchmaking.failure.count", 1u);
    OnlineMatchmakerOmniscient::SetState(this, eFAILURE|eREADY);
  }
  else
  {
    m_matchmakingId = this->m_mmingData.m_matchmakingId;
    v13 = bdRemoteTask::getTransactionID(task->m_remoteDemonwareTask.m_ptr);
    Com_Printf(25, "[MM] %s complete (%zu), matchmaking id (%zu)\n", "OnlineMatchmakerOmniscient::TaskCancelMatchmaking", v13, m_matchmakingId);
    v14 = bdRemoteTask::getTransactionID(task->m_remoteDemonwareTask.m_ptr);
    OnlineMatchmakerOmniscient::Log(this, "TaskCancelMatchmaking", "{\"state\":\"success\"}", NULL, NULL, v14);
    OnlineMatchmakerOmniscient::SetState(this, eREMOTE_WAITING_FOR_MMING_TOKEN);
    v15 = OnlineTimeSeriesLog::Get();
    OnlineTimeSeriesLog::WriteEventCounter(v15, "mming.cancelmatchmaking.success.count", 1u);
    OnlineMatchmakerTelemetry::Cancel(&this->m_telemetry);
  }
}

/*
==============
OnlineMatchmakerOmniscient::TaskGetLobbyDocuments
==============
*/
void OnlineMatchmakerOmniscient::TaskGetLobbyDocuments(OnlineMatchmakerOmniscient *this, GenericTask *task, eTaskManagerTaskState state)
{
  bdLobbyErrorCode ErrorCode; 
  bdLobbyErrorCode v7; 
  unsigned __int64 TransactionID; 
  unsigned __int64 demonwareTaskId; 
  const char *v10; 
  OnlineTimeSeriesLog *v11; 
  unsigned __int64 m_lobbyid; 
  unsigned __int64 v13; 
  unsigned __int64 v14; 
  OnlineTimeSeriesLog *v15; 
  bdLobbyErrorCode hostDoc; 
  char buffer[64]; 

  ErrorCode = bdRemoteTask::getErrorCode(task->m_remoteDemonwareTask.m_ptr);
  v7 = ErrorCode;
  if ( state )
  {
    dwLobbyErrorCodeToString(ErrorCode, buffer, 0x40u);
    TransactionID = bdRemoteTask::getTransactionID(task->m_remoteDemonwareTask.m_ptr);
    hostDoc = v7;
    Com_PrintError(25, "[MM] %s : Demonware failure. Error code = %s (%d) (%zu).\n", "OnlineMatchmakerOmniscient::TaskGetLobbyDocuments", buffer, hostDoc, TransactionID);
    demonwareTaskId = bdRemoteTask::getTransactionID(task->m_remoteDemonwareTask.m_ptr);
    v10 = j_va("{\"state\":\"failed\", \"demonware_error\"=\"%s\"}", buffer);
    OnlineMatchmakerOmniscient::Log(this, "TaskGetLobbyDocuments", v10, NULL, NULL, demonwareTaskId);
    v11 = OnlineTimeSeriesLog::Get();
    OnlineTimeSeriesLog::WriteEventCounter(v11, "mming.getlobbydocuments.failure.count", 1u);
    OnlineMatchmakerOmniscient::SetState(this, eFAILURE|eREADY);
  }
  else
  {
    m_lobbyid = this->m_lobbyData.m_lobbyid;
    v13 = bdRemoteTask::getTransactionID(task->m_remoteDemonwareTask.m_ptr);
    Com_Printf(25, "[MM] %s complete (%zu), lobby id (%zu)\n", "OnlineMatchmakerOmniscient::TaskGetLobbyDocuments", v13, m_lobbyid);
    v14 = bdRemoteTask::getTransactionID(task->m_remoteDemonwareTask.m_ptr);
    OnlineMatchmakerOmniscient::Log(this, "TaskGetLobbyDocuments", "{\"state\":\"success\"}", this->m_lobbyDocuments.m_backendDoc, *((const char **)&this->m_lobbyDocuments.__vftable + 2), v14);
    OnlineMatchmakerOmniscient::UpdatedLobbyDocumentsBecomeHost(this);
    v15 = OnlineTimeSeriesLog::Get();
    OnlineTimeSeriesLog::WriteEventCounter(v15, "mming.getlobbydocuments.success.count", 1u);
  }
}

/*
==============
OnlineMatchmakerOmniscient::TaskGetMatchmakingToken
==============
*/
void OnlineMatchmakerOmniscient::TaskGetMatchmakingToken(OnlineMatchmakerOmniscient *this, GenericTask *task, eTaskManagerTaskState state)
{
  bdLobbyErrorCode ErrorCode; 
  bdLobbyErrorCode v7; 
  unsigned __int64 TransactionID; 
  unsigned __int64 demonwareTaskId; 
  const char *v10; 
  OnlineTimeSeriesLog *v11; 
  unsigned __int64 v12; 
  ntl::internal::list_node_base *mp_next; 
  ntl::internal::list_head_base<ntl::internal::list_node<OnlineMatchmakerOmniscient::Player> > *p_m_listHead; 
  ntl::internal::list_node_base *v15; 
  int mp_prev_high; 
  ntl::internal::list_node_base *v17; 
  void (__fastcall *m_tokenUpdateCallback)(const XUID, const unsigned __int64, const bool); 
  OnlineTimeSeriesLog *v19; 
  char buffer[64]; 

  ErrorCode = bdRemoteTask::getErrorCode(task->m_remoteDemonwareTask.m_ptr);
  v7 = ErrorCode;
  if ( state )
  {
    dwLobbyErrorCodeToString(ErrorCode, buffer, 0x40u);
    TransactionID = bdRemoteTask::getTransactionID(task->m_remoteDemonwareTask.m_ptr);
    Com_PrintError(25, "[MM] %s : Demonware failure. Error code = %s (%d) (%zu).\n", "OnlineMatchmakerOmniscient::TaskGetMatchmakingToken", buffer, v7, TransactionID);
    demonwareTaskId = bdRemoteTask::getTransactionID(task->m_remoteDemonwareTask.m_ptr);
    v10 = j_va("{\"state\":\"failed\", \"demonware_error\"=\"%s\"}", buffer);
    OnlineMatchmakerOmniscient::Log(this, "TaskGetMatchmakingToken", v10, NULL, NULL, demonwareTaskId);
    v11 = OnlineTimeSeriesLog::Get();
    OnlineTimeSeriesLog::WriteEventCounter(v11, "mming.gettoken.failure.count", 1u);
    OnlineMatchmakerOmniscient::SetState(this, eFAILURE|eREADY);
  }
  else
  {
    v12 = bdRemoteTask::getTransactionID(task->m_remoteDemonwareTask.m_ptr);
    Com_Printf(25, "[MM] %s complete (%zu)\n", "OnlineMatchmakerOmniscient::TaskGetMatchmakingToken", v12);
    mp_next = this->m_playerList.m_listHead.m_sentinel.mp_next;
    p_m_listHead = &this->m_playerList.m_listHead;
    if ( mp_next != (ntl::internal::list_node_base *)&this->m_playerList.m_listHead )
    {
      while ( 1 )
      {
        if ( !mp_next && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\libs\\ntl\\ntl\\list\\list.h", 103, ASSERT_TYPE_ASSERT, "( mp_node )", (const char *)&queryFormat, "mp_node") )
          __debugbreak();
        if ( LODWORD(mp_next[1].mp_prev) == 3 && LODWORD(mp_next[13].mp_next) == task->m_localTaskId )
          break;
        mp_next = mp_next->mp_next;
        if ( mp_next == (ntl::internal::list_node_base *)p_m_listHead )
          return;
      }
      v15 = mp_next + 1;
      if ( mp_next != (ntl::internal::list_node_base *)-16i64 )
      {
        if ( !LOBYTE(mp_next[7].mp_prev) && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\online\\online_matchmaker.cpp", 4157, ASSERT_TYPE_ASSERT, "(player->m_bIsLocal)", (const char *)&queryFormat, "player->m_bIsLocal") )
          __debugbreak();
        Com_Printf(25, "[MM] %s - retrieved matchmaking token - %zu.\n", "OnlineMatchmakerOmniscient::TaskGetMatchmakingToken", mp_next[9].mp_prev);
        mp_prev_high = HIDWORD(mp_next[7].mp_prev);
        mp_next[10].mp_next = mp_next[9].mp_prev;
        s_matchmakingToken[CL_Mgr_GetClientFromController(mp_prev_high)] = (unsigned __int64)mp_next[10].mp_next;
        OnlineMatchmakerOmniscient::SetPlayerState(this, (OnlineMatchmakerOmniscient::Player *)&mp_next[1], eREADY);
        LOBYTE(mp_next[7].mp_next) = 0;
        v17 = this->m_playerList.m_listHead.m_sentinel.mp_next;
        if ( v17 != (ntl::internal::list_node_base *)p_m_listHead )
        {
          while ( 1 )
          {
            if ( !v17 && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\libs\\ntl\\ntl\\list\\list.h", 103, ASSERT_TYPE_ASSERT, "( mp_node )", (const char *)&queryFormat, "mp_node") )
              __debugbreak();
            if ( XUID::operator!=((XUID *)&v17[6].mp_next, (const XUID *)&v15[5].mp_next) )
            {
              if ( !v17 && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\libs\\ntl\\ntl\\list\\list.h", 103, ASSERT_TYPE_ASSERT, "( mp_node )", (const char *)&queryFormat, "mp_node") )
                __debugbreak();
              if ( LOBYTE(v17[7].mp_prev) )
                break;
            }
            if ( !v17 && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\libs\\ntl\\ntl\\list\\list.h", 109, ASSERT_TYPE_ASSERT, "( mp_node )", (const char *)&queryFormat, "mp_node") )
              __debugbreak();
            v17 = v17->mp_next;
            if ( v17 == (ntl::internal::list_node_base *)p_m_listHead )
              goto LABEL_30;
          }
          v17[10].mp_next = v15[9].mp_next;
          s_matchmakingToken[CL_Mgr_GetClientFromController(HIDWORD(v17[7].mp_prev))] = (unsigned __int64)v17[10].mp_next;
          OnlineMatchmakerOmniscient::SetPlayerState(this, (OnlineMatchmakerOmniscient::Player *)&v17[1], eREADY);
        }
LABEL_30:
        m_tokenUpdateCallback = this->m_callbacks.m_tokenUpdateCallback;
        if ( m_tokenUpdateCallback )
          ((void (__fastcall *)(ntl::internal::list_node_base *, ntl::internal::list_node_base *, _QWORD))m_tokenUpdateCallback)(v15[5].mp_next, v15[9].mp_next, BYTE1(v15[6].mp_next));
        v19 = OnlineTimeSeriesLog::Get();
        OnlineTimeSeriesLog::WriteEventCounter(v19, "mming.gettoken.success.count", 1u);
      }
    }
  }
}

/*
==============
OnlineMatchmakerOmniscient::TaskLobbyDisbanded
==============
*/
void OnlineMatchmakerOmniscient::TaskLobbyDisbanded(OnlineMatchmakerOmniscient *this, GenericTask *task, eTaskManagerTaskState state)
{
  bdLobbyErrorCode ErrorCode; 
  bdLobbyErrorCode v7; 
  unsigned __int64 TransactionID; 
  unsigned __int64 demonwareTaskId; 
  const char *v10; 
  OnlineTimeSeriesLog *v11; 
  unsigned __int64 m_lobbyid; 
  unsigned __int64 v13; 
  unsigned __int64 v14; 
  bdLobbyErrorCode hostDoc; 
  char buffer[64]; 

  ErrorCode = bdRemoteTask::getErrorCode(task->m_remoteDemonwareTask.m_ptr);
  v7 = ErrorCode;
  if ( state )
  {
    dwLobbyErrorCodeToString(ErrorCode, buffer, 0x40u);
    TransactionID = bdRemoteTask::getTransactionID(task->m_remoteDemonwareTask.m_ptr);
    hostDoc = v7;
    Com_PrintError(25, "[MM] %s : Demonware failure. Error code = %s (%d) (%zu).\n", "OnlineMatchmakerOmniscient::TaskLobbyDisbanded", buffer, hostDoc, TransactionID);
    demonwareTaskId = bdRemoteTask::getTransactionID(task->m_remoteDemonwareTask.m_ptr);
    v10 = j_va("{\"state\":\"failed\", \"demonware_error\"=\"%s\"}", buffer);
    OnlineMatchmakerOmniscient::Log(this, "TaskLobbyDisbanded", v10, NULL, NULL, demonwareTaskId);
    OnlineMatchmakerOmniscient::SetState(this, eFAILURE|eREADY);
    v11 = OnlineTimeSeriesLog::Get();
    OnlineTimeSeriesLog::WriteEventCounter(v11, "mming.lobbyDisbanded.failure.count", 1u);
    this->m_callbacks.m_outstandingCallback |= 0x40u;
    this->m_callbacks.m_callbackWasSuccessful[6] = 0;
  }
  else
  {
    m_lobbyid = this->m_lobbyData.m_lobbyid;
    v13 = bdRemoteTask::getTransactionID(task->m_remoteDemonwareTask.m_ptr);
    Com_Printf(25, "[MM] %s complete (%zu), lobby id (%zu)\n", "OnlineMatchmakerOmniscient::TaskLobbyDisbanded", v13, m_lobbyid);
    v14 = bdRemoteTask::getTransactionID(task->m_remoteDemonwareTask.m_ptr);
    OnlineMatchmakerOmniscient::Log(this, "TaskLobbyDisbanded", "{\"state\":\"success\"}", NULL, NULL, v14);
    this->m_callbacks.m_outstandingCallback |= 0x10u;
    this->m_callbacks.m_callbackWasSuccessful[4] = 1;
  }
}

/*
==============
OnlineMatchmakerOmniscient::TaskLocalPlayerAddedToDW
==============
*/
void OnlineMatchmakerOmniscient::TaskLocalPlayerAddedToDW(OnlineMatchmakerOmniscient *this, GenericTask *task, eTaskManagerTaskState state)
{
  bdLobbyErrorCode ErrorCode; 
  bdLobbyErrorCode v7; 
  unsigned __int64 TransactionID; 
  unsigned __int64 demonwareTaskId; 
  const char *v10; 
  OnlineTimeSeriesLog *v11; 
  unsigned __int64 v12; 
  ntl::internal::list_node_base *mp_next; 
  OnlineMatchmakerOmniscient::Player *v14; 
  unsigned __int64 v15; 
  OnlineTimeSeriesLog *v16; 
  char buffer[64]; 

  ErrorCode = bdRemoteTask::getErrorCode(task->m_remoteDemonwareTask.m_ptr);
  v7 = ErrorCode;
  if ( state )
  {
    if ( state != TASKSTATE_CANCELED )
    {
      dwLobbyErrorCodeToString(ErrorCode, buffer, 0x40u);
      TransactionID = bdRemoteTask::getTransactionID(task->m_remoteDemonwareTask.m_ptr);
      Com_PrintError(25, "[MM] %s : Demonware failure. Error code = %s (%d) (%zu).\n", "OnlineMatchmakerOmniscient::TaskLocalPlayerAddedToDW", buffer, v7, TransactionID);
      demonwareTaskId = bdRemoteTask::getTransactionID(task->m_remoteDemonwareTask.m_ptr);
      v10 = j_va("{\"state\":\"failed\", \"demonware_error\"=\"%s\"}", buffer);
      OnlineMatchmakerOmniscient::Log(this, "TaskLocalPlayerAddedToDW", v10, NULL, NULL, demonwareTaskId);
      v11 = OnlineTimeSeriesLog::Get();
      OnlineTimeSeriesLog::WriteEventCounter(v11, "mming.setplayerinfo.failure.count", 1u);
      OnlineMatchmakerOmniscient::SetState(this, eFAILURE|eREADY);
    }
  }
  else
  {
    v12 = bdRemoteTask::getTransactionID(task->m_remoteDemonwareTask.m_ptr);
    Com_Printf(25, "[MM] %s complete (%zu)\n", "OnlineMatchmakerOmniscient::TaskLocalPlayerAddedToDW", v12);
    mp_next = this->m_playerList.m_listHead.m_sentinel.mp_next;
    if ( mp_next != (ntl::internal::list_node_base *)&this->m_playerList.m_listHead )
    {
      while ( 1 )
      {
        if ( !mp_next && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\libs\\ntl\\ntl\\list\\list.h", 103, ASSERT_TYPE_ASSERT, "( mp_node )", (const char *)&queryFormat, "mp_node") )
          __debugbreak();
        if ( LODWORD(mp_next[1].mp_prev) == 2 && LODWORD(mp_next[13].mp_next) == task->m_localTaskId )
          break;
        mp_next = mp_next->mp_next;
        if ( mp_next == (ntl::internal::list_node_base *)&this->m_playerList.m_listHead )
          return;
      }
      v14 = (OnlineMatchmakerOmniscient::Player *)&mp_next[1];
      if ( v14 )
      {
        v15 = bdRemoteTask::getTransactionID(task->m_remoteDemonwareTask.m_ptr);
        OnlineMatchmakerOmniscient::Log(this, "TaskLocalPlayerAddedToDW", "{\"state\":\"success\"}", NULL, NULL, v15);
        OnlineMatchmakerOmniscient::SetPlayerState(this, v14, eREMOTE_WAITING_FOR_MMING_TOKEN);
        v16 = OnlineTimeSeriesLog::Get();
        OnlineTimeSeriesLog::WriteEventCounter(v16, "mming.setplayerinfo.success.count", 1u);
      }
    }
  }
}

/*
==============
OnlineMatchmakerOmniscient::TaskQosComplete
==============
*/
void OnlineMatchmakerOmniscient::TaskQosComplete(OnlineMatchmakerOmniscient *this, GenericTask *task, eTaskManagerTaskState state)
{
  bdLobbyErrorCode ErrorCode; 
  bdLobbyErrorCode v7; 
  unsigned __int64 TransactionID; 
  unsigned __int64 demonwareTaskId; 
  const char *v10; 
  OnlineTimeSeriesLog *v11; 
  const char *v12; 
  unsigned __int64 v13; 
  unsigned __int64 v14; 
  char buffer[64]; 

  ErrorCode = bdRemoteTask::getErrorCode(task->m_remoteDemonwareTask.m_ptr);
  v7 = ErrorCode;
  if ( state )
  {
    dwLobbyErrorCodeToString(ErrorCode, buffer, 0x40u);
    TransactionID = bdRemoteTask::getTransactionID(task->m_remoteDemonwareTask.m_ptr);
    Com_PrintError(25, "[MM] %s : Demonware failure. Error code = %s (%d) (%zu).\n", "OnlineMatchmakerOmniscient::TaskQosComplete", buffer, v7, TransactionID);
    demonwareTaskId = bdRemoteTask::getTransactionID(task->m_remoteDemonwareTask.m_ptr);
    v10 = j_va("{\"state\":\"failed\", \"demonware_error\"=\"%s\"}", buffer);
    OnlineMatchmakerOmniscient::Log(this, "TaskQosComplete", v10, NULL, NULL, demonwareTaskId);
    v11 = OnlineTimeSeriesLog::Get();
    v12 = "mming.qoshostsreply.failure.count";
  }
  else
  {
    v13 = bdRemoteTask::getTransactionID(task->m_remoteDemonwareTask.m_ptr);
    Com_Printf(25, "[MM] %s complete (%zu)\n", "OnlineMatchmakerOmniscient::TaskQosComplete", v13);
    v14 = bdRemoteTask::getTransactionID(task->m_remoteDemonwareTask.m_ptr);
    OnlineMatchmakerOmniscient::Log(this, "TaskQosComplete", "{\"state\":\"success\"}", NULL, NULL, v14);
    v11 = OnlineTimeSeriesLog::Get();
    v12 = "mming.qoshostsreply.success.count";
  }
  OnlineTimeSeriesLog::WriteEventCounter(v11, v12, 1u);
  bdTelemetry::record();
}

/*
==============
OnlineMatchmakerOmniscient::TaskShutdownMatchmaking
==============
*/
void OnlineMatchmakerOmniscient::TaskShutdownMatchmaking(OnlineMatchmakerOmniscient *this, GenericTask *task, eTaskManagerTaskState state)
{
  bdLobbyErrorCode ErrorCode; 
  bdLobbyErrorCode v7; 
  unsigned __int64 TransactionID; 
  unsigned __int64 demonwareTaskId; 
  const char *v10; 
  OnlineTimeSeriesLog *v11; 
  unsigned __int64 m_matchmakingId; 
  unsigned __int64 v13; 
  unsigned __int64 v14; 
  OnlineTimeSeriesLog *v15; 
  ntl::internal::list_head_base<ntl::internal::list_node<PingBand> > *p_m_listHead; 
  ntl::internal::pool_allocator_pointer_freelist::free_item_pointer *mp_next; 
  ntl::internal::pool_allocator_pointer_freelist::free_item_pointer *v18; 
  bdLobbyErrorCode hostDoc; 
  char buffer[64]; 

  ErrorCode = bdRemoteTask::getErrorCode(task->m_remoteDemonwareTask.m_ptr);
  v7 = ErrorCode;
  if ( state )
  {
    dwLobbyErrorCodeToString(ErrorCode, buffer, 0x40u);
    TransactionID = bdRemoteTask::getTransactionID(task->m_remoteDemonwareTask.m_ptr);
    hostDoc = v7;
    Com_PrintError(25, "[MM] %s : Demonware failure. Error code = %s (%d) (%zu).\n", "OnlineMatchmakerOmniscient::TaskShutdownMatchmaking", buffer, hostDoc, TransactionID);
    demonwareTaskId = bdRemoteTask::getTransactionID(task->m_remoteDemonwareTask.m_ptr);
    v10 = j_va("{\"state\":\"failed\", \"demonware_error\"=\"%s\"}", buffer);
    OnlineMatchmakerOmniscient::Log(this, "TaskShutdownMatchmaking", v10, NULL, NULL, demonwareTaskId);
    v11 = OnlineTimeSeriesLog::Get();
    OnlineTimeSeriesLog::WriteEventCounter(v11, "mming.shutdownmatchmaking.failure.count", 1u);
    OnlineMatchmakerOmniscient::SetState(this, eFAILURE|eREADY);
  }
  else
  {
    m_matchmakingId = this->m_mmingData.m_matchmakingId;
    v13 = bdRemoteTask::getTransactionID(task->m_remoteDemonwareTask.m_ptr);
    Com_Printf(25, "[MM] %s complete (%zu), matchmaking id (%zu)\n", "OnlineMatchmakerOmniscient::TaskShutdownMatchmaking", v13, m_matchmakingId);
    v14 = bdRemoteTask::getTransactionID(task->m_remoteDemonwareTask.m_ptr);
    OnlineMatchmakerOmniscient::Log(this, "TaskShutdownMatchmaking", "{\"state\":\"success\"}", NULL, NULL, v14);
    v15 = OnlineTimeSeriesLog::Get();
    OnlineTimeSeriesLog::WriteEventCounter(v15, "mming.shutdownmatchmaking.success.count", 1u);
    OnlineMatchmakerTelemetry::Cancel(&this->m_telemetry);
  }
  OnlineMatchmakerOmniscient::SetState(this, eIDLE);
  this->m_mmingData.m_matchmakingId = 0i64;
  p_m_listHead = &this->m_mmingData.m_pingBands.m_listHead;
  this->m_mmingData.m_timeOut = 0;
  mp_next = (ntl::internal::pool_allocator_pointer_freelist::free_item_pointer *)this->m_mmingData.m_pingBands.m_listHead.m_sentinel.mp_next;
  if ( mp_next != (ntl::internal::pool_allocator_pointer_freelist::free_item_pointer *)&this->m_mmingData.m_pingBands.m_listHead )
  {
    do
    {
      v18 = mp_next[1].mp_next;
      mp_next->mp_next = (ntl::internal::pool_allocator_pointer_freelist::free_item_pointer *)this->m_mmingData.m_pingBands.m_freelist.m_head;
      this->m_mmingData.m_pingBands.m_freelist.m_head.mp_next = mp_next;
      mp_next = v18;
    }
    while ( v18 != (ntl::internal::pool_allocator_pointer_freelist::free_item_pointer *)p_m_listHead );
  }
  p_m_listHead->m_sentinel.mp_prev = &p_m_listHead->m_sentinel;
  this->m_mmingData.m_pingBands.m_listHead.m_sentinel.mp_next = &this->m_mmingData.m_pingBands.m_listHead.m_sentinel;
  this->m_mmingData.m_requestGameLobbyRemainIntact = 0;
  OnlineMatchmakerOmniscient::ResetMatchmaking(this);
}

/*
==============
OnlineMatchmakerOmniscient::TaskStartMatchmaking
==============
*/
void OnlineMatchmakerOmniscient::TaskStartMatchmaking(OnlineMatchmakerOmniscient *this, GenericTask *task, eTaskManagerTaskState state)
{
  bdLobbyErrorCode ErrorCode; 
  bdLobbyErrorCode v7; 
  unsigned __int64 v8; 
  unsigned __int64 demonwareTaskId; 
  const char *v10; 
  OnlineTimeSeriesLog *v11; 
  const dvar_t *v12; 
  ntl::internal::list_node_base *j; 
  PartyData *PartyData; 
  int v15; 
  unsigned __int64 TransactionID; 
  unsigned __int64 v17; 
  OnlineTimeSeriesLog *v18; 
  OnlineTimeSeriesLog *v19; 
  unsigned int v20; 
  ntl::internal::list_head_base<ntl::internal::list_node<PingBand> > *p_m_listHead; 
  unsigned __int64 v22; 
  ntl::internal::list_node_base *mp_next; 
  ntl::internal::list_node<PingBand> *v24; 
  ntl::internal::pool_allocator_freelist<24> *p_m_freelist; 
  ntl::internal::pool_allocator_pointer_freelist::free_item_pointer *v26; 
  ntl::internal::pool_allocator_freelist<24> *v27; 
  ntl::internal::pool_allocator_pointer_freelist::free_item_pointer *v28; 
  OnlineTimeSeriesLog *v29; 
  const char *v30; 
  unsigned int i; 
  int v32[2]; 
  bdJSONDeserializer v33; 
  bdJSONDeserializer v34; 
  __int64 v35; 
  bdJSONDeserializer v36; 
  bdJSONDeserializer value; 
  char buffer[64]; 

  v35 = -2i64;
  ErrorCode = bdRemoteTask::getErrorCode(task->m_remoteDemonwareTask.m_ptr);
  v7 = ErrorCode;
  if ( state == TASKSTATE_SUCCESS )
  {
    v15 = Sys_Milliseconds() - this->m_mmingData.m_startTimeMs;
    TransactionID = bdRemoteTask::getTransactionID(task->m_remoteDemonwareTask.m_ptr);
    Com_Printf(25, "[MM] %s complete (%zu) took %i ms\n", "OnlineMatchmakerOmniscient::TaskStartMatchmaking", TransactionID, v15);
    v17 = bdRemoteTask::getTransactionID(task->m_remoteDemonwareTask.m_ptr);
    OnlineMatchmakerOmniscient::Log(this, "TaskStartMatchmaking", "{\"state\":\"success\"}", NULL, NULL, v17);
    Com_Printf(25, "[MM] %s - matchmaking started. %s\n", "OnlineMatchmakerOmniscient::TaskStartMatchmaking", *(const char **)this->m_response._bytes_20);
    bdJSONDeserializer::bdJSONDeserializer(&v34);
    if ( bdJSONDeserializer::parse(&v34, this->m_responseBuffer) )
    {
      if ( bdJSONDeserializer::getUInt64(&v34, "mm_id", &this->m_mmingData.m_matchmakingId) )
      {
        if ( this->m_state == eREADY_TO_REMOVE )
        {
          OnlineMatchmakerOmniscient::SetState(this, eREMOVING_PLAYER);
          v18 = OnlineTimeSeriesLog::Get();
          OnlineTimeSeriesLog::WriteEventCounter(v18, "mming.startmatchmaking.success.count", 1u);
          OnlineMatchmakerTelemetry::StartSearchComplete(&this->m_telemetry, this->m_mmingData.m_matchmakingId);
        }
        else
        {
          Com_Printf(25, "[MM] %s - want to start matchmaking but we've already reset the state.\n", "OnlineMatchmakerOmniscient::TaskStartMatchmaking");
          OnlineMatchmakerOmniscient::SetState(this, eFAILURE|eREADY);
          v19 = OnlineTimeSeriesLog::Get();
          OnlineTimeSeriesLog::WriteEventCounter(v19, "mming.startmatchmaking.failure.state.count", 1u);
        }
        bdJSONDeserializer::bdJSONDeserializer(&value);
        if ( bdJSONDeserializer::getObject(&v34, "rs_backoff", &value) )
        {
          bdJSONDeserializer::bdJSONDeserializer(&v33);
          if ( bdJSONDeserializer::getObject(&value, "ping_cutoff", &v33) )
          {
            v20 = 0;
            for ( i = 0; v20 < v33.m_count; i = v20 )
            {
              bdJSONDeserializer::bdJSONDeserializer(&v36);
              if ( bdJSONDeserializer::getFieldByIndex(&v33, v20, buffer, 0x20u, &v36) )
              {
                v32[0] = atoi(buffer);
                if ( bdJSONDeserializer::getInt32(&v36, &v32[1]) )
                {
                  p_m_listHead = &this->m_mmingData.m_pingBands.m_listHead;
                  v22 = 0i64;
                  mp_next = this->m_mmingData.m_pingBands.m_listHead.m_sentinel.mp_next;
                  if ( mp_next == (ntl::internal::list_node_base *)&this->m_mmingData.m_pingBands.m_listHead )
                    goto LABEL_33;
                  do
                  {
                    ++v22;
                    mp_next = mp_next->mp_next;
                  }
                  while ( mp_next != (ntl::internal::list_node_base *)p_m_listHead );
                  if ( v22 < 0xA )
                  {
LABEL_33:
                    v24 = (ntl::internal::list_node<PingBand> *)this->m_mmingData.m_pingBands.m_listHead.m_sentinel.mp_next;
                    if ( v24 == (ntl::internal::list_node<PingBand> *)p_m_listHead )
                    {
LABEL_39:
                      p_m_freelist = &this->m_mmingData.m_pingBands.m_freelist;
                      if ( !this->m_mmingData.m_pingBands.m_freelist.m_head.mp_next )
                      {
                        if ( CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\libs\\ntl\\ntl\\allocator\\pool_allocator.h", 112, ASSERT_TYPE_ASSERT, "( m_head.mp_next != 0 )", "This container was memset to zero") )
                          __debugbreak();
                        if ( !p_m_freelist->m_head.mp_next && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\libs\\ntl\\ntl\\allocator\\pool_allocator.h", 112, ASSERT_TYPE_ASSERT, "( m_head.mp_next != 0 )", "This container was memset to zero") )
                          __debugbreak();
                      }
                      if ( (ntl::internal::pool_allocator_freelist<24> *)p_m_freelist->m_head.mp_next == p_m_freelist && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\libs\\ntl\\ntl\\allocator\\pool_allocator.h", 298, ASSERT_TYPE_ASSERT, "( !empty() )", "Pool out of elements to allocate (Elem size=%zu, Num elems=%zu)", 0x18ui64, 0xAui64) )
                        __debugbreak();
                      v26 = p_m_freelist->m_head.mp_next;
                      p_m_freelist->m_head.mp_next = p_m_freelist->m_head.mp_next->mp_next;
                      v26->mp_next = NULL;
                      v26[1].mp_next = NULL;
                      v26[2].mp_next = *(ntl::internal::pool_allocator_pointer_freelist::free_item_pointer **)v32;
                      ntl::internal::list_head_base<ntl::internal::list_node<PingBand>>::insert_before(&this->m_mmingData.m_pingBands.m_listHead, (ntl::internal::list_node<PingBand> *)&this->m_mmingData.m_pingBands.m_listHead, (ntl::internal::list_node<PingBand> *)v26);
                    }
                    else
                    {
                      while ( 1 )
                      {
                        if ( !v24 && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\libs\\ntl\\ntl\\list\\list.h", 103, ASSERT_TYPE_ASSERT, "( mp_node )", (const char *)&queryFormat, "mp_node") )
                          __debugbreak();
                        if ( v24->m_data.startTimeSeconds > v32[0] )
                          break;
                        v24 = (ntl::internal::list_node<PingBand> *)v24->mp_next;
                        if ( v24 == (ntl::internal::list_node<PingBand> *)p_m_listHead )
                          goto LABEL_39;
                      }
                      v27 = &this->m_mmingData.m_pingBands.m_freelist;
                      if ( !this->m_mmingData.m_pingBands.m_freelist.m_head.mp_next )
                      {
                        if ( CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\libs\\ntl\\ntl\\allocator\\pool_allocator.h", 112, ASSERT_TYPE_ASSERT, "( m_head.mp_next != 0 )", "This container was memset to zero") )
                          __debugbreak();
                        if ( !v27->m_head.mp_next && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\libs\\ntl\\ntl\\allocator\\pool_allocator.h", 112, ASSERT_TYPE_ASSERT, "( m_head.mp_next != 0 )", "This container was memset to zero") )
                          __debugbreak();
                      }
                      if ( (ntl::internal::pool_allocator_freelist<24> *)v27->m_head.mp_next == v27 && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\libs\\ntl\\ntl\\allocator\\pool_allocator.h", 298, ASSERT_TYPE_ASSERT, "( !empty() )", "Pool out of elements to allocate (Elem size=%zu, Num elems=%zu)", 0x18ui64, 0xAui64) )
                        __debugbreak();
                      v28 = v27->m_head.mp_next;
                      v27->m_head.mp_next = v27->m_head.mp_next->mp_next;
                      v28->mp_next = NULL;
                      v28[1].mp_next = NULL;
                      v28[2].mp_next = *(ntl::internal::pool_allocator_pointer_freelist::free_item_pointer **)v32;
                      ntl::internal::list_head_base<ntl::internal::list_node<PingBand>>::insert_before(&this->m_mmingData.m_pingBands.m_listHead, v24, (ntl::internal::list_node<PingBand> *)v28);
                      v20 = i;
                    }
                  }
                }
              }
              bdJSONDeserializer::~bdJSONDeserializer(&v36);
              ++v20;
            }
          }
          bdJSONDeserializer::~bdJSONDeserializer(&v33);
        }
        bdJSONDeserializer::~bdJSONDeserializer(&value);
        goto LABEL_65;
      }
      OnlineMatchmakerOmniscient::SetState(this, eFAILURE|eREADY);
      v29 = OnlineTimeSeriesLog::Get();
      v30 = "mming.startmatchmaking.failure.jsondeserialize.count";
    }
    else
    {
      OnlineMatchmakerOmniscient::SetState(this, eFAILURE|eREADY);
      v29 = OnlineTimeSeriesLog::Get();
      v30 = "mming.startmatchmaking.failure.jsonparse.count";
    }
    OnlineTimeSeriesLog::WriteEventCounter(v29, v30, 1u);
LABEL_65:
    bdJSONDeserializer::~bdJSONDeserializer(&v34);
    return;
  }
  dwLobbyErrorCodeToString(ErrorCode, buffer, 0x40u);
  v8 = bdRemoteTask::getTransactionID(task->m_remoteDemonwareTask.m_ptr);
  Com_PrintError(25, "[MM] %s : Demonware failure. Error code = %s (%d) (%zu).\n", "OnlineMatchmakerOmniscient::TaskStartMatchmaking", buffer, v7, v8);
  demonwareTaskId = bdRemoteTask::getTransactionID(task->m_remoteDemonwareTask.m_ptr);
  v10 = j_va("{\"state\":\"failed\", \"demonware_error\"=\"%s\"}", buffer);
  OnlineMatchmakerOmniscient::Log(this, "TaskStartMatchmaking", v10, NULL, NULL, demonwareTaskId);
  v11 = OnlineTimeSeriesLog::Get();
  OnlineTimeSeriesLog::WriteEventCounter(v11, "mming.startmatchmaking.failure.dwresult.count", 1u);
  OnlineMatchmakerOmniscient::SetState(this, eFAILURE|eREADY);
  if ( v7 == BD_AMM_INVALID_TOKEN )
  {
    v12 = DVARBOOL_online_matchmaking_request_new_token_from_remote_users_on_fail;
    if ( !DVARBOOL_online_matchmaking_request_new_token_from_remote_users_on_fail && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\universal\\dvar.h", 692, ASSERT_TYPE_ASSERT, "(dvar)", "%s\n\tDvar %s accessed after deregistration", "dvar", "online_matchmaking_request_new_token_from_remote_users_on_fail") )
      __debugbreak();
    Dvar_CheckFrontendServerThread(v12);
    if ( v12->current.enabled )
    {
      Com_Printf(25, "[MM] Clearing all remote player's matchmaking tokens and requesting resend from clients\n");
      for ( j = this->m_playerList.m_listHead.m_sentinel.mp_next; j != (ntl::internal::list_node_base *)&this->m_playerList.m_listHead; j = j->mp_next )
      {
        if ( !j && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\libs\\ntl\\ntl\\list\\list.h", 103, ASSERT_TYPE_ASSERT, "( mp_node )", (const char *)&queryFormat, "mp_node") )
          __debugbreak();
        if ( !LOBYTE(j[7].mp_prev) )
        {
          OnlineMatchmakerOmniscient::SetPlayerState(this, (OnlineMatchmakerOmniscient::Player *)&j[1], eREMOTE_WAITING_FOR_MMING_TOKEN);
          j[10].mp_next = NULL;
        }
      }
    }
  }
  else if ( v7 == BD_AMM_PLAYER_INFO_UNAVAILABLE )
  {
    PartyData = Lobby_GetPartyData();
    Party_HandleMatchmakingInvalidPlayerInfo(PartyData, this->m_controllerIndex);
  }
  else if ( v7 == BD_AMM_BACKOFF_REQUESTED && InviteJoinHSM::IsHSMHandlingInvitation(&g_invitationHSM) )
  {
    InviteJoinHSM::SetMatchmakerStartBackOffRequested(&g_invitationHSM);
  }
}

/*
==============
OnlineMatchmakerOmniscient::TaskUpdateLobbyDocument
==============
*/
void OnlineMatchmakerOmniscient::TaskUpdateLobbyDocument(OnlineMatchmakerOmniscient *this, GenericTask *task, eTaskManagerTaskState state)
{
  MatchmakerLobbyState m_lobbyState; 
  bdRemoteTask *m_ptr; 
  bdLobbyErrorCode ErrorCode; 
  bdLobbyErrorCode v9; 
  unsigned __int64 TransactionID; 
  unsigned __int64 demonwareTaskId; 
  const char *v12; 
  const dvar_t *v13; 
  OnlineTimeSeriesLog *v14; 
  ntl::internal::list_head_base<ntl::internal::list_node<OnlineMatchmakerOmniscient::Player> > *p_m_listHead; 
  unsigned __int64 m_lobbyid; 
  unsigned __int64 v17; 
  unsigned __int64 v18; 
  char v19; 
  ntl::internal::list_node_base *mp_next; 
  __int64 mp_prev_high; 
  __int64 mp_next_low; 
  const char *v23; 
  const char *v24; 
  const char *v25; 
  OnlineMatchmakerOmniscient::Player::PlayerState v26; 
  const char *v27; 
  OnlineTimeSeriesLog *v28; 
  OnlineTimeSeriesLog *v29; 
  ntl::internal::list_node_base *i; 
  OnlineMatchmakerOmniscient::Player::PlayerState v31; 
  unsigned __int64 v32; 
  char buffer[8]; 
  const char *v34; 
  const char *v35; 
  const char *v36; 
  const char *v37; 

  m_lobbyState = this->m_lobbyState;
  m_ptr = task->m_remoteDemonwareTask.m_ptr;
  if ( m_lobbyState == eUPDATING )
  {
    ErrorCode = bdRemoteTask::getErrorCode(m_ptr);
    v9 = ErrorCode;
    if ( state )
    {
      dwLobbyErrorCodeToString(ErrorCode, buffer, 0x40u);
      TransactionID = bdRemoteTask::getTransactionID(task->m_remoteDemonwareTask.m_ptr);
      Com_PrintError(131097, "[MM] %s : Demonware failure. Error code = %s (%d) (%zu).\n", "OnlineMatchmakerOmniscient::TaskUpdateLobbyDocument", buffer, v9, TransactionID);
      demonwareTaskId = bdRemoteTask::getTransactionID(task->m_remoteDemonwareTask.m_ptr);
      v12 = j_va("{\"state\":\"failed\", \"demonware_error\"=\"%s\"}", buffer);
      OnlineMatchmakerOmniscient::Log(this, "TaskUpdateLobbyDocument", v12, NULL, NULL, demonwareTaskId);
      v13 = DVARBOOL_online_matchmaking_disband_on_update_failure;
      if ( !DVARBOOL_online_matchmaking_disband_on_update_failure && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\universal\\dvar.h", 692, ASSERT_TYPE_ASSERT, "(dvar)", "%s\n\tDvar %s accessed after deregistration", "dvar", "online_matchmaking_disband_on_update_failure") )
        __debugbreak();
      Dvar_CheckFrontendServerThread(v13);
      if ( v13->current.enabled )
        OnlineMatchmakerOmniscient::ResetDisband(this);
      else
        OnlineMatchmakerOmniscient::SetState(this, eFAILURE|eREADY);
      v14 = OnlineTimeSeriesLog::Get();
      OnlineTimeSeriesLog::WriteEventCounter(v14, "mming.synclobbydocuments.failure.count", 1u);
      p_m_listHead = &this->m_playerList.m_listHead;
    }
    else
    {
      m_lobbyid = this->m_lobbyData.m_lobbyid;
      v17 = bdRemoteTask::getTransactionID(task->m_remoteDemonwareTask.m_ptr);
      Com_Printf(25, "[MM] %s complete (%zu), lobby id (%zu)\n", "OnlineMatchmakerOmniscient::TaskUpdateLobbyDocument", v17, m_lobbyid);
      v18 = bdRemoteTask::getTransactionID(task->m_remoteDemonwareTask.m_ptr);
      OnlineMatchmakerOmniscient::Log(this, "TaskUpdateLobbyDocument", "{\"state\":\"success\"}", NULL, NULL, v18);
      v19 = this->m_lobbyData.m_syncLobbyDocsResult._bytes_20[0];
      if ( !v19 )
      {
        Com_Printf(25, "[MM] %s syncLobbyDocsResulted in false (most likely wrong update_id due to race conditions), requesting another update host doc on next updateLobbyDocument\n", "OnlineMatchmakerOmniscient::TaskUpdateLobbyDocument");
        v19 = this->m_lobbyData.m_syncLobbyDocsResult._bytes_20[0];
        this->m_lobbyData.m_lobbyDocIsDirty = 1;
      }
      mp_next = this->m_playerList.m_listHead.m_sentinel.mp_next;
      p_m_listHead = &this->m_playerList.m_listHead;
      if ( mp_next != (ntl::internal::list_node_base *)&this->m_playerList.m_listHead )
      {
        do
        {
          if ( !mp_next && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\libs\\ntl\\ntl\\list\\list.h", 103, ASSERT_TYPE_ASSERT, "( mp_node )", (const char *)&queryFormat, "mp_node") )
            __debugbreak();
          if ( LODWORD(mp_next[1].mp_prev) == 5 )
          {
            if ( this->m_lobbyData.m_syncLobbyDocsResult._bytes_20[0] )
            {
              if ( mp_next[14].mp_prev >= (ntl::internal::list_node_base *)this->m_lobbyData.m_beginLobbySyncTime )
              {
                this->m_lobbyData.m_lobbyDocIsDirty = 1;
              }
              else
              {
                mp_prev_high = SHIDWORD(mp_next[11].mp_prev);
                mp_next_low = SLODWORD(mp_next[11].mp_next);
                if ( (_DWORD)mp_prev_high != (_DWORD)mp_next_low )
                {
                  *(_QWORD *)buffer = "eUNACKNOWLEDGED";
                  v34 = "eMAY_CONNECT";
                  v35 = "eCONNECTED";
                  v36 = "eWONT_CONNECT";
                  v37 = "eREADY_TO_REMOVE";
                  v23 = *(const char **)&buffer[8 * mp_next_low];
                  *(_QWORD *)buffer = "eUNACKNOWLEDGED";
                  v34 = "eMAY_CONNECT";
                  v35 = "eCONNECTED";
                  v36 = "eWONT_CONNECT";
                  v37 = "eREADY_TO_REMOVE";
                  v24 = *(const char **)&buffer[8 * mp_prev_high];
                  v25 = XUID::ToString((XUID *)&mp_next[6].mp_next);
                  Com_Printf(25, "[MM] %s player %s updating current member status from %s to %s\n", "OnlineMatchmakerOmniscient::TaskUpdateLobbyDocument", v25, v24, v23);
                  OnlineMatchmakerOmniscient::SetPlayerCurrentStatus(this, (OnlineMatchmakerOmniscient::Player *)&mp_next[1], (MemberStatus)mp_next[11].mp_next);
                  LODWORD(mp_prev_high) = HIDWORD(mp_next[11].mp_prev);
                }
                if ( (_DWORD)mp_prev_high == 4 )
                  OnlineMatchmakerOmniscient::SetPlayerState(this, (OnlineMatchmakerOmniscient::Player *)&mp_next[1], eREADY_TO_REMOVE);
              }
            }
            v26 = eREMOTE_WAITING_FOR_MMING_TOKEN;
            if ( mp_next[10].mp_next )
              v26 = eREADY;
            OnlineMatchmakerOmniscient::SetPlayerState(this, (OnlineMatchmakerOmniscient::Player *)&mp_next[1], v26);
          }
          mp_next = mp_next->mp_next;
        }
        while ( mp_next != (ntl::internal::list_node_base *)p_m_listHead );
        v19 = this->m_lobbyData.m_syncLobbyDocsResult._bytes_20[0];
      }
      if ( v19 )
      {
        v27 = "mming.synclobbydocuments.returntrue.count";
        this->m_lobbyData.m_gameStartedCurrent = this->m_lobbyData.m_gameStartedPending;
      }
      else
      {
        v27 = "mming.synclobbydocuments.returnfalse.count";
      }
      v28 = OnlineTimeSeriesLog::Get();
      OnlineTimeSeriesLog::WriteEventCounter(v28, v27, 1u);
      OnlineMatchmakerOmniscient::SetLobbyState(this, eREADY_TO_REMOVE);
      v29 = OnlineTimeSeriesLog::Get();
      OnlineTimeSeriesLog::WriteEventCounter(v29, "mming.synclobbydocuments.success.count", 1u);
    }
    for ( i = this->m_playerList.m_listHead.m_sentinel.mp_next; i != (ntl::internal::list_node_base *)p_m_listHead; i = i->mp_next )
    {
      if ( !i && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\libs\\ntl\\ntl\\list\\list.h", 103, ASSERT_TYPE_ASSERT, "( mp_node )", (const char *)&queryFormat, "mp_node") )
        __debugbreak();
      if ( LODWORD(i[1].mp_prev) == 5 )
      {
        v31 = eREMOTE_WAITING_FOR_MMING_TOKEN;
        if ( i[10].mp_next )
          v31 = eREADY;
        OnlineMatchmakerOmniscient::SetPlayerState(this, (OnlineMatchmakerOmniscient::Player *)&i[1], v31);
      }
    }
  }
  else
  {
    v32 = bdRemoteTask::getTransactionID(m_ptr);
    Com_PrintWarning(25, "[MM] %s ignoring task %zu reply due to current state %d != eUPDATING_LOBBY_DOCUMENT (5)\n", "OnlineMatchmakerOmniscient::TaskUpdateLobbyDocument", v32, m_lobbyState);
  }
}

/*
==============
OnlineMatchmakerOmniscient::TurnOffBackfill_JIP
==============
*/
void OnlineMatchmakerOmniscient::TurnOffBackfill_JIP(OnlineMatchmakerOmniscient *this)
{
  if ( this->m_lobbyData.m_shouldBackfill_JIP )
  {
    Com_Printf(131097, "[MM] %s\n", "OnlineMatchmakerOmniscient::TurnOffBackfill_JIP");
    this->m_lobbyData.m_shouldBackfill_JIP = 0;
    this->m_lobbyData.m_lobbyDocIsDirty = 1;
    this->m_lobbyData.m_timeToUpdateIfDirty = 0;
  }
}

/*
==============
OnlineMatchmakerOmniscient::TurnOnBackfill_JIP
==============
*/
void OnlineMatchmakerOmniscient::TurnOnBackfill_JIP(OnlineMatchmakerOmniscient *this)
{
  if ( !this->m_lobbyData.m_shouldBackfill_JIP )
  {
    Com_Printf(131097, "[MM] %s\n", "OnlineMatchmakerOmniscient::TurnOnBackfill_JIP");
    this->m_lobbyData.m_shouldBackfill_JIP = 1;
    this->m_lobbyData.m_lobbyDocIsDirty = 1;
    this->m_lobbyData.m_timeToUpdateIfDirty = 0;
  }
}

/*
==============
OnlineMatchmakerOmniscient::Uninit
==============
*/
void OnlineMatchmakerOmniscient::Uninit(OnlineMatchmakerOmniscient *this)
{
  ntl::internal::list_head_base<ntl::internal::list_node<PingBand> > *p_m_listHead; 
  ntl::internal::pool_allocator_pointer_freelist::free_item_pointer *mp_next; 
  ntl::internal::pool_allocator_pointer_freelist::free_item_pointer *v4; 

  MatchMakerOmniLobbyData::Reset(&this->m_lobbyData);
  p_m_listHead = &this->m_mmingData.m_pingBands.m_listHead;
  this->m_mmingData.m_matchmakingId = 0i64;
  this->m_mmingData.m_timeOut = 0;
  mp_next = (ntl::internal::pool_allocator_pointer_freelist::free_item_pointer *)this->m_mmingData.m_pingBands.m_listHead.m_sentinel.mp_next;
  if ( mp_next != (ntl::internal::pool_allocator_pointer_freelist::free_item_pointer *)&this->m_mmingData.m_pingBands.m_listHead )
  {
    do
    {
      v4 = mp_next[1].mp_next;
      mp_next->mp_next = (ntl::internal::pool_allocator_pointer_freelist::free_item_pointer *)this->m_mmingData.m_pingBands.m_freelist.m_head;
      this->m_mmingData.m_pingBands.m_freelist.m_head.mp_next = mp_next;
      mp_next = v4;
    }
    while ( v4 != (ntl::internal::pool_allocator_pointer_freelist::free_item_pointer *)p_m_listHead );
  }
  p_m_listHead->m_sentinel.mp_prev = &p_m_listHead->m_sentinel;
  this->m_mmingData.m_pingBands.m_listHead.m_sentinel.mp_next = &this->m_mmingData.m_pingBands.m_listHead.m_sentinel;
  this->m_mmingData.m_requestGameLobbyRemainIntact = 0;
  OnlineMatchmakerOmniscient::ResetBreak(this);
  this->m_controllerIndex = -1;
  s_matchmakingToken[0] = 0i64;
  qword_14B3631F8 = 0i64;
  *(_QWORD *)s_playerInfoChecksum[0].hash = 0i64;
  qword_14B3631D8 = 0i64;
  qword_14B3631E0 = 0i64;
  qword_14B3631E8 = 0i64;
  OnlineMatchmakerOmniscient::SetState(this, eIDLE);
  OnlineMatchmakerOmniscient::SetState(this, eIDLE);
}

/*
==============
OnlineMatchmakerOmniscient::UpdateAdditionalPlayerSlots
==============
*/
void OnlineMatchmakerOmniscient::UpdateAdditionalPlayerSlots(OnlineMatchmakerOmniscient *this, const ntl::fixed_list<PlayerValue<int>,200,0> *additionalSlotsRequestedList)
{
  ntl::internal::list_node_base *mp_next; 
  ntl::internal::list_head_base<ntl::internal::list_node<PlayerValue<int> > > *i; 
  ntl::internal::list_node<OnlineMatchmakerOmniscient::Player> *mp_node; 
  int v6; 
  const char *v7; 
  ntl::internal::list_iterator<OnlineMatchmakerOmniscient::Player,ntl::internal::list_node<OnlineMatchmakerOmniscient::Player>,OnlineMatchmakerOmniscient::Player *,OnlineMatchmakerOmniscient::Player &> it; 

  mp_next = additionalSlotsRequestedList->m_listHead.m_sentinel.mp_next;
  for ( i = &additionalSlotsRequestedList->m_listHead; mp_next != (ntl::internal::list_node_base *)i; mp_next = mp_next->mp_next )
  {
    if ( !mp_next && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\libs\\ntl\\ntl\\list\\list.h", 103, ASSERT_TYPE_ASSERT, "( mp_node )", (const char *)&queryFormat, "mp_node") )
      __debugbreak();
    if ( OnlineMatchmakerOmniscient::FindPlayer(this, (const XUID *)&mp_next[1], &it) )
    {
      if ( !mp_next && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\libs\\ntl\\ntl\\list\\list.h", 103, ASSERT_TYPE_ASSERT, "( mp_node )", (const char *)&queryFormat, "mp_node") )
        __debugbreak();
      mp_node = it.mp_node;
      v6 = (int)mp_next[1].mp_next;
      if ( !it.mp_node && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\libs\\ntl\\ntl\\list\\list.h", 103, ASSERT_TYPE_ASSERT, "( mp_node )", (const char *)&queryFormat, "mp_node") )
        __debugbreak();
      mp_node->m_data.m_additionalSlotsRequested = v6;
    }
    else
    {
      if ( !mp_next && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\libs\\ntl\\ntl\\list\\list.h", 103, ASSERT_TYPE_ASSERT, "( mp_node )", (const char *)&queryFormat, "mp_node") )
        __debugbreak();
      v7 = XUID::ToDevString((XUID *)&mp_next[1]);
      Com_PrintWarning(25, "\t%s user %s not found, this is bad\n", "OnlineMatchmakerOmniscient::UpdateAdditionalPlayerSlots", v7);
    }
    if ( !mp_next && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\libs\\ntl\\ntl\\list\\list.h", 109, ASSERT_TYPE_ASSERT, "( mp_node )", (const char *)&queryFormat, "mp_node") )
      __debugbreak();
  }
}

/*
==============
OnlineMatchmakerOmniscient::UpdateHostDoc
==============
*/
void OnlineMatchmakerOmniscient::UpdateHostDoc(OnlineMatchmakerOmniscient *this)
{
  unsigned int v2; 
  const dvar_t *v4; 
  bool v5; 
  bool v6; 
  unsigned __int64 m_tournamentID; 
  bool v8; 
  bool v9; 
  const dvar_t *v10; 
  char *m_requestBuffer; 
  bool v12; 
  bool m_acceptLobbyMerges; 
  bool v14; 
  ntl::internal::list_node_base *mp_next; 
  const dvar_t *v16; 
  unsigned __int64 UniversalId; 
  const char *v18; 
  const char *v19; 
  const char *v20; 
  const char *v21; 
  const char *v22; 
  DWServicesAccess *Instance; 
  DWAsyncMatchMaking *AsyncMatchmaking; 
  unsigned __int64 updateID; 
  unsigned int v26; 
  TaskCreateRequest *v27; 
  bdRemoteTask *v28; 
  TaskManager *v29; 
  OnlineTimeSeriesLog *v30; 
  Windows::Foundation::IAsyncInfo *m_asyncInfo; 
  unsigned int v32; 
  TaskCreateRequest pTaskCreateRequest; 
  bdReference<bdRemoteTask> result; 
  TaskCreateResult pTaskCreateResult; 
  __int64 v36; 
  bdJSONSerializer v37; 
  char key[128]; 

  v36 = -2i64;
  v2 = Sys_Milliseconds();
  v32 = v2;
  if ( !this->m_lobbyData.m_amITheLobbyHost )
    return;
  if ( this->m_lobbyData.m_lobbyDocIsDirty ? v2 < this->m_lobbyData.m_timeToUpdateIfDirty : v2 < this->m_lobbyData.m_timeToSendKeepAlive_ms )
    return;
  v4 = DVARBOOL_online_matchmaking_updatehostdocs_check;
  if ( !DVARBOOL_online_matchmaking_updatehostdocs_check && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\universal\\dvar.h", 692, ASSERT_TYPE_ASSERT, "(dvar)", "%s\n\tDvar %s accessed after deregistration", "dvar", "online_matchmaking_updatehostdocs_check") )
    __debugbreak();
  Dvar_CheckFrontendServerThread(v4);
  v5 = v4->current.enabled && this->m_lobbyState != eUPDATING;
  v6 = this->m_state == eREMOVING_PLAYER && this->m_lobbyState == eREADY_TO_REMOVE;
  m_tournamentID = this->m_lobbyData.m_tournamentID;
  v8 = Live_IsInGameBattlesGame();
  v9 = 1;
  v10 = DVARBOOL_online_should_copy_presence_join_flag_from_playlist_to_lobby_doc;
  if ( !DVARBOOL_online_should_copy_presence_join_flag_from_playlist_to_lobby_doc && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\universal\\dvar.h", 692, ASSERT_TYPE_ASSERT, "(dvar)", "%s\n\tDvar %s accessed after deregistration", "dvar", "online_should_copy_presence_join_flag_from_playlist_to_lobby_doc") )
    __debugbreak();
  Dvar_CheckFrontendServerThread(v10);
  if ( v10->current.enabled && OnlineMatchmakerOmniscient::ms_instance.m_lobbyData.m_playList >= 0 )
    v9 = !Playlist_JoinViaPresenceDisabled(OnlineMatchmakerOmniscient::ms_instance.m_lobbyData.m_playList);
  if ( !v6 && !v5 )
    goto LABEL_106;
  m_requestBuffer = this->m_requestBuffer;
  memset_0(this->m_requestBuffer, 0, sizeof(this->m_requestBuffer));
  bdJSONSerializer::bdJSONSerializer(&v37, this->m_requestBuffer, 0x4000u);
  if ( !bdJSONSerializer::writeBeginObject(&v37) )
    goto LABEL_105;
  bdJSONSerializer::writeUInt32(&v37, "update_id", 0, 0);
  bdJSONSerializer::writeUInt32(&v37, "update_time", 0, 0);
  if ( m_tournamentID || v8 )
  {
    bdJSONSerializer::writeBoolean(&v37, "lobby_open", v8);
    v12 = 1;
  }
  else
  {
    bdJSONSerializer::writeBoolean(&v37, "lobby_open", this->m_lobbyData.m_shouldBackfill_JIP);
    v12 = v9;
  }
  bdJSONSerializer::writeBoolean(&v37, "lobby_open_for_pres_join", v12);
  bdJSONSerializer::writeBeginObject(&v37, "ruleset_payload");
  if ( !Dvar_GetBool_Internal_DebugName(DVARBOOL_online_matchmaking_allow_lobby_merging, "online_matchmaking_allow_lobby_merging") || m_tournamentID || v8 )
  {
    bdJSONSerializer::writeBoolean(&v37, "is_merge_src", 0);
    m_acceptLobbyMerges = 0;
  }
  else
  {
    bdJSONSerializer::writeBoolean(&v37, "is_merge_src", this->m_lobbyData.m_canLobbyMerge);
    m_acceptLobbyMerges = this->m_lobbyData.m_acceptLobbyMerges;
  }
  bdJSONSerializer::writeBoolean(&v37, "is_merge_dst", m_acceptLobbyMerges);
  bdJSONSerializer::writeEndObject(&v37);
  bdJSONSerializer::writeBeginObject(&v37, "team_balance");
  v14 = !this->m_lobbyData.m_gameStartedPending;
  if ( m_tournamentID || v8 )
    v14 = 0;
  bdJSONSerializer::writeBoolean(&v37, "can_change_teams", v14);
  bdJSONSerializer::writeEndObject(&v37);
  if ( this->m_lobbyData.m_hasDedicatedServer )
  {
    bdJSONSerializer::writeBeginObject(&v37, "dedicated_server");
    if ( (!bdJSONSerializer::writeString(&v37, "info", this->m_lobbyData.m_allocatedServerInfo) || !bdJSONSerializer::writeUInt64(&v37, "user_id", this->m_lobbyData.m_allocatedServerGuid, 0) || !bdJSONSerializer::writeString(&v37, "data_center", this->m_lobbyData.m_allocatedDataCenter) || !bdJSONSerializer::writeString(&v37, "address", this->m_lobbyData.m_allocatedServerAddr)) && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\online\\online_matchmaker.cpp", 2806, ASSERT_TYPE_ASSERT, "(result)", (const char *)&queryFormat, "result") )
      __debugbreak();
    bdJSONSerializer::writeEndObject(&v37);
  }
  if ( bdJSONSerializer::writeBeginObject(&v37, "listen_server") )
  {
    bdJSONSerializer::writeString(&v37, "host_address", this->m_lobbyData.m_hostAddressBase64);
    bdJSONSerializer::writeUInt64(&v37, "host_player_id", this->m_lobbyData.m_hostUID, 0);
    bdJSONSerializer::writeEndObject(&v37);
  }
  if ( !bdJSONSerializer::writeBeginObject(&v37, "player_state") )
    goto LABEL_73;
  mp_next = this->m_playerList.m_listHead.m_sentinel.mp_next;
  if ( mp_next == (ntl::internal::list_node_base *)&this->m_playerList.m_listHead )
    goto LABEL_72;
  do
  {
    v16 = DVARBOOL_online_matchmaking_fail_hostdoc_update;
    if ( !DVARBOOL_online_matchmaking_fail_hostdoc_update && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\universal\\dvar.h", 692, ASSERT_TYPE_ASSERT, "(dvar)", "%s\n\tDvar %s accessed after deregistration", "dvar", "online_matchmaking_fail_hostdoc_update") )
      __debugbreak();
    Dvar_CheckFrontendServerThread(v16);
    if ( v16->current.enabled )
    {
      if ( !mp_next && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\libs\\ntl\\ntl\\list\\list.h", 103, ASSERT_TYPE_ASSERT, "( mp_node )", (const char *)&queryFormat, "mp_node") )
        __debugbreak();
      bdJSONSerializer::writeUInt32(&v37, key, LODWORD(mp_next[11].mp_next) - 1, 0);
    }
    else
    {
      if ( !mp_next && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\libs\\ntl\\ntl\\list\\list.h", 103, ASSERT_TYPE_ASSERT, "( mp_node )", (const char *)&queryFormat, "mp_node") )
        __debugbreak();
      if ( !BYTE1(mp_next[7].mp_next) )
      {
        v18 = XUID::ToString((XUID *)&mp_next[6].mp_next);
        v19 = j_va("{\"message\":\"Not adding %s because they're not a primary client.\n", v18);
        OnlineMatchmakerOmniscient::Log(this, "UpdateHostDoc", v19, NULL, NULL, 0i64);
        goto LABEL_70;
      }
      if ( LODWORD(mp_next[11].mp_next) == 4 || LODWORD(mp_next[1].mp_prev) == 6 )
      {
        if ( LODWORD(mp_next[11].mp_next) != 4 )
          goto LABEL_70;
        v20 = XUID::ToString((XUID *)&mp_next[6].mp_next);
        v21 = j_va("{\"message\":\"Not adding %s because they're member status is eREADY_TO_REMOVE.\n", v20);
        OnlineMatchmakerOmniscient::Log(this, "UpdateHostDoc", v21, NULL, NULL, 0i64);
      }
      else
      {
        UniversalId = XUID::GetUniversalId((XUID *)&mp_next[6].mp_next);
        Com_sprintf(key, 0x80ui64, "%zu", UniversalId);
        bdJSONSerializer::writeUInt32(&v37, key, (const unsigned int)mp_next[11].mp_next, 0);
      }
      OnlineMatchmakerOmniscient::SetPlayerState(this, (OnlineMatchmakerOmniscient::Player *)&mp_next[1], eUPDATING);
    }
LABEL_70:
    mp_next = mp_next->mp_next;
  }
  while ( mp_next != (ntl::internal::list_node_base *)&this->m_playerList.m_listHead );
  m_requestBuffer = this->m_requestBuffer;
LABEL_72:
  bdJSONSerializer::writeEndObject(&v37);
LABEL_73:
  if ( bdJSONSerializer::writeBeginObject(&v37, "game_state") )
  {
    if ( this->m_lobbyData.m_isGameInProgress )
    {
      v22 = "in_game";
    }
    else if ( this->m_lobbyData.m_gameid )
    {
      if ( this->m_lobbyData.m_gameLobbyInFinalCountdown )
        v22 = "countdown";
      else
        v22 = "intermission";
    }
    else
    {
      v22 = (char *)&queryFormat.fmt + 3;
    }
    bdJSONSerializer::writeString(&v37, "state", v22);
    bdJSONSerializer::writeEndObject(&v37);
  }
  bdJSONSerializer::writeEndObject(&v37);
  Com_Printf(25, "[MM] %s - Updating the lobby document lobbyId:%zu updateId:%zu.\nupdated host doc = \"%s\"\n\n", "OnlineMatchmakerOmniscient::UpdateHostDoc", this->m_lobbyData.m_lobbyid, this->m_lobbyData.m_updateId, m_requestBuffer);
  if ( !bdJSONSerializer::validate(&v37) && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\online\\online_matchmaker.cpp", 2913, ASSERT_TYPE_ASSERT, "(serializer.validate())", (const char *)&queryFormat, "serializer.validate()") )
    __debugbreak();
  *(_QWORD *)&pTaskCreateRequest.m_controllerIndex = -1i64;
  memset(&pTaskCreateRequest.m_appData, 0, 48);
  pTaskCreateRequest.m_cancelTaskOnSignoutEvent = 1;
  pTaskCreateRequest.m_timeoutInSeconds = 0;
  pTaskCreateResult.m_localTaskId = 0;
  pTaskCreateResult.m_task = NULL;
  Instance = DWServicesAccess::GetInstance();
  AsyncMatchmaking = DWServicesAccess::GetAsyncMatchmaking(Instance, this->m_controllerIndex);
  updateID = this->m_lobbyData.m_updateId;
  v26 = bdJSONSerializer::length(&v37);
  v27 = (TaskCreateRequest *)DWAsyncMatchMaking::syncLobbyDocuments(AsyncMatchmaking, &result, this->m_lobbyData.m_lobbyid, &this->m_lobbyData.m_syncLobbyDocsResult, m_requestBuffer, v26 + 1, updateID);
  if ( v27 != (TaskCreateRequest *)&pTaskCreateRequest.m_remoteDemonwareTask )
  {
    v28 = *(bdRemoteTask **)&v27->m_controllerIndex;
    pTaskCreateRequest.m_remoteDemonwareTask.m_ptr = v28;
    if ( v28 )
      _InterlockedExchangeAdd((volatile signed __int32 *)&v28->m_refCount, 1u);
  }
  if ( result.m_ptr && _InterlockedExchangeAdd((volatile signed __int32 *)&result.m_ptr->m_refCount, 0xFFFFFFFF) == 1 && result.m_ptr )
    ((void (__fastcall *)(bdRemoteTask *, __int64))result.m_ptr->~bdReferencable)(result.m_ptr, 1i64);
  pTaskCreateRequest.m_appData = this;
  pTaskCreateRequest.m_onCompletionCallback = OnlineMatchmakerOmniscient::staticTaskUpdateLobbyDocument;
  pTaskCreateRequest.m_controllerIndex = this->m_controllerIndex;
  if ( pTaskCreateRequest.m_remoteDemonwareTask.m_ptr )
  {
    v29 = TaskManager::GetInstance();
    if ( TaskManager::CreateTask(v29, &pTaskCreateRequest, &pTaskCreateResult) )
    {
      this->m_lobbyData.m_beginLobbySyncTime = Sys_Microseconds();
      this->m_outstandingTaskId = pTaskCreateResult.m_localTaskId;
      OnlineMatchmakerOmniscient::SetLobbyState(this, eUPDATING);
      this->m_lobbyData.m_lobbyDocIsDirty = 0;
      this->m_lobbyData.m_timeToUpdateIfDirty = v32 + Dvar_GetInt_Internal_DebugName(DVARINT_online_matchmaking_host_doc_update_interval_ms, "online_matchmaking_host_doc_update_interval_ms");
      this->m_lobbyData.m_timeToSendKeepAlive_ms = v32 + 1000 * Dvar_GetInt_Internal_DebugName(DVARINT_online_matchmaking_host_doc_keep_alive_s, "online_matchmaking_host_doc_keep_alive_s");
      this->m_lobbyData.m_timeToSendKeepAliveMax_ms = v32 + 1000 * Dvar_GetInt_Internal_DebugName(DVARINT_online_matchmaking_host_doc_keep_alive_max_s, "online_matchmaking_host_doc_keep_alive_max_s");
      v30 = OnlineTimeSeriesLog::Get();
      OnlineTimeSeriesLog::WriteEventCounter(v30, "mming.synclobbydocuments.initiate.count", 1u);
    }
  }
  OnlineMatchmakerOmniscient::Log(this, "UpdateHostDoc", (const char *)&queryFormat.fmt + 3, (const char *)&queryFormat.fmt + 3, m_requestBuffer, 0i64);
  pTaskCreateRequest.m_onCompletionCallback = NULL;
  pTaskCreateRequest.m_onUpdateCallback = NULL;
  pTaskCreateRequest.m_appSecondaryCallback = NULL;
  pTaskCreateRequest.m_timeoutInSeconds = 0;
  m_asyncInfo = pTaskCreateRequest.m_asyncInfo;
  if ( pTaskCreateRequest.m_asyncInfo )
  {
    pTaskCreateRequest.m_asyncInfo->__abi_Release(pTaskCreateRequest.m_asyncInfo);
    m_asyncInfo = NULL;
    pTaskCreateRequest.m_asyncInfo = NULL;
  }
  if ( pTaskCreateRequest.m_remoteDemonwareTask.m_ptr )
  {
    if ( _InterlockedExchangeAdd((volatile signed __int32 *)&pTaskCreateRequest.m_remoteDemonwareTask.m_ptr->m_refCount, 0xFFFFFFFF) == 1 )
    {
      if ( pTaskCreateRequest.m_remoteDemonwareTask.m_ptr )
        ((void (__fastcall *)(bdRemoteTask *, __int64))pTaskCreateRequest.m_remoteDemonwareTask.m_ptr->~bdReferencable)(pTaskCreateRequest.m_remoteDemonwareTask.m_ptr, 1i64);
      pTaskCreateRequest.m_remoteDemonwareTask.m_ptr = NULL;
    }
    m_asyncInfo = pTaskCreateRequest.m_asyncInfo;
  }
  if ( m_asyncInfo )
    m_asyncInfo->__abi_Release(m_asyncInfo);
LABEL_105:
  bdJSONSerializer::~bdJSONSerializer(&v37);
LABEL_106:
  memset_0(this->m_requestBuffer, 0, sizeof(this->m_requestBuffer));
}

/*
==============
OnlineMatchmakerOmniscient::UpdateLobbyDocument
==============
*/
void OnlineMatchmakerOmniscient::UpdateLobbyDocument(OnlineMatchmakerOmniscient *this, const unsigned __int64 lobbyId, const unsigned __int64 updateId, const char *lobbyHostDoc, const unsigned int lobbyHostDocLength, const char *lobbyBackendDoc)
{
  OnlineTimeSeriesLog *v10; 
  __int64 v11; 
  ntl::internal::list_node_base *i; 
  __int64 v13; 
  ntl::internal::list_node_base *j; 
  __int64 v15; 
  ntl::internal::list_node_base *k; 
  unsigned __int64 m_dwTimestampOfLastUpdate; 
  XNADDR *Address; 
  const char *v19; 
  MatchMakerOmniLobbyData lobbyData; 

  Com_Printf(131097, "[MM] %s - updateid = %zu lobbyid = %zu\n", "OnlineMatchmakerOmniscient::UpdateLobbyDocument", updateId, lobbyId);
  Com_Printf(25, "[MM] %s - lobby backend doc = \"%s\"\n", "OnlineMatchmakerOmniscient::UpdateLobbyDocument", lobbyBackendDoc);
  Com_Printf(25, "[MM] %s - lobby host doc = \"%s\"\n", "OnlineMatchmakerOmniscient::UpdateLobbyDocument", lobbyHostDoc);
  v10 = OnlineTimeSeriesLog::Get();
  OnlineTimeSeriesLog::WriteEventCounter(v10, "event.updatelobbydocument.received.count", 1u);
  if ( this->m_lobbyData.m_lobbyid == lobbyId )
  {
    MatchMakerOmniLobbyData::MatchMakerOmniLobbyData(&lobbyData);
    OnlineMatchmakerOmniscient::ParseLobbyHostDoc(this, lobbyHostDoc, &lobbyData);
    OnlineMatchmakerOmniscient::ParseLobbyBackendDoc(this, lobbyBackendDoc, &lobbyData);
    v11 = 0i64;
    for ( i = lobbyData.m_squadAssignmentList.m_listHead.m_sentinel.mp_next; i != (ntl::internal::list_node_base *)&lobbyData.m_squadAssignmentList.m_listHead; i = i->mp_next )
      ++v11;
    v13 = 0i64;
    for ( j = lobbyData.m_teamAssignmentList.m_listHead.m_sentinel.mp_next; j != (ntl::internal::list_node_base *)&lobbyData.m_teamAssignmentList.m_listHead; j = j->mp_next )
      ++v13;
    v15 = 0i64;
    for ( k = lobbyData.m_expectedPlayers.m_listHead.m_sentinel.mp_next; k != (ntl::internal::list_node_base *)&lobbyData.m_expectedPlayers.m_listHead; k = k->mp_next )
      ++v15;
    Com_Printf(131097, "[MM] %s: Expected Players %lu, Team Count %lu, Squad Count %lu, updateId %zu\n", "OnlineMatchmakerOmniscient::UpdateLobbyDocument", v15, v13, v11, updateId);
    if ( lobbyData.m_lobbyid != this->m_lobbyData.m_lobbyid && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\online\\online_matchmaker.cpp", 6746, ASSERT_TYPE_ASSERT, "(lobbyData.m_lobbyid == m_lobbyData.m_lobbyid)", (const char *)&queryFormat, "lobbyData.m_lobbyid == m_lobbyData.m_lobbyid") )
      __debugbreak();
    m_dwTimestampOfLastUpdate = this->m_lobbyData.m_dwTimestampOfLastUpdate;
    if ( m_dwTimestampOfLastUpdate >= lobbyData.m_dwTimestampOfLastUpdate )
    {
      Com_PrintError(25, "[MM] %s Received old update - We're at %zu, the recently received update is at %zu. DROPPING\n", "OnlineMatchmakerOmniscient::UpdateLobbyDocument", m_dwTimestampOfLastUpdate, lobbyData.m_dwTimestampOfLastUpdate);
    }
    else
    {
      this->m_lobbyData.m_dwTimestampOfLastUpdate = lobbyData.m_dwTimestampOfLastUpdate;
      this->m_lobbyData.m_updateId = updateId;
      this->m_lobbyData.m_hostUID = lobbyData.m_hostUID;
      Core_strcpy(this->m_lobbyData.m_hostAddressBase64, 0x71ui64, lobbyData.m_hostAddressBase64);
      Address = XSESSION_INFO::GetAddress(&lobbyData.m_hostAddress);
      *XSESSION_INFO::GetAddress(&this->m_lobbyData.m_hostAddress) = *Address;
      this->m_lobbyData.m_key = lobbyData.m_key;
      this->m_lobbyData.m_keyId = lobbyData.m_keyId;
      this->m_lobbyData.m_canGameStart = lobbyData.m_canGameStart;
      ntl::list<XUID,ntl::fixed_pool_allocator<ntl::internal::list_node<XUID>,200,0>>::assign<ntl::fixed_pool_allocator<ntl::internal::list_node<XUID>,200,0>>(&this->m_lobbyData.m_migrationList, &lobbyData.m_migrationList);
      memcpy_0(this->m_lobbyData.m_dvarOverrides, lobbyData.m_dvarOverrides, sizeof(this->m_lobbyData.m_dvarOverrides));
      this->m_lobbyData.m_dvarOverrideCount = lobbyData.m_dvarOverrideCount;
      memcpy_0(this->m_lobbyData.m_dcPrefs._bytes_20, lobbyData.m_dcPrefs._bytes_20, 0x1000ui64);
      this->m_lobbyData.m_dcPrefs.m_numDataCenterPreferences = lobbyData.m_dcPrefs.m_numDataCenterPreferences;
      v19 = j_va("\"update_id\":%zu", updateId);
      OnlineMatchmakerOmniscient::Log(this, "UpdateLobbyDocument", v19, lobbyBackendDoc, lobbyHostDoc, 0i64);
      OnlineMatchmakerOmniscient::ReconcileExpectedPlayers(this, &lobbyData.m_expectedPlayers);
      OnlineMatchmakerOmniscient::UpdateTeamAssignments(this, &lobbyData.m_teamAssignmentList);
      OnlineMatchmakerOmniscient::UpdateSquadAssignments(this, &lobbyData.m_squadAssignmentList);
      OnlineMatchmakerOmniscient::UpdateMatchmakingIds(this, &lobbyData.m_matchmakingIdList);
      OnlineMatchmakerOmniscient::UpdatePerformanceValues(this, &lobbyData.m_performanceValueList);
      OnlineMatchmakerOmniscient::UpdateServiceLevels(this, &lobbyData.m_paidUsersList, 1);
      OnlineMatchmakerOmniscient::UpdateServiceLevels(this, &lobbyData.m_freemiumUsersList, 0);
      OnlineMatchmakerOmniscient::UpdateAdditionalPlayerSlots(this, &lobbyData.m_additionalSlotsRequestedList);
      OnlineMatchmakerOmniscient::SyncSplitscreenPlayers(this);
      this->m_lobbyData.m_lobbyDocIsDirty = 1;
      this->m_callbacks.m_outstandingCallback |= 8u;
      this->m_callbacks.m_callbackWasSuccessful[3] = 1;
    }
    MatchMakerOmniLobbyData::~MatchMakerOmniLobbyData(&lobbyData);
  }
  else
  {
    Com_PrintError(25, "[MM] %s Received update lobby host document after the lobby had been cleaned up. (lobbyid - %zu)\n", "OnlineMatchmakerOmniscient::UpdateLobbyDocument", lobbyId);
  }
}

/*
==============
OnlineMatchmakerOmniscient::UpdateLocalPlayerXnaddr
==============
*/
void OnlineMatchmakerOmniscient::UpdateLocalPlayerXnaddr(OnlineMatchmakerOmniscient *this, const XNADDR *addr)
{
  const dvar_t *v2; 
  const PartyData *PartyData; 
  ntl::internal::list_node_base *i; 

  v2 = DVARBOOL_onlinegame;
  if ( !DVARBOOL_onlinegame && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\universal\\dvar.h", 692, ASSERT_TYPE_ASSERT, "(dvar)", "%s\n\tDvar %s accessed after deregistration", "dvar", "onlinegame") )
    __debugbreak();
  Dvar_CheckFrontendServerThread(v2);
  if ( !v2->current.enabled || !Live_IsInRestrictedMatchmakingGame() && (PartyData = Lobby_GetPartyData(), !Party_PrivateMatchmakingAllowed(PartyData)) || this->m_state < eNEW )
  {
    if ( CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\online\\online_matchmaker.cpp", 4012, ASSERT_TYPE_ASSERT, "(IsActive())", (const char *)&queryFormat, "IsActive()") )
      __debugbreak();
  }
  for ( i = this->m_playerList.m_listHead.m_sentinel.mp_next; i != (ntl::internal::list_node_base *)&this->m_playerList.m_listHead; i = i->mp_next )
  {
    if ( !i && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\libs\\ntl\\ntl\\list\\list.h", 103, ASSERT_TYPE_ASSERT, "( mp_node )", (const char *)&queryFormat, "mp_node") )
      __debugbreak();
    if ( LOBYTE(i[7].mp_prev) && HIDWORD(i[7].mp_prev) != -1 && XNADDR::operator!=((XNADDR *)((char *)&i[1].mp_prev + 4), addr) )
    {
      XNADDR::operator=((XNADDR *)((char *)&i[1].mp_prev + 4), addr);
      if ( BYTE1(i[7].mp_next) )
        OnlineMatchmakerOmniscient::SetPlayerInfo(this, HIDWORD(i[7].mp_prev), addr, NULL);
    }
  }
}

/*
==============
OnlineMatchmakerOmniscient::UpdateMatchmaking
==============
*/
void OnlineMatchmakerOmniscient::UpdateMatchmaking(OnlineMatchmakerOmniscient *this)
{
  ;
}

/*
==============
OnlineMatchmakerOmniscient::UpdateMatchmakingIds
==============
*/
void OnlineMatchmakerOmniscient::UpdateMatchmakingIds(OnlineMatchmakerOmniscient *this, const ntl::fixed_list<PlayerValue<unsigned __int64>,200,0> *matchmakingIdList)
{
  const XUID *mp_next; 
  ntl::internal::list_head_base<ntl::internal::list_node<PlayerValue<unsigned __int64> > > *i; 
  ntl::internal::list_node<OnlineMatchmakerOmniscient::Player> *mp_node; 
  unsigned __int64 m_id; 
  unsigned __int64 m_mmId; 
  const char *v8; 
  const char *v9; 
  ntl::internal::list_iterator<OnlineMatchmakerOmniscient::Player,ntl::internal::list_node<OnlineMatchmakerOmniscient::Player>,OnlineMatchmakerOmniscient::Player *,OnlineMatchmakerOmniscient::Player &> it; 

  mp_next = (const XUID *)matchmakingIdList->m_listHead.m_sentinel.mp_next;
  for ( i = &matchmakingIdList->m_listHead; mp_next != (const XUID *)i; mp_next = (const XUID *)mp_next[1].m_id )
  {
    if ( !mp_next && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\libs\\ntl\\ntl\\list\\list.h", 103, ASSERT_TYPE_ASSERT, "( mp_node )", (const char *)&queryFormat, "mp_node") )
      __debugbreak();
    if ( OnlineMatchmakerOmniscient::FindPlayer(this, mp_next + 2, &it) )
    {
      mp_node = it.mp_node;
      if ( !it.mp_node && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\libs\\ntl\\ntl\\list\\list.h", 103, ASSERT_TYPE_ASSERT, "( mp_node )", (const char *)&queryFormat, "mp_node") )
        __debugbreak();
      if ( !mp_next && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\libs\\ntl\\ntl\\list\\list.h", 103, ASSERT_TYPE_ASSERT, "( mp_node )", (const char *)&queryFormat, "mp_node") )
        __debugbreak();
      m_id = mp_next[3].m_id;
      if ( mp_node->m_data.m_mmId != m_id )
      {
        if ( !mp_node && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\libs\\ntl\\ntl\\list\\list.h", 103, ASSERT_TYPE_ASSERT, "( mp_node )", (const char *)&queryFormat, "mp_node") )
          __debugbreak();
        m_mmId = mp_node->m_data.m_mmId;
        v8 = XUID::ToDevString((XUID *)&mp_next[2]);
        Com_Printf(25, "\tChanging user %s from mmid %zu to mmid %zu\n", v8, m_mmId, m_id);
        mp_node->m_data.m_mmId = mp_next[3].m_id;
      }
    }
    else
    {
      if ( !mp_next && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\libs\\ntl\\ntl\\list\\list.h", 103, ASSERT_TYPE_ASSERT, "( mp_node )", (const char *)&queryFormat, "mp_node") )
        __debugbreak();
      v9 = XUID::ToDevString((XUID *)&mp_next[2]);
      Com_PrintWarning(25, "\t%s user %s not found, this is bad\n", "OnlineMatchmakerOmniscient::UpdateMatchmakingIds", v9);
    }
    if ( !mp_next && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\libs\\ntl\\ntl\\list\\list.h", 109, ASSERT_TYPE_ASSERT, "( mp_node )", (const char *)&queryFormat, "mp_node") )
      __debugbreak();
  }
}

/*
==============
OnlineMatchmakerOmniscient::UpdateMergeability
==============
*/
__int64 OnlineMatchmakerOmniscient::UpdateMergeability(OnlineMatchmakerOmniscient *this, bool enable)
{
  const dvar_t *v2; 
  char v5; 
  unsigned __int8 v6; 
  char v8; 
  char v9; 
  unsigned __int8 v10; 

  v2 = DVARBOOL_online_matchmaking_allow_lobby_merging;
  if ( !DVARBOOL_online_matchmaking_allow_lobby_merging && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\universal\\dvar.h", 692, ASSERT_TYPE_ASSERT, "(dvar)", "%s\n\tDvar %s accessed after deregistration", "dvar", "online_matchmaking_allow_lobby_merging") )
    __debugbreak();
  Dvar_CheckFrontendServerThread(v2);
  if ( enable && v2->current.enabled )
  {
    v5 = 0;
    if ( this->m_lobbyData.m_acceptLobbyMerges )
    {
      v6 = 0;
    }
    else
    {
      this->m_lobbyData.m_acceptLobbyMerges = 1;
      v6 = 1;
      this->m_lobbyData.m_lobbyDocIsDirty = 1;
      this->m_lobbyData.m_timeToUpdateIfDirty = 0;
    }
    if ( !this->m_lobbyData.m_hasDedicatedServer )
    {
      if ( !this->m_lobbyData.m_canLobbyMerge )
      {
        this->m_lobbyData.m_timeToUpdateIfDirty = 0;
        v5 = 1;
        this->m_lobbyData.m_canLobbyMerge = 1;
        this->m_lobbyData.m_lobbyDocIsDirty = 1;
      }
      v6 |= v5;
    }
    if ( v6 )
      Com_Printf(25, "[MM] %s Enable lobby merging, and doc updated.\n", "OnlineMatchmakerOmniscient::UpdateMergeability");
    return v6;
  }
  else
  {
    if ( this->m_lobbyData.m_acceptLobbyMerges )
    {
      this->m_lobbyData.m_acceptLobbyMerges = 0;
      v8 = 1;
      this->m_lobbyData.m_lobbyDocIsDirty = 1;
      this->m_lobbyData.m_timeToUpdateIfDirty = 0;
    }
    else
    {
      v8 = 0;
    }
    if ( this->m_lobbyData.m_canLobbyMerge )
    {
      this->m_lobbyData.m_canLobbyMerge = 0;
      this->m_lobbyData.m_lobbyDocIsDirty = 1;
      this->m_lobbyData.m_timeToUpdateIfDirty = 0;
      v9 = 1;
    }
    else
    {
      v9 = 0;
    }
    v10 = v8 | v9;
    if ( v10 )
      Com_Printf(25, "[MM] %s Disable lobby merging\n", "OnlineMatchmakerOmniscient::UpdateMergeability");
    return v10;
  }
}

/*
==============
OnlineMatchmakerOmniscient::UpdatePerformanceValues
==============
*/
void OnlineMatchmakerOmniscient::UpdatePerformanceValues(OnlineMatchmakerOmniscient *this, const ntl::fixed_list<PlayerValue<float>,200,0> *performanceValueList)
{
  ntl::internal::list_node_base *mp_next; 
  ntl::internal::list_head_base<ntl::internal::list_node<PlayerValue<float> > > *i; 
  ntl::internal::list_node<OnlineMatchmakerOmniscient::Player> *mp_node; 
  float v6; 
  double m_performanceValue; 
  const char *v8; 
  const char *v9; 
  ntl::internal::list_iterator<OnlineMatchmakerOmniscient::Player,ntl::internal::list_node<OnlineMatchmakerOmniscient::Player>,OnlineMatchmakerOmniscient::Player *,OnlineMatchmakerOmniscient::Player &> it; 

  mp_next = performanceValueList->m_listHead.m_sentinel.mp_next;
  for ( i = &performanceValueList->m_listHead; mp_next != (ntl::internal::list_node_base *)i; mp_next = mp_next->mp_next )
  {
    if ( !mp_next && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\libs\\ntl\\ntl\\list\\list.h", 103, ASSERT_TYPE_ASSERT, "( mp_node )", (const char *)&queryFormat, "mp_node") )
      __debugbreak();
    if ( OnlineMatchmakerOmniscient::FindPlayer(this, (const XUID *)&mp_next[1], &it) )
    {
      mp_node = it.mp_node;
      if ( !it.mp_node && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\libs\\ntl\\ntl\\list\\list.h", 103, ASSERT_TYPE_ASSERT, "( mp_node )", (const char *)&queryFormat, "mp_node") )
        __debugbreak();
      if ( !mp_next && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\libs\\ntl\\ntl\\list\\list.h", 103, ASSERT_TYPE_ASSERT, "( mp_node )", (const char *)&queryFormat, "mp_node") )
        __debugbreak();
      v6 = *(float *)&mp_next[1].mp_next;
      if ( v6 != mp_node->m_data.m_performanceValue )
      {
        if ( !mp_node && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\libs\\ntl\\ntl\\list\\list.h", 103, ASSERT_TYPE_ASSERT, "( mp_node )", (const char *)&queryFormat, "mp_node") )
          __debugbreak();
        m_performanceValue = mp_node->m_data.m_performanceValue;
        v8 = XUID::ToDevString((XUID *)&mp_next[1]);
        Com_Printf(25, "\tChanging user %s from performanceValue %f to performanceValue %f\n", v8, m_performanceValue, v6);
        mp_node->m_data.m_performanceValue = *(float *)&mp_next[1].mp_next;
      }
    }
    else
    {
      if ( !mp_next && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\libs\\ntl\\ntl\\list\\list.h", 103, ASSERT_TYPE_ASSERT, "( mp_node )", (const char *)&queryFormat, "mp_node") )
        __debugbreak();
      v9 = XUID::ToDevString((XUID *)&mp_next[1]);
      Com_PrintWarning(25, "\t%s user %s not found, this is bad\n", "OnlineMatchmakerOmniscient::UpdatePerformanceValues", v9);
    }
    if ( !mp_next && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\libs\\ntl\\ntl\\list\\list.h", 109, ASSERT_TYPE_ASSERT, "( mp_node )", (const char *)&queryFormat, "mp_node") )
      __debugbreak();
  }
}

/*
==============
OnlineMatchmakerOmniscient::UpdatePlayer
==============
*/
void OnlineMatchmakerOmniscient::UpdatePlayer(OnlineMatchmakerOmniscient *this, OnlineMatchmakerOmniscient::Player *outplayer)
{
  OnlineMatchmakerOmniscient::Player *v2; 
  OnlineMatchmakerOmniscient *v3; 
  SetPlayerInfoResult v4; 
  OnlineMatchmakerOmniscient::Player::PlayerState v5; 
  bool v6; 
  ntl::internal::list_node_base *mp_next; 
  OnlineMatchmakerOmniscient::Player::PlayerState v8; 
  const char *v9; 
  const char *v10; 
  const char *v11; 
  LocalClientNum_t outLocalClientNum; 

  v2 = outplayer;
  v3 = this;
  if ( outplayer->m_state != eNEW )
    goto LABEL_28;
  if ( !outplayer->m_bIsLocal )
  {
    v8 = eREMOTE_WAITING_FOR_MMING_TOKEN;
    goto LABEL_27;
  }
  if ( !Content_IsEnumerationDone() || !CL_Mgr_IsControllerMappedToClient(v2->m_controllerIndex, &outLocalClientNum) )
    goto LABEL_28;
  if ( outLocalClientNum )
  {
    OnlineMatchmakerOmniscient::SetPlayerState(v3, v2, eADDING_LOCAL_PLAYER_TO_DW);
    v2->m_isPrimaryAccount = 0;
    mp_next = v3->m_playerList.m_listHead.m_sentinel.mp_next;
    if ( mp_next == (ntl::internal::list_node_base *)&v3->m_playerList.m_listHead )
      goto LABEL_28;
    while ( 1 )
    {
      if ( !mp_next && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\libs\\ntl\\ntl\\list\\list.h", 103, ASSERT_TYPE_ASSERT, "( mp_node )", (const char *)&queryFormat, "mp_node") )
        __debugbreak();
      if ( LOBYTE(mp_next[7].mp_prev) && XUID::operator!=(&v2->m_userId, (const XUID *)&mp_next[6].mp_next) )
        break;
      mp_next = mp_next->mp_next;
      if ( mp_next == (ntl::internal::list_node_base *)&v3->m_playerList.m_listHead )
        goto LABEL_28;
    }
    v8 = eREADY;
    v2->m_matchmakingToken = (unsigned __int64)mp_next[10].mp_next;
    outplayer = v2;
    this = v3;
LABEL_27:
    OnlineMatchmakerOmniscient::SetPlayerState(this, outplayer, v8);
    goto LABEL_28;
  }
  v4 = OnlineMatchmakerOmniscient::SetPlayerInfo(v3, v2->m_controllerIndex, &v2->m_address, &v2->m_taskId);
  if ( v4 )
  {
    if ( v4 == TASK_SKIPPED )
    {
      v5 = eREMOTE_WAITING_FOR_MMING_TOKEN;
    }
    else
    {
      if ( v4 != TASK_FAILED && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\online\\online_matchmaker.cpp", 4002, ASSERT_TYPE_ASSERT, (const char *)&queryFormat.fmt + 3, "Unknown tSetPlayerInfoResult (%i)", v4) )
        __debugbreak();
      v5 = eFAILURE;
    }
  }
  else
  {
    v5 = eADDING_LOCAL_PLAYER_TO_DW;
  }
  OnlineMatchmakerOmniscient::SetPlayerState(v3, v2, v5);
  v6 = v2->m_state == eNEW;
  v2->m_isPrimaryAccount = 1;
  if ( v6 && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\online\\online_matchmaker.cpp", 3001, ASSERT_TYPE_ASSERT, "(outplayer.m_state != Player::eNEW)", (const char *)&queryFormat, "outplayer.m_state != Player::eNEW") )
    __debugbreak();
LABEL_28:
  if ( v3->m_lobbyData.m_amITheLobbyHost && v2->m_currentMemberStatus == eNEW && v2->m_queuedMemberStatus == eNEW && v2->m_timeUntilWontConnect_ms < Sys_Milliseconds() )
  {
    v9 = XUID::ToString(&v2->m_userId);
    v10 = j_va("{\"status\":\"Timed out player in MAY_CONNECT state - %s\"}", v9);
    OnlineMatchmakerOmniscient::Log(v3, "UpdatePlayer", v10, NULL, NULL, 0i64);
    v11 = XUID::ToString(&v2->m_userId);
    Com_Printf(131097, "[MM] %s timed out player %s in MAY_CONNECT state, SetPlayerQueuedStatus to eWONT_CONNECT\n", "OnlineMatchmakerOmniscient::UpdatePlayer", v11);
    OnlineMatchmakerOmniscient::SetPlayerQueuedStatus(v3, v2, eREMOTE_WAITING_FOR_MMING_TOKEN);
  }
}

/*
==============
OnlineMatchmakerOmniscient::UpdatePlayers
==============
*/
void OnlineMatchmakerOmniscient::UpdatePlayers(OnlineMatchmakerOmniscient *this)
{
  const char *v1; 
  const dvar_t *v2; 
  ntl::internal::list_node_base *mp_next; 
  char v5; 
  MatchmakerLobbyState m_lobbyState; 
  int v7; 
  const char *v8; 
  XUID v9; 
  const PartyData *v10; 
  int MemberByXUID_AllowNotPresent; 
  const char *v12; 
  bool v13; 
  MemberStatus v14; 
  OnlineMatchmakerOmniscient::Player *v15; 
  int mp_next_high; 
  const char *v17; 
  OnlineMatchmakerOmniscient::Player *v18; 
  const PartyData *ActiveParty; 
  bool (__fastcall *m_requestMatchmakingInfoCallback)(const XUID); 
  ntl::internal::list_node_base *v21; 
  __int64 mp_prev_high; 
  const char *v23; 
  const char *v24; 
  const char *v25; 
  __int64 v26; 
  __int64 mp_next_low; 
  const char *v28; 
  const char *v29; 
  const char *v30; 
  const char *v31; 
  __int64 v32; 
  __int64 v33; 
  ntl::internal::list_head_base<ntl::internal::list_node<OnlineMatchmakerOmniscient::Player> > *p_m_listHead; 
  __int64 v35; 
  const char *v36; 
  const char *v37; 
  const char *v38; 
  const char *v39; 
  const char *v40; 
  __int64 v41; 
  const char *v42; 
  const char *v43; 
  const char *v44; 
  const char *v45; 
  ntl::internal::list_iterator<OnlineMatchmakerOmniscient::Player,ntl::internal::list_node<OnlineMatchmakerOmniscient::Player>,OnlineMatchmakerOmniscient::Player *,OnlineMatchmakerOmniscient::Player &> *v46; 
  __int64 v47; 
  ntl::internal::list_node_base *v48; 
  const PartyData *PartyData; 
  int v50; 
  bool enabled; 
  ntl::internal::list_iterator<OnlineMatchmakerOmniscient::Player,ntl::internal::list_node<OnlineMatchmakerOmniscient::Player>,OnlineMatchmakerOmniscient::Player *,OnlineMatchmakerOmniscient::Player &> it; 
  ntl::internal::list_iterator<OnlineMatchmakerOmniscient::Player,ntl::internal::list_node<OnlineMatchmakerOmniscient::Player>,OnlineMatchmakerOmniscient::Player *,OnlineMatchmakerOmniscient::Player &> result; 
  const char *v54; 
  const char *v55; 
  const char *v56; 
  const char *v57; 
  const char *v58; 
  const char *v59; 
  const char *v60; 
  const char *v61; 
  const char *v62; 
  const char *v63; 

  v2 = DVARBOOL_online_matchmaking_send_wont_connect_status;
  LOBYTE(v1) = 0;
  v50 = (int)v1;
  if ( !DVARBOOL_online_matchmaking_send_wont_connect_status && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\universal\\dvar.h", 692, ASSERT_TYPE_ASSERT, "(dvar)", "%s\n\tDvar %s accessed after deregistration", "dvar", "online_matchmaking_send_wont_connect_status") )
    __debugbreak();
  Dvar_CheckFrontendServerThread(v2);
  mp_next = this->m_playerList.m_listHead.m_sentinel.mp_next;
  enabled = v2->current.enabled;
  it.mp_node = (ntl::internal::list_node<OnlineMatchmakerOmniscient::Player> *)mp_next;
  if ( mp_next != (ntl::internal::list_node_base *)&this->m_playerList.m_listHead )
  {
    while ( 1 )
    {
      v5 = 0;
      if ( !mp_next && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\libs\\ntl\\ntl\\list\\list.h", 97, ASSERT_TYPE_ASSERT, "( mp_node )", (const char *)&queryFormat, "mp_node") )
        __debugbreak();
      OnlineMatchmakerOmniscient::UpdatePlayer(this, (OnlineMatchmakerOmniscient::Player *)&mp_next[1]);
      m_lobbyState = this->m_lobbyState;
      if ( (unsigned int)(m_lobbyState - 5) <= 1 )
        break;
      if ( m_lobbyState != eREMOVING_PLAYER && m_lobbyState != eREADY )
      {
        if ( m_lobbyState == eIDLE )
          goto LABEL_42;
        if ( !mp_next && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\libs\\ntl\\ntl\\list\\list.h", 103, ASSERT_TYPE_ASSERT, "( mp_node )", (const char *)&queryFormat, "mp_node") )
          __debugbreak();
        v13 = HIDWORD(mp_next[11].mp_next) == 2;
LABEL_23:
        if ( v13 )
          goto LABEL_24;
        goto LABEL_42;
      }
      if ( !mp_next && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\libs\\ntl\\ntl\\list\\list.h", 103, ASSERT_TYPE_ASSERT, "( mp_node )", (const char *)&queryFormat, "mp_node") )
        __debugbreak();
      mp_next_high = HIDWORD(mp_next[11].mp_next);
      if ( mp_next_high == 2 )
      {
LABEL_24:
        OnlineMatchmakerOmniscient::SetPlayerQueuedStatus(this, (OnlineMatchmakerOmniscient::Player *)&mp_next[1], eREADY);
        v14 = eREADY;
        v15 = (OnlineMatchmakerOmniscient::Player *)&mp_next[1];
LABEL_41:
        OnlineMatchmakerOmniscient::SetPlayerCurrentStatus(this, v15, v14);
        goto LABEL_42;
      }
      if ( mp_next_high == 1 )
      {
        if ( LODWORD(mp_next[11].mp_next) != 2 )
          OnlineMatchmakerOmniscient::SetPlayerQueuedStatus(this, (OnlineMatchmakerOmniscient::Player *)&mp_next[1], eADDING_LOCAL_PLAYER_TO_DW);
        v15 = (OnlineMatchmakerOmniscient::Player *)&mp_next[1];
        if ( LODWORD(mp_next[11].mp_next) != HIDWORD(mp_next[11].mp_prev) )
        {
          v14 = eADDING_LOCAL_PLAYER_TO_DW;
          goto LABEL_41;
        }
      }
LABEL_42:
      if ( !mp_next && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\libs\\ntl\\ntl\\list\\list.h", 103, ASSERT_TYPE_ASSERT, "( mp_node )", (const char *)&queryFormat, "mp_node") )
        __debugbreak();
      if ( !HIDWORD(mp_next[11].mp_prev) && !LODWORD(mp_next[11].mp_next) )
      {
        v17 = XUID::ToString((XUID *)&mp_next[6].mp_next);
        Com_Printf(131097, "[MM] %s player %s has MemberStatus::eUNACKNOWLEDGED, SetPlayerQueuedStatus to eWONT_CONNECT\n", "OnlineMatchmakerOmniscient::UpdatePlayers", v17);
        OnlineMatchmakerOmniscient::SetPlayerQueuedStatus(this, (OnlineMatchmakerOmniscient::Player *)&mp_next[1], eREMOTE_WAITING_FOR_MMING_TOKEN);
      }
      if ( LOBYTE(mp_next[7].mp_prev) )
      {
        v18 = (OnlineMatchmakerOmniscient::Player *)&mp_next[1];
        if ( LODWORD(mp_next[1].mp_prev) == 3 )
        {
          if ( mp_next[10].mp_next )
          {
            OnlineMatchmakerOmniscient::SetPlayerState(this, v18, eREADY);
          }
          else if ( !LOBYTE(mp_next[7].mp_next) )
          {
            OnlineMatchmakerOmniscient::GetMatchmakingTokenFromDW(this, v18);
          }
        }
      }
      else
      {
        ActiveParty = Party_GetActiveParty();
        if ( Party_AreWeHost(ActiveParty) )
        {
          if ( LODWORD(mp_next[1].mp_prev) == 3 && !mp_next[10].mp_next && !LOBYTE(mp_next[7].mp_next) )
          {
            m_requestMatchmakingInfoCallback = this->m_callbacks.m_requestMatchmakingInfoCallback;
            if ( m_requestMatchmakingInfoCallback )
              LOBYTE(mp_next[7].mp_next) = ((__int64 (__fastcall *)(ntl::internal::list_node_base *))m_requestMatchmakingInfoCallback)(mp_next[6].mp_next);
          }
        }
      }
      v21 = mp_next + 1;
      if ( this->m_lobbyState )
      {
        LODWORD(v1) = (unsigned __int8)v1;
        if ( LODWORD(mp_next[11].mp_next) != HIDWORD(mp_next[11].mp_prev) )
          LODWORD(v1) = 1;
        v50 = (int)v1;
      }
      else
      {
        mp_prev_high = SHIDWORD(mp_next[11].mp_prev);
        if ( LODWORD(mp_next[11].mp_next) != (_DWORD)mp_prev_high )
        {
          v58 = "eREADY_TO_REMOVE";
          v54 = "eUNACKNOWLEDGED";
          v55 = "eMAY_CONNECT";
          v56 = "eCONNECTED";
          v57 = "eWONT_CONNECT";
          v23 = (&v54)[mp_prev_high];
          v58 = "eREADY_TO_REMOVE";
          v24 = (&v54)[SLODWORD(mp_next[11].mp_next)];
          v25 = XUID::ToString((XUID *)&mp_next[6].mp_next);
          Com_Printf(25, "[MM] %s player %s promoting queued status of %s to current status (was %s)\n", "OnlineMatchmakerOmniscient::UpdatePlayers", v25, v24, v23);
          OnlineMatchmakerOmniscient::SetPlayerCurrentStatus(this, (OnlineMatchmakerOmniscient::Player *)&mp_next[1], (MemberStatus)mp_next[11].mp_next);
        }
        if ( (HIDWORD(mp_next[11].mp_next) & 0xFFFFFFFD) == 0 )
          v5 = 1;
      }
      if ( !enabled )
      {
        v26 = SHIDWORD(mp_next[11].mp_prev);
        if ( (_DWORD)v26 == 3 || LODWORD(mp_next[11].mp_next) == 3 )
        {
          mp_next_low = SLODWORD(mp_next[11].mp_next);
          v54 = "eUNACKNOWLEDGED";
          v55 = "eMAY_CONNECT";
          v56 = "eCONNECTED";
          v57 = "eWONT_CONNECT";
          v58 = "eREADY_TO_REMOVE";
          v28 = (&v54)[mp_next_low];
          v29 = (&v54)[v26];
          v30 = XUID::ToDevString((XUID *)&mp_next[6].mp_next);
          Com_Printf(131097, "[MM] %s - promoting player %s status (c: %s q: %s) to (c: %s q: %s) so they won't be echoed in the lobby doc\n", "OnlineMatchmakerOmniscient::UpdatePlayers", v30, v29, v28, "eREADY_TO_REMOVE", "eREADY_TO_REMOVE");
          OnlineMatchmakerOmniscient::SetPlayerQueuedStatus(this, (OnlineMatchmakerOmniscient::Player *)&mp_next[1], eREADY);
          v5 = 1;
        }
      }
      if ( (unsigned int)(this->m_lobbyState - 6) <= 1 && HIDWORD(mp_next[11].mp_prev) == 3 && LODWORD(mp_next[11].mp_next) != 4 )
      {
        v31 = XUID::ToDevString((XUID *)&mp_next[6].mp_next);
        Com_Printf(25, "[MM] %s - marking player for removal %s from the player list.\n", "OnlineMatchmakerOmniscient::UpdatePlayers", v31);
        v5 = 1;
      }
      v32 = SHIDWORD(mp_next[11].mp_next);
      if ( (_DWORD)v32 == 2 )
      {
        LOBYTE(v1) = 1;
        v50 = (int)v1;
        v5 = 1;
      }
      v33 = SHIDWORD(mp_next[11].mp_prev);
      if ( (_DWORD)v33 == 4 )
      {
LABEL_87:
        if ( this->m_lobbyState && (_DWORD)v33 != 4 || LOBYTE(mp_next[7].mp_prev) && LODWORD(v21->mp_prev) == 3 )
        {
          mp_next = mp_next->mp_next;
          p_m_listHead = &this->m_playerList.m_listHead;
          it.mp_node = (ntl::internal::list_node<OnlineMatchmakerOmniscient::Player> *)mp_next;
        }
        else
        {
          v60 = "eREADY_TO_REMOVE";
          v63 = "eNONE";
          v54 = "eIDLE";
          v55 = "eNEW";
          v56 = "eADDING_LOCAL_PLAYER_TO_DW";
          v57 = "eREMOTE_WAITING_FOR_MMING_TOKEN";
          v58 = "eREADY";
          v59 = "eUPDATING";
          v61 = "eREMOVING_PLAYER";
          v62 = "eFAILURE";
          v40 = (&v54)[SLODWORD(v21->mp_prev)];
          v55 = "eINITED";
          v57 = "eDISCONNECTED";
          v58 = "eUNKNOWN";
          v41 = SLODWORD(mp_next[11].mp_next);
          v54 = "eNONE";
          v56 = "eCONNECTED";
          v42 = (&v54)[v32];
          v54 = "eUNACKNOWLEDGED";
          v55 = "eMAY_CONNECT";
          v57 = "eWONT_CONNECT";
          v58 = "eREADY_TO_REMOVE";
          v43 = (&v54)[v33];
          v58 = "eREADY_TO_REMOVE";
          v56 = "eCONNECTED";
          v44 = (&v54)[v41];
          v45 = XUID::ToDevString((XUID *)&mp_next[6].mp_next);
          Com_Printf(25, "[MM] %s Really removing %s from player list - q: %s c: %s s: %s state = %s.\n", "OnlineMatchmakerOmniscient::UpdatePlayers", v45, v44, v43, v42, v40);
          v46 = OnlineMatchmakerOmniscient::ErasePlayer(this, &result, &it);
          p_m_listHead = &this->m_playerList.m_listHead;
          v47 = 0i64;
          mp_next = v46->mp_node;
          v48 = this->m_playerList.m_listHead.m_sentinel.mp_next;
          it.mp_node = (ntl::internal::list_node<OnlineMatchmakerOmniscient::Player> *)mp_next;
          if ( v48 == (ntl::internal::list_node_base *)&this->m_playerList.m_listHead )
            goto LABEL_95;
          do
          {
            v48 = v48->mp_next;
            ++v47;
          }
          while ( v48 != (ntl::internal::list_node_base *)p_m_listHead );
          if ( !v47 )
          {
LABEL_95:
            OnlineMatchmakerOmniscient::AddPlayersFromParty(this, &g_partyData);
            PartyData = Lobby_GetPartyData();
            OnlineMatchmakerOmniscient::AddPlayersFromParty(this, PartyData);
          }
          LODWORD(v1) = v50;
        }
        goto LABEL_97;
      }
      if ( v5 )
      {
        if ( (_DWORD)v33 == 4 || LOBYTE(mp_next[7].mp_prev) && LODWORD(v21->mp_prev) == 3 )
          goto LABEL_87;
        v35 = SLODWORD(mp_next[11].mp_next);
        if ( (_DWORD)v35 != 4 )
        {
          v60 = "eREADY_TO_REMOVE";
          v63 = "eNONE";
          v54 = "eIDLE";
          v55 = "eNEW";
          v56 = "eADDING_LOCAL_PLAYER_TO_DW";
          v57 = "eREMOTE_WAITING_FOR_MMING_TOKEN";
          v58 = "eREADY";
          v59 = "eUPDATING";
          v61 = "eREMOVING_PLAYER";
          v62 = "eFAILURE";
          v36 = (&v54)[SLODWORD(v21->mp_prev)];
          v55 = "eINITED";
          v57 = "eDISCONNECTED";
          v54 = "eNONE";
          v58 = "eUNKNOWN";
          v56 = "eCONNECTED";
          v1 = (&v54)[v32];
          v54 = "eUNACKNOWLEDGED";
          v55 = "eMAY_CONNECT";
          v58 = "eREADY_TO_REMOVE";
          v57 = "eWONT_CONNECT";
          v37 = (&v54)[v33];
          v56 = "eCONNECTED";
          v58 = "eREADY_TO_REMOVE";
          v38 = (&v54)[v35];
          v39 = XUID::ToDevString((XUID *)&mp_next[6].mp_next);
          Com_Printf(25, "[MM] %s Marking %s for removal from player list - q: %s c: %s s: %s state = %s.\n", "OnlineMatchmakerOmniscient::UpdatePlayers", v39, v38, v37, v1, v36);
        }
        OnlineMatchmakerOmniscient::SetPlayerQueuedStatus(this, (OnlineMatchmakerOmniscient::Player *)&mp_next[1], eREADY);
        mp_next = mp_next->mp_next;
        p_m_listHead = &this->m_playerList.m_listHead;
        LOBYTE(v1) = 1;
        it.mp_node = (ntl::internal::list_node<OnlineMatchmakerOmniscient::Player> *)mp_next;
        v50 = (int)v1;
      }
      else
      {
        mp_next = mp_next->mp_next;
        p_m_listHead = &this->m_playerList.m_listHead;
        it.mp_node = (ntl::internal::list_node<OnlineMatchmakerOmniscient::Player> *)mp_next;
      }
LABEL_97:
      if ( mp_next == (ntl::internal::list_node_base *)p_m_listHead )
      {
        if ( (_BYTE)v1 )
          this->m_lobbyData.m_lobbyDocIsDirty = 1;
        return;
      }
    }
    if ( !mp_next && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\libs\\ntl\\ntl\\list\\list.h", 103, ASSERT_TYPE_ASSERT, "( mp_node )", (const char *)&queryFormat, "mp_node") )
      __debugbreak();
    v7 = HIDWORD(mp_next[11].mp_next);
    if ( v7 == 2 )
    {
      if ( (unsigned int)(LODWORD(mp_next[11].mp_next) - 3) > 1 )
      {
        v8 = XUID::ToString((XUID *)&mp_next[6].mp_next);
        Com_Printf(131097, "[MM] %s player %s has SessionStatus::eDISCONNECTED, SetPlayerQueuedStatus to eWONT_CONNECT\n", "OnlineMatchmakerOmniscient::UpdatePlayers", v8);
        OnlineMatchmakerOmniscient::SetPlayerQueuedStatus(this, (OnlineMatchmakerOmniscient::Player *)&mp_next[1], eREMOTE_WAITING_FOR_MMING_TOKEN);
      }
    }
    else if ( v7 == 1 && LODWORD(mp_next[11].mp_next) != 2 )
    {
      v9.m_id = (unsigned __int64)mp_next[6].mp_next;
      v10 = Lobby_GetPartyData();
      MemberByXUID_AllowNotPresent = Party_FindMemberByXUID_AllowNotPresent(v10, v9);
      if ( MemberByXUID_AllowNotPresent >= 0 && v10->partyMembers[MemberByXUID_AllowNotPresent].status != 1 )
      {
        v12 = XUID::ToString((XUID *)&mp_next[6].mp_next);
        Com_Printf(25, "[MM] %s player %s session status is connected and IsPlayerConnected, SetPlayerQueuedStatus to eCONNECTED\n", "OnlineMatchmakerOmniscient::UpdatePlayers", v12);
        OnlineMatchmakerOmniscient::SetPlayerQueuedStatus(this, (OnlineMatchmakerOmniscient::Player *)&mp_next[1], eADDING_LOCAL_PLAYER_TO_DW);
      }
      LODWORD(v1) = v50;
    }
    if ( BYTE1(mp_next[7].mp_next) )
      goto LABEL_42;
    v13 = LODWORD(mp_next[11].mp_next) == 3;
    goto LABEL_23;
  }
}

/*
==============
OnlineMatchmakerOmniscient::UpdateServiceLevels
==============
*/
void OnlineMatchmakerOmniscient::UpdateServiceLevels(OnlineMatchmakerOmniscient *this, const ntl::fixed_list<XUID,200,0> *xuidList, const bool isPaidUser)
{
  const XUID *mp_next; 
  ntl::internal::list_head_base<ntl::internal::list_node<XUID> > *i; 
  ntl::internal::list_node<OnlineMatchmakerOmniscient::Player> *mp_node; 
  const char *v8; 
  ntl::internal::list_iterator<OnlineMatchmakerOmniscient::Player,ntl::internal::list_node<OnlineMatchmakerOmniscient::Player>,OnlineMatchmakerOmniscient::Player *,OnlineMatchmakerOmniscient::Player &> it; 

  mp_next = (const XUID *)xuidList->m_listHead.m_sentinel.mp_next;
  for ( i = &xuidList->m_listHead; mp_next != (const XUID *)i; mp_next = (const XUID *)mp_next[1].m_id )
  {
    if ( !mp_next && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\libs\\ntl\\ntl\\list\\list.h", 97, ASSERT_TYPE_ASSERT, "( mp_node )", (const char *)&queryFormat, "mp_node") )
      __debugbreak();
    if ( OnlineMatchmakerOmniscient::FindPlayer(this, mp_next + 2, &it) )
    {
      mp_node = it.mp_node;
      if ( !it.mp_node && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\libs\\ntl\\ntl\\list\\list.h", 103, ASSERT_TYPE_ASSERT, "( mp_node )", (const char *)&queryFormat, "mp_node") )
        __debugbreak();
      mp_node->m_data.m_isPaidUser = isPaidUser;
    }
    else
    {
      if ( !mp_next && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\libs\\ntl\\ntl\\list\\list.h", 97, ASSERT_TYPE_ASSERT, "( mp_node )", (const char *)&queryFormat, "mp_node") )
        __debugbreak();
      v8 = XUID::ToDevString((XUID *)&mp_next[2]);
      Com_PrintWarning(25, "\t%s user %s not found, this is bad\n", "OnlineMatchmakerOmniscient::UpdateServiceLevels", v8);
    }
    if ( !mp_next && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\libs\\ntl\\ntl\\list\\list.h", 109, ASSERT_TYPE_ASSERT, "( mp_node )", (const char *)&queryFormat, "mp_node") )
      __debugbreak();
  }
}

/*
==============
OnlineMatchmakerOmniscient::UpdateSquadAssignments
==============
*/
void OnlineMatchmakerOmniscient::UpdateSquadAssignments(OnlineMatchmakerOmniscient *this, const ntl::fixed_list<PlayerValue<int>,200,0> *squadAssignmentList)
{
  PartyData *PartyData; 
  const dvar_t *v5; 
  PartyData *v6; 
  bool enabled; 
  ntl::internal::list_head_base<ntl::internal::list_node<PlayerValue<int> > > *p_m_listHead; 
  ntl::internal::list_node_base *mp_next; 
  ntl::internal::list_node<OnlineMatchmakerOmniscient::Player> *mp_node; 
  int v11; 
  unsigned int m_squadId; 
  const char *v13; 
  const char *v14; 
  char *fmt; 
  bool v16; 
  ntl::internal::list_iterator<OnlineMatchmakerOmniscient::Player,ntl::internal::list_node<OnlineMatchmakerOmniscient::Player>,OnlineMatchmakerOmniscient::Player *,OnlineMatchmakerOmniscient::Player &> it; 

  PartyData = Lobby_GetPartyData();
  v5 = DVARBOOL_online_matchmaking_update_party_team_squad_assignments;
  v6 = PartyData;
  if ( !DVARBOOL_online_matchmaking_update_party_team_squad_assignments && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\universal\\dvar.h", 692, ASSERT_TYPE_ASSERT, "(dvar)", "%s\n\tDvar %s accessed after deregistration", "dvar", "online_matchmaking_update_party_team_squad_assignments") )
    __debugbreak();
  Dvar_CheckFrontendServerThread(v5);
  enabled = v5->current.enabled;
  p_m_listHead = &squadAssignmentList->m_listHead;
  mp_next = squadAssignmentList->m_listHead.m_sentinel.mp_next;
  v16 = enabled;
  if ( mp_next != (ntl::internal::list_node_base *)&squadAssignmentList->m_listHead )
  {
    do
    {
      if ( !mp_next && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\libs\\ntl\\ntl\\list\\list.h", 103, ASSERT_TYPE_ASSERT, "( mp_node )", (const char *)&queryFormat, "mp_node") )
        __debugbreak();
      if ( OnlineMatchmakerOmniscient::FindPlayer(this, (const XUID *)&mp_next[1], &it) )
      {
        mp_node = it.mp_node;
        if ( !it.mp_node && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\libs\\ntl\\ntl\\list\\list.h", 103, ASSERT_TYPE_ASSERT, "( mp_node )", (const char *)&queryFormat, "mp_node") )
          __debugbreak();
        if ( !mp_next && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\libs\\ntl\\ntl\\list\\list.h", 103, ASSERT_TYPE_ASSERT, "( mp_node )", (const char *)&queryFormat, "mp_node") )
          __debugbreak();
        v11 = (int)mp_next[1].mp_next;
        if ( mp_node->m_data.m_squadId != v11 )
        {
          if ( !mp_node && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\libs\\ntl\\ntl\\list\\list.h", 103, ASSERT_TYPE_ASSERT, "( mp_node )", (const char *)&queryFormat, "mp_node") )
            __debugbreak();
          m_squadId = mp_node->m_data.m_squadId;
          v13 = XUID::ToDevString((XUID *)&mp_next[1]);
          LODWORD(fmt) = v11;
          Com_Printf(25, "\tChanging user %s from squad %i to squad %i\n", v13, m_squadId, fmt);
          mp_node->m_data.m_squadId = (int)mp_next[1].mp_next;
          if ( v16 )
            PartyHost_SetSquad(v6, (const XUID)mp_next[1].mp_prev, (const int)mp_next[1].mp_next);
        }
      }
      else
      {
        if ( !mp_next && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\libs\\ntl\\ntl\\list\\list.h", 103, ASSERT_TYPE_ASSERT, "( mp_node )", (const char *)&queryFormat, "mp_node") )
          __debugbreak();
        v14 = XUID::ToDevString((XUID *)&mp_next[1]);
        Com_PrintWarning(25, "\t%s user %s not found, this is bad\n", "OnlineMatchmakerOmniscient::UpdateSquadAssignments", v14);
      }
      if ( !mp_next && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\libs\\ntl\\ntl\\list\\list.h", 109, ASSERT_TYPE_ASSERT, "( mp_node )", (const char *)&queryFormat, "mp_node") )
        __debugbreak();
      mp_next = mp_next->mp_next;
    }
    while ( mp_next != (ntl::internal::list_node_base *)p_m_listHead );
  }
}

/*
==============
OnlineMatchmakerOmniscient::UpdateTeamAssignments
==============
*/
void OnlineMatchmakerOmniscient::UpdateTeamAssignments(OnlineMatchmakerOmniscient *this, const ntl::fixed_list<PlayerValue<int>,200,0> *teamAssignmentList)
{
  PartyData *PartyData; 
  const dvar_t *v5; 
  PartyData *v6; 
  bool enabled; 
  ntl::internal::list_head_base<ntl::internal::list_node<PlayerValue<int> > > *p_m_listHead; 
  ntl::internal::list_node_base *mp_next; 
  ntl::internal::list_node<OnlineMatchmakerOmniscient::Player> *mp_node; 
  int v11; 
  unsigned int m_dwTeamId; 
  const char *v13; 
  const char *v14; 
  char *fmt; 
  bool v16; 
  ntl::internal::list_iterator<OnlineMatchmakerOmniscient::Player,ntl::internal::list_node<OnlineMatchmakerOmniscient::Player>,OnlineMatchmakerOmniscient::Player *,OnlineMatchmakerOmniscient::Player &> it; 

  PartyData = Lobby_GetPartyData();
  v5 = DVARBOOL_online_matchmaking_update_party_team_squad_assignments;
  v6 = PartyData;
  if ( !DVARBOOL_online_matchmaking_update_party_team_squad_assignments && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\universal\\dvar.h", 692, ASSERT_TYPE_ASSERT, "(dvar)", "%s\n\tDvar %s accessed after deregistration", "dvar", "online_matchmaking_update_party_team_squad_assignments") )
    __debugbreak();
  Dvar_CheckFrontendServerThread(v5);
  enabled = v5->current.enabled;
  p_m_listHead = &teamAssignmentList->m_listHead;
  mp_next = teamAssignmentList->m_listHead.m_sentinel.mp_next;
  v16 = enabled;
  if ( mp_next != (ntl::internal::list_node_base *)&teamAssignmentList->m_listHead )
  {
    do
    {
      if ( !mp_next && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\libs\\ntl\\ntl\\list\\list.h", 103, ASSERT_TYPE_ASSERT, "( mp_node )", (const char *)&queryFormat, "mp_node") )
        __debugbreak();
      if ( OnlineMatchmakerOmniscient::FindPlayer(this, (const XUID *)&mp_next[1], &it) )
      {
        mp_node = it.mp_node;
        if ( !it.mp_node && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\libs\\ntl\\ntl\\list\\list.h", 103, ASSERT_TYPE_ASSERT, "( mp_node )", (const char *)&queryFormat, "mp_node") )
          __debugbreak();
        if ( !mp_next && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\libs\\ntl\\ntl\\list\\list.h", 103, ASSERT_TYPE_ASSERT, "( mp_node )", (const char *)&queryFormat, "mp_node") )
          __debugbreak();
        v11 = (int)mp_next[1].mp_next;
        if ( mp_node->m_data.m_dwTeamId != v11 )
        {
          if ( !mp_node && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\libs\\ntl\\ntl\\list\\list.h", 103, ASSERT_TYPE_ASSERT, "( mp_node )", (const char *)&queryFormat, "mp_node") )
            __debugbreak();
          m_dwTeamId = mp_node->m_data.m_dwTeamId;
          v13 = XUID::ToDevString((XUID *)&mp_next[1]);
          LODWORD(fmt) = v11;
          Com_Printf(25, "\tChanging user %s from DW team %i to DW team %i\n", v13, m_dwTeamId, fmt);
          mp_node->m_data.m_dwTeamId = (int)mp_next[1].mp_next;
          if ( v16 )
            PartyHost_SetTeam(v6, (const XUID)mp_next[1].mp_prev, (team_t)(LODWORD(mp_next[1].mp_next) + 1));
        }
      }
      else
      {
        if ( !mp_next && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\libs\\ntl\\ntl\\list\\list.h", 103, ASSERT_TYPE_ASSERT, "( mp_node )", (const char *)&queryFormat, "mp_node") )
          __debugbreak();
        v14 = XUID::ToDevString((XUID *)&mp_next[1]);
        Com_PrintWarning(25, "\t%s user %s not found, this is bad\n", "OnlineMatchmakerOmniscient::UpdateTeamAssignments", v14);
      }
      if ( !mp_next && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\libs\\ntl\\ntl\\list\\list.h", 109, ASSERT_TYPE_ASSERT, "( mp_node )", (const char *)&queryFormat, "mp_node") )
        __debugbreak();
      mp_next = mp_next->mp_next;
    }
    while ( mp_next != (ntl::internal::list_node_base *)p_m_listHead );
  }
}

/*
==============
OnlineMatchmakerOmniscient::UpdatedLobbyDocumentsBecomeHost
==============
*/
void OnlineMatchmakerOmniscient::UpdatedLobbyDocumentsBecomeHost(OnlineMatchmakerOmniscient *this)
{
  const PartyData *PartyData; 
  XUID *Xuid; 
  bool m_hasDedicatedServer; 
  XNADDR *Address; 
  XNADDR *v6; 
  ntl::internal::list_node<OnlineMatchmakerOmniscient::Player> *mp_next; 
  ntl::internal::list_node_base *v8; 
  const char *v9; 
  char *m_backendDoc; 
  const char *v11; 
  const char *v12; 
  const char *v13; 
  const char *v14; 
  ntl::internal::list_node_base *i; 
  unsigned __int64 m_id; 
  MemberStatus v17; 
  const char *v18; 
  bool m_gameStartedCurrent; 
  XUID result; 
  __int64 v21; 
  ntl::internal::list_iterator<OnlineMatchmakerOmniscient::Player,ntl::internal::list_node<OnlineMatchmakerOmniscient::Player>,OnlineMatchmakerOmniscient::Player *,OnlineMatchmakerOmniscient::Player &> v22; 
  MatchMakerOmniLobbyData lobbyData; 
  __int64 v24[5]; 

  v21 = -2i64;
  Com_Printf(25, "[MM] %s - backend doc = \"%s\"\n\n host doc = \"%s\"\n\n", "OnlineMatchmakerOmniscient::UpdatedLobbyDocumentsBecomeHost", this->m_lobbyDocuments.m_backendDoc, *((const char **)&this->m_lobbyDocuments.__vftable + 2));
  MatchMakerOmniLobbyData::MatchMakerOmniLobbyData(&lobbyData);
  this->m_lobbyData.m_amITheLobbyHost = 1;
  OnlineMatchmakerOmniscient::AddPlayersFromParty(this, &g_partyData);
  PartyData = Lobby_GetPartyData();
  OnlineMatchmakerOmniscient::AddPlayersFromParty(this, PartyData);
  OnlineMatchmakerOmniscient::ParseLobbyHostDoc(this, *((const char **)&this->m_lobbyDocuments.__vftable + 2), &lobbyData);
  Xuid = Live_GetXuid(&result, this->m_controllerIndex);
  this->m_lobbyData.m_hostUID = XUID::GetUniversalId(Xuid);
  this->m_lobbyData.m_gameid = lobbyData.m_gameid;
  m_hasDedicatedServer = lobbyData.m_hasDedicatedServer;
  this->m_lobbyData.m_hasDedicatedServer = lobbyData.m_hasDedicatedServer;
  if ( m_hasDedicatedServer )
  {
    this->m_lobbyData.m_allocatedServerGuid = lobbyData.m_allocatedServerGuid;
    Core_strcpy(this->m_lobbyData.m_allocatedDataCenter, 0x40ui64, lobbyData.m_allocatedDataCenter);
    Core_strcpy(this->m_lobbyData.m_allocatedServerInfo, 0x400ui64, lobbyData.m_allocatedServerInfo);
    Core_strcpy(this->m_lobbyData.m_allocatedServerAddr, 0x400ui64, lobbyData.m_allocatedServerAddr);
  }
  Address = XSESSION_INFO::GetAddress(&this->m_lobbyData.m_hostAddress);
  NET_GetLocalXnaddr(Address);
  v6 = XSESSION_INFO::GetAddress(&this->m_lobbyData.m_hostAddress);
  bdBase64::encode((const char *)v6, 0x54u, this->m_lobbyData.m_hostAddressBase64, 0x71u);
  OnlineMatchmakerOmniscient::SetLobbyState(this, eREADY_TO_REMOVE);
  OnlineMatchmakerOmniscient::SetState(this, eREMOVING_PLAYER);
  mp_next = (ntl::internal::list_node<OnlineMatchmakerOmniscient::Player> *)this->m_playerList.m_listHead.m_sentinel.mp_next;
  for ( result.m_id = (unsigned __int64)mp_next; mp_next != (ntl::internal::list_node<OnlineMatchmakerOmniscient::Player> *)&this->m_playerList.m_listHead; result.m_id = (unsigned __int64)mp_next )
  {
    v8 = lobbyData.m_playerStatusList.m_listHead.m_sentinel.mp_next;
    if ( (ntl::internal::list_head_base<ntl::internal::list_node<PlayerValue<enum MemberStatus> > > *)lobbyData.m_playerStatusList.m_listHead.m_sentinel.mp_next == &lobbyData.m_playerStatusList.m_listHead )
      goto LABEL_16;
    while ( 1 )
    {
      if ( !mp_next && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\libs\\ntl\\ntl\\list\\list.h", 103, ASSERT_TYPE_ASSERT, "( mp_node )", (const char *)&queryFormat, "mp_node") )
        __debugbreak();
      if ( !v8 && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\libs\\ntl\\ntl\\list\\list.h", 103, ASSERT_TYPE_ASSERT, "( mp_node )", (const char *)&queryFormat, "mp_node") )
        __debugbreak();
      if ( XUID::operator==(&mp_next->m_data.m_userId, (const XUID *)&v8[1]) )
        break;
      if ( !v8 && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\libs\\ntl\\ntl\\list\\list.h", 109, ASSERT_TYPE_ASSERT, "( mp_node )", (const char *)&queryFormat, "mp_node") )
        __debugbreak();
      v8 = v8->mp_next;
      if ( v8 == (ntl::internal::list_node_base *)&lobbyData.m_playerStatusList.m_listHead )
        goto LABEL_16;
    }
    if ( v8 == (ntl::internal::list_node_base *)&lobbyData.m_playerStatusList.m_listHead )
    {
LABEL_16:
      v9 = (const char *)*((_QWORD *)&this->m_lobbyDocuments.__vftable + 2);
      m_backendDoc = this->m_lobbyDocuments.m_backendDoc;
      if ( !mp_next && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\libs\\ntl\\ntl\\list\\list.h", 103, ASSERT_TYPE_ASSERT, "( mp_node )", (const char *)&queryFormat, "mp_node") )
        __debugbreak();
      v24[0] = (__int64)"eUNACKNOWLEDGED";
      v24[1] = (__int64)"eMAY_CONNECT";
      v24[2] = (__int64)"eCONNECTED";
      v24[3] = (__int64)"eWONT_CONNECT";
      v24[4] = (__int64)"eREADY_TO_REMOVE";
      v11 = (const char *)v24[mp_next->m_data.m_currentMemberStatus];
      v24[0] = (__int64)"eUNACKNOWLEDGED";
      v12 = (const char *)v24[mp_next->m_data.m_queuedMemberStatus];
      v13 = XUID::ToString(&mp_next->m_data.m_userId);
      v14 = j_va("{\"status\":\"we have a player that Demonware doesn't know about\",\"info\":\"uid:%s qms:%s cms%s\"", v13, v12, v11);
      OnlineMatchmakerOmniscient::Log(this, "UpdatedLobbyDocumentsBecomeHost", v14, m_backendDoc, v9, 0i64);
      mp_next = OnlineMatchmakerOmniscient::ErasePlayer(this, &v22, (ntl::internal::list_iterator<OnlineMatchmakerOmniscient::Player,ntl::internal::list_node<OnlineMatchmakerOmniscient::Player>,OnlineMatchmakerOmniscient::Player *,OnlineMatchmakerOmniscient::Player &> *)&result)->mp_node;
    }
    else
    {
      if ( !mp_next && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\libs\\ntl\\ntl\\list\\list.h", 109, ASSERT_TYPE_ASSERT, "( mp_node )", (const char *)&queryFormat, "mp_node") )
        __debugbreak();
      mp_next = (ntl::internal::list_node<OnlineMatchmakerOmniscient::Player> *)mp_next->mp_next;
    }
  }
  for ( i = lobbyData.m_playerStatusList.m_listHead.m_sentinel.mp_next; i != (ntl::internal::list_node_base *)&lobbyData.m_playerStatusList.m_listHead; i = i->mp_next )
  {
    if ( !i && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\libs\\ntl\\ntl\\list\\list.h", 103, ASSERT_TYPE_ASSERT, "( mp_node )", (const char *)&queryFormat, "mp_node") )
      __debugbreak();
    if ( OnlineMatchmakerOmniscient::FindPlayer(this, (const XUID *)&i[1], (ntl::internal::list_iterator<OnlineMatchmakerOmniscient::Player,ntl::internal::list_node<OnlineMatchmakerOmniscient::Player>,OnlineMatchmakerOmniscient::Player *,OnlineMatchmakerOmniscient::Player &> *)&result) )
    {
      m_id = result.m_id;
      if ( !result.m_id && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\libs\\ntl\\ntl\\list\\list.h", 103, ASSERT_TYPE_ASSERT, "( mp_node )", (const char *)&queryFormat, "mp_node") )
        __debugbreak();
      if ( !*(_BYTE *)(m_id + 112) )
      {
        if ( !i && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\libs\\ntl\\ntl\\list\\list.h", 103, ASSERT_TYPE_ASSERT, "( mp_node )", (const char *)&queryFormat, "mp_node") )
          __debugbreak();
        v17 = (MemberStatus)i[1].mp_next;
        if ( !m_id && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\libs\\ntl\\ntl\\list\\list.h", 97, ASSERT_TYPE_ASSERT, "( mp_node )", (const char *)&queryFormat, "mp_node") )
          __debugbreak();
        OnlineMatchmakerOmniscient::SetPlayerCurrentStatus(this, (OnlineMatchmakerOmniscient::Player *)(m_id + 16), v17);
        if ( !m_id && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\libs\\ntl\\ntl\\list\\list.h", 103, ASSERT_TYPE_ASSERT, "( mp_node )", (const char *)&queryFormat, "mp_node") )
          __debugbreak();
        *(_DWORD *)(m_id + 188) = 0;
        *(_BYTE *)(m_id + 121) = 1;
      }
      if ( *(_DWORD *)(m_id + 16) == 6 )
      {
        v18 = XUID::ToString((XUID *)(m_id + 104));
        Com_Printf(131097, "[MM] %s player %s SetPlayerQueuedStatus to eWONT_CONNECT\n", "OnlineMatchmakerOmniscient::UpdatedLobbyDocumentsBecomeHost", v18);
        OnlineMatchmakerOmniscient::SetPlayerQueuedStatus(this, (OnlineMatchmakerOmniscient::Player *)(m_id + 16), eREMOTE_WAITING_FOR_MMING_TOKEN);
      }
      else
      {
        OnlineMatchmakerOmniscient::SetPlayerState(this, (OnlineMatchmakerOmniscient::Player *)(m_id + 16), eREADY);
      }
    }
    else
    {
      if ( !i && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\libs\\ntl\\ntl\\list\\list.h", 103, ASSERT_TYPE_ASSERT, "( mp_node )", (const char *)&queryFormat, "mp_node") )
        __debugbreak();
      if ( LODWORD(i[1].mp_next) != 2 )
        OnlineMatchmakerOmniscient::AddPlayerFromDW(this, (const XUID)i[1].mp_prev, eNEW);
    }
    if ( !i && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\libs\\ntl\\ntl\\list\\list.h", 109, ASSERT_TYPE_ASSERT, "( mp_node )", (const char *)&queryFormat, "mp_node") )
      __debugbreak();
  }
  OnlineMatchmakerOmniscient::ParseLobbyBackendDoc(this, this->m_lobbyDocuments.m_backendDoc, &lobbyData);
  if ( lobbyData.m_lobbyid != this->m_lobbyData.m_lobbyid && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\online\\online_matchmaker.cpp", 6675, ASSERT_TYPE_ASSERT, "(lobbyData.m_lobbyid == m_lobbyData.m_lobbyid)", (const char *)&queryFormat, "lobbyData.m_lobbyid == m_lobbyData.m_lobbyid") )
    __debugbreak();
  this->m_lobbyData.m_key = lobbyData.m_key;
  this->m_lobbyData.m_keyId = lobbyData.m_keyId;
  this->m_lobbyData.m_canGameStart = lobbyData.m_canGameStart;
  this->m_lobbyData.m_shouldBackfill_JIP = lobbyData.m_shouldBackfill_JIP;
  this->m_lobbyData.m_canLobbyMerge = lobbyData.m_canLobbyMerge;
  this->m_lobbyData.m_acceptLobbyMerges = lobbyData.m_acceptLobbyMerges;
  m_gameStartedCurrent = lobbyData.m_gameStartedCurrent;
  this->m_lobbyData.m_gameStartedPending = lobbyData.m_gameStartedCurrent;
  this->m_lobbyData.m_gameStartedCurrent = m_gameStartedCurrent;
  this->m_lobbyData.m_tournamentID = lobbyData.m_tournamentID;
  this->m_lobbyData.m_tournamentAlliesTeam = lobbyData.m_tournamentAlliesTeam;
  this->m_lobbyData.m_tournamentAxisTeam = lobbyData.m_tournamentAxisTeam;
  this->m_lobbyData.m_tournamentRound = lobbyData.m_tournamentRound;
  this->m_lobbyData.m_performanceGameType = lobbyData.m_performanceGameType;
  ntl::list<XUID,ntl::fixed_pool_allocator<ntl::internal::list_node<XUID>,200,0>>::assign<ntl::fixed_pool_allocator<ntl::internal::list_node<XUID>,200,0>>(&this->m_lobbyData.m_migrationList, &lobbyData.m_migrationList);
  memcpy_0(this->m_lobbyData.m_dvarOverrides, lobbyData.m_dvarOverrides, sizeof(this->m_lobbyData.m_dvarOverrides));
  this->m_lobbyData.m_dvarOverrideCount = lobbyData.m_dvarOverrideCount;
  this->m_lobbyData.m_privateMatchId.m_id = lobbyData.m_privateMatchId.m_id;
  this->m_lobbyData.m_updateId = lobbyData.m_updateId;
  this->m_lobbyData.m_gameid = lobbyData.m_gameid;
  Core_strcpy(this->m_lobbyData.m_mapName, 0x18ui64, lobbyData.m_mapName);
  Core_strcpy(this->m_lobbyData.m_modeName, 0x10ui64, lobbyData.m_modeName);
  this->m_lobbyData.m_isGameInProgress = lobbyData.m_isGameInProgress;
  memcpy_0(this->m_lobbyData.m_dcPrefs._bytes_20, lobbyData.m_dcPrefs._bytes_20, 0x1000ui64);
  this->m_lobbyData.m_dcPrefs.m_numDataCenterPreferences = lobbyData.m_dcPrefs.m_numDataCenterPreferences;
  OnlineMatchmakerOmniscient::Log(this, "UpdatedLobbyDocumentsBecomeHost", (const char *)&queryFormat.fmt + 3, this->m_lobbyDocuments.m_backendDoc, *((const char **)&this->m_lobbyDocuments.__vftable + 2), 0i64);
  OnlineMatchmakerOmniscient::UpdatePlayers(this);
  this->m_lobbyData.m_lobbyDocIsDirty = 1;
  MatchMakerOmniLobbyData::~MatchMakerOmniLobbyData(&lobbyData);
}

/*
==============
OnlineMatchmakerOmniscient::WriteFiltersJSON
==============
*/
bool OnlineMatchmakerOmniscient::WriteFiltersJSON(OnlineMatchmakerOmniscient *this, bdJSONSerializer *jsonSerializer)
{
  bool v4; 
  bool v5; 
  bool v6; 
  int ProtocolVersion; 
  char v8; 
  unsigned int CurrentMatchId; 
  const dvar_t *v10; 
  char v11; 
  char dest[128]; 

  v4 = bdJSONSerializer::writeBeginObject(jsonSerializer, "filter");
  v5 = bdJSONSerializer::writeString(jsonSerializer, "matchmaking_version", "1.0") && v4;
  v6 = bdJSONSerializer::writeInt32(jsonSerializer, "playlist_id", this->m_params.m_playlistId, 0) && v5;
  ProtocolVersion = GetProtocolVersion();
  v8 = bdJSONSerializer::writeInt32(jsonSerializer, "netcode_version", ProtocolVersion, 0) && v6;
  if ( Live_IsInGameBattlesGame() )
  {
    memset_0(dest, 0, sizeof(dest));
    CurrentMatchId = GameBattles_GetCurrentMatchId();
    Com_sprintf(dest, 0x80ui64, "%ugame_battles", CurrentMatchId);
    v8 &= bdJSONSerializer::writeString(jsonSerializer, "online_matchmaking_restrict", dest);
  }
  if ( DVARSTR_online_matchmaking_restrict && !Live_IsInGameBattlesGame() )
  {
    v10 = DVARSTR_online_matchmaking_restrict;
    if ( !DVARSTR_online_matchmaking_restrict && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\universal\\dvar.h", 748, ASSERT_TYPE_ASSERT, "(dvar)", "%s\n\tDvar %s accessed after deregistration", "dvar", "online_matchmaking_restrict") )
      __debugbreak();
    Dvar_CheckFrontendServerThread(v10);
    v8 &= bdJSONSerializer::writeString(jsonSerializer, "online_matchmaking_restrict", v10->current.string);
  }
  v11 = bdJSONSerializer::writeInt32(jsonSerializer, "playlist_version", this->m_params.m_playlistVersion, 0) & v8;
  return v11 & bdJSONSerializer::writeEndObject(jsonSerializer);
}

/*
==============
base64EncodeAndSerializeToJSON
==============
*/
bool base64EncodeAndSerializeToJSON(bdJSONSerializer *json, const char *keyName, const char *data, const unsigned int dataSize, char *tempBase64Buf, const unsigned int tempBase64BufSize)
{
  memset_0(tempBase64Buf, 0, tempBase64BufSize);
  bdBase64::encode(data, dataSize, tempBase64Buf, tempBase64BufSize);
  return bdJSONSerializer::writeString(json, keyName, tempBase64Buf);
}

/*
==============
staticGetHostInfoForLobbyComplete
==============
*/
void staticGetHostInfoForLobbyComplete(GenericTask *task, eTaskManagerTaskState state)
{
  OnlineMatchmakerOmniscient *m_appData; 

  if ( !task && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\online\\online_matchmaker.cpp", 7024, ASSERT_TYPE_ASSERT, "(task)", (const char *)&queryFormat, "task") )
    __debugbreak();
  if ( !task->m_appData && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\online\\online_matchmaker.cpp", 7025, ASSERT_TYPE_ASSERT, "(task->m_appData)", (const char *)&queryFormat, "task->m_appData") )
    __debugbreak();
  m_appData = (OnlineMatchmakerOmniscient *)task->m_appData;
  if ( m_appData )
    OnlineMatchmakerOmniscient::GetHostInfoForLobbyComplete(m_appData, task, state);
}

/*
==============
OnlineMatchmakerOmniscient::staticQosCompleteCallback
==============
*/
void OnlineMatchmakerOmniscient::staticQosCompleteCallback(const tQosEntry *result, void *data)
{
  if ( !data && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\online\\online_matchmaker.cpp", 4857, ASSERT_TYPE_ASSERT, "(data)", (const char *)&queryFormat, "data") )
    __debugbreak();
  OnlineMatchmakerOmniscient::QosCompleteCallback((OnlineMatchmakerOmniscient *)data, result);
}

/*
==============
OnlineMatchmakerOmniscient::staticTaskCancelMatchmaking
==============
*/
void OnlineMatchmakerOmniscient::staticTaskCancelMatchmaking(GenericTask *task, eTaskManagerTaskState state)
{
  OnlineMatchmakerOmniscient *m_appData; 
  bdLobbyErrorCode ErrorCode; 
  bdLobbyErrorCode v6; 
  unsigned __int64 TransactionID; 
  unsigned __int64 demonwareTaskId; 
  const char *v9; 
  OnlineTimeSeriesLog *v10; 
  unsigned __int64 m_matchmakingId; 
  unsigned __int64 v12; 
  unsigned __int64 v13; 
  OnlineTimeSeriesLog *v14; 
  char *fmt; 
  char buffer[64]; 

  if ( !task && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\online\\online_matchmaker.cpp", 4784, ASSERT_TYPE_ASSERT, "(task)", (const char *)&queryFormat, "task") )
    __debugbreak();
  if ( !task->m_appData && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\online\\online_matchmaker.cpp", 4785, ASSERT_TYPE_ASSERT, "(task->m_appData)", (const char *)&queryFormat, "task->m_appData") )
    __debugbreak();
  m_appData = (OnlineMatchmakerOmniscient *)task->m_appData;
  if ( m_appData )
  {
    ErrorCode = bdRemoteTask::getErrorCode(task->m_remoteDemonwareTask.m_ptr);
    v6 = ErrorCode;
    if ( state )
    {
      dwLobbyErrorCodeToString(ErrorCode, buffer, 0x40u);
      TransactionID = bdRemoteTask::getTransactionID(task->m_remoteDemonwareTask.m_ptr);
      LODWORD(fmt) = v6;
      Com_PrintError(25, "[MM] %s : Demonware failure. Error code = %s (%d) (%zu).\n", "OnlineMatchmakerOmniscient::TaskCancelMatchmaking", buffer, fmt, TransactionID);
      demonwareTaskId = bdRemoteTask::getTransactionID(task->m_remoteDemonwareTask.m_ptr);
      v9 = j_va("{\"state\":\"failed\", \"demonware_error\"=\"%s\"}", buffer);
      OnlineMatchmakerOmniscient::Log(m_appData, "TaskCancelMatchmaking", v9, NULL, NULL, demonwareTaskId);
      v10 = OnlineTimeSeriesLog::Get();
      OnlineTimeSeriesLog::WriteEventCounter(v10, "mming.cancelmatchmaking.failure.count", 1u);
      OnlineMatchmakerOmniscient::SetState(m_appData, eFAILURE|eREADY);
    }
    else
    {
      m_matchmakingId = m_appData->m_mmingData.m_matchmakingId;
      v12 = bdRemoteTask::getTransactionID(task->m_remoteDemonwareTask.m_ptr);
      Com_Printf(25, "[MM] %s complete (%zu), matchmaking id (%zu)\n", "OnlineMatchmakerOmniscient::TaskCancelMatchmaking", v12, m_matchmakingId);
      v13 = bdRemoteTask::getTransactionID(task->m_remoteDemonwareTask.m_ptr);
      OnlineMatchmakerOmniscient::Log(m_appData, "TaskCancelMatchmaking", "{\"state\":\"success\"}", NULL, NULL, v13);
      OnlineMatchmakerOmniscient::SetState(m_appData, eREMOTE_WAITING_FOR_MMING_TOKEN);
      v14 = OnlineTimeSeriesLog::Get();
      OnlineTimeSeriesLog::WriteEventCounter(v14, "mming.cancelmatchmaking.success.count", 1u);
      OnlineMatchmakerTelemetry::Cancel(&m_appData->m_telemetry);
    }
  }
}

/*
==============
OnlineMatchmakerOmniscient::staticTaskGetLobbyDocuments
==============
*/
void OnlineMatchmakerOmniscient::staticTaskGetLobbyDocuments(GenericTask *task, eTaskManagerTaskState state)
{
  void *m_appData; 
  bdLobbyErrorCode ErrorCode; 
  bdLobbyErrorCode v6; 
  unsigned __int64 TransactionID; 
  unsigned __int64 demonwareTaskId; 
  const char *v9; 
  OnlineTimeSeriesLog *v10; 
  __int64 v11; 
  unsigned __int64 v12; 
  unsigned __int64 v13; 
  OnlineTimeSeriesLog *v14; 
  char *fmt; 
  char buffer[64]; 

  if ( !task && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\online\\online_matchmaker.cpp", 4833, ASSERT_TYPE_ASSERT, "(task)", (const char *)&queryFormat, "task") )
    __debugbreak();
  if ( !task->m_appData && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\online\\online_matchmaker.cpp", 4834, ASSERT_TYPE_ASSERT, "(task->m_appData)", (const char *)&queryFormat, "task->m_appData") )
    __debugbreak();
  m_appData = task->m_appData;
  if ( m_appData )
  {
    ErrorCode = bdRemoteTask::getErrorCode(task->m_remoteDemonwareTask.m_ptr);
    v6 = ErrorCode;
    if ( state )
    {
      dwLobbyErrorCodeToString(ErrorCode, buffer, 0x40u);
      TransactionID = bdRemoteTask::getTransactionID(task->m_remoteDemonwareTask.m_ptr);
      LODWORD(fmt) = v6;
      Com_PrintError(25, "[MM] %s : Demonware failure. Error code = %s (%d) (%zu).\n", "OnlineMatchmakerOmniscient::TaskGetLobbyDocuments", buffer, fmt, TransactionID);
      demonwareTaskId = bdRemoteTask::getTransactionID(task->m_remoteDemonwareTask.m_ptr);
      v9 = j_va("{\"state\":\"failed\", \"demonware_error\"=\"%s\"}", buffer);
      OnlineMatchmakerOmniscient::Log((OnlineMatchmakerOmniscient *)m_appData, "TaskGetLobbyDocuments", v9, NULL, NULL, demonwareTaskId);
      v10 = OnlineTimeSeriesLog::Get();
      OnlineTimeSeriesLog::WriteEventCounter(v10, "mming.getlobbydocuments.failure.count", 1u);
      OnlineMatchmakerOmniscient::SetState((OnlineMatchmakerOmniscient *)m_appData, eFAILURE|eREADY);
    }
    else
    {
      v11 = *((_QWORD *)m_appData + 9957);
      v12 = bdRemoteTask::getTransactionID(task->m_remoteDemonwareTask.m_ptr);
      Com_Printf(25, "[MM] %s complete (%zu), lobby id (%zu)\n", "OnlineMatchmakerOmniscient::TaskGetLobbyDocuments", v12, v11);
      v13 = bdRemoteTask::getTransactionID(task->m_remoteDemonwareTask.m_ptr);
      OnlineMatchmakerOmniscient::Log((OnlineMatchmakerOmniscient *)m_appData, "TaskGetLobbyDocuments", "{\"state\":\"success\"}", *((const char **)m_appData + 22311), *((const char **)m_appData + 22309), v13);
      OnlineMatchmakerOmniscient::UpdatedLobbyDocumentsBecomeHost((OnlineMatchmakerOmniscient *)m_appData);
      v14 = OnlineTimeSeriesLog::Get();
      OnlineTimeSeriesLog::WriteEventCounter(v14, "mming.getlobbydocuments.success.count", 1u);
    }
  }
}

/*
==============
OnlineMatchmakerOmniscient::staticTaskGetMatchmakingToken
==============
*/
void OnlineMatchmakerOmniscient::staticTaskGetMatchmakingToken(GenericTask *task, eTaskManagerTaskState state)
{
  OnlineMatchmakerOmniscient *m_appData; 

  if ( !task && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\online\\online_matchmaker.cpp", 4760, ASSERT_TYPE_ASSERT, "(task)", (const char *)&queryFormat, "task") )
    __debugbreak();
  if ( !task->m_appData && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\online\\online_matchmaker.cpp", 4761, ASSERT_TYPE_ASSERT, "(task->m_appData)", (const char *)&queryFormat, "task->m_appData") )
    __debugbreak();
  m_appData = (OnlineMatchmakerOmniscient *)task->m_appData;
  if ( m_appData )
    OnlineMatchmakerOmniscient::TaskGetMatchmakingToken(m_appData, task, state);
}

/*
==============
OnlineMatchmakerOmniscient::staticTaskLobbyDisbanded
==============
*/
void OnlineMatchmakerOmniscient::staticTaskLobbyDisbanded(GenericTask *task, eTaskManagerTaskState state)
{
  OnlineMatchmakerOmniscient *m_appData; 
  bdLobbyErrorCode ErrorCode; 
  bdLobbyErrorCode v6; 
  unsigned __int64 TransactionID; 
  unsigned __int64 demonwareTaskId; 
  const char *v9; 
  OnlineTimeSeriesLog *v10; 
  unsigned __int64 m_lobbyid; 
  unsigned __int64 v12; 
  unsigned __int64 v13; 
  char *fmt; 
  char buffer[64]; 

  if ( !task && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\online\\online_matchmaker.cpp", 4821, ASSERT_TYPE_ASSERT, "(task)", (const char *)&queryFormat, "task") )
    __debugbreak();
  if ( !task->m_appData && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\online\\online_matchmaker.cpp", 4822, ASSERT_TYPE_ASSERT, "(task->m_appData)", (const char *)&queryFormat, "task->m_appData") )
    __debugbreak();
  m_appData = (OnlineMatchmakerOmniscient *)task->m_appData;
  if ( m_appData )
  {
    ErrorCode = bdRemoteTask::getErrorCode(task->m_remoteDemonwareTask.m_ptr);
    v6 = ErrorCode;
    if ( state )
    {
      dwLobbyErrorCodeToString(ErrorCode, buffer, 0x40u);
      TransactionID = bdRemoteTask::getTransactionID(task->m_remoteDemonwareTask.m_ptr);
      LODWORD(fmt) = v6;
      Com_PrintError(25, "[MM] %s : Demonware failure. Error code = %s (%d) (%zu).\n", "OnlineMatchmakerOmniscient::TaskLobbyDisbanded", buffer, fmt, TransactionID);
      demonwareTaskId = bdRemoteTask::getTransactionID(task->m_remoteDemonwareTask.m_ptr);
      v9 = j_va("{\"state\":\"failed\", \"demonware_error\"=\"%s\"}", buffer);
      OnlineMatchmakerOmniscient::Log(m_appData, "TaskLobbyDisbanded", v9, NULL, NULL, demonwareTaskId);
      OnlineMatchmakerOmniscient::SetState(m_appData, eFAILURE|eREADY);
      v10 = OnlineTimeSeriesLog::Get();
      OnlineTimeSeriesLog::WriteEventCounter(v10, "mming.lobbyDisbanded.failure.count", 1u);
      m_appData->m_callbacks.m_outstandingCallback |= 0x40u;
      m_appData->m_callbacks.m_callbackWasSuccessful[6] = 0;
    }
    else
    {
      m_lobbyid = m_appData->m_lobbyData.m_lobbyid;
      v12 = bdRemoteTask::getTransactionID(task->m_remoteDemonwareTask.m_ptr);
      Com_Printf(25, "[MM] %s complete (%zu), lobby id (%zu)\n", "OnlineMatchmakerOmniscient::TaskLobbyDisbanded", v12, m_lobbyid);
      v13 = bdRemoteTask::getTransactionID(task->m_remoteDemonwareTask.m_ptr);
      OnlineMatchmakerOmniscient::Log(m_appData, "TaskLobbyDisbanded", "{\"state\":\"success\"}", NULL, NULL, v13);
      m_appData->m_callbacks.m_outstandingCallback |= 0x10u;
      m_appData->m_callbacks.m_callbackWasSuccessful[4] = 1;
    }
  }
}

/*
==============
OnlineMatchmakerOmniscient::staticTaskLocalPlayerAddedToDW
==============
*/
void OnlineMatchmakerOmniscient::staticTaskLocalPlayerAddedToDW(GenericTask *task, eTaskManagerTaskState state)
{
  OnlineMatchmakerOmniscient *m_appData; 

  if ( !task && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\online\\online_matchmaker.cpp", 4748, ASSERT_TYPE_ASSERT, "(task)", (const char *)&queryFormat, "task") )
    __debugbreak();
  if ( !task->m_appData && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\online\\online_matchmaker.cpp", 4749, ASSERT_TYPE_ASSERT, "(task->m_appData)", (const char *)&queryFormat, "task->m_appData") )
    __debugbreak();
  m_appData = (OnlineMatchmakerOmniscient *)task->m_appData;
  if ( m_appData )
    OnlineMatchmakerOmniscient::TaskLocalPlayerAddedToDW(m_appData, task, state);
}

/*
==============
OnlineMatchmakerOmniscient::staticTaskQosComplete
==============
*/
void OnlineMatchmakerOmniscient::staticTaskQosComplete(GenericTask *task, eTaskManagerTaskState state)
{
  OnlineMatchmakerOmniscient *m_appData; 
  bdLobbyErrorCode ErrorCode; 
  bdLobbyErrorCode v6; 
  unsigned __int64 TransactionID; 
  unsigned __int64 demonwareTaskId; 
  const char *v9; 
  OnlineTimeSeriesLog *v10; 
  const char *v11; 
  unsigned __int64 v12; 
  unsigned __int64 v13; 
  char *fmt; 
  char buffer[64]; 

  if ( !task && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\online\\online_matchmaker.cpp", 4845, ASSERT_TYPE_ASSERT, "(task)", (const char *)&queryFormat, "task") )
    __debugbreak();
  if ( !task->m_appData && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\online\\online_matchmaker.cpp", 4846, ASSERT_TYPE_ASSERT, "(task->m_appData)", (const char *)&queryFormat, "task->m_appData") )
    __debugbreak();
  m_appData = (OnlineMatchmakerOmniscient *)task->m_appData;
  if ( m_appData )
  {
    ErrorCode = bdRemoteTask::getErrorCode(task->m_remoteDemonwareTask.m_ptr);
    v6 = ErrorCode;
    if ( state )
    {
      dwLobbyErrorCodeToString(ErrorCode, buffer, 0x40u);
      TransactionID = bdRemoteTask::getTransactionID(task->m_remoteDemonwareTask.m_ptr);
      LODWORD(fmt) = v6;
      Com_PrintError(25, "[MM] %s : Demonware failure. Error code = %s (%d) (%zu).\n", "OnlineMatchmakerOmniscient::TaskQosComplete", buffer, fmt, TransactionID);
      demonwareTaskId = bdRemoteTask::getTransactionID(task->m_remoteDemonwareTask.m_ptr);
      v9 = j_va("{\"state\":\"failed\", \"demonware_error\"=\"%s\"}", buffer);
      OnlineMatchmakerOmniscient::Log(m_appData, "TaskQosComplete", v9, NULL, NULL, demonwareTaskId);
      v10 = OnlineTimeSeriesLog::Get();
      v11 = "mming.qoshostsreply.failure.count";
    }
    else
    {
      v12 = bdRemoteTask::getTransactionID(task->m_remoteDemonwareTask.m_ptr);
      Com_Printf(25, "[MM] %s complete (%zu)\n", "OnlineMatchmakerOmniscient::TaskQosComplete", v12);
      v13 = bdRemoteTask::getTransactionID(task->m_remoteDemonwareTask.m_ptr);
      OnlineMatchmakerOmniscient::Log(m_appData, "TaskQosComplete", "{\"state\":\"success\"}", NULL, NULL, v13);
      v10 = OnlineTimeSeriesLog::Get();
      v11 = "mming.qoshostsreply.success.count";
    }
    OnlineTimeSeriesLog::WriteEventCounter(v10, v11, 1u);
    bdTelemetry::record();
  }
}

/*
==============
OnlineMatchmakerOmniscient::staticTaskShutdownMatchmaking
==============
*/
void OnlineMatchmakerOmniscient::staticTaskShutdownMatchmaking(GenericTask *task, eTaskManagerTaskState state)
{
  OnlineMatchmakerOmniscient *m_appData; 

  if ( !task && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\online\\online_matchmaker.cpp", 4797, ASSERT_TYPE_ASSERT, "(task)", (const char *)&queryFormat, "task") )
    __debugbreak();
  if ( !task->m_appData && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\online\\online_matchmaker.cpp", 4798, ASSERT_TYPE_ASSERT, "(task->m_appData)", (const char *)&queryFormat, "task->m_appData") )
    __debugbreak();
  m_appData = (OnlineMatchmakerOmniscient *)task->m_appData;
  if ( m_appData )
    OnlineMatchmakerOmniscient::TaskShutdownMatchmaking(m_appData, task, state);
}

/*
==============
OnlineMatchmakerOmniscient::staticTaskStartMatchmaking
==============
*/
void OnlineMatchmakerOmniscient::staticTaskStartMatchmaking(GenericTask *task, eTaskManagerTaskState state)
{
  OnlineMatchmakerOmniscient *m_appData; 

  if ( !task && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\online\\online_matchmaker.cpp", 4772, ASSERT_TYPE_ASSERT, "(task)", (const char *)&queryFormat, "task") )
    __debugbreak();
  if ( !task->m_appData && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\online\\online_matchmaker.cpp", 4773, ASSERT_TYPE_ASSERT, "(task->m_appData)", (const char *)&queryFormat, "task->m_appData") )
    __debugbreak();
  m_appData = (OnlineMatchmakerOmniscient *)task->m_appData;
  if ( m_appData )
    OnlineMatchmakerOmniscient::TaskStartMatchmaking(m_appData, task, state);
}

/*
==============
OnlineMatchmakerOmniscient::staticTaskUpdateLobbyDocument
==============
*/
void OnlineMatchmakerOmniscient::staticTaskUpdateLobbyDocument(GenericTask *task, eTaskManagerTaskState state)
{
  OnlineMatchmakerOmniscient *m_appData; 

  if ( !task && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\online\\online_matchmaker.cpp", 4809, ASSERT_TYPE_ASSERT, "(task)", (const char *)&queryFormat, "task") )
    __debugbreak();
  if ( !task->m_appData && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\online\\online_matchmaker.cpp", 4810, ASSERT_TYPE_ASSERT, "(task->m_appData)", (const char *)&queryFormat, "task->m_appData") )
    __debugbreak();
  m_appData = (OnlineMatchmakerOmniscient *)task->m_appData;
  if ( m_appData )
    OnlineMatchmakerOmniscient::TaskUpdateLobbyDocument(m_appData, task, state);
}

/*
==============
tCallbacks::test
==============
*/
void tCallbacks::test(tCallbacks *this)
{
  ;
}

