/*
==============
BT_Reacquire_FlagEnemyUnattackable
==============
*/

int __fastcall BT_Reacquire_FlagEnemyUnattackable(BehaviorTree *pTree, int entNum, int taskID, int paramsID, unsigned __int8 *pInOutInstIndex)
{
  return ?BT_Reacquire_FlagEnemyUnattackable@@YAHPEAUBehaviorTree@@HHHPEAE@Z(pTree, entNum, taskID, paramsID, pInOutInstIndex);
}

/*
==============
BT_HasEnemy
==============
*/

int __fastcall BT_HasEnemy(BehaviorTree *pTree, int entNum, int taskID, int paramsID, unsigned __int8 *pInOutInstIndex)
{
  return ?BT_HasEnemy@@YAHPEAUBehaviorTree@@HHHPEAE@Z(pTree, entNum, taskID, paramsID, pInOutInstIndex);
}

/*
==============
BT_RetreatMove_Init
==============
*/

int __fastcall BT_RetreatMove_Init(BehaviorTree *pTree, int entNum, int taskID, int paramsID, unsigned __int8 *pInOutInstIndex)
{
  return ?BT_RetreatMove_Init@@YAHPEAUBehaviorTree@@HHHPEAE@Z(pTree, entNum, taskID, paramsID, pInOutInstIndex);
}

/*
==============
BT_RetreatAttemptMove
==============
*/

int __fastcall BT_RetreatAttemptMove(BehaviorTree *pTree, int entNum, int taskID, int paramsID, unsigned __int8 *pInOutInstIndex)
{
  return ?BT_RetreatAttemptMove@@YAHPEAUBehaviorTree@@HHHPEAE@Z(pTree, entNum, taskID, paramsID, pInOutInstIndex);
}

/*
==============
BT_HasLOSToEnemy
==============
*/

int __fastcall BT_HasLOSToEnemy(BehaviorTree *pTree, int entNum, int taskID, int paramsID, unsigned __int8 *pInOutInstIndex)
{
  return ?BT_HasLOSToEnemy@@YAHPEAUBehaviorTree@@HHHPEAE@Z(pTree, entNum, taskID, paramsID, pInOutInstIndex);
}

/*
==============
BT_IsMeleeValid
==============
*/

int __fastcall BT_IsMeleeValid(BehaviorTree *pTree, int entNum, int taskID, int paramsID, unsigned __int8 *pInOutInstIndex)
{
  return ?BT_IsMeleeValid@@YAHPEAUBehaviorTree@@HHHPEAE@Z(pTree, entNum, taskID, paramsID, pInOutInstIndex);
}

/*
==============
BT_IsInCombat
==============
*/

int __fastcall BT_IsInCombat(BehaviorTree *pTree, int entNum, int taskID, int paramsID, unsigned __int8 *pInOutInstIndex)
{
  return ?BT_IsInCombat@@YAHPEAUBehaviorTree@@HHHPEAE@Z(pTree, entNum, taskID, paramsID, pInOutInstIndex);
}

/*
==============
BT_BlockingMove_Terminate
==============
*/

int __fastcall BT_BlockingMove_Terminate(BehaviorTree *pTree, int entNum, int taskID, int paramsID, unsigned __int8 *pInOutInstIndex)
{
  return ?BT_BlockingMove_Terminate@@YAHPEAUBehaviorTree@@HHHPEAE@Z(pTree, entNum, taskID, paramsID, pInOutInstIndex);
}

/*
==============
BT_ReturnSuccess
==============
*/

int __fastcall BT_ReturnSuccess(BehaviorTree *pTree, int entNum, int taskID, int paramsID, unsigned __int8 *pInOutInstIndex)
{
  return ?BT_ReturnSuccess@@YAHPEAUBehaviorTree@@HHHPEAE@Z(pTree, entNum, taskID, paramsID, pInOutInstIndex);
}

/*
==============
BT_ShouldReacquire
==============
*/

int __fastcall BT_ShouldReacquire(BehaviorTree *pTree, int entNum, int taskID, int paramsID, unsigned __int8 *pInOutInstIndex)
{
  return ?BT_ShouldReacquire@@YAHPEAUBehaviorTree@@HHHPEAE@Z(pTree, entNum, taskID, paramsID, pInOutInstIndex);
}

/*
==============
BT_RetreatMove
==============
*/

int __fastcall BT_RetreatMove(BehaviorTree *pTree, int entNum, int taskID, int paramsID, unsigned __int8 *pInOutInstIndex)
{
  return ?BT_RetreatMove@@YAHPEAUBehaviorTree@@HHHPEAE@Z(pTree, entNum, taskID, paramsID, pInOutInstIndex);
}

/*
==============
BT_IsRetreatNeeded
==============
*/

int __fastcall BT_IsRetreatNeeded(BehaviorTree *pTree, int entNum, int taskID, int paramsID, unsigned __int8 *pInOutInstIndex)
{
  return ?BT_IsRetreatNeeded@@YAHPEAUBehaviorTree@@HHHPEAE@Z(pTree, entNum, taskID, paramsID, pInOutInstIndex);
}

/*
==============
BT_DoExecute
==============
*/

int __fastcall BT_DoExecute(BehaviorTree *pTree, int entNum, int taskID, int paramsID, unsigned __int8 *pInOutInstIndex)
{
  return ?BT_DoExecute@@YAHPEAUBehaviorTree@@HHHPEAE@Z(pTree, entNum, taskID, paramsID, pInOutInstIndex);
}

/*
==============
BT_IsAnimscripted
==============
*/

int __fastcall BT_IsAnimscripted(BehaviorTree *pTree, int entNum, int taskID, int paramsID, unsigned __int8 *pInOutInstIndex)
{
  return ?BT_IsAnimscripted@@YAHPEAUBehaviorTree@@HHHPEAE@Z(pTree, entNum, taskID, paramsID, pInOutInstIndex);
}

/*
==============
BT_RetreatMove_Terminate
==============
*/

int __fastcall BT_RetreatMove_Terminate(BehaviorTree *pTree, int entNum, int taskID, int paramsID, unsigned __int8 *pInOutInstIndex)
{
  return ?BT_RetreatMove_Terminate@@YAHPEAUBehaviorTree@@HHHPEAE@Z(pTree, entNum, taskID, paramsID, pInOutInstIndex);
}

/*
==============
BT_BlockingMove_Init
==============
*/

int __fastcall BT_BlockingMove_Init(BehaviorTree *pTree, int entNum, int taskID, int paramsID, unsigned __int8 *pInOutInstIndex)
{
  return ?BT_BlockingMove_Init@@YAHPEAUBehaviorTree@@HHHPEAE@Z(pTree, entNum, taskID, paramsID, pInOutInstIndex);
}

/*
==============
BT_CanExecute
==============
*/

int __fastcall BT_CanExecute(BehaviorTree *pTree, int entNum, int taskID, int paramsID, unsigned __int8 *pInOutInstIndex)
{
  return ?BT_CanExecute@@YAHPEAUBehaviorTree@@HHHPEAE@Z(pTree, entNum, taskID, paramsID, pInOutInstIndex);
}

/*
==============
BT_IsBlocking
==============
*/

int __fastcall BT_IsBlocking(BehaviorTree *pTree, int entNum, int taskID, int paramsID, unsigned __int8 *pInOutInstIndex)
{
  return ?BT_IsBlocking@@YAHPEAUBehaviorTree@@HHHPEAE@Z(pTree, entNum, taskID, paramsID, pInOutInstIndex);
}

/*
==============
BT_ReturnFailure
==============
*/

int __fastcall BT_ReturnFailure(BehaviorTree *pTree, int entNum, int taskID, int paramsID, unsigned __int8 *pInOutInstIndex)
{
  return ?BT_ReturnFailure@@YAHPEAUBehaviorTree@@HHHPEAE@Z(pTree, entNum, taskID, paramsID, pInOutInstIndex);
}

/*
==============
BT_IsAlive
==============
*/

int __fastcall BT_IsAlive(BehaviorTree *pTree, int entNum, int taskID, int paramsID, unsigned __int8 *pInOutInstIndex)
{
  return ?BT_IsAlive@@YAHPEAUBehaviorTree@@HHHPEAE@Z(pTree, entNum, taskID, paramsID, pInOutInstIndex);
}

/*
==============
BT_BlockingAttemptMove
==============
*/

int __fastcall BT_BlockingAttemptMove(BehaviorTree *pTree, int entNum, int taskID, int paramsID, unsigned __int8 *pInOutInstIndex)
{
  return ?BT_BlockingAttemptMove@@YAHPEAUBehaviorTree@@HHHPEAE@Z(pTree, entNum, taskID, paramsID, pInOutInstIndex);
}

/*
==============
BT_CoinToss
==============
*/

int __fastcall BT_CoinToss(BehaviorTree *pTree, int entNum, int taskID, int paramsID, unsigned __int8 *pInOutInstIndex)
{
  return ?BT_CoinToss@@YAHPEAUBehaviorTree@@HHHPEAE@Z(pTree, entNum, taskID, paramsID, pInOutInstIndex);
}

/*
==============
BT_IsInBadplace
==============
*/

int __fastcall BT_IsInBadplace(BehaviorTree *pTree, int entNum, int taskID, int paramsID, unsigned __int8 *pInOutInstIndex)
{
  return ?BT_IsInBadplace@@YAHPEAUBehaviorTree@@HHHPEAE@Z(pTree, entNum, taskID, paramsID, pInOutInstIndex);
}

/*
==============
BT_ReturnRunning
==============
*/

int __fastcall BT_ReturnRunning(BehaviorTree *pTree, int entNum, int taskID, int paramsID, unsigned __int8 *pInOutInstIndex)
{
  return ?BT_ReturnRunning@@YAHPEAUBehaviorTree@@HHHPEAE@Z(pTree, entNum, taskID, paramsID, pInOutInstIndex);
}

/*
==============
BT_DoExecute_Init
==============
*/

int __fastcall BT_DoExecute_Init(BehaviorTree *pTree, int entNum, int taskID, int paramsID, unsigned __int8 *pInOutInstIndex)
{
  return ?BT_DoExecute_Init@@YAHPEAUBehaviorTree@@HHHPEAE@Z(pTree, entNum, taskID, paramsID, pInOutInstIndex);
}

/*
==============
BT_BlockingMove
==============
*/

int __fastcall BT_BlockingMove(BehaviorTree *pTree, int entNum, int taskID, int paramsID, unsigned __int8 *pInOutInstIndex)
{
  return ?BT_BlockingMove@@YAHPEAUBehaviorTree@@HHHPEAE@Z(pTree, entNum, taskID, paramsID, pInOutInstIndex);
}

/*
==============
BT_MayShoot
==============
*/

int __fastcall BT_MayShoot(BehaviorTree *pTree, int entNum, int taskID, int paramsID, unsigned __int8 *pInOutInstIndex)
{
  return ?BT_MayShoot@@YAHPEAUBehaviorTree@@HHHPEAE@Z(pTree, entNum, taskID, paramsID, pInOutInstIndex);
}

/*
==============
BT_ReturnRunning
==============
*/
__int64 BT_ReturnRunning(BehaviorTree *pTree, int entNum, int taskID, int paramsID)
{
  return 2i64;
}

/*
==============
BT_ReturnSuccess
==============
*/
__int64 BT_ReturnSuccess(BehaviorTree *pTree, int entNum, int taskID, int paramsID)
{
  return 1i64;
}

/*
==============
BT_ReturnFailure
==============
*/
__int64 BT_ReturnFailure(BehaviorTree *pTree, int entNum, int taskID, int paramsID)
{
  return 0i64;
}

/*
==============
BT_CoinToss
==============
*/
__int64 BT_CoinToss(BehaviorTree *pTree, int entNum, int taskID, int paramsID)
{
  __int64 result; 

  __asm
  {
    vmovss  xmm1, cs:__real@3f800000; max
    vxorps  xmm0, xmm0, xmm0; min
  }
  *(double *)&_XMM0 = G_flrand(*(float *)&_XMM0, *(float *)&_XMM1);
  result = 0i64;
  __asm { vcomiss xmm0, cs:__real@3f000000 }
  return result;
}

/*
==============
BT_IsAlive
==============
*/
_BOOL8 BT_IsAlive(BehaviorTree *pTree, int entNum, int taskID, int paramsID)
{
  gentity_s *Ent; 

  if ( paramsID == 0xFFFF )
    Ent = BT_GetEnt(entNum);
  else
    Ent = BT_Builtin_GetEntParam(pTree, taskID, paramsID);
  return Ent && Ent->health > 0;
}

/*
==============
BT_IsInCombat
==============
*/
_BOOL8 BT_IsInCombat(BehaviorTree *pTree, int entNum, int taskID, int paramsID)
{
  sentient_s *sentient; 

  sentient = BT_GetEnt(entNum)->sentient;
  return sentient && EntHandle::isDefined(&sentient->targetEnt);
}

/*
==============
BT_IsInBadplace
==============
*/
__int64 BT_IsInBadplace(BehaviorTree *pTree, int entNum, int taskID, int paramsID)
{
  gentity_s *Ent; 
  ai_common_t *AICommon; 
  unsigned int v6; 
  bool isInBadPlace; 

  Ent = BT_GetEnt(entNum);
  AICommon = AI_GetAICommon(Ent);
  v6 = 0;
  isInBadPlace = 0;
  if ( !Ent->tagInfo )
    isInBadPlace = AICommon->navigation.isInBadPlace;
  LOBYTE(v6) = isInBadPlace;
  return v6;
}

/*
==============
BT_IsAnimscripted
==============
*/
_BOOL8 BT_IsAnimscripted(BehaviorTree *pTree, int entNum, int taskID, int paramsID)
{
  const gentity_s *Ent; 
  _BOOL8 result; 
  ai_common_t *v6; 
  AIWrapper v7; 

  Ent = BT_GetEnt(entNum);
  AIWrapper::AIWrapper(&v7, Ent);
  result = 0;
  if ( v7.m_pAI )
  {
    v6 = v7.m_pAI->GetAI(v7.m_pAI);
    if ( (unsigned int)(*((_DWORD *)&v6[3].avoidance.maxSpeed + LODWORD(v6[4].sentientInfo)) - 7) <= 1 || LOBYTE(v6[1].threat.newEnemyReactionDistSq) )
      return 1;
  }
  return result;
}

/*
==============
BT_HasEnemy
==============
*/
_BOOL8 BT_HasEnemy(BehaviorTree *pTree, int entNum, int taskID, int paramsID)
{
  const gentity_s *Ent; 
  AIWrapper v6; 

  Ent = BT_GetEnt(entNum);
  AIWrapper::AIWrapper(&v6, Ent);
  return AICommonInterface::GetTargetEntity(v6.m_pAI) != NULL;
}

/*
==============
BT_HasLOSToEnemy
==============
*/
_BOOL8 BT_HasLOSToEnemy(BehaviorTree *pTree, int entNum, int taskID, int paramsID)
{
  const gentity_s *Ent; 
  AIScriptedInterface *m_pAI; 
  AIWrapper v7; 

  Ent = BT_GetEnt(entNum);
  AIWrapper::AIWrapper(&v7, Ent);
  m_pAI = v7.m_pAI;
  return AICommonInterface::GetTargetEntity(v7.m_pAI) && AICommonInterface::CanSeeEnemy(m_pAI);
}

/*
==============
BT_Reacquire_FlagEnemyUnattackable
==============
*/
__int64 BT_Reacquire_FlagEnemyUnattackable(BehaviorTree *pTree, int entNum, int taskID, int paramsID)
{
  const gentity_s *Ent; 
  AIScriptedInterface *m_pAI; 
  AIWrapper v7; 

  Ent = BT_GetEnt(entNum);
  AIWrapper::AIWrapper(&v7, Ent);
  m_pAI = v7.m_pAI;
  AIScriptedInterface::FlagEnemyUnattackable(v7.m_pAI);
  AIScriptedInterface::SetReacquire(m_pAI, AI_REACQUIRE_DISABLED, 2047);
  AIScriptedInterface::ClearBTGoal(m_pAI, AI_BT_GOAL_PRIORITY_URGENT);
  return 1i64;
}

/*
==============
BT_ShouldReacquire
==============
*/
_BOOL8 BT_ShouldReacquire(BehaviorTree *pTree, int entNum, int taskID, int paramsID)
{
  AIScriptedInterface *m_pAI; 
  __int64 v7; 
  sentient_s *TargetSentient; 
  const Weapon *v9; 
  weapClass_t WeaponClass; 
  pathnode_t *CoverNode; 
  bool v12; 
  int v13; 
  char v34; 
  int v35; 
  const gentity_s *ent; 
  playerState_s *p_ps; 
  sentient_info_t *SentientInfo; 
  int lastKnownPosTime; 
  AIWrapper v43; 
  AIWrapper v44; 

  _RBX = BT_GetEnt(entNum);
  AIWrapper::AIWrapper(&v43, _RBX);
  m_pAI = v43.m_pAI;
  if ( !v43.m_pAI && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\game\\ai\\ai_bt_builtin.cpp", 166, ASSERT_TYPE_ASSERT, "(pAI)", (const char *)&queryFormat, "pAI") )
    __debugbreak();
  v7 = m_pAI->GetAI(m_pAI);
  if ( !v7 && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\game\\ai\\ai_bt_builtin.cpp", 168, ASSERT_TYPE_ASSERT, "(pScripted)", (const char *)&queryFormat, "pScripted") )
    __debugbreak();
  if ( AIScriptedInterface::GetReacquire(m_pAI) )
    return 1i64;
  TargetSentient = AICommonInterface::GetTargetSentient(m_pAI);
  if ( !TargetSentient )
    return 0i64;
  if ( *(_BYTE *)(v7 + 1621) )
    return 0i64;
  if ( *(int *)(v7 + 3124) >= 0 )
    return 0i64;
  if ( *(_BYTE *)(v7 + 568) )
    return 0i64;
  if ( *(_BYTE *)(v7 + 567) )
    return 0i64;
  if ( *(_BYTE *)(v7 + 569) )
    return 0i64;
  if ( EntHandle::isDefined((EntHandle *)(v7 + 1192)) )
    return 0i64;
  if ( AICommonInterface::HasPath(m_pAI) )
    return 0i64;
  if ( (*(unsigned __int8 (__fastcall **)(_QWORD))(**(_QWORD **)(v7 + 392) + 152i64))(*(_QWORD *)(v7 + 392)) )
    return 0i64;
  if ( AIScriptedInterface::PathPending(m_pAI) )
    return 0i64;
  if ( *(_DWORD *)(v7 + 1652) )
    return 0i64;
  if ( *(_QWORD *)(v7 + 544) )
    return 0i64;
  if ( *(_BYTE *)(v7 + 1517) )
    return 0i64;
  if ( (unsigned int)(*(_DWORD *)(v7 + 1632) - 4) <= 1 )
    return 0i64;
  if ( AIScriptedInterface::IsSniper(m_pAI, 0) )
    return 0i64;
  if ( m_pAI->GetStairsState(m_pAI) )
    return 0i64;
  v9 = m_pAI->GetEquippedWeapon(m_pAI);
  if ( !v9->weaponIdx )
  {
    WeaponClass = BG_GetWeaponClass(v9, 0);
    if ( WeaponClass == WEAPCLASS_ROCKETLAUNCHER || WeaponClass == WEAPCLASS_MG )
      return 0i64;
  }
  CoverNode = AIScriptedInterface::GetCoverNode(m_pAI);
  v12 = 0;
  if ( CoverNode )
  {
    v13 = *(_DWORD *)(v7 + 1540) + 4000;
    v12 = level.time < (unsigned int)v13;
    if ( level.time < v13 )
      return 0i64;
  }
  __asm
  {
    vmovss  xmm0, dword ptr [rbx+130h]
    vmovss  xmm1, dword ptr [rbx+134h]
    vmovaps [rsp+0F8h+var_28], xmm6
    vsubss  xmm3, xmm0, dword ptr [rax+130h]
    vmovss  xmm0, dword ptr [rbx+138h]
    vsubss  xmm2, xmm1, dword ptr [rax+134h]
    vsubss  xmm4, xmm0, dword ptr [rax+138h]
    vmulss  xmm2, xmm2, xmm2
    vmulss  xmm1, xmm3, xmm3
    vmulss  xmm0, xmm4, xmm4
    vaddss  xmm3, xmm2, xmm1
    vaddss  xmm2, xmm3, xmm0
    vsqrtss xmm6, xmm2, xmm2
    vcomiss xmm6, cs:__real@43800000
  }
  _EBX = 5000;
  if ( v12 && !AIScriptedInterface::GetCoverNode(m_pAI) )
  {
    __asm
    {
      vmulss  xmm2, xmm6, cs:__real@3b800000
      vmovss  xmm0, cs:__real@3f800000
      vsubss  xmm1, xmm0, xmm2
      vmulss  xmm3, xmm1, cs:__real@447a0000
      vmulss  xmm2, xmm2, cs:__real@459c4000
      vaddss  xmm0, xmm3, xmm2
      vcvttss2si ebx, xmm0
    }
  }
  __asm { vmovaps xmm6, [rsp+0F8h+var_28] }
  if ( level.time < _EBX + *(_DWORD *)(v7 + 596) || *(_BYTE *)(v7 + 1753) )
    return 0i64;
  v34 = *(_BYTE *)(v7 + 3484);
  v35 = AICommonInterface::RecentlySeeSentient(m_pAI, TargetSentient, 1000);
  if ( v34 )
  {
    if ( v35 && AIScriptedInterface::CanShootEnemyFromNodeStepOut(m_pAI, 250, 0) )
      return 0i64;
  }
  else
  {
    if ( v35 )
      return 0i64;
    if ( *(_BYTE *)(v7 + 1648) )
      return 1i64;
    if ( AIScriptedInterface::CanShootEnemyFromNodeStepOut(m_pAI, 250, 0) )
      return 0i64;
  }
  if ( *(_BYTE *)(v7 + 1648) )
    return 1i64;
  ent = TargetSentient->ent;
  if ( !TargetSentient->ent && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\game\\ai\\ai_bt_builtin.cpp", 247, ASSERT_TYPE_ASSERT, "(pEnemy)", (const char *)&queryFormat, "pEnemy") )
    __debugbreak();
  p_ps = &ent->client->ps;
  if ( p_ps )
  {
    if ( ent->health < ent->maxHealth || G_Combat_IsClientFlashbanged(p_ps) )
      return 1i64;
  }
  else
  {
    AIWrapper::AIWrapper(&v44, ent);
    if ( v44.m_pAI )
    {
      _RAX = v44.m_pAI->GetAI(v44.m_pAI);
      __asm
      {
        vmovss  xmm0, cs:__real@3f000000
        vcomiss xmm0, dword ptr [rax+53Ch]
      }
      if ( v12 || BYTE1(_RAX[1].threat.highlyAwareRadius) )
        return 1i64;
    }
  }
  SentientInfo = Sentient_GetSentientInfo(*(const sentient_s **)(v7 + 8), TargetSentient);
  if ( !SentientInfo && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\game\\ai\\ai_bt_builtin.cpp", 275, ASSERT_TYPE_ASSERT, "(pInfo)", (const char *)&queryFormat, "pInfo") )
    __debugbreak();
  lastKnownPosTime = SentientInfo->lastKnownPosTime;
  return lastKnownPosTime > 0 && level.time - lastKnownPosTime > 7000;
}

/*
==============
BT_IsMeleeValid
==============
*/
__int64 BT_IsMeleeValid(BehaviorTree *pTree, int entNum, int taskID, int paramsID)
{
  const gentity_s *Ent; 
  AIScriptedInterface *m_pAI; 
  __int64 v9; 
  gentity_s *v10; 
  const gentity_s *v11; 
  char v19; 
  unsigned int v23; 
  AIScriptedInterface *v30; 
  __int64 v31; 
  AIWrapper v33; 
  AIWrapper v34; 

  Ent = BT_GetEnt(entNum);
  AIWrapper::AIWrapper(&v33, Ent);
  m_pAI = v33.m_pAI;
  if ( !v33.m_pAI && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\game\\ai\\ai_bt_builtin.cpp", 286, ASSERT_TYPE_ASSERT, "(pAI)", (const char *)&queryFormat, "pAI") )
    __debugbreak();
  v9 = m_pAI->GetAI(m_pAI);
  if ( !v9 && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\game\\ai\\ai_bt_builtin.cpp", 288, ASSERT_TYPE_ASSERT, "(pScripted)", (const char *)&queryFormat, "pScripted") )
    __debugbreak();
  if ( m_pAI->InScriptedState(m_pAI) || m_pAI->IsInPain(m_pAI) || m_pAI->IsInExecution(m_pAI) )
    return 0i64;
  v10 = paramsID == 0xFFFF ? AICommonInterface::GetTargetEntity(m_pAI) : BT_Builtin_GetEntParam(pTree, taskID, paramsID);
  v11 = v10;
  if ( !v10 )
    return 0i64;
  if ( G_EntIsLinked(Ent) )
    return 0i64;
  if ( G_EntIsLinked(v11) )
    return 0i64;
  _RAX = *(_QWORD *)v9;
  __asm
  {
    vmovss  xmm0, dword ptr [rax+130h]
    vsubss  xmm3, xmm0, dword ptr [rbx+130h]
    vmovss  xmm0, dword ptr [rax+138h]
    vmovss  xmm1, dword ptr [rax+134h]
    vsubss  xmm2, xmm0, dword ptr [rbx+138h]
    vsubss  xmm4, xmm1, dword ptr [rbx+134h]
    vxorps  xmm0, xmm0, xmm0
    vmulss  xmm5, xmm2, xmm2
    vcvtsi2ss xmm0, xmm0, eax
    vcomiss xmm5, xmm0
  }
  if ( !(((*(unsigned __int16 *)(v9 + 1544) * (unsigned __int64)*(unsigned __int16 *)(v9 + 1544)) >> 32 != 0) | v19) )
    return 0i64;
  v23 = *(unsigned __int16 *)(v9 + 1546);
  if ( v11->client )
    v23 = *(unsigned __int16 *)(v9 + 1548);
  __asm
  {
    vmulss  xmm0, xmm3, xmm3
    vmulss  xmm1, xmm4, xmm4
    vaddss  xmm1, xmm1, xmm0
    vxorps  xmm0, xmm0, xmm0
    vcvtsi2ss xmm0, xmm0, eax
    vaddss  xmm2, xmm1, xmm5
    vcomiss xmm2, xmm0
  }
  if ( is_mul_ok(v23, v23) )
    return 0i64;
  AIWrapper::AIWrapper(&v34, v11);
  v30 = v34.m_pAI;
  if ( v34.m_pAI && (v34.m_pAI->InScriptedState(v34.m_pAI) || v30->IsInExecution(v30) || (v31 = v30->GetAI(v30), *(_BYTE *)(v31 + 567)) || *(_BYTE *)(v31 + 568)) )
    return 0i64;
  else
    return 1i64;
}

/*
==============
BT_CanExecute
==============
*/
_BOOL8 BT_CanExecute(BehaviorTree *pTree, int entNum, int taskID, int paramsID)
{
  const gentity_s *Ent; 
  AIScriptedInterface *m_pAI; 
  gentity_s *TargetEntity; 
  _BOOL8 result; 
  AIWrapper v8; 

  Ent = BT_GetEnt(entNum);
  AIWrapper::AIWrapper(&v8, Ent);
  m_pAI = v8.m_pAI;
  if ( !v8.m_pAI && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\game\\ai\\ai_bt_builtin.cpp", 487, ASSERT_TYPE_ASSERT, "(pAI)", (const char *)&queryFormat, "pAI") )
    __debugbreak();
  result = 0;
  if ( m_pAI->CanExecute(m_pAI) )
  {
    TargetEntity = AICommonInterface::GetTargetEntity(m_pAI);
    if ( TargetEntity )
    {
      if ( !m_pAI->CanExecuteTarget(m_pAI, TargetEntity) )
        return 1;
    }
  }
  return result;
}

/*
==============
BT_DoExecute
==============
*/
__int64 BT_DoExecute(BehaviorTree *pTree, int entNum, int taskID, int paramsID)
{
  const gentity_s *Ent; 
  AIScriptedInterface *m_pAI; 
  AIWrapper v7; 

  Ent = BT_GetEnt(entNum);
  AIWrapper::AIWrapper(&v7, Ent);
  m_pAI = v7.m_pAI;
  if ( !v7.m_pAI && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\game\\ai\\ai_bt_builtin.cpp", 521, ASSERT_TYPE_ASSERT, "(pAI)", (const char *)&queryFormat, "pAI") )
    __debugbreak();
  return (unsigned int)m_pAI->IsInExecution(m_pAI) + 1;
}

/*
==============
BT_DoExecute_Init
==============
*/
__int64 BT_DoExecute_Init(BehaviorTree *pTree, int entNum, int taskID, int paramsID)
{
  gentity_s *Ent; 
  AIScriptedInterface *m_pAI; 
  gentity_s *TargetEntity; 
  AIWrapper v8; 

  Ent = BT_GetEnt(entNum);
  if ( !Ent->agent && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\game\\ai\\ai_bt_builtin.cpp", 505, ASSERT_TYPE_ASSERT, "( pEnt->agent )", "AI executions only work on agents.") )
    __debugbreak();
  AIWrapper::AIWrapper(&v8, Ent);
  m_pAI = v8.m_pAI;
  if ( !v8.m_pAI && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\game\\ai\\ai_bt_builtin.cpp", 507, ASSERT_TYPE_ASSERT, "(pAI)", (const char *)&queryFormat, "pAI") )
    __debugbreak();
  TargetEntity = AICommonInterface::GetTargetEntity(m_pAI);
  if ( !TargetEntity && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\game\\ai\\ai_bt_builtin.cpp", 510, ASSERT_TYPE_ASSERT, "(pTarget)", (const char *)&queryFormat, "pTarget") )
    __debugbreak();
  if ( Ent->agent->playerState.equippedExecution != 255 )
    m_pAI->BeginExecution(m_pAI, TargetEntity);
  return 1i64;
}

/*
==============
BT_IsBlocking
==============
*/
_BOOL8 BT_IsBlocking(BehaviorTree *pTree, int entNum, int taskID, int paramsID)
{
  const gentity_s *Ent; 
  AIWrapper v6; 

  Ent = BT_GetEnt(entNum);
  AIWrapper::AIWrapper(&v6, Ent);
  return v6.m_pAI && AIScriptedInterface::IsCurrentlyBlockingOtherAI(v6.m_pAI);
}

/*
==============
BT_BlockingAttemptMove
==============
*/
_BOOL8 BT_BlockingAttemptMove(BehaviorTree *pTree, int entNum, int taskID, int paramsID)
{
  const gentity_s *Ent; 
  AIScriptedInterface *m_pAI; 
  AIWrapper v7; 

  Ent = BT_GetEnt(entNum);
  AIWrapper::AIWrapper(&v7, Ent);
  m_pAI = v7.m_pAI;
  if ( !v7.m_pAI && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\game\\ai\\ai_bt_builtin.cpp", 426, ASSERT_TYPE_ASSERT, "(pAI)", (const char *)&queryFormat, "pAI") )
    __debugbreak();
  return AIScriptedInterface::IsCurrentlyBlockingOtherAI(m_pAI) && AIScriptedInterface::Blocking_AttemptMove(m_pAI);
}

/*
==============
BT_BlockingMove_Init
==============
*/
__int64 BT_BlockingMove_Init(BehaviorTree *pTree, int entNum, int taskID, int paramsID, unsigned __int8 *pInOutInstIndex)
{
  ai_bt_instance_data *v5; 

  if ( !pInOutInstIndex && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\game\\ai\\ai_bt_builtin.cpp", 437, ASSERT_TYPE_ASSERT, "(pInOutInstIndex)", (const char *)&queryFormat, "pInOutInstIndex") )
    __debugbreak();
  v5 = BT_AllocInstanceData(pInOutInstIndex);
  if ( !v5 && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\game\\ai\\ai_bt_builtin.cpp", 440, ASSERT_TYPE_ASSERT, "(pData)", (const char *)&queryFormat, "pData") )
    __debugbreak();
  v5->m_TimeStarted = level.time;
  return 1i64;
}

/*
==============
BT_BlockingMove
==============
*/
__int64 BT_BlockingMove(BehaviorTree *pTree, int entNum, int taskID, int paramsID, unsigned __int8 *pInOutInstIndex)
{
  const gentity_s *Ent; 
  AIScriptedInterface *m_pAI; 
  ai_bt_instance_data *InstanceData; 
  AIWrapper v15; 
  int v16[4]; 

  Ent = BT_GetEnt(entNum);
  AIWrapper::AIWrapper(&v15, Ent);
  m_pAI = v15.m_pAI;
  if ( !v15.m_pAI && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\game\\ai\\ai_bt_builtin.cpp", 452, ASSERT_TYPE_ASSERT, "(pAI)", (const char *)&queryFormat, "pAI") )
    __debugbreak();
  InstanceData = BT_GetInstanceData(*pInOutInstIndex);
  if ( !InstanceData && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\game\\ai\\ai_bt_builtin.cpp", 455, ASSERT_TYPE_ASSERT, "(pData)", (const char *)&queryFormat, "pData") )
    __debugbreak();
  if ( AIScriptedInterface::IsCurrentlyBlockingOtherAI(m_pAI) )
  {
    m_pAI->GetVelocity(m_pAI, (vec3_t *)v16);
    if ( level.time <= InstanceData->m_TimeStarted || AICommonInterface::HasPath(m_pAI) || AIScriptedInterface::PathPending(m_pAI) )
      return 2i64;
    __asm
    {
      vmovss  xmm0, [rsp+0A8h+var_28]
      vmovss  xmm1, [rsp+0A8h+var_24]
      vmulss  xmm3, xmm0, xmm0
      vmulss  xmm2, xmm1, xmm1
      vaddss  xmm0, xmm3, xmm2
      vsqrtss xmm3, xmm0, xmm0
      vcomiss xmm3, cs:__real@3c23d70a
    }
  }
  return 0i64;
}

/*
==============
BT_BlockingMove_Terminate
==============
*/
__int64 BT_BlockingMove_Terminate(BehaviorTree *pTree, int entNum, int taskID, int paramsID, unsigned __int8 *pInOutInstIndex)
{
  const gentity_s *Ent; 
  AIScriptedInterface *m_pAI; 
  __int64 v7; 
  AIWrapper v9; 

  Ent = BT_GetEnt(entNum);
  AIWrapper::AIWrapper(&v9, Ent);
  m_pAI = v9.m_pAI;
  if ( !v9.m_pAI && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\game\\ai\\ai_bt_builtin.cpp", 472, ASSERT_TYPE_ASSERT, "(pAI)", (const char *)&queryFormat, "pAI") )
    __debugbreak();
  v7 = m_pAI->GetAI(m_pAI);
  AIScriptedInterface::ClearBTGoal(m_pAI, AI_BT_GOAL_PRIORITY_CRITICAL);
  if ( !pInOutInstIndex && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\game\\ai\\ai_bt_builtin.cpp", 477, ASSERT_TYPE_ASSERT, "(pInOutInstIndex)", (const char *)&queryFormat, "pInOutInstIndex") )
    __debugbreak();
  *(_BYTE *)(v7 + 2990) = 0;
  BT_FreeInstanceData(pInOutInstIndex);
  return 1i64;
}

/*
==============
BT_IsRetreatNeeded
==============
*/
_BOOL8 BT_IsRetreatNeeded(BehaviorTree *pTree, int entNum, int taskID, int paramsID)
{
  const gentity_s *Ent; 
  AIWrapper v6; 

  Ent = BT_GetEnt(entNum);
  AIWrapper::AIWrapper(&v6, Ent);
  return v6.m_pAI && AIScriptedInterface::IsRetreatNeeded(v6.m_pAI);
}

/*
==============
BT_RetreatAttemptMove
==============
*/
_BOOL8 BT_RetreatAttemptMove(BehaviorTree *pTree, int entNum, int taskID, int paramsID)
{
  const gentity_s *Ent; 
  AIScriptedInterface *m_pAI; 
  AIWrapper v7; 

  Ent = BT_GetEnt(entNum);
  AIWrapper::AIWrapper(&v7, Ent);
  m_pAI = v7.m_pAI;
  if ( !v7.m_pAI && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\game\\ai\\ai_bt_builtin.cpp", 350, ASSERT_TYPE_ASSERT, "(pAI)", (const char *)&queryFormat, "pAI") )
    __debugbreak();
  return AIScriptedInterface::IsRetreatNeeded(m_pAI) && AIScriptedInterface::Retreat_AttemptMove(m_pAI);
}

/*
==============
BT_RetreatMove_Init
==============
*/
__int64 BT_RetreatMove_Init(BehaviorTree *pTree, int entNum, int taskID, int paramsID, unsigned __int8 *pInOutInstIndex)
{
  ai_bt_instance_data *v5; 

  if ( !pInOutInstIndex && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\game\\ai\\ai_bt_builtin.cpp", 360, ASSERT_TYPE_ASSERT, "(pInOutInstIndex)", (const char *)&queryFormat, "pInOutInstIndex") )
    __debugbreak();
  v5 = BT_AllocInstanceData(pInOutInstIndex);
  if ( !v5 && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\game\\ai\\ai_bt_builtin.cpp", 363, ASSERT_TYPE_ASSERT, "(pData)", (const char *)&queryFormat, "pData") )
    __debugbreak();
  v5->m_TimeStarted = level.time;
  return 1i64;
}

/*
==============
BT_RetreatMove
==============
*/
__int64 BT_RetreatMove(BehaviorTree *pTree, int entNum, int taskID, int paramsID, unsigned __int8 *pInOutInstIndex)
{
  const gentity_s *Ent; 
  AIScriptedInterface *m_pAI; 
  ai_bt_instance_data *InstanceData; 
  AIWrapper v18; 
  int v19[4]; 

  Ent = BT_GetEnt(entNum);
  AIWrapper::AIWrapper(&v18, Ent);
  m_pAI = v18.m_pAI;
  if ( !v18.m_pAI && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\game\\ai\\ai_bt_builtin.cpp", 375, ASSERT_TYPE_ASSERT, "(pAI)", (const char *)&queryFormat, "pAI") )
    __debugbreak();
  InstanceData = BT_GetInstanceData(*pInOutInstIndex);
  if ( !InstanceData && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\game\\ai\\ai_bt_builtin.cpp", 378, ASSERT_TYPE_ASSERT, "(pData)", (const char *)&queryFormat, "pData") )
    __debugbreak();
  if ( AIScriptedInterface::IsRetreatNeeded(m_pAI) )
  {
    m_pAI->GetVelocity(m_pAI, (vec3_t *)v19);
    if ( level.time <= InstanceData->m_TimeStarted || AICommonInterface::HasPath(m_pAI) || AIScriptedInterface::PathPending(m_pAI) )
      return 2i64;
    __asm
    {
      vmovss  xmm0, [rsp+0A8h+var_28]
      vmovss  xmm1, [rsp+0A8h+var_24]
      vmulss  xmm3, xmm0, xmm0
      vmovss  xmm0, [rsp+0A8h+var_20]
      vmulss  xmm2, xmm1, xmm1
      vaddss  xmm4, xmm3, xmm2
      vmulss  xmm1, xmm0, xmm0
      vaddss  xmm2, xmm4, xmm1
      vsqrtss xmm3, xmm2, xmm2
      vcomiss xmm3, cs:__real@3c23d70a
    }
  }
  return 0i64;
}

/*
==============
BT_RetreatMove_Terminate
==============
*/
__int64 BT_RetreatMove_Terminate(BehaviorTree *pTree, int entNum, int taskID, int paramsID, unsigned __int8 *pInOutInstIndex)
{
  const gentity_s *Ent; 
  AIScriptedInterface *m_pAI; 
  __int64 v7; 
  AIWrapper v9; 

  Ent = BT_GetEnt(entNum);
  AIWrapper::AIWrapper(&v9, Ent);
  m_pAI = v9.m_pAI;
  if ( !v9.m_pAI && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\game\\ai\\ai_bt_builtin.cpp", 395, ASSERT_TYPE_ASSERT, "(pAI)", (const char *)&queryFormat, "pAI") )
    __debugbreak();
  v7 = m_pAI->GetAI(m_pAI);
  AIScriptedInterface::ClearBTGoal(m_pAI, AI_BT_GOAL_PRIORITY_CRITICAL);
  *(_DWORD *)(v7 + 1268) = level.time + AIScriptedInterface::GetCoverSearchInterval(m_pAI);
  if ( !pInOutInstIndex && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\game\\ai\\ai_bt_builtin.cpp", 401, ASSERT_TYPE_ASSERT, "(pInOutInstIndex)", (const char *)&queryFormat, "pInOutInstIndex") )
    __debugbreak();
  *(_BYTE *)(v7 + 3600) &= ~1u;
  BT_FreeInstanceData(pInOutInstIndex);
  return 1i64;
}

/*
==============
BT_MayShoot
==============
*/
_BOOL8 BT_MayShoot(BehaviorTree *pTree, int entNum, int taskID, int paramsID)
{
  const gentity_s *Ent; 
  AIScriptedInterface *m_pAI; 
  AIWrapper v7; 

  Ent = BT_GetEnt(entNum);
  AIWrapper::AIWrapper(&v7, Ent);
  m_pAI = v7.m_pAI;
  if ( !v7.m_pAI && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\game\\ai\\ai_bt_builtin.cpp", 532, ASSERT_TYPE_ASSERT, "(pAI)", (const char *)&queryFormat, "pAI") )
    __debugbreak();
  return AIScriptedInterface::BTMayShoot(m_pAI);
}

