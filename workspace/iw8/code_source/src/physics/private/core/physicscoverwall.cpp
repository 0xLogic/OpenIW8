/*
==============
PhysicsCoverWall_Shutdown
==============
*/

void PhysicsCoverWall_Shutdown(void)
{
  ?PhysicsCoverWall_Shutdown@@YAXXZ();
}

/*
==============
CG_PhysicsCoverWall_AddCoverWall
==============
*/

void __fastcall CG_PhysicsCoverWall_AddCoverWall(LocalClientNum_t localClientNum, centity_t *entity)
{
  ?CG_PhysicsCoverWall_AddCoverWall@@YAXW4LocalClientNum_t@@PEAUcentity_t@@@Z(localClientNum, entity);
}

/*
==============
G_PhysicsCoverWall_RemoveCoverWall
==============
*/

void __fastcall G_PhysicsCoverWall_RemoveCoverWall(gentity_s *entity)
{
  ?G_PhysicsCoverWall_RemoveCoverWall@@YAXPEAUgentity_s@@@Z(entity);
}

/*
==============
G_PhysicsCoverWall_InstanceIdIsCoverWallPlayerClip
==============
*/

bool __fastcall G_PhysicsCoverWall_InstanceIdIsCoverWallPlayerClip(Physics_WorldId worldId, unsigned int id, int *outEntityId)
{
  return ?G_PhysicsCoverWall_InstanceIdIsCoverWallPlayerClip@@YA_NW4Physics_WorldId@@IPEAH@Z(worldId, id, outEntityId);
}

/*
==============
PhysicsCoverWall_ReadShapeData
==============
*/

hknpShape *__fastcall PhysicsCoverWall_ReadShapeData(MemoryFile *memFile)
{
  return ?PhysicsCoverWall_ReadShapeData@@YAPEAVhknpShape@@PEAUMemoryFile@@@Z(memFile);
}

/*
==============
PhysicsCoverWall_CreateDynamicCompoundShape
==============
*/

hknpCompoundShape *__fastcall PhysicsCoverWall_CreateDynamicCompoundShape(const unsigned int *coverGrid)
{
  return ?PhysicsCoverWall_CreateDynamicCompoundShape@@YAPEAVhknpCompoundShape@@PEBI@Z(coverGrid);
}

/*
==============
PhysicsCoverWall_Init
==============
*/

void PhysicsCoverWall_Init(void)
{
  ?PhysicsCoverWall_Init@@YAXXZ();
}

/*
==============
G_PhysicsCoverWall_UpdateCoverWall
==============
*/

void __fastcall G_PhysicsCoverWall_UpdateCoverWall(gentity_s *entity)
{
  ?G_PhysicsCoverWall_UpdateCoverWall@@YAXPEAUgentity_s@@@Z(entity);
}

/*
==============
G_PhysicsCoverWall_AddCoverWall
==============
*/

void __fastcall G_PhysicsCoverWall_AddCoverWall(gentity_s *entity)
{
  ?G_PhysicsCoverWall_AddCoverWall@@YAXPEAUgentity_s@@@Z(entity);
}

/*
==============
G_PhysicsCoverWall_InstanceIdIsCoverWall
==============
*/

bool __fastcall G_PhysicsCoverWall_InstanceIdIsCoverWall(Physics_WorldId worldId, unsigned int id, int *outEntityId)
{
  return ?G_PhysicsCoverWall_InstanceIdIsCoverWall@@YA_NW4Physics_WorldId@@IPEAH@Z(worldId, id, outEntityId);
}

/*
==============
CG_PhysicsCoverWall_UpdateCoverWall
==============
*/

void __fastcall CG_PhysicsCoverWall_UpdateCoverWall(LocalClientNum_t localClientNum, centity_t *entity)
{
  ?CG_PhysicsCoverWall_UpdateCoverWall@@YAXW4LocalClientNum_t@@PEAUcentity_t@@@Z(localClientNum, entity);
}

/*
==============
PhysicsCoverWall_CreatePlayerClipShape
==============
*/

hknpConvexShape *__fastcall PhysicsCoverWall_CreatePlayerClipShape(const unsigned int *coverGrid)
{
  return ?PhysicsCoverWall_CreatePlayerClipShape@@YAPEAVhknpConvexShape@@PEBI@Z(coverGrid);
}

/*
==============
CG_PhysicsCoverWall_RemoveCoverWall
==============
*/

void __fastcall CG_PhysicsCoverWall_RemoveCoverWall(LocalClientNum_t localClientNum, centity_t *entity)
{
  ?CG_PhysicsCoverWall_RemoveCoverWall@@YAXW4LocalClientNum_t@@PEAUcentity_t@@@Z(localClientNum, entity);
}

/*
==============
PhysicsCoverWall_WriteShapeData
==============
*/

void __fastcall PhysicsCoverWall_WriteShapeData(MemoryFile *memFile, Physics_WorldId worldId, unsigned int instanceId)
{
  ?PhysicsCoverWall_WriteShapeData@@YAXPEAUMemoryFile@@W4Physics_WorldId@@I@Z(memFile, worldId, instanceId);
}

/*
==============
CG_PhysicsCoverWall_Clear
==============
*/

void CG_PhysicsCoverWall_Clear(void)
{
  ?CG_PhysicsCoverWall_Clear@@YAXXZ();
}

/*
==============
PhysicsCoverWall_ReadShapeData_PlayerClip
==============
*/

hknpShape *__fastcall PhysicsCoverWall_ReadShapeData_PlayerClip(MemoryFile *memFile)
{
  return ?PhysicsCoverWall_ReadShapeData_PlayerClip@@YAPEAVhknpShape@@PEAUMemoryFile@@@Z(memFile);
}

/*
==============
PhysicsCoverWall_IsCoverWall
==============
*/

bool __fastcall PhysicsCoverWall_IsCoverWall(Physics_WorldId worldId, int ref)
{
  return ?PhysicsCoverWall_IsCoverWall@@YA_NW4Physics_WorldId@@H@Z(worldId, ref);
}

/*
==============
CG_PhysicsCoverWall_IsRegistered
==============
*/

bool __fastcall CG_PhysicsCoverWall_IsRegistered(LocalClientNum_t localClientNum, centity_t *entity)
{
  return ?CG_PhysicsCoverWall_IsRegistered@@YA_NW4LocalClientNum_t@@PEAUcentity_t@@@Z(localClientNum, entity);
}

/*
==============
PhysicsCoverWall_Load
==============
*/

void __fastcall PhysicsCoverWall_Load(SaveGame *save)
{
  ?PhysicsCoverWall_Load@@YAXPEAUSaveGame@@@Z(save);
}

/*
==============
PhysicsCoverWall_WriteShapeData_PlayerClip
==============
*/

void __fastcall PhysicsCoverWall_WriteShapeData_PlayerClip(MemoryFile *memFile, Physics_WorldId worldId, unsigned int instanceId)
{
  ?PhysicsCoverWall_WriteShapeData_PlayerClip@@YAXPEAUMemoryFile@@W4Physics_WorldId@@I@Z(memFile, worldId, instanceId);
}

/*
==============
PhysicsCoverWall_Write
==============
*/

void __fastcall PhysicsCoverWall_Write(MemoryFile *memFile)
{
  ?PhysicsCoverWall_Write@@YAXPEAUMemoryFile@@@Z(memFile);
}

/*
==============
CG_PhysicsCoverWall_RemovePlayerClip
==============
*/

void __fastcall CG_PhysicsCoverWall_RemovePlayerClip(LocalClientNum_t localClientNum, unsigned int entityId)
{
  ?CG_PhysicsCoverWall_RemovePlayerClip@@YAXW4LocalClientNum_t@@I@Z(localClientNum, entityId);
}

/*
==============
G_PhysicsCoverWall_IsRegestered
==============
*/

bool __fastcall G_PhysicsCoverWall_IsRegestered(gentity_s *entity)
{
  return ?G_PhysicsCoverWall_IsRegestered@@YA_NPEAUgentity_s@@@Z(entity);
}

/*
==============
CG_PhysicsCoverWall_AddCoverWall
==============
*/
void CG_PhysicsCoverWall_AddCoverWall(LocalClientNum_t localClientNum, centity_t *entity)
{
  __int64 v3; 
  hkMonitorStream *Value; 
  hkMonitorStream *v5; 
  unsigned int v6; 
  centity_t **v7; 
  __int64 v8; 

  v3 = localClientNum;
  Value = (hkMonitorStream *)TlsGetValue(hkMonitorStream__m_instance.m_slotID);
  v5 = Value;
  if ( Value )
    hkMonitorStream::timerBegin(Value, "TtCG_PhysicsCoverWall_AddCoverWall");
  if ( !entity && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\physics\\private\\core\\physicscoverwall.cpp", 899, ASSERT_TYPE_ASSERT, "(entity)", (const char *)&queryFormat, "entity") )
    __debugbreak();
  if ( !BG_CoverWall_IsCoverWall(&entity->nextState) && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\physics\\private\\core\\physicscoverwall.cpp", 900, ASSERT_TYPE_ASSERT, "(BG_CoverWall_IsCoverWall( &entity->nextState ))", (const char *)&queryFormat, "BG_CoverWall_IsCoverWall( &entity->nextState )") )
    __debugbreak();
  v6 = 0;
  v7 = s_physicsCoverWallCGEntities[v3];
  do
  {
    if ( !*v7 )
    {
      s_physicsCoverWallCGEntities[v3][v6] = entity;
      CG_PhysicsCoverWall_CreatePhysics((LocalClientNum_t)v3, v6);
      CG_PhysicsCoverWall_CreatePlayerClip((LocalClientNum_t)v3, v6);
      goto LABEL_15;
    }
    ++v6;
    ++v7;
  }
  while ( v6 < 0x10 );
  LODWORD(v8) = v3;
  if ( CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\physics\\private\\core\\physicscoverwall.cpp", 914, ASSERT_TYPE_ASSERT, (const char *)&queryFormat.fmt + 3, "Ran out of Cover Walls on the client for local client %d - you have more than %i Cover Walls", v8, 16) )
    __debugbreak();
LABEL_15:
  if ( v5 )
    hkMonitorStream::timerEnd(v5, "Et");
}

/*
==============
CG_PhysicsCoverWall_Clear
==============
*/
void CG_PhysicsCoverWall_Clear(void)
{
  hkMonitorStream *Value; 
  hkMonitorStream *v1; 
  int v2; 
  centity_t *(*v3)[16]; 
  unsigned int i; 

  Value = (hkMonitorStream *)TlsGetValue(hkMonitorStream__m_instance.m_slotID);
  v1 = Value;
  if ( Value )
    hkMonitorStream::timerBegin(Value, "TtCG_PhysicsCoverWall_Clear");
  v2 = 0;
  v3 = s_physicsCoverWallCGEntities;
  do
  {
    for ( i = 0; i < 0x10; ++i )
    {
      if ( (*v3)[0] )
      {
        CG_PhysicsCoverWall_RemovePhysics((LocalClientNum_t)v2, i);
        CG_PhysicsCoverWall_RemovePlayerClip((LocalClientNum_t)v2, i);
        (*v3)[0] = NULL;
      }
      v3 = (centity_t *(*)[16])((char *)v3 + 8);
    }
    ++v2;
  }
  while ( v2 < 2 );
  if ( v1 )
    hkMonitorStream::timerEnd(v1, "Et");
}

/*
==============
CG_PhysicsCoverWall_CreatePhysics
==============
*/
void CG_PhysicsCoverWall_CreatePhysics(LocalClientNum_t localClientNum, unsigned int entityId)
{
  __int64 v2; 
  __int64 v3; 
  hkMonitorStream *Value; 
  hkMonitorStream *v5; 
  __int64 v6; 
  __int64 v7; 
  const unsigned int *CoverGrid; 
  int v10; 
  __int64 v11; 
  unsigned __int16 v12; 
  int Ref; 
  vec3_t outOrigin; 
  __int64 v18; 
  __int64 v19; 
  hkMonitorStream *v20; 
  vec3_t angles; 
  vec4_t quat; 

  v19 = -2i64;
  v2 = entityId;
  v3 = localClientNum;
  Value = (hkMonitorStream *)TlsGetValue(hkMonitorStream__m_instance.m_slotID);
  v5 = Value;
  if ( Value )
    hkMonitorStream::timerBegin(Value, "TtCG_PhysicsCoverWall_CreatePhysics");
  v20 = v5;
  if ( (unsigned int)v2 >= 0x10 && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\physics\\private\\core\\physicscoverwall.cpp", 818, ASSERT_TYPE_ASSERT, "(entityId < 16)", (const char *)&queryFormat, "entityId < PHYSICS_COVERWALL_MAX_NUM") )
    __debugbreak();
  v6 = v2;
  v7 = v2 + 16 * v3;
  _RSI = s_physicsCoverWallCGEntities[0][v7];
  if ( !_RSI && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\physics\\private\\core\\physicscoverwall.cpp", 822, ASSERT_TYPE_ASSERT, "(entity)", (const char *)&queryFormat, "entity") )
    __debugbreak();
  CoverGrid = CG_CoverWall_GetCoverGrid(_RSI);
  if ( !CoverGrid && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\physics\\private\\core\\physicscoverwall.cpp", 826, ASSERT_TYPE_ASSERT, "(coverGrid)", (const char *)&queryFormat, "coverGrid") )
    __debugbreak();
  v10 = 3 * v3;
  v11 = v6 + 48i64 * (_DWORD)v3;
  s_physicsCoverWallCGCompoundShapes[0][v11] = PhysicsCoverWall_CreateDynamicCompoundShape(CoverGrid);
  v18 = v11;
  s_physicsCoverWallCGCompoundShapes[1][v11] = PhysicsCoverWall_CreateDynamicCompoundShape(CoverGrid);
  s_physicsCoverWallCGCompoundShapes[2][v11] = PhysicsCoverWall_CreateDynamicCompoundShape(CoverGrid);
  v12 = truncate_cast<unsigned short,short>(_RSI->nextState.number);
  Ref = Physics_MakeRef(Physics_RefSystem_CEntities, Physics_RelationshipSystem_None, 0, v12);
  CG_GetPoseOrigin(&_RSI->pose, &outOrigin);
  __asm
  {
    vmovss  xmm0, dword ptr [rsi+48h]
    vmovss  dword ptr [rsp+0E8h+angles], xmm0
    vmovss  xmm1, dword ptr [rsi+4Ch]
    vmovss  dword ptr [rsp+0E8h+angles+4], xmm1
    vmovss  xmm0, dword ptr [rsi+50h]
    vmovss  dword ptr [rsp+0E8h+angles+8], xmm0
  }
  AnglesToQuat(&angles, &quat);
  if ( s_physicsCoverWallCGPredInstances[0][v7] != -1 && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\physics\\private\\core\\physicscoverwall.cpp", 840, ASSERT_TYPE_ASSERT, "(s_physicsCoverWallCGPredInstances[localClientNum][entityId] == 0xFFFFFFFF)", (const char *)&queryFormat, "s_physicsCoverWallCGPredInstances[localClientNum][entityId] == PHYSICSINSTANCEID_INVALID") )
    __debugbreak();
  if ( s_physicsCoverWallCGDetailInstances[0][v7] != -1 && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\physics\\private\\core\\physicscoverwall.cpp", 841, ASSERT_TYPE_ASSERT, "(s_physicsCoverWallCGDetailInstances[localClientNum][entityId] == 0xFFFFFFFF)", (const char *)&queryFormat, "s_physicsCoverWallCGDetailInstances[localClientNum][entityId] == PHYSICSINSTANCEID_INVALID") )
    __debugbreak();
  if ( s_physicsCoverWallCGAuthInstances[0][v7] != -1 && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\physics\\private\\core\\physicscoverwall.cpp", 842, ASSERT_TYPE_ASSERT, "(s_physicsCoverWallCGAuthInstances[localClientNum][entityId] == 0xFFFFFFFF)", (const char *)&queryFormat, "s_physicsCoverWallCGAuthInstances[localClientNum][entityId] == PHYSICSINSTANCEID_INVALID") )
    __debugbreak();
  s_physicsCoverWallCGPredInstances[0][v7] = Physics_InstantiateKeyframedBody((Physics_WorldId)(v10 + 2), s_physicsCoverWallCGCompoundShapes[0][v11], Ref, "dynamic cover", "PM_Plaster", 1, &outOrigin, &quat, 1, 1, 0);
  s_physicsCoverWallCGDetailInstances[0][v7] = Physics_InstantiateKeyframedBody((Physics_WorldId)(v10 + 4), s_physicsCoverWallCGCompoundShapes[1][v18], Ref, "dynamic cover", "PM_Plaster", 1, &outOrigin, &quat, 1, 1, 0);
  s_physicsCoverWallCGAuthInstances[0][v7] = Physics_InstantiateKeyframedBody((Physics_WorldId)(v10 + 3), s_physicsCoverWallCGCompoundShapes[2][v11], Ref, "dynamic cover", "PM_Plaster", 1, &outOrigin, &quat, 1, 1, 0);
  if ( s_physicsCoverWallCGPredInstances[0][v7] == -1 && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\physics\\private\\core\\physicscoverwall.cpp", 847, ASSERT_TYPE_ASSERT, "(s_physicsCoverWallCGPredInstances[localClientNum][entityId] != 0xFFFFFFFF)", (const char *)&queryFormat, "s_physicsCoverWallCGPredInstances[localClientNum][entityId] != PHYSICSINSTANCEID_INVALID") )
    __debugbreak();
  if ( s_physicsCoverWallCGDetailInstances[0][v7] == -1 && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\physics\\private\\core\\physicscoverwall.cpp", 848, ASSERT_TYPE_ASSERT, "(s_physicsCoverWallCGDetailInstances[localClientNum][entityId] != 0xFFFFFFFF)", (const char *)&queryFormat, "s_physicsCoverWallCGDetailInstances[localClientNum][entityId] != PHYSICSINSTANCEID_INVALID") )
    __debugbreak();
  if ( s_physicsCoverWallCGAuthInstances[0][v7] == -1 && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\physics\\private\\core\\physicscoverwall.cpp", 849, ASSERT_TYPE_ASSERT, "(s_physicsCoverWallCGAuthInstances[localClientNum][entityId] != 0xFFFFFFFF)", (const char *)&queryFormat, "s_physicsCoverWallCGAuthInstances[localClientNum][entityId] != PHYSICSINSTANCEID_INVALID") )
    __debugbreak();
  memset(&outOrigin, 0, sizeof(outOrigin));
  if ( v5 )
    hkMonitorStream::timerEnd(v5, "Et");
}

/*
==============
CG_PhysicsCoverWall_CreatePlayerClip
==============
*/
void CG_PhysicsCoverWall_CreatePlayerClip(LocalClientNum_t localClientNum, unsigned int entityId)
{
  __int64 v2; 
  __int64 v3; 
  hkMonitorStream *Value; 
  hkMonitorStream *v5; 
  const dvar_t *v6; 
  __int64 v7; 
  const unsigned int *CoverGrid; 
  hknpConvexShape *PlayerClipShape; 
  unsigned __int16 v11; 
  int Ref; 
  unsigned int v16; 
  vec3_t outOrigin; 
  __int64 v18; 
  hkMonitorStream *v19; 
  vec3_t angles; 
  vec4_t quat; 

  v18 = -2i64;
  v2 = entityId;
  v3 = localClientNum;
  Value = (hkMonitorStream *)TlsGetValue(hkMonitorStream__m_instance.m_slotID);
  v5 = Value;
  if ( Value )
    hkMonitorStream::timerBegin(Value, "TtCG_PhysicsCoverWall_CreatePhysics");
  v19 = v5;
  if ( (unsigned int)v2 >= 0x10 && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\physics\\private\\core\\physicscoverwall.cpp", 861, ASSERT_TYPE_ASSERT, "(entityId < 16)", (const char *)&queryFormat, "entityId < PHYSICS_COVERWALL_MAX_NUM") )
    __debugbreak();
  v6 = DCONST_DVARMPSPBOOL_g_coverWall_usePlayerClip;
  if ( !DCONST_DVARMPSPBOOL_g_coverWall_usePlayerClip && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\universal\\dvar.h", 692, ASSERT_TYPE_ASSERT, "(dvar)", "%s\n\tDvar %s accessed after deregistration", "dvar", "g_coverWall_usePlayerClip") )
    __debugbreak();
  Dvar_CheckFrontendServerThread(v6);
  if ( v6->current.enabled )
  {
    v7 = v2 + 16 * v3;
    _RSI = s_physicsCoverWallCGEntities[0][v7];
    if ( !_RSI && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\physics\\private\\core\\physicscoverwall.cpp", 870, ASSERT_TYPE_ASSERT, "(entity)", (const char *)&queryFormat, "entity") )
      __debugbreak();
    CoverGrid = CG_CoverWall_GetCoverGrid(_RSI);
    if ( !CoverGrid && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\physics\\private\\core\\physicscoverwall.cpp", 874, ASSERT_TYPE_ASSERT, "(coverGrid)", (const char *)&queryFormat, "coverGrid") )
      __debugbreak();
    PlayerClipShape = PhysicsCoverWall_CreatePlayerClipShape(CoverGrid);
    s_physicsCoverWallCGPlayerClipShapes[0][v7] = PlayerClipShape;
    if ( !PlayerClipShape && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\physics\\private\\core\\physicscoverwall.cpp", 878, ASSERT_TYPE_ASSERT, "(s_physicsCoverWallCGPlayerClipShapes[localClientNum][entityId])", (const char *)&queryFormat, "s_physicsCoverWallCGPlayerClipShapes[localClientNum][entityId]") )
      __debugbreak();
    v11 = truncate_cast<unsigned short,short>(_RSI->nextState.number);
    Ref = Physics_MakeRef(Physics_RefSystem_CEntities, Physics_RelationshipSystem_None, 0, v11);
    CG_GetPoseOrigin(&_RSI->pose, &outOrigin);
    __asm
    {
      vmovss  xmm0, dword ptr [rsi+48h]
      vmovss  dword ptr [rsp+0D8h+angles], xmm0
      vmovss  xmm1, dword ptr [rsi+4Ch]
      vmovss  dword ptr [rsp+0D8h+angles+4], xmm1
      vmovss  xmm0, dword ptr [rsi+50h]
      vmovss  dword ptr [rsp+0D8h+angles+8], xmm0
    }
    AnglesToQuat(&angles, &quat);
    if ( s_physicsCoverWallCGPlayerClipInstances[0][v7] != -1 && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\physics\\private\\core\\physicscoverwall.cpp", 887, ASSERT_TYPE_ASSERT, "(s_physicsCoverWallCGPlayerClipInstances[localClientNum][entityId] == 0xFFFFFFFF)", (const char *)&queryFormat, "s_physicsCoverWallCGPlayerClipInstances[localClientNum][entityId] == PHYSICSINSTANCEID_INVALID") )
      __debugbreak();
    v16 = Physics_InstantiateKeyframedBody((Physics_WorldId)(3 * v3 + 2), s_physicsCoverWallCGPlayerClipShapes[0][v7], Ref, "dynamic cover", "PM_Plaster", 0x10000, &outOrigin, &quat, 1, 1, 0);
    s_physicsCoverWallCGPlayerClipInstances[0][v7] = v16;
    if ( v16 == -1 && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\physics\\private\\core\\physicscoverwall.cpp", 891, ASSERT_TYPE_ASSERT, "(s_physicsCoverWallCGPlayerClipInstances[localClientNum][entityId] != 0xFFFFFFFF)", (const char *)&queryFormat, "s_physicsCoverWallCGPlayerClipInstances[localClientNum][entityId] != PHYSICSINSTANCEID_INVALID") )
      __debugbreak();
  }
  memset(&outOrigin, 0, sizeof(outOrigin));
  if ( v5 )
    hkMonitorStream::timerEnd(v5, "Et");
}

/*
==============
CG_PhysicsCoverWall_IsRegistered
==============
*/
char CG_PhysicsCoverWall_IsRegistered(LocalClientNum_t localClientNum, centity_t *entity)
{
  __int64 v2; 
  int v4; 
  centity_t **i; 

  v2 = localClientNum;
  if ( !entity && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\physics\\private\\core\\physicscoverwall.cpp", 796, ASSERT_TYPE_ASSERT, "(entity)", (const char *)&queryFormat, "entity") )
    __debugbreak();
  v4 = 0;
  for ( i = s_physicsCoverWallCGEntities[v2]; *i != entity; ++i )
  {
    if ( (unsigned int)++v4 >= 0x10 )
      return 0;
  }
  return 1;
}

/*
==============
CG_PhysicsCoverWall_RemoveCoverWall
==============
*/
void CG_PhysicsCoverWall_RemoveCoverWall(LocalClientNum_t localClientNum, centity_t *entity)
{
  __int64 v2; 
  unsigned int v4; 
  centity_t **i; 

  v2 = localClientNum;
  if ( !entity && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\physics\\private\\core\\physicscoverwall.cpp", 977, ASSERT_TYPE_ASSERT, "(entity)", (const char *)&queryFormat, "entity") )
    __debugbreak();
  v4 = 0;
  for ( i = s_physicsCoverWallCGEntities[v2]; *i != entity; ++i )
  {
    if ( ++v4 >= 0x10 )
      return;
  }
  CG_PhysicsCoverWall_RemovePhysics((LocalClientNum_t)v2, v4);
  CG_PhysicsCoverWall_RemovePlayerClip((LocalClientNum_t)v2, v4);
  s_physicsCoverWallCGEntities[v2][v4] = NULL;
}

/*
==============
CG_PhysicsCoverWall_RemovePhysics
==============
*/
void CG_PhysicsCoverWall_RemovePhysics(LocalClientNum_t localClientNum, unsigned int entityId)
{
  __int64 v2; 
  __int64 v3; 
  hkMonitorStream *Value; 
  hkMonitorStream *v5; 
  __int64 v6; 
  __int64 v7; 
  unsigned int *v8; 
  unsigned int *v9; 
  unsigned int *v10; 
  int v11; 
  Physics_WorldId v12; 
  Physics_WorldId v13; 
  hknpCompoundShape **v14; 
  hknpCompoundShape **v15; 
  __int64 v16; 
  Physics_WorldId worldId; 

  v2 = entityId;
  v3 = localClientNum;
  Value = (hkMonitorStream *)TlsGetValue(hkMonitorStream__m_instance.m_slotID);
  v5 = Value;
  if ( Value )
    hkMonitorStream::timerBegin(Value, "TtCG_PhysicsCoverWall_RemovePhysics");
  if ( (unsigned int)v2 >= 0x10 && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\physics\\private\\core\\physicscoverwall.cpp", 922, ASSERT_TYPE_ASSERT, "(entityId < 16)", (const char *)&queryFormat, "entityId < PHYSICS_COVERWALL_MAX_NUM", -2i64) )
    __debugbreak();
  v6 = v2;
  v7 = v2 + 16 * v3;
  v8 = &s_physicsCoverWallCGPredInstances[0][v7];
  if ( s_physicsCoverWallCGPredInstances[0][v7] != -1 )
  {
    v9 = &s_physicsCoverWallCGDetailInstances[0][v7];
    if ( s_physicsCoverWallCGDetailInstances[0][v7] == -1 && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\physics\\private\\core\\physicscoverwall.cpp", 930, ASSERT_TYPE_ASSERT, "(s_physicsCoverWallCGDetailInstances[localClientNum][entityId] != 0xFFFFFFFF)", (const char *)&queryFormat, "s_physicsCoverWallCGDetailInstances[localClientNum][entityId] != PHYSICSINSTANCEID_INVALID") )
      __debugbreak();
    v10 = &s_physicsCoverWallCGAuthInstances[0][v7];
    if ( s_physicsCoverWallCGAuthInstances[0][v7] == -1 && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\physics\\private\\core\\physicscoverwall.cpp", 931, ASSERT_TYPE_ASSERT, "(s_physicsCoverWallCGAuthInstances[localClientNum][entityId] != 0xFFFFFFFF)", (const char *)&queryFormat, "s_physicsCoverWallCGAuthInstances[localClientNum][entityId] != PHYSICSINSTANCEID_INVALID") )
      __debugbreak();
    v11 = 3 * v3;
    worldId = 3 * v3 + 4;
    Physics_DestroyInstance(worldId, *v9, 0);
    v12 = 3 * v3 + 2;
    Physics_DestroyInstance(v12, *v8, 0);
    v13 = 3 * v3 + 3;
    Physics_DestroyInstance((Physics_WorldId)(v11 + 3), *v10, 0);
    *v9 = -1;
    *v8 = -1;
    *v10 = -1;
    v14 = &s_physicsCoverWallCGCompoundShapes[v11][v6];
    if ( !*v14 && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\physics\\private\\core\\physicscoverwall.cpp", 940, ASSERT_TYPE_ASSERT, "(s_physicsCoverWallCGCompoundShapes[Physics_GetClientCoverWallPredictiveWorldIndex( localClientNum )][entityId])", (const char *)&queryFormat, "s_physicsCoverWallCGCompoundShapes[Physics_GetClientCoverWallPredictiveWorldIndex( localClientNum )][entityId]") )
      __debugbreak();
    Physics_ReleaseShape(v12, *v14, 1);
    *v14 = NULL;
    v15 = &s_physicsCoverWallCGCompoundShapes[v11 + 1][v6];
    if ( !*v15 && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\physics\\private\\core\\physicscoverwall.cpp", 944, ASSERT_TYPE_ASSERT, "(s_physicsCoverWallCGCompoundShapes[Physics_GetClientCoverWallDetailWorldIndex( localClientNum )][entityId])", (const char *)&queryFormat, "s_physicsCoverWallCGCompoundShapes[Physics_GetClientCoverWallDetailWorldIndex( localClientNum )][entityId]") )
      __debugbreak();
    Physics_ReleaseShape(worldId, *v15, 1);
    *v15 = NULL;
    v16 = v6 + 16i64 * v11;
    if ( !s_physicsCoverWallCGCompoundShapes[2][v16] && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\physics\\private\\core\\physicscoverwall.cpp", 948, ASSERT_TYPE_ASSERT, "(s_physicsCoverWallCGCompoundShapes[Physics_GetClientCoverWallAuthWorldIndex( localClientNum )][entityId])", (const char *)&queryFormat, "s_physicsCoverWallCGCompoundShapes[Physics_GetClientCoverWallAuthWorldIndex( localClientNum )][entityId]") )
      __debugbreak();
    Physics_ReleaseShape(v13, s_physicsCoverWallCGCompoundShapes[2][v16], 1);
    s_physicsCoverWallCGCompoundShapes[2][v16] = NULL;
  }
  if ( v5 )
    hkMonitorStream::timerEnd(v5, "Et");
}

/*
==============
CG_PhysicsCoverWall_RemovePlayerClip
==============
*/
void CG_PhysicsCoverWall_RemovePlayerClip(LocalClientNum_t localClientNum, unsigned int entityId)
{
  __int64 v2; 
  __int64 v3; 
  hkMonitorStream *Value; 
  hkMonitorStream *v5; 
  __int64 v6; 
  unsigned int v7; 

  v2 = entityId;
  v3 = localClientNum;
  Value = (hkMonitorStream *)TlsGetValue(hkMonitorStream__m_instance.m_slotID);
  v5 = Value;
  if ( Value )
    hkMonitorStream::timerBegin(Value, "TtCG_PhysicsCoverWall_RemovePlayerClip");
  if ( (unsigned int)v2 >= 0x10 && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\physics\\private\\core\\physicscoverwall.cpp", 958, ASSERT_TYPE_ASSERT, "(entityId < 16)", (const char *)&queryFormat, "entityId < PHYSICS_COVERWALL_MAX_NUM", -2i64) )
    __debugbreak();
  v6 = v2 + 16 * v3;
  v7 = s_physicsCoverWallCGPlayerClipInstances[0][v6];
  if ( v7 != -1 )
  {
    Physics_DestroyInstance((Physics_WorldId)(3 * v3 + 2), v7, 0);
    s_physicsCoverWallCGPlayerClipInstances[0][v6] = -1;
    if ( !s_physicsCoverWallCGPlayerClipShapes[0][v6] && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\physics\\private\\core\\physicscoverwall.cpp", 969, ASSERT_TYPE_ASSERT, "(s_physicsCoverWallCGPlayerClipShapes[localClientNum][entityId])", (const char *)&queryFormat, "s_physicsCoverWallCGPlayerClipShapes[localClientNum][entityId]") )
      __debugbreak();
    Physics_ReleaseShape((Physics_WorldId)(3 * v3 + 2), s_physicsCoverWallCGPlayerClipShapes[0][v6], 1);
    s_physicsCoverWallCGPlayerClipShapes[0][v6] = NULL;
  }
  if ( v5 )
    hkMonitorStream::timerEnd(v5, "Et");
}

/*
==============
CG_PhysicsCoverWall_UpdateCoverWall
==============
*/
void CG_PhysicsCoverWall_UpdateCoverWall(LocalClientNum_t localClientNum, centity_t *entity)
{
  __int64 v3; 
  hkMonitorStream *Value; 
  hkMonitorStream *v5; 
  unsigned int v6; 
  unsigned int v7; 
  centity_t **v8; 
  centity_t **v9; 
  hkMonitorStream *v10; 
  hkMonitorStream *v11; 

  v3 = localClientNum;
  Value = (hkMonitorStream *)TlsGetValue(hkMonitorStream__m_instance.m_slotID);
  v5 = Value;
  if ( Value )
    hkMonitorStream::timerBegin(Value, "TtCG_PhysicsCoverWall_Update");
  if ( !entity )
  {
    if ( CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\physics\\private\\core\\physicscoverwall.cpp", 1079, ASSERT_TYPE_ASSERT, "(entity)", (const char *)&queryFormat, "entity", -2i64) )
      __debugbreak();
    if ( CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\physics\\private\\core\\physicscoverwall.cpp", 796, ASSERT_TYPE_ASSERT, "(entity)", (const char *)&queryFormat, "entity") )
      __debugbreak();
  }
  v6 = 0;
  v7 = 0;
  v8 = s_physicsCoverWallCGEntities[v3];
  v9 = v8;
  do
  {
    if ( *v9 == entity )
      goto LABEL_13;
    ++v7;
    ++v9;
  }
  while ( v7 < 0x10 );
  if ( CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\physics\\private\\core\\physicscoverwall.cpp", 1080, ASSERT_TYPE_ASSERT, "(CG_PhysicsCoverWall_IsRegistered( localClientNum, entity ))", (const char *)&queryFormat, "CG_PhysicsCoverWall_IsRegistered( localClientNum, entity )") )
    __debugbreak();
LABEL_13:
  while ( *v8 != entity )
  {
    ++v6;
    ++v8;
    if ( v6 >= 0x10 )
      goto LABEL_21;
  }
  if ( CG_PhysicsCoverWall_UpdatePhysics((LocalClientNum_t)v3, v6) )
  {
    v10 = (hkMonitorStream *)TlsGetValue(hkMonitorStream__m_instance.m_slotID);
    v11 = v10;
    if ( v10 )
      hkMonitorStream::timerBegin(v10, "TtCG_PhysicsCoverWall_UpdatePlayerClip");
    CG_PhysicsCoverWall_RemovePlayerClip((LocalClientNum_t)v3, v6);
    CG_PhysicsCoverWall_CreatePlayerClip((LocalClientNum_t)v3, v6);
    if ( v11 )
      hkMonitorStream::timerEnd(v11, "Et");
  }
LABEL_21:
  if ( v5 )
    hkMonitorStream::timerEnd(v5, "Et");
}

/*
==============
CG_PhysicsCoverWall_UpdatePhysics
==============
*/
__int64 CG_PhysicsCoverWall_UpdatePhysics(LocalClientNum_t localClientNum, unsigned int entityId)
{
  __int64 v2; 
  __int64 v3; 
  hkMonitorStream *Value; 
  __int64 v5; 
  __int64 v6; 
  const centity_t *v7; 
  unsigned int *CoverGrid; 
  __int64 v9; 
  hknpCompoundShape *v10; 
  hknpCompoundShape *v11; 
  hknpCompoundShape *v12; 
  int v13; 
  char v14; 
  unsigned __int8 v15; 
  int v16; 
  int v17; 
  __int64 v18; 
  char v19; 
  char v20; 
  char v21; 
  char GridPos; 
  bool v23; 
  bool v24; 
  bool v25; 
  hkMonitorStream *v26; 
  int zMin; 
  int zMax; 
  hknpCompoundShape *v30; 
  hknpCompoundShape *v31; 
  hknpCompoundShape *v32; 
  int yMax; 
  int yMin; 
  unsigned int *grid; 
  hkMonitorStream *v36; 
  __int64 v37; 
  __int64 v38; 
  hkHandle<unsigned short,65535,hknpShapeInstanceIdDiscriminant> instanceIds; 
  int v40; 
  int xMin; 
  int xMax; 

  v37 = -2i64;
  v2 = entityId;
  v3 = localClientNum;
  Value = (hkMonitorStream *)TlsGetValue(hkMonitorStream__m_instance.m_slotID);
  v5 = (__int64)Value;
  v36 = Value;
  if ( Value )
    hkMonitorStream::timerBegin(Value, "TtCG_PhysicsCoverWall_UpdatePhysics");
  v38 = v5;
  if ( (unsigned int)v2 >= 0x10 && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\physics\\private\\core\\physicscoverwall.cpp", 1003, ASSERT_TYPE_ASSERT, "(entityId < 16)", (const char *)&queryFormat, "entityId < PHYSICS_COVERWALL_MAX_NUM") )
    __debugbreak();
  v6 = v2;
  v7 = s_physicsCoverWallCGEntities[v3][v2];
  if ( !v7 && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\physics\\private\\core\\physicscoverwall.cpp", 1007, ASSERT_TYPE_ASSERT, "(entity)", (const char *)&queryFormat, "entity") )
    __debugbreak();
  CoverGrid = (unsigned int *)CG_CoverWall_GetCoverGrid(v7);
  grid = CoverGrid;
  if ( !CoverGrid && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\physics\\private\\core\\physicscoverwall.cpp", 1011, ASSERT_TYPE_ASSERT, "(coverGrid)", (const char *)&queryFormat, "coverGrid") )
    __debugbreak();
  BG_CoverWall_GetGridExtents(CoverGrid, &xMin, &xMax, &yMin, &yMax, &zMin, &zMax);
  v9 = 3 * (int)v3;
  v10 = s_physicsCoverWallCGCompoundShapes[v9][v6];
  v30 = v10;
  v11 = s_physicsCoverWallCGCompoundShapes[v9 + 1][v6];
  v31 = v11;
  v12 = s_physicsCoverWallCGCompoundShapes[v9 + 2][v6];
  v32 = v12;
  v13 = 0;
  v14 = 0;
  v15 = 0;
  v16 = -4;
  do
  {
    v17 = -6;
    do
    {
      instanceIds.m_value = v13;
      v40 = v13 + 1;
      v18 = (unsigned __int16)v13;
      v19 = (v10->m_instances.m_elements.m_data[v18].m_pod.m_transform.m_rotation.m_col0.m_quad.m128_i32[3] & 0x40) != 0;
      v20 = (v11->m_instances.m_elements.m_data[v18].m_pod.m_transform.m_rotation.m_col0.m_quad.m128_i32[3] & 0x40) != 0;
      v21 = (v12->m_instances.m_elements.m_data[v18].m_pod.m_transform.m_rotation.m_col0.m_quad.m128_i32[3] & 0x40) != 0;
      GridPos = BG_CoverWall_GetGridPos(grid, v17, 0, v16);
      v23 = GridPos;
      if ( v19 == GridPos && v20 == GridPos && v21 == GridPos )
      {
        v10 = v30;
        v11 = v31;
        v12 = v32;
      }
      else
      {
        v10 = v30;
        hknpCompoundShape::setInstancesEnabled(v30, &instanceIds, 1, GridPos);
        v11 = v31;
        hknpCompoundShape::setInstancesEnabled(v31, &instanceIds, 1, v23);
        v24 = v23;
        v12 = v32;
        hknpCompoundShape::setInstancesEnabled(v32, &instanceIds, 1, v24);
        if ( !v15 && (v17 <= xMin || v17 >= xMax || v16 <= zMin || v16 >= zMax) )
          v15 = 1;
        v14 = 1;
      }
      ++v17;
      v13 = v40;
    }
    while ( v17 <= 6 );
    ++v16;
  }
  while ( v16 <= 9 );
  v25 = v14 == 0;
  v26 = v36;
  if ( !v25 )
  {
    hknpCompoundShape::rebuild(v10);
    hknpCompoundShape::rebuild(v11);
    hknpCompoundShape::rebuild(v12);
  }
  if ( v26 )
    hkMonitorStream::timerEnd(v26, "Et");
  return v15;
}

/*
==============
G_PhysicsCoverWall_AddCoverWall
==============
*/
void G_PhysicsCoverWall_AddCoverWall(gentity_s *entity)
{
  __int64 v2; 
  gentity_s **v3; 
  __int64 v4; 

  if ( !entity )
  {
    if ( CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\physics\\private\\core\\physicscoverwall.cpp", 572, ASSERT_TYPE_ASSERT, "(entity)", (const char *)&queryFormat, "entity") )
      __debugbreak();
    if ( CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\physics\\private\\core\\physicscoverwall.cpp", 467, ASSERT_TYPE_ASSERT, "(entity)", (const char *)&queryFormat, "entity") )
      __debugbreak();
  }
  if ( !BG_CoverWall_IsCoverWall(&entity->s) && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\physics\\private\\core\\physicscoverwall.cpp", 574, ASSERT_TYPE_ASSERT, "(G_PhysicsCoverWall_IsEntityCoverWall( entity ))", (const char *)&queryFormat, "G_PhysicsCoverWall_IsEntityCoverWall( entity )") )
    __debugbreak();
  v2 = 0i64;
  v3 = s_physicsCoverWallGEntities;
  do
  {
    if ( !*v3 )
    {
      s_physicsCoverWallGEntities[v2] = entity;
      G_PhysicsCoverWall_CreatePhysics(v2);
      G_PhysicsCoverWall_CreatePlayerClip(v2);
      return;
    }
    v2 = (unsigned int)(v2 + 1);
    ++v3;
  }
  while ( (unsigned int)v2 < 0x10 );
  LODWORD(v4) = 16;
  if ( CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\physics\\private\\core\\physicscoverwall.cpp", 589, ASSERT_TYPE_ASSERT, (const char *)&queryFormat.fmt + 3, "Ran out of Cover Walls on the server - you have more than %i Cover Walls", v4) )
    __debugbreak();
}

/*
==============
G_PhysicsCoverWall_CreatePhysics
==============
*/
void G_PhysicsCoverWall_CreatePhysics(unsigned int entityId)
{
  __int64 v1; 
  hkMonitorStream *Value; 
  hkMonitorStream *v3; 
  const unsigned int *CoverGrid; 
  unsigned __int16 v6; 
  int Ref; 
  unsigned int v14; 
  unsigned int v15; 
  vec3_t position; 
  vec3_t angles; 
  vec4_t quat; 

  v1 = entityId;
  Value = (hkMonitorStream *)TlsGetValue(hkMonitorStream__m_instance.m_slotID);
  v3 = Value;
  if ( Value )
    hkMonitorStream::timerBegin(Value, "TtG_PhysicsCoverWall_CreatePhysics");
  if ( (unsigned int)v1 >= 0x10 && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\physics\\private\\core\\physicscoverwall.cpp", 499, ASSERT_TYPE_ASSERT, "(entityId < 16)", (const char *)&queryFormat, "entityId < PHYSICS_COVERWALL_MAX_NUM") )
    __debugbreak();
  _RSI = s_physicsCoverWallGEntities[v1];
  if ( !_RSI && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\physics\\private\\core\\physicscoverwall.cpp", 503, ASSERT_TYPE_ASSERT, "(entity)", (const char *)&queryFormat, "entity") )
    __debugbreak();
  CoverGrid = G_CoverWall_GetCoverGrid(_RSI);
  if ( !CoverGrid && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\physics\\private\\core\\physicscoverwall.cpp", 507, ASSERT_TYPE_ASSERT, "(coverGrid)", (const char *)&queryFormat, "coverGrid") )
    __debugbreak();
  s_physicsCoverWallGCompoundShapes[0][v1] = PhysicsCoverWall_CreateDynamicCompoundShape(CoverGrid);
  s_physicsCoverWallGCompoundShapes[1][v1] = PhysicsCoverWall_CreateDynamicCompoundShape(CoverGrid);
  v6 = truncate_cast<unsigned short,short>(_RSI->s.number);
  Ref = Physics_MakeRef(Physics_RefSystem_GEntities, Physics_RelationshipSystem_None, 0, v6);
  __asm
  {
    vmovss  xmm0, dword ptr [rsi+130h]
    vmovss  dword ptr [rsp+0C8h+var_58], xmm0
    vmovss  xmm1, dword ptr [rsi+134h]
    vmovss  dword ptr [rsp+0C8h+var_58+4], xmm1
    vmovss  xmm0, dword ptr [rsi+138h]
    vmovss  dword ptr [rsp+0C8h+var_58+8], xmm0
    vmovss  xmm1, dword ptr [rsi+13Ch]
    vmovss  dword ptr [rsp+0C8h+angles], xmm1
    vmovss  xmm0, dword ptr [rsi+140h]
    vmovss  dword ptr [rsp+0C8h+angles+4], xmm0
    vmovss  xmm1, dword ptr [rsi+144h]
    vmovss  dword ptr [rsp+0C8h+angles+8], xmm1
  }
  AnglesToQuat(&angles, &quat);
  if ( s_physicsCoverWallGInstances[v1] != -1 && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\physics\\private\\core\\physicscoverwall.cpp", 520, ASSERT_TYPE_ASSERT, "(s_physicsCoverWallGInstances[entityId] == 0xFFFFFFFF)", (const char *)&queryFormat, "s_physicsCoverWallGInstances[entityId] == PHYSICSINSTANCEID_INVALID") )
    __debugbreak();
  v14 = Physics_InstantiateKeyframedBody(PHYSICS_WORLD_ID_FIRST, s_physicsCoverWallGCompoundShapes[0][v1], Ref, "dynamic cover", "PM_Plaster", 1, &position, &quat, 1, 1, 0);
  s_physicsCoverWallGInstances[v1] = v14;
  if ( v14 == -1 && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\physics\\private\\core\\physicscoverwall.cpp", 522, ASSERT_TYPE_ASSERT, "(s_physicsCoverWallGInstances[entityId] != 0xFFFFFFFF)", (const char *)&queryFormat, "s_physicsCoverWallGInstances[entityId] != PHYSICSINSTANCEID_INVALID") )
    __debugbreak();
  if ( s_physicsCoverWallGDetailInstances[v1] != -1 && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\physics\\private\\core\\physicscoverwall.cpp", 524, ASSERT_TYPE_ASSERT, "(s_physicsCoverWallGDetailInstances[entityId] == 0xFFFFFFFF)", (const char *)&queryFormat, "s_physicsCoverWallGDetailInstances[entityId] == PHYSICSINSTANCEID_INVALID") )
    __debugbreak();
  v15 = Physics_InstantiateKeyframedBody(PHYSICS_WORLD_ID_SERVER_DETAIL, s_physicsCoverWallGCompoundShapes[1][v1], Ref, "dynamic cover", "PM_Plaster", 1, &position, &quat, 1, 1, 0);
  s_physicsCoverWallGDetailInstances[v1] = v15;
  if ( v15 == -1 && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\physics\\private\\core\\physicscoverwall.cpp", 526, ASSERT_TYPE_ASSERT, "(s_physicsCoverWallGDetailInstances[entityId] != 0xFFFFFFFF)", (const char *)&queryFormat, "s_physicsCoverWallGDetailInstances[entityId] != PHYSICSINSTANCEID_INVALID") )
    __debugbreak();
  if ( v3 )
    hkMonitorStream::timerEnd(v3, "Et");
}

/*
==============
G_PhysicsCoverWall_CreatePlayerClip
==============
*/
void G_PhysicsCoverWall_CreatePlayerClip(unsigned int entityId)
{
  __int64 v1; 
  hkMonitorStream *Value; 
  hkMonitorStream *v3; 
  const dvar_t *v4; 
  __int64 v5; 
  const unsigned int *CoverGrid; 
  hknpConvexShape *PlayerClipShape; 
  unsigned __int16 v9; 
  int Ref; 
  unsigned int v17; 
  vec3_t angles; 
  vec3_t position; 
  vec4_t quat; 

  v1 = entityId;
  Value = (hkMonitorStream *)TlsGetValue(hkMonitorStream__m_instance.m_slotID);
  v3 = Value;
  if ( Value )
    hkMonitorStream::timerBegin(Value, "TtG_PhysicsCoverWall_CreatePlayerClip");
  if ( (unsigned int)v1 >= 0x10 && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\physics\\private\\core\\physicscoverwall.cpp", 539, ASSERT_TYPE_ASSERT, "(entityId < 16)", (const char *)&queryFormat, "entityId < PHYSICS_COVERWALL_MAX_NUM") )
    __debugbreak();
  v4 = DCONST_DVARMPSPBOOL_g_coverWall_usePlayerClip;
  if ( !DCONST_DVARMPSPBOOL_g_coverWall_usePlayerClip && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\universal\\dvar.h", 692, ASSERT_TYPE_ASSERT, "(dvar)", "%s\n\tDvar %s accessed after deregistration", "dvar", "g_coverWall_usePlayerClip") )
    __debugbreak();
  Dvar_CheckFrontendServerThread(v4);
  if ( v4->current.enabled )
  {
    v5 = v1;
    _RSI = s_physicsCoverWallGEntities[v1];
    if ( !_RSI && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\physics\\private\\core\\physicscoverwall.cpp", 548, ASSERT_TYPE_ASSERT, "(entity)", (const char *)&queryFormat, "entity") )
      __debugbreak();
    CoverGrid = G_CoverWall_GetCoverGrid(_RSI);
    if ( !CoverGrid && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\physics\\private\\core\\physicscoverwall.cpp", 552, ASSERT_TYPE_ASSERT, "(coverGrid)", (const char *)&queryFormat, "coverGrid") )
      __debugbreak();
    PlayerClipShape = PhysicsCoverWall_CreatePlayerClipShape(CoverGrid);
    s_physicsCoverWallGPlayerClipShapes[v5] = PlayerClipShape;
    if ( !PlayerClipShape && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\physics\\private\\core\\physicscoverwall.cpp", 556, ASSERT_TYPE_ASSERT, "(s_physicsCoverWallGPlayerClipShapes[entityId])", (const char *)&queryFormat, "s_physicsCoverWallGPlayerClipShapes[entityId]") )
      __debugbreak();
    v9 = truncate_cast<unsigned short,short>(_RSI->s.number);
    Ref = Physics_MakeRef(Physics_RefSystem_GEntities, Physics_RelationshipSystem_None, 0, v9);
    __asm
    {
      vmovss  xmm0, dword ptr [rsi+130h]
      vmovss  dword ptr [rsp+0C8h+var_48], xmm0
      vmovss  xmm1, dword ptr [rsi+134h]
      vmovss  dword ptr [rsp+0C8h+var_48+4], xmm1
      vmovss  xmm0, dword ptr [rsi+138h]
      vmovss  dword ptr [rsp+0C8h+var_48+8], xmm0
      vmovss  xmm1, dword ptr [rsi+13Ch]
      vmovss  dword ptr [rsp+0C8h+angles], xmm1
      vmovss  xmm0, dword ptr [rsi+140h]
      vmovss  dword ptr [rsp+0C8h+angles+4], xmm0
      vmovss  xmm1, dword ptr [rsi+144h]
      vmovss  dword ptr [rsp+0C8h+angles+8], xmm1
    }
    AnglesToQuat(&angles, &quat);
    if ( s_physicsCoverWallGPlayerClipInstances[v5] != -1 && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\physics\\private\\core\\physicscoverwall.cpp", 564, ASSERT_TYPE_ASSERT, "(s_physicsCoverWallGPlayerClipInstances[entityId] == 0xFFFFFFFF)", (const char *)&queryFormat, "s_physicsCoverWallGPlayerClipInstances[entityId] == PHYSICSINSTANCEID_INVALID") )
      __debugbreak();
    v17 = Physics_InstantiateKeyframedBody(PHYSICS_WORLD_ID_FIRST, s_physicsCoverWallGPlayerClipShapes[v5], Ref, "dynamic cover", "PM_Plaster", 0x10000, &position, &quat, 1, 1, 0);
    s_physicsCoverWallGPlayerClipInstances[v5] = v17;
    if ( v17 == -1 && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\physics\\private\\core\\physicscoverwall.cpp", 566, ASSERT_TYPE_ASSERT, "(s_physicsCoverWallGPlayerClipInstances[entityId] != 0xFFFFFFFF)", (const char *)&queryFormat, "s_physicsCoverWallGPlayerClipInstances[entityId] != PHYSICSINSTANCEID_INVALID") )
      __debugbreak();
  }
  if ( v3 )
    hkMonitorStream::timerEnd(v3, "Et");
}

/*
==============
G_PhysicsCoverWall_InstanceIdIsCoverWall
==============
*/
char G_PhysicsCoverWall_InstanceIdIsCoverWall(Physics_WorldId worldId, unsigned int id, int *outEntityId)
{
  unsigned int *v6; 
  int v7; 
  __int64 v8; 

  if ( (unsigned int)worldId > PHYSICS_WORLD_ID_SERVER_DETAIL && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\physics\\private\\core\\physicscoverwall.cpp", 412, ASSERT_TYPE_ASSERT, "(worldId == PHYSICS_WORLD_ID_SERVER_MAIN || worldId == PHYSICS_WORLD_ID_SERVER_DETAIL)", (const char *)&queryFormat, "worldId == PHYSICS_WORLD_ID_SERVER_MAIN || worldId == PHYSICS_WORLD_ID_SERVER_DETAIL") )
    __debugbreak();
  if ( worldId )
  {
    if ( worldId != PHYSICS_WORLD_ID_SERVER_DETAIL )
      return 0;
    v6 = s_physicsCoverWallGDetailInstances;
  }
  else
  {
    v6 = s_physicsCoverWallGInstances;
  }
  v7 = 0;
  v8 = 0i64;
  while ( id != v6[v8] )
  {
    ++v7;
    if ( ++v8 >= 16 )
      return 0;
  }
  if ( outEntityId )
    *outEntityId = v7;
  return 1;
}

/*
==============
G_PhysicsCoverWall_InstanceIdIsCoverWallPlayerClip
==============
*/
char G_PhysicsCoverWall_InstanceIdIsCoverWallPlayerClip(Physics_WorldId worldId, unsigned int id, int *outEntityId)
{
  int v5; 
  unsigned int *v6; 

  if ( worldId && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\physics\\private\\core\\physicscoverwall.cpp", 446, ASSERT_TYPE_ASSERT, "(worldId == PHYSICS_WORLD_ID_SERVER_MAIN)", (const char *)&queryFormat, "worldId == PHYSICS_WORLD_ID_SERVER_MAIN") )
    __debugbreak();
  v5 = 0;
  v6 = s_physicsCoverWallGPlayerClipInstances;
  while ( id != *v6 )
  {
    ++v5;
    if ( (__int64)++v6 >= (__int64)s_physicsCoverWallCGEntities )
      return 0;
  }
  if ( outEntityId )
    *outEntityId = v5;
  return 1;
}

/*
==============
G_PhysicsCoverWall_IsRegestered
==============
*/
__int64 G_PhysicsCoverWall_IsRegestered(gentity_s *entity)
{
  hkMonitorStream *Value; 
  hkMonitorStream *v3; 
  unsigned int v4; 
  gentity_s **v5; 
  unsigned __int8 v6; 

  Value = (hkMonitorStream *)TlsGetValue(hkMonitorStream__m_instance.m_slotID);
  v3 = Value;
  if ( Value )
    hkMonitorStream::timerBegin(Value, "TtG_PhysicsCoverWall_IsRegestered");
  if ( !entity && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\physics\\private\\core\\physicscoverwall.cpp", 476, ASSERT_TYPE_ASSERT, "(entity)", (const char *)&queryFormat, "entity", -2i64) )
    __debugbreak();
  v4 = 0;
  v5 = s_physicsCoverWallGEntities;
  while ( *v5 != entity )
  {
    ++v4;
    ++v5;
    if ( v4 >= 0x10 )
    {
      v6 = 0;
      goto LABEL_11;
    }
  }
  v6 = 1;
LABEL_11:
  if ( v3 )
    hkMonitorStream::timerEnd(v3, "Et");
  return v6;
}

/*
==============
G_PhysicsCoverWall_RemoveCoverWall
==============
*/
void G_PhysicsCoverWall_RemoveCoverWall(gentity_s *entity)
{
  hkMonitorStream *Value; 
  hkMonitorStream *v3; 
  __int64 v4; 
  gentity_s **v5; 

  Value = (hkMonitorStream *)TlsGetValue(hkMonitorStream__m_instance.m_slotID);
  v3 = Value;
  if ( Value )
    hkMonitorStream::timerBegin(Value, "TtG_PhysicsCoverWall_Remove");
  if ( !entity && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\physics\\private\\core\\physicscoverwall.cpp", 653, ASSERT_TYPE_ASSERT, "(entity)", (const char *)&queryFormat, "entity", -2i64) )
    __debugbreak();
  v4 = 0i64;
  v5 = s_physicsCoverWallGEntities;
  while ( *v5 != entity )
  {
    v4 = (unsigned int)(v4 + 1);
    ++v5;
    if ( (unsigned int)v4 >= 0x10 )
      goto LABEL_11;
  }
  G_PhysicsCoverWall_RemovePhysics(v4);
  G_PhysicsCoverWall_RemovePlayerClip(v4);
  s_physicsCoverWallGEntities[v4] = NULL;
LABEL_11:
  if ( v3 )
    hkMonitorStream::timerEnd(v3, "Et");
}

/*
==============
G_PhysicsCoverWall_RemovePhysics
==============
*/
void G_PhysicsCoverWall_RemovePhysics(unsigned int entityId)
{
  __int64 v1; 
  hkMonitorStream *Value; 
  hkMonitorStream *v3; 
  unsigned int v4; 

  v1 = entityId;
  Value = (hkMonitorStream *)TlsGetValue(hkMonitorStream__m_instance.m_slotID);
  v3 = Value;
  if ( Value )
    hkMonitorStream::timerBegin(Value, "TtG_PhysicsCoverWall_RemovePhysics");
  if ( (unsigned int)v1 >= 0x10 && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\physics\\private\\core\\physicscoverwall.cpp", 597, ASSERT_TYPE_ASSERT, "(entityId < 16)", (const char *)&queryFormat, "entityId < PHYSICS_COVERWALL_MAX_NUM", -2i64) )
    __debugbreak();
  v4 = s_physicsCoverWallGInstances[v1];
  if ( v4 != -1 )
  {
    Physics_DestroyInstance(PHYSICS_WORLD_ID_FIRST, v4, 0);
    s_physicsCoverWallGInstances[v1] = -1;
    if ( !s_physicsCoverWallGCompoundShapes[0][v1] && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\physics\\private\\core\\physicscoverwall.cpp", 610, ASSERT_TYPE_ASSERT, "(s_physicsCoverWallGCompoundShapes[PHYSICS_WORLD_ID_SERVER_MAIN][entityId])", (const char *)&queryFormat, "s_physicsCoverWallGCompoundShapes[PHYSICS_WORLD_ID_SERVER_MAIN][entityId]") )
      __debugbreak();
    Physics_ReleaseShape(PHYSICS_WORLD_ID_FIRST, s_physicsCoverWallGCompoundShapes[0][v1], 1);
    s_physicsCoverWallGCompoundShapes[0][v1] = NULL;
    if ( s_physicsCoverWallGDetailInstances[v1] == -1 && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\physics\\private\\core\\physicscoverwall.cpp", 615, ASSERT_TYPE_ASSERT, "(s_physicsCoverWallGDetailInstances[entityId] != 0xFFFFFFFF)", (const char *)&queryFormat, "s_physicsCoverWallGDetailInstances[entityId] != PHYSICSINSTANCEID_INVALID") )
      __debugbreak();
    Physics_DestroyInstance(PHYSICS_WORLD_ID_SERVER_DETAIL, s_physicsCoverWallGDetailInstances[v1], 0);
    s_physicsCoverWallGDetailInstances[v1] = -1;
    if ( !s_physicsCoverWallGCompoundShapes[1][v1] && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\physics\\private\\core\\physicscoverwall.cpp", 619, ASSERT_TYPE_ASSERT, "(s_physicsCoverWallGCompoundShapes[PHYSICS_WORLD_ID_SERVER_DETAIL][entityId])", (const char *)&queryFormat, "s_physicsCoverWallGCompoundShapes[PHYSICS_WORLD_ID_SERVER_DETAIL][entityId]") )
      __debugbreak();
    Physics_ReleaseShape(PHYSICS_WORLD_ID_SERVER_DETAIL, s_physicsCoverWallGCompoundShapes[1][v1], 1);
    s_physicsCoverWallGCompoundShapes[1][v1] = NULL;
  }
  if ( v3 )
    hkMonitorStream::timerEnd(v3, "Et");
}

/*
==============
G_PhysicsCoverWall_RemovePlayerClip
==============
*/
void G_PhysicsCoverWall_RemovePlayerClip(unsigned int entityId)
{
  __int64 v1; 
  hkMonitorStream *Value; 
  hkMonitorStream *v3; 
  unsigned int v4; 

  v1 = entityId;
  Value = (hkMonitorStream *)TlsGetValue(hkMonitorStream__m_instance.m_slotID);
  v3 = Value;
  if ( Value )
    hkMonitorStream::timerBegin(Value, "TtG_PhysicsCoverWall_RemovePlayerClip");
  if ( (unsigned int)v1 >= 0x10 && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\physics\\private\\core\\physicscoverwall.cpp", 629, ASSERT_TYPE_ASSERT, "(entityId < 16)", (const char *)&queryFormat, "entityId < PHYSICS_COVERWALL_MAX_NUM", -2i64) )
    __debugbreak();
  v4 = s_physicsCoverWallGPlayerClipInstances[v1];
  if ( v4 != -1 )
  {
    Physics_DestroyInstance(PHYSICS_WORLD_ID_FIRST, v4, 0);
    s_physicsCoverWallGPlayerClipInstances[v1] = -1;
    if ( !s_physicsCoverWallGPlayerClipShapes[v1] && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\physics\\private\\core\\physicscoverwall.cpp", 642, ASSERT_TYPE_ASSERT, "(s_physicsCoverWallGPlayerClipShapes[entityId])", (const char *)&queryFormat, "s_physicsCoverWallGPlayerClipShapes[entityId]") )
      __debugbreak();
    Physics_ReleaseShape(PHYSICS_WORLD_ID_FIRST, s_physicsCoverWallGPlayerClipShapes[v1], 1);
    s_physicsCoverWallGPlayerClipShapes[v1] = NULL;
  }
  if ( v3 )
    hkMonitorStream::timerEnd(v3, "Et");
}

/*
==============
G_PhysicsCoverWall_UpdateCoverWall
==============
*/
void G_PhysicsCoverWall_UpdateCoverWall(gentity_s *entity)
{
  hkMonitorStream *Value; 
  hkMonitorStream *v3; 
  unsigned int v4; 
  gentity_s **v5; 
  hkMonitorStream *v6; 
  hkMonitorStream *v7; 

  Value = (hkMonitorStream *)TlsGetValue(hkMonitorStream__m_instance.m_slotID);
  v3 = Value;
  if ( Value )
    hkMonitorStream::timerBegin(Value, "TtG_PhysicsCoverWall_Update");
  if ( !entity )
  {
    if ( CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\physics\\private\\core\\physicscoverwall.cpp", 765, ASSERT_TYPE_ASSERT, "(entity)", (const char *)&queryFormat, "entity", -2i64) )
      __debugbreak();
    if ( CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\physics\\private\\core\\physicscoverwall.cpp", 467, ASSERT_TYPE_ASSERT, "(entity)", (const char *)&queryFormat, "entity") )
      __debugbreak();
  }
  if ( !BG_CoverWall_IsCoverWall(&entity->s) && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\physics\\private\\core\\physicscoverwall.cpp", 767, ASSERT_TYPE_ASSERT, "(G_PhysicsCoverWall_IsEntityCoverWall( entity ))", (const char *)&queryFormat, "G_PhysicsCoverWall_IsEntityCoverWall( entity )") )
    __debugbreak();
  v4 = 0;
  v5 = s_physicsCoverWallGEntities;
  while ( *v5 != entity )
  {
    ++v4;
    ++v5;
    if ( v4 >= 0x10 )
    {
      if ( CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\physics\\private\\core\\physicscoverwall.cpp", 786, ASSERT_TYPE_ASSERT, (const char *)&queryFormat.fmt + 3, "Failed to find Cover Wall for Update") )
        __debugbreak();
      goto LABEL_21;
    }
  }
  if ( G_PhysicsCoverWall_UpdatePhysics(v4) )
  {
    v6 = (hkMonitorStream *)TlsGetValue(hkMonitorStream__m_instance.m_slotID);
    v7 = v6;
    if ( v6 )
      hkMonitorStream::timerBegin(v6, "TtG_PhysicsCoverWall_UpdatePlayerClip");
    G_PhysicsCoverWall_RemovePlayerClip(v4);
    G_PhysicsCoverWall_CreatePlayerClip(v4);
    if ( v7 )
      hkMonitorStream::timerEnd(v7, "Et");
  }
LABEL_21:
  if ( v3 )
    hkMonitorStream::timerEnd(v3, "Et");
}

/*
==============
G_PhysicsCoverWall_UpdatePhysics
==============
*/
__int64 G_PhysicsCoverWall_UpdatePhysics(unsigned int entityId)
{
  __int64 v1; 
  unsigned __int8 v2; 
  hkMonitorStream *Value; 
  __int64 v4; 
  __int64 v5; 
  const gentity_s *v6; 
  const unsigned int *CoverGrid; 
  hknpCompoundShape *v8; 
  hknpCompoundShape *v9; 
  int v10; 
  char v11; 
  int v12; 
  int v13; 
  __int64 v14; 
  hkFreeListArrayElement<hknpShapeInstance> *m_data; 
  char v16; 
  char v17; 
  char GridPos; 
  bool v19; 
  hkMonitorStream *v20; 
  int zMin; 
  int zMax; 
  hknpCompoundShape *v24; 
  const unsigned int *v25; 
  int yMax; 
  int yMin; 
  hkMonitorStream *v28; 
  hknpCompoundShape *v29; 
  __int64 v30; 
  __int64 v31; 
  hkHandle<unsigned short,65535,hknpShapeInstanceIdDiscriminant> instanceIds; 
  int v33; 
  int xMin; 
  int xMax; 

  v30 = -2i64;
  v1 = entityId;
  v2 = 0;
  Value = (hkMonitorStream *)TlsGetValue(hkMonitorStream__m_instance.m_slotID);
  v4 = (__int64)Value;
  v28 = Value;
  if ( Value )
    hkMonitorStream::timerBegin(Value, "TtG_PhysicsCoverWall_UpdatePhysics");
  v31 = v4;
  if ( (unsigned int)v1 >= 0x10 && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\physics\\private\\core\\physicscoverwall.cpp", 683, ASSERT_TYPE_ASSERT, "(entityId < 16)", (const char *)&queryFormat, "entityId < PHYSICS_COVERWALL_MAX_NUM") )
    __debugbreak();
  v5 = v1;
  v6 = s_physicsCoverWallGEntities[v1];
  if ( !v6 && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\physics\\private\\core\\physicscoverwall.cpp", 686, ASSERT_TYPE_ASSERT, "(entity)", (const char *)&queryFormat, "entity") )
    __debugbreak();
  CoverGrid = G_CoverWall_GetCoverGrid(v6);
  v25 = CoverGrid;
  if ( !CoverGrid && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\physics\\private\\core\\physicscoverwall.cpp", 689, ASSERT_TYPE_ASSERT, "(coverGrid)", (const char *)&queryFormat, "coverGrid") )
    __debugbreak();
  BG_CoverWall_GetGridExtents(CoverGrid, &xMin, &xMax, &yMin, &yMax, &zMin, &zMax);
  v8 = s_physicsCoverWallGCompoundShapes[0][v5];
  v29 = v8;
  v9 = s_physicsCoverWallGCompoundShapes[1][v5];
  v24 = v9;
  v10 = 0;
  v11 = 0;
  v12 = -4;
  do
  {
    v13 = -6;
    do
    {
      instanceIds.m_value = v10;
      v33 = v10 + 1;
      v14 = (unsigned __int16)v10;
      m_data = v9->m_instances.m_elements.m_data;
      v16 = (v8->m_instances.m_elements.m_data[v14].m_pod.m_transform.m_rotation.m_col0.m_quad.m128_i32[3] & 0x40) != 0;
      v17 = (m_data[v14].m_pod.m_transform.m_rotation.m_col0.m_quad.m128_i32[3] & 0x40) != 0;
      GridPos = BG_CoverWall_GetGridPos(CoverGrid, v13, 0, v12);
      v19 = GridPos;
      if ( v16 == GridPos && v17 == GridPos )
      {
        v9 = v24;
      }
      else
      {
        hknpCompoundShape::setInstancesEnabled(v8, &instanceIds, 1, GridPos);
        v9 = v24;
        hknpCompoundShape::setInstancesEnabled(v24, &instanceIds, 1, v19);
        if ( !v2 && (v13 <= xMin || v13 >= xMax || v12 <= zMin || v12 >= zMax) )
          v2 = 1;
        v11 = 1;
      }
      ++v13;
      v10 = v33;
      CoverGrid = v25;
    }
    while ( v13 <= 6 );
    ++v12;
  }
  while ( v12 <= 9 );
  v20 = v28;
  if ( v11 )
  {
    hknpCompoundShape::rebuild(v29);
    hknpCompoundShape::rebuild(v9);
  }
  if ( v20 )
    hkMonitorStream::timerEnd(v20, "Et");
  return v2;
}

/*
==============
PhysicsCoverWall_CreateDynamicCompoundShape
==============
*/
hknpCompoundShape *PhysicsCoverWall_CreateDynamicCompoundShape(const unsigned int *coverGrid)
{
  hknpShape *v8; 
  int v9; 
  int v12; 
  hkMemoryAllocator *v29; 
  int v30; 
  hknpShapeInstance *v31; 
  hknpShapeInstance *v36; 
  hkMemoryRouter *Value; 
  hknpCompoundShape *v38; 
  hknpCompoundShape *v39; 
  hknpCompoundShape *v40; 
  hkMemoryAllocator *v41; 
  __int64 v42; 
  hkReferencedObject **p_m_shape; 
  hknpCompoundShape *result; 
  hknpShapeInstance *array; 
  int numInstances; 
  int v50; 
  __int64 v51; 
  hknpCompoundShapeCinfo cinfo; 
  vec3_t center; 
  vec3_t outLocalPos; 
  vec3_t outNoise; 
  hkTransformf transform; 
  char v59; 
  void *retaddr; 

  _RAX = &retaddr;
  v51 = -2i64;
  __asm
  {
    vmovaps xmmword ptr [rax-38h], xmm6
    vmovaps xmmword ptr [rax-48h], xmm7
    vxorps  xmm6, xmm6, xmm6
    vmovss  dword ptr [rsp+148h+center], xmm6
    vmovss  dword ptr [rsp+148h+center+4], xmm6
    vmovss  dword ptr [rsp+148h+center+8], xmm6
  }
  *(double *)&_XMM0 = BG_CoverWall_GetCollisionRadius();
  __asm
  {
    vmovss  [rsp+148h+var_CC], xmm0
    vmovaps xmm1, xmm0; radius
  }
  v8 = Physics_CreateShapeSphere(&center, *(float *)&_XMM1, NULL, 0);
  v8->m_userData = BG_CoverWall_GetSurfaceType();
  array = NULL;
  numInstances = 0;
  v50 = 0x80000000;
  __asm { vmovss  [rsp+148h+var_9C], xmm6 }
  v9 = -4;
  __asm
  {
    vmovss  xmm7, cs:__real@3f800000
    vmovss  xmm6, cs:__real@3d000000
  }
  do
  {
    v12 = -6;
    do
    {
      __asm { vmovaps xmm3, xmm7; sagAnimWeight }
      BG_CoverWall_GridPosToLocalPos(v12, 0, v9, *(float *)&_XMM3, &outLocalPos);
      BG_CoverWall_CalcNoiseForPosition(v12, 0, v9, &outNoise);
      __asm
      {
        vmovss  xmm0, dword ptr [rsp+148h+var_C8]
        vaddss  xmm3, xmm0, dword ptr [rsp+148h+outNoise]
        vmovss  dword ptr [rsp+148h+var_C8], xmm3
        vmovss  xmm1, dword ptr [rsp+148h+var_C8+4]
        vaddss  xmm2, xmm1, dword ptr [rsp+148h+outNoise+4]
        vmovss  dword ptr [rsp+148h+var_C8+4], xmm2
        vmovss  xmm0, dword ptr [rsp+148h+var_C8+8]
        vaddss  xmm1, xmm0, dword ptr [rsp+148h+outNoise+8]
        vmovss  dword ptr [rsp+148h+var_C8+8], xmm1
        vmulss  xmm4, xmm3, xmm6
        vmulss  xmm5, xmm2, xmm6
        vmulss  xmm3, xmm1, xmm6
        vmovups ymm0, ymmword ptr cs:?g_vectorfConstants@@3QBT__m128@@B+200h; __m128 const near * const g_vectorfConstants
        vmovups ymmword ptr [rsp+148h+transform.m_rotation.baseclass_0.m_col0.m_quad], ymm0
        vmovups xmm0, xmmword ptr cs:?g_vectorfConstants@@3QBT__m128@@B+220h; __m128 const near * const g_vectorfConstants
        vmovups xmmword ptr [rsp+148h+transform.m_rotation.baseclass_0.m_col2.m_quad], xmm0
        vmovups xmm1, xmmword ptr [rsp+0A0h]
        vmovss  xmm1, xmm1, xmm4
        vinsertps xmm1, xmm1, xmm5, 10h
        vinsertps xmm1, xmm1, xmm3, 20h ; ' '
        vmovups xmmword ptr [rsp+0A0h], xmm1
        vmovups xmmword ptr [rsp+148h+transform.m_translation.m_quad], xmm1
      }
      v29 = hkMemHeapAllocator();
      v30 = numInstances;
      if ( numInstances == (v50 & 0x3FFFFFFF) )
      {
        hkArrayUtil::_reserveMore(v29, &array, 112);
        v30 = numInstances;
      }
      v31 = array;
      _RCX = &array[v30];
      if ( _RCX )
      {
        __asm
        {
          vmovups ymm0, ymmword ptr cs:?g_vectorfConstants@@3QBT__m128@@B+200h; __m128 const near * const g_vectorfConstants
          vmovups ymmword ptr [rcx], ymm0
          vmovups ymm1, ymmword ptr cs:?g_vectorfConstants@@3QBT__m128@@B+220h; __m128 const near * const g_vectorfConstants
          vmovups ymmword ptr [rcx+20h], ymm1
          vmovups xmm0, xmmword ptr cs:?g_vectorfConstants@@3QBT__m128@@B+60h; __m128 const near * const g_vectorfConstants
          vmovups xmmword ptr [rcx+40h], xmm0
        }
        _RCX->m_shape.m_ptr = NULL;
        *(_DWORD *)&_RCX->m_shapeTag = -1;
        _RCX->m_isEmpty = 0;
        _RCX->m_nextEmptyElement = 0;
        _RCX->m_instanceId.m_value = -1;
        _RCX->m_parentShape = NULL;
        _RCX->m_transform.m_rotation.m_col0.m_quad.m128_i32[3] = 1056964672;
        v30 = numInstances;
        v31 = array;
      }
      v36 = &v31[v30];
      numInstances = v30 + 1;
      hknpShapeInstance::setShape(v36, v8);
      hknpShapeInstance::setTransform(v36, &transform);
      if ( !BG_CoverWall_GetGridPos(coverGrid, v12, 0, v9) )
      {
        v36->m_transform.m_rotation.m_col0.m_quad.m128_i32[3] &= ~0x40u;
        v36->m_transform.m_rotation.m_col0.m_quad.m128_i32[3] |= 0x3F000000u;
      }
      ++v12;
    }
    while ( v12 <= 6 );
    ++v9;
  }
  while ( v9 <= 9 );
  hkReferencedObject::removeReference(v8);
  hknpCompoundShapeCinfo::hknpCompoundShapeCinfo(&cinfo, array, numInstances, NULL);
  Value = (hkMemoryRouter *)TlsGetValue(hkMemoryRouter::s_memoryRouter.m_slotID);
  if ( !Value )
    Value = hkMemoryRouter::s_fallbackRouter;
  v38 = (hknpCompoundShape *)Value->m_heap->blockAlloc(Value->m_heap, 288i64);
  *(_QWORD *)outLocalPos.v = v38;
  if ( v38 )
  {
    hknpCompoundShape::hknpCompoundShape(v38, &cinfo);
    v40 = v39;
  }
  else
  {
    v40 = NULL;
  }
  v41 = hkMemHeapAllocator();
  v42 = numInstances - 1;
  if ( numInstances - 1 >= 0 )
  {
    p_m_shape = (hkReferencedObject **)&array[v42].m_shape;
    do
    {
      if ( *p_m_shape )
        hkReferencedObject::removeReference(*p_m_shape);
      p_m_shape -= 14;
      --v42;
    }
    while ( v42 >= 0 );
  }
  numInstances = 0;
  if ( v50 >= 0 )
    hkMemoryAllocator::bufFree2(v41, array, 112, v50 & 0x3FFFFFFF);
  result = v40;
  _R11 = &v59;
  __asm
  {
    vmovaps xmm6, xmmword ptr [r11-10h]
    vmovaps xmm7, xmmword ptr [r11-20h]
  }
  return result;
}

/*
==============
PhysicsCoverWall_CreatePlayerClipShape
==============
*/
hknpConvexShape *PhysicsCoverWall_CreatePlayerClipShape(const unsigned int *coverGrid)
{
  int v9; 
  int v10; 
  int v11; 
  bool v40; 
  hknpConvexShape *result; 
  vec3_t maxs; 
  vec3_t mins; 
  vec3_t outLocalPos; 
  vec3_t outNoise; 
  char v64; 
  void *retaddr; 

  _RAX = &retaddr;
  __asm
  {
    vmovaps xmmword ptr [rax-28h], xmm6
    vmovaps xmmword ptr [rax-38h], xmm7
    vmovaps xmmword ptr [rax-48h], xmm8
    vmovss  xmm7, cs:__real@459c4000
    vmovss  xmm0, cs:__real@c59c4000
    vmovss  xmm8, cs:__real@3f800000
    vmovss  dword ptr [rbp+57h+mins], xmm7
    vmovss  dword ptr [rbp+57h+mins+4], xmm7
    vmovss  dword ptr [rbp+57h+mins+8], xmm7
    vmovss  dword ptr [rbp+57h+maxs], xmm0
    vmovss  dword ptr [rbp+57h+maxs+4], xmm0
    vmovss  dword ptr [rbp+57h+maxs+8], xmm0
  }
  v9 = 0;
  v10 = -4;
  do
  {
    v11 = -6;
    do
    {
      if ( BG_CoverWall_GetGridPos(coverGrid, v11, 0, v10) )
      {
        __asm { vmovaps xmm3, xmm8; sagAnimWeight }
        ++v9;
        BG_CoverWall_GridPosToLocalPos(v11, 0, v10, *(float *)&_XMM3, &outLocalPos);
        BG_CoverWall_CalcNoiseForPosition(v11, 0, v10, &outNoise);
        __asm
        {
          vmovss  xmm1, dword ptr [rbp+57h+mins]
          vmovss  xmm0, dword ptr [rbp+57h+outNoise]
          vaddss  xmm2, xmm0, dword ptr [rbp+57h+var_70]
          vmovss  xmm0, dword ptr [rbp+57h+outNoise+4]
          vaddss  xmm3, xmm0, dword ptr [rbp+57h+var_70+4]
          vmovss  xmm0, dword ptr [rbp+57h+var_70+8]
          vaddss  xmm4, xmm0, dword ptr [rbp+57h+outNoise+8]
          vcmpltss xmm0, xmm2, xmm1
          vblendvps xmm0, xmm1, xmm2, xmm0
          vmovss  xmm1, dword ptr [rbp+57h+maxs]
          vmovss  dword ptr [rbp+57h+mins], xmm0
          vcmpltss xmm0, xmm1, xmm2
          vblendvps xmm0, xmm1, xmm2, xmm0
          vmovss  xmm1, dword ptr [rbp+57h+maxs+4]
          vmovss  dword ptr [rbp+57h+maxs], xmm0
          vmovss  dword ptr [rbp+57h+var_70], xmm2
          vmovss  xmm2, dword ptr [rbp+57h+mins+4]
          vcmpltss xmm0, xmm3, xmm2
          vblendvps xmm0, xmm2, xmm3, xmm0
          vmovss  xmm2, dword ptr [rbp+57h+mins+8]
          vmovss  dword ptr [rbp+57h+mins+4], xmm0
          vcmpltss xmm0, xmm1, xmm3
          vblendvps xmm0, xmm1, xmm3, xmm0
          vmovss  xmm1, dword ptr [rbp+57h+maxs+8]
          vmovss  dword ptr [rbp+57h+maxs+4], xmm0
          vcmpltss xmm0, xmm4, xmm2
          vblendvps xmm0, xmm2, xmm4, xmm0
          vmovss  dword ptr [rbp+57h+mins+8], xmm0
          vcmpltss xmm0, xmm1, xmm4
          vblendvps xmm0, xmm1, xmm4, xmm0
          vmovss  dword ptr [rbp+57h+maxs+8], xmm0
          vmovss  dword ptr [rbp+57h+var_70+4], xmm3
          vmovss  dword ptr [rbp+57h+var_70+8], xmm4
        }
      }
      ++v11;
    }
    while ( v11 <= 6 );
    ++v10;
  }
  while ( v10 <= 9 );
  __asm
  {
    vmovss  xmm0, dword ptr [rbp+57h+mins]
    vmovss  xmm6, dword ptr cs:__xmm@7fffffff7fffffff7fffffff7fffffff
    vandps  xmm0, xmm0, xmm6
    vcomiss xmm0, xmm7
  }
  v40 = CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\physics\\private\\core\\physicscoverwall.cpp", 304, ASSERT_TYPE_ASSERT, "(abs( minExtents[0] ) <= 5000 && abs( minExtents[1] ) <= 5000 && abs( minExtents[1] ) <= 5000)", (const char *)&queryFormat, "abs( minExtents[0] ) <= 5000 && abs( minExtents[1] ) <= 5000 && abs( minExtents[1] ) <= 5000");
  if ( v40 )
    __debugbreak();
  __asm
  {
    vmovss  xmm0, dword ptr [rbp+57h+maxs]
    vandps  xmm0, xmm0, xmm6
    vcomiss xmm0, xmm7
  }
  if ( v40 )
  {
    if ( CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\physics\\private\\core\\physicscoverwall.cpp", 305, ASSERT_TYPE_ASSERT, "(abs( maxExtents[0] ) <= 5000 && abs( maxExtents[1] ) <= 5000 && abs( maxExtents[1] ) <= 5000)", (const char *)&queryFormat, "abs( maxExtents[0] ) <= 5000 && abs( maxExtents[1] ) <= 5000 && abs( maxExtents[1] ) <= 5000") )
      __debugbreak();
  }
  else
  {
    __asm
    {
      vmovss  xmm0, dword ptr [rbp+57h+maxs+4]
      vandps  xmm0, xmm0, xmm6
      vcomiss xmm0, xmm7
    }
  }
  if ( v9 <= 0 )
  {
    __asm
    {
      vmovss  xmm0, cs:__real@bf800000
      vmovss  dword ptr [rbp+57h+mins], xmm0
      vmovss  dword ptr [rbp+57h+mins+4], xmm0
      vmovss  dword ptr [rbp+57h+mins+8], xmm0
      vmovss  dword ptr [rbp+57h+maxs], xmm8
      vmovss  dword ptr [rbp+57h+maxs+4], xmm8
      vmovss  dword ptr [rbp+57h+maxs+8], xmm8
    }
  }
  else
  {
    *(double *)&_XMM0 = BG_CoverWall_GetCollisionRadius();
    __asm
    {
      vaddss  xmm3, xmm0, cs:__real@3f000000
      vmovss  xmm1, dword ptr [rbp+57h+mins]
      vmovss  xmm0, dword ptr [rbp+57h+mins+4]
      vsubss  xmm2, xmm1, xmm3
      vsubss  xmm1, xmm0, xmm3
      vmovss  dword ptr [rbp+57h+mins], xmm2
      vmovss  xmm2, dword ptr [rbp+57h+mins+8]
      vsubss  xmm0, xmm2, xmm3
      vaddss  xmm2, xmm3, dword ptr [rbp+57h+maxs]
      vmovss  dword ptr [rbp+57h+mins+8], xmm0
      vaddss  xmm0, xmm3, dword ptr [rbp+57h+maxs+8]
      vmovss  dword ptr [rbp+57h+mins+4], xmm1
      vaddss  xmm1, xmm3, dword ptr [rbp+57h+maxs+4]
      vmovss  dword ptr [rbp+57h+maxs+8], xmm0
      vmovss  dword ptr [rbp+57h+maxs], xmm2
      vmovss  dword ptr [rbp+57h+maxs+4], xmm1
    }
  }
  result = (hknpConvexShape *)Physics_CreateShapeConvexHullFromAABB(&mins, &maxs);
  _R11 = &v64;
  __asm
  {
    vmovaps xmm6, xmmword ptr [r11-10h]
    vmovaps xmm7, xmmword ptr [r11-20h]
    vmovaps xmm8, xmmword ptr [r11-30h]
  }
  return result;
}

/*
==============
PhysicsCoverWall_Init
==============
*/
void PhysicsCoverWall_Init(void)
{
  hknpCompoundShape *(*v0)[16]; 
  __int64 v1; 
  __int64 v2; 
  signed __int64 v3; 
  centity_t *(*v4)[16]; 
  hknpConvexShape *(*v5)[16]; 
  unsigned int (*v6)[16]; 
  __int64 i; 
  unsigned int (*v8)[16]; 
  __int64 j; 
  unsigned int (*v10)[16]; 
  __int64 k; 
  unsigned int (*v12)[16]; 
  __int64 m; 
  __int64 v14; 
  hknpCompoundShape *(*v15)[16]; 

  v0 = s_physicsCoverWallCGCompoundShapes;
  v1 = 4i64;
  v2 = 4i64;
  v3 = (char *)s_physicsCoverWallGCompoundShapes - (char *)s_physicsCoverWallCGCompoundShapes;
  v4 = s_physicsCoverWallCGEntities;
  do
  {
    (*v4)[0] = NULL;
    (*v4)[1] = NULL;
    (*v4)[2] = NULL;
    v4 = (centity_t *(*)[16])((char *)v4 + 64);
    (*v4)[-5] = NULL;
    (*v4)[-4] = NULL;
    (*v4)[-3] = NULL;
    (*v4)[-2] = NULL;
    (*v4)[-1] = NULL;
    --v2;
  }
  while ( v2 );
  v5 = s_physicsCoverWallCGPlayerClipShapes;
  do
  {
    (*v5)[0] = NULL;
    (*v5)[1] = NULL;
    (*v5)[2] = NULL;
    v5 = (hknpConvexShape *(*)[16])((char *)v5 + 64);
    (*v5)[-5] = NULL;
    (*v5)[-4] = NULL;
    (*v5)[-3] = NULL;
    (*v5)[-2] = NULL;
    (*v5)[-1] = NULL;
    --v1;
  }
  while ( v1 );
  v6 = s_physicsCoverWallCGPredInstances;
  for ( i = 32i64; i; --i )
  {
    *(_DWORD *)v6 = -1;
    v6 = (unsigned int (*)[16])((char *)v6 + 4);
  }
  v8 = s_physicsCoverWallCGDetailInstances;
  for ( j = 32i64; j; --j )
  {
    *(_DWORD *)v8 = -1;
    v8 = (unsigned int (*)[16])((char *)v8 + 4);
  }
  v10 = s_physicsCoverWallCGAuthInstances;
  for ( k = 32i64; k; --k )
  {
    *(_DWORD *)v10 = -1;
    v10 = (unsigned int (*)[16])((char *)v10 + 4);
  }
  v12 = s_physicsCoverWallCGPlayerClipInstances;
  for ( m = 32i64; m; --m )
  {
    *(_DWORD *)v12 = -1;
    v12 = (unsigned int (*)[16])((char *)v12 + 4);
  }
  do
  {
    *(_QWORD *)s_physicsCoverWallGPlayerClipInstances = -1i64;
    *(_QWORD *)&s_physicsCoverWallGPlayerClipInstances[2] = -1i64;
    *(_QWORD *)&s_physicsCoverWallGPlayerClipInstances[4] = -1i64;
    memset(s_physicsCoverWallGPlayerClipShapes, 0, sizeof(s_physicsCoverWallGPlayerClipShapes));
    *(_QWORD *)&s_physicsCoverWallGPlayerClipInstances[6] = -1i64;
    *(_QWORD *)&s_physicsCoverWallGPlayerClipInstances[8] = -1i64;
    memset(s_physicsCoverWallGEntities, 0, sizeof(s_physicsCoverWallGEntities));
    v14 = 16i64;
    *(_QWORD *)&s_physicsCoverWallGPlayerClipInstances[10] = -1i64;
    v15 = v0;
    *(_QWORD *)&s_physicsCoverWallGPlayerClipInstances[12] = -1i64;
    *(_QWORD *)&s_physicsCoverWallGPlayerClipInstances[14] = -1i64;
    *(_QWORD *)s_physicsCoverWallGDetailInstances = -1i64;
    *(_QWORD *)&s_physicsCoverWallGDetailInstances[2] = -1i64;
    *(_QWORD *)&s_physicsCoverWallGDetailInstances[4] = -1i64;
    *(_QWORD *)&s_physicsCoverWallGDetailInstances[6] = -1i64;
    *(_QWORD *)&s_physicsCoverWallGDetailInstances[8] = -1i64;
    *(_QWORD *)&s_physicsCoverWallGDetailInstances[10] = -1i64;
    *(_QWORD *)&s_physicsCoverWallGDetailInstances[12] = -1i64;
    *(_QWORD *)&s_physicsCoverWallGDetailInstances[14] = -1i64;
    *(_QWORD *)s_physicsCoverWallGInstances = -1i64;
    *(_QWORD *)&s_physicsCoverWallGInstances[2] = -1i64;
    *(_QWORD *)&s_physicsCoverWallGInstances[4] = -1i64;
    *(_QWORD *)&s_physicsCoverWallGInstances[6] = -1i64;
    *(_QWORD *)&s_physicsCoverWallGInstances[8] = -1i64;
    *(_QWORD *)&s_physicsCoverWallGInstances[10] = -1i64;
    *(_QWORD *)&s_physicsCoverWallGInstances[12] = -1i64;
    *(_QWORD *)&s_physicsCoverWallGInstances[14] = -1i64;
    do
    {
      (*v15)[0] = NULL;
      (*v15)[16] = NULL;
      *(_QWORD *)((char *)v15 + v3) = 0i64;
      (*v15)[32] = NULL;
      *(hknpCompoundShape **)((char *)&(*v15)[16] + v3) = NULL;
      v15 = (hknpCompoundShape *(*)[16])((char *)v15 + 8);
      --v14;
    }
    while ( v14 );
    v0 += 3;
    v3 -= 384i64;
  }
  while ( (__int64)v0 < (__int64)s_physicsCoverWallCGPlayerClipShapes );
}

/*
==============
PhysicsCoverWall_IsCoverWall
==============
*/
bool PhysicsCoverWall_IsCoverWall(Physics_WorldId worldId, int ref)
{
  __int64 v4; 
  Physics_RefSystem RefSystem; 
  LocalClientNum_t LocalClientForWorld; 
  __int64 v7; 
  CgEntitySystem *v8; 
  __int64 v10; 
  __int64 v11; 

  LOWORD(v4) = Physics_GetRefId(ref);
  RefSystem = Physics_GetRefSystem(ref);
  if ( RefSystem == Physics_RefSystem_GEntities )
  {
    if ( (unsigned __int16)v4 >= 0x800u && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\physics\\private\\core\\physicscoverwall.cpp", 382, ASSERT_TYPE_ASSERT, "(unsigned)( refId ) < (unsigned)( ( 2048 ) )", "refId doesn't index MAX_GENTITIES\n\t%i not in [0, %i)", (unsigned __int16)v4, 2048) )
      __debugbreak();
    return BG_CoverWall_IsCoverWall(&g_entities[(unsigned __int16)v4].s);
  }
  else if ( RefSystem == Physics_RefSystem_CEntities )
  {
    if ( (unsigned __int16)v4 >= 0x800u && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\physics\\private\\core\\physicscoverwall.cpp", 390, ASSERT_TYPE_ASSERT, "(unsigned)( refId ) < (unsigned)( ( 2048 ) )", "refId doesn't index MAX_GENTITIES\n\t%i not in [0, %i)", (unsigned __int16)v4, 2048) )
      __debugbreak();
    LocalClientForWorld = Physics_GetLocalClientForWorld(worldId);
    v7 = LocalClientForWorld;
    v4 = (unsigned __int16)v4;
    if ( !(_BYTE)CgEntitySystem::ms_allocatedType )
    {
      LODWORD(v11) = LocalClientForWorld;
      if ( CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\cgame\\cg_entity.h", 288, ASSERT_TYPE_ASSERT, "(ms_allocatedType != GameModeType::NONE)", "%s\n\tTrying to access the entity system for localClientNum %d but the entity system type is not known\n", "ms_allocatedType != GameModeType::NONE", v11) )
        __debugbreak();
    }
    if ( (unsigned int)v7 >= CgEntitySystem::ms_allocatedCount )
    {
      LODWORD(v11) = CgEntitySystem::ms_allocatedCount;
      LODWORD(v10) = v7;
      if ( CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\cgame\\cg_entity.h", 289, ASSERT_TYPE_ASSERT, "(unsigned)( localClientNum ) < (unsigned)( ms_allocatedCount )", "localClientNum doesn't index ms_allocatedCount\n\t%i not in [0, %i)", v10, v11) )
        __debugbreak();
    }
    if ( !CgEntitySystem::ms_entitySystemArray[v7] )
    {
      LODWORD(v11) = v7;
      if ( CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\cgame\\cg_entity.h", 290, ASSERT_TYPE_ASSERT, "(ms_entitySystemArray[localClientNum])", "%s\n\tTrying to access unallocated entity system for localClientNum %d\n", "ms_entitySystemArray[localClientNum]", v11) )
        __debugbreak();
    }
    v8 = CgEntitySystem::ms_entitySystemArray[v7];
    if ( (unsigned int)v4 >= 0x800 )
    {
      LODWORD(v11) = 2048;
      LODWORD(v10) = v4;
      if ( CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\cgame\\cg_entity.h", 518, ASSERT_TYPE_ASSERT, "(unsigned)( entityIndex ) < (unsigned)( (( 2048 ) + 0) )", "entityIndex doesn't index MAX_LOCAL_CENTITIES\n\t%i not in [0, %i)", v10, v11) )
        __debugbreak();
    }
    return BG_CoverWall_IsCoverWall(&v8->m_entities[v4].nextState);
  }
  else
  {
    return 0;
  }
}

/*
==============
PhysicsCoverWall_Load
==============
*/
void PhysicsCoverWall_Load(SaveGame *save)
{
  hkMonitorStream *Value; 
  __int64 v3; 
  __int64 v4; 
  __int64 v5; 
  __int64 v6; 
  unsigned int v7; 
  unsigned int v8; 
  unsigned int m_serialAndIndex; 
  unsigned int v10; 
  unsigned int v11; 
  unsigned int v12; 
  unsigned int v13; 
  hknpCompoundShape *Shape; 
  hknpCompoundShape *v15; 
  hknpConvexShape *v16; 
  __int64 v17; 
  hknpBodyId result; 
  hknpBodyId v19; 
  hknpBodyId v20; 
  hkMonitorStream *v21; 
  __int64 v22; 
  __int64 v23; 
  unsigned __int16 buffer; 
  unsigned __int16 v25; 
  unsigned __int16 v26; 
  unsigned __int16 v27; 
  unsigned __int16 v28; 
  unsigned __int16 v29; 
  unsigned __int16 v30; 
  unsigned __int16 v31; 
  unsigned __int16 v32; 
  unsigned __int16 v33; 
  unsigned __int16 v34; 
  unsigned __int16 v35; 
  unsigned __int16 v36; 
  unsigned __int16 v37; 
  unsigned __int16 v38; 
  unsigned __int16 v39; 

  v22 = -2i64;
  Value = (hkMonitorStream *)TlsGetValue(hkMonitorStream__m_instance.m_slotID);
  v3 = (__int64)Value;
  v21 = Value;
  if ( Value )
    hkMonitorStream::timerBegin(Value, "TtPhysicsCoverWall_Load");
  v23 = v3;
  SaveMemory_LoadRead(&buffer, 32, save);
  if ( buffer == 2047 )
    s_physicsCoverWallGEntities[0] = NULL;
  else
    s_physicsCoverWallGEntities[0] = &g_entities[buffer];
  if ( v25 == 2047 )
    s_physicsCoverWallGEntities[1] = NULL;
  else
    s_physicsCoverWallGEntities[1] = &g_entities[v25];
  if ( v26 == 2047 )
    s_physicsCoverWallGEntities[2] = NULL;
  else
    s_physicsCoverWallGEntities[2] = &g_entities[v26];
  if ( v27 == 2047 )
    s_physicsCoverWallGEntities[3] = NULL;
  else
    s_physicsCoverWallGEntities[3] = &g_entities[v27];
  if ( v28 == 2047 )
    s_physicsCoverWallGEntities[4] = NULL;
  else
    s_physicsCoverWallGEntities[4] = &g_entities[v28];
  if ( v29 == 2047 )
    s_physicsCoverWallGEntities[5] = NULL;
  else
    s_physicsCoverWallGEntities[5] = &g_entities[v29];
  if ( v30 == 2047 )
    s_physicsCoverWallGEntities[6] = NULL;
  else
    s_physicsCoverWallGEntities[6] = &g_entities[v30];
  if ( v31 == 2047 )
    s_physicsCoverWallGEntities[7] = NULL;
  else
    s_physicsCoverWallGEntities[7] = &g_entities[v31];
  if ( v32 == 2047 )
    s_physicsCoverWallGEntities[8] = NULL;
  else
    s_physicsCoverWallGEntities[8] = &g_entities[v32];
  if ( v33 == 2047 )
    s_physicsCoverWallGEntities[9] = NULL;
  else
    s_physicsCoverWallGEntities[9] = &g_entities[v33];
  if ( v34 == 2047 )
    s_physicsCoverWallGEntities[10] = NULL;
  else
    s_physicsCoverWallGEntities[10] = &g_entities[v34];
  if ( v35 == 2047 )
    s_physicsCoverWallGEntities[11] = NULL;
  else
    s_physicsCoverWallGEntities[11] = &g_entities[v35];
  if ( v36 == 2047 )
    s_physicsCoverWallGEntities[12] = NULL;
  else
    s_physicsCoverWallGEntities[12] = &g_entities[v36];
  if ( v37 == 2047 )
    s_physicsCoverWallGEntities[13] = NULL;
  else
    s_physicsCoverWallGEntities[13] = &g_entities[v37];
  if ( v38 == 2047 )
    s_physicsCoverWallGEntities[14] = NULL;
  else
    s_physicsCoverWallGEntities[14] = &g_entities[v38];
  if ( v39 == 2047 )
    s_physicsCoverWallGEntities[15] = NULL;
  else
    s_physicsCoverWallGEntities[15] = &g_entities[v39];
  SaveMemory_LoadRead(s_physicsCoverWallGInstances, 64, save);
  SaveMemory_LoadRead(s_physicsCoverWallGDetailInstances, 64, save);
  SaveMemory_LoadRead(s_physicsCoverWallGPlayerClipInstances, 64, save);
  v4 = 0i64;
  v5 = 0i64;
  v6 = 16i64;
  do
  {
    if ( s_physicsCoverWallGEntities[v4] )
    {
      v7 = s_physicsCoverWallGInstances[v5];
      if ( v7 != -1 )
      {
        if ( !g_physicsInitialized && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\physics\\public\\physicsimplementationinterface.inl", 71, ASSERT_TYPE_ASSERT, "(g_physicsInitialized)", "%s\n\tPhysics: Trying to Get Number of Rigid Bodies when system is not initialized", "g_physicsInitialized") )
          __debugbreak();
        if ( !g_physicsServerWorldsCreated )
        {
          LODWORD(v17) = 0;
          if ( CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\physics\\public\\physicsimplementationinterface.inl", 75, ASSERT_TYPE_ASSERT, "(g_physicsServerWorldsCreated || worldId < PHYSICS_WORLD_ID_SERVER_FIRST || worldId > PHYSICS_WORLD_ID_SERVER_LAST)", "%s\n\tPhysics: Trying to Get Number of Rigid Bodies in server world %i when server worlds have not been set up", "g_physicsServerWorldsCreated || worldId < PHYSICS_WORLD_ID_SERVER_FIRST || worldId > PHYSICS_WORLD_ID_SERVER_LAST", v17) )
            __debugbreak();
        }
        if ( !g_havokPhysicsWorlds[0].world )
        {
          LODWORD(v17) = 0;
          if ( CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\physics\\private\\havok\\havokphysicsimplementationinterface.inl", 128, ASSERT_TYPE_ASSERT, "(havokPhysicsWorld->world)", "%s\n\tHavokPhysics Get rigid Body count %i: world is NULL", "havokPhysicsWorld->world", v17) )
            __debugbreak();
        }
        if ( HavokPhysicsInstanceManager_GetBodyCount(&g_havokPhysicsWorlds[0].instanceManager, v7) != 1 && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\physics\\private\\core\\physicscoverwall.cpp", 230, ASSERT_TYPE_ASSERT, "(Physics_GetNumRigidBodys( PHYSICS_WORLD_ID_SERVER_MAIN, s_physicsCoverWallGInstances[entityIt] ) == 1)", (const char *)&queryFormat, "Physics_GetNumRigidBodys( PHYSICS_WORLD_ID_SERVER_MAIN, s_physicsCoverWallGInstances[entityIt] ) == 1") )
          __debugbreak();
        v8 = s_physicsCoverWallGInstances[v5];
        if ( !g_physicsInitialized && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\physics\\public\\physicsimplementationinterface.inl", 105, ASSERT_TYPE_ASSERT, "(g_physicsInitialized)", "%s\n\tPhysics: Trying to Get Rigid Body ID when system is not initialized", "g_physicsInitialized") )
          __debugbreak();
        if ( v8 == -1 )
        {
          LODWORD(v17) = 0;
          if ( CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\physics\\public\\physicsimplementationinterface.inl", 107, ASSERT_TYPE_ASSERT, "(instanceId != 0xFFFFFFFF)", "%s\n\tPhysics: Trying to Get Rigid Body ID with invalid Instance in world %i", "instanceId != PHYSICSINSTANCEID_INVALID", v17) )
            __debugbreak();
        }
        if ( !g_physicsServerWorldsCreated )
        {
          LODWORD(v17) = 0;
          if ( CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\physics\\public\\physicsimplementationinterface.inl", 109, ASSERT_TYPE_ASSERT, "(g_physicsServerWorldsCreated || worldId < PHYSICS_WORLD_ID_SERVER_FIRST || worldId > PHYSICS_WORLD_ID_SERVER_LAST)", "%s\n\tPhysics: Trying to Get Rigid Body ID in server world %i when server worlds have not been set up", "g_physicsServerWorldsCreated || worldId < PHYSICS_WORLD_ID_SERVER_FIRST || worldId > PHYSICS_WORLD_ID_SERVER_LAST", v17) )
            __debugbreak();
        }
        m_serialAndIndex = HavokPhysics_GetRigidBodyID(&result, PHYSICS_WORLD_ID_FIRST, v8, 0)->m_serialAndIndex;
        if ( (m_serialAndIndex & 0xFFFFFF) == 0xFFFFFF && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\physics\\private\\core\\physicscoverwall.cpp", 232, ASSERT_TYPE_ASSERT, "(Physics_IsRigidBodyIdValid( bodyIdMain ))", (const char *)&queryFormat, "Physics_IsRigidBodyIdValid( bodyIdMain )") )
          __debugbreak();
        v10 = s_physicsCoverWallGDetailInstances[v5];
        if ( !g_physicsInitialized && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\physics\\public\\physicsimplementationinterface.inl", 105, ASSERT_TYPE_ASSERT, "(g_physicsInitialized)", "%s\n\tPhysics: Trying to Get Rigid Body ID when system is not initialized", "g_physicsInitialized") )
          __debugbreak();
        if ( v10 == -1 )
        {
          LODWORD(v17) = 1;
          if ( CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\physics\\public\\physicsimplementationinterface.inl", 107, ASSERT_TYPE_ASSERT, "(instanceId != 0xFFFFFFFF)", "%s\n\tPhysics: Trying to Get Rigid Body ID with invalid Instance in world %i", "instanceId != PHYSICSINSTANCEID_INVALID", v17) )
            __debugbreak();
        }
        if ( !g_physicsServerWorldsCreated )
        {
          LODWORD(v17) = 1;
          if ( CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\physics\\public\\physicsimplementationinterface.inl", 109, ASSERT_TYPE_ASSERT, "(g_physicsServerWorldsCreated || worldId < PHYSICS_WORLD_ID_SERVER_FIRST || worldId > PHYSICS_WORLD_ID_SERVER_LAST)", "%s\n\tPhysics: Trying to Get Rigid Body ID in server world %i when server worlds have not been set up", "g_physicsServerWorldsCreated || worldId < PHYSICS_WORLD_ID_SERVER_FIRST || worldId > PHYSICS_WORLD_ID_SERVER_LAST", v17) )
            __debugbreak();
        }
        v11 = HavokPhysics_GetRigidBodyID(&v19, PHYSICS_WORLD_ID_SERVER_DETAIL, v10, 0)->m_serialAndIndex;
        if ( (v11 & 0xFFFFFF) == 0xFFFFFF && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\physics\\private\\core\\physicscoverwall.cpp", 234, ASSERT_TYPE_ASSERT, "(Physics_IsRigidBodyIdValid( bodyIdDetail ))", (const char *)&queryFormat, "Physics_IsRigidBodyIdValid( bodyIdDetail )") )
          __debugbreak();
        v12 = s_physicsCoverWallGPlayerClipInstances[v5];
        if ( !g_physicsInitialized && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\physics\\public\\physicsimplementationinterface.inl", 105, ASSERT_TYPE_ASSERT, "(g_physicsInitialized)", "%s\n\tPhysics: Trying to Get Rigid Body ID when system is not initialized", "g_physicsInitialized") )
          __debugbreak();
        if ( v12 == -1 )
        {
          LODWORD(v17) = 0;
          if ( CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\physics\\public\\physicsimplementationinterface.inl", 107, ASSERT_TYPE_ASSERT, "(instanceId != 0xFFFFFFFF)", "%s\n\tPhysics: Trying to Get Rigid Body ID with invalid Instance in world %i", "instanceId != PHYSICSINSTANCEID_INVALID", v17) )
            __debugbreak();
        }
        if ( !g_physicsServerWorldsCreated )
        {
          LODWORD(v17) = 0;
          if ( CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\physics\\public\\physicsimplementationinterface.inl", 109, ASSERT_TYPE_ASSERT, "(g_physicsServerWorldsCreated || worldId < PHYSICS_WORLD_ID_SERVER_FIRST || worldId > PHYSICS_WORLD_ID_SERVER_LAST)", "%s\n\tPhysics: Trying to Get Rigid Body ID in server world %i when server worlds have not been set up", "g_physicsServerWorldsCreated || worldId < PHYSICS_WORLD_ID_SERVER_FIRST || worldId > PHYSICS_WORLD_ID_SERVER_LAST", v17) )
            __debugbreak();
        }
        v13 = HavokPhysics_GetRigidBodyID(&v20, PHYSICS_WORLD_ID_FIRST, v12, 0)->m_serialAndIndex;
        if ( (v13 & 0xFFFFFF) == 0xFFFFFF && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\physics\\private\\core\\physicscoverwall.cpp", 236, ASSERT_TYPE_ASSERT, "(Physics_IsRigidBodyIdValid( bodyIdPlayerClip ))", (const char *)&queryFormat, "Physics_IsRigidBodyIdValid( bodyIdPlayerClip )") )
          __debugbreak();
        Shape = (hknpCompoundShape *)Physics_GetShape(PHYSICS_WORLD_ID_FIRST, m_serialAndIndex);
        s_physicsCoverWallGCompoundShapes[0][v4] = Shape;
        Physics_AddShapeReference(Shape);
        v15 = (hknpCompoundShape *)Physics_GetShape(PHYSICS_WORLD_ID_SERVER_DETAIL, v11);
        s_physicsCoverWallGCompoundShapes[1][v4] = v15;
        Physics_AddShapeReference(v15);
        v16 = (hknpConvexShape *)Physics_GetShape(PHYSICS_WORLD_ID_FIRST, v13);
        s_physicsCoverWallGPlayerClipShapes[v4] = v16;
        Physics_AddShapeReference(v16);
      }
    }
    ++v5;
    ++v4;
    --v6;
  }
  while ( v6 );
  if ( v21 )
    hkMonitorStream::timerEnd(v21, "Et");
}

/*
==============
PhysicsCoverWall_ReadShapeData
==============
*/
hknpCompoundShape *PhysicsCoverWall_ReadShapeData(MemoryFile *memFile)
{
  __int64 i; 
  unsigned int p; 
  unsigned int coverGrid[8]; 

  for ( i = 0i64; i < 7; ++i )
  {
    MemFile_ReadData(memFile, 4ui64, &p);
    coverGrid[i] = p;
  }
  return PhysicsCoverWall_CreateDynamicCompoundShape(coverGrid);
}

/*
==============
PhysicsCoverWall_ReadShapeData_PlayerClip
==============
*/
hknpShape *PhysicsCoverWall_ReadShapeData_PlayerClip(MemoryFile *memFile)
{
  int v5; 
  __int64 i; 
  int v11; 
  int v12; 
  bool v41; 
  hknpShape *result; 
  unsigned int p; 
  vec3_t maxs; 
  vec3_t mins; 
  vec3_t outLocalPos; 
  vec3_t outNoise; 
  unsigned int grid[8]; 
  char vars0; 
  void *retaddr; 

  _RAX = &retaddr;
  __asm
  {
    vmovaps xmmword ptr [rax-18h], xmm6
    vmovaps xmmword ptr [rax-28h], xmm7
    vmovaps xmmword ptr [rax-38h], xmm8
  }
  v5 = 0;
  for ( i = 0i64; i < 7; ++i )
  {
    MemFile_ReadData(memFile, 4ui64, &p);
    grid[i] = p;
  }
  __asm
  {
    vmovss  xmm6, cs:__real@459c4000
    vmovss  xmm0, cs:__real@c59c4000
    vmovss  xmm8, cs:__real@3f800000
    vmovss  dword ptr [rbp+57h+mins], xmm6
    vmovss  dword ptr [rbp+57h+mins+4], xmm6
    vmovss  dword ptr [rbp+57h+mins+8], xmm6
    vmovss  dword ptr [rbp+57h+maxs], xmm0
    vmovss  dword ptr [rbp+57h+maxs+4], xmm0
    vmovss  dword ptr [rbp+57h+maxs+8], xmm0
  }
  v11 = -4;
  do
  {
    v12 = -6;
    do
    {
      if ( BG_CoverWall_GetGridPos(grid, v12, 0, v11) )
      {
        __asm { vmovaps xmm3, xmm8; sagAnimWeight }
        ++v5;
        BG_CoverWall_GridPosToLocalPos(v12, 0, v11, *(float *)&_XMM3, &outLocalPos);
        BG_CoverWall_CalcNoiseForPosition(v12, 0, v11, &outNoise);
        __asm
        {
          vmovss  xmm1, dword ptr [rbp+57h+mins]
          vmovss  xmm0, dword ptr [rbp+57h+outNoise]
          vaddss  xmm2, xmm0, dword ptr [rbp+57h+var_78]
          vmovss  xmm0, dword ptr [rbp+57h+outNoise+4]
          vaddss  xmm3, xmm0, dword ptr [rbp+57h+var_78+4]
          vmovss  xmm0, dword ptr [rbp+57h+var_78+8]
          vaddss  xmm4, xmm0, dword ptr [rbp+57h+outNoise+8]
          vcmpltss xmm0, xmm2, xmm1
          vblendvps xmm0, xmm1, xmm2, xmm0
          vmovss  xmm1, dword ptr [rbp+57h+maxs]
          vmovss  dword ptr [rbp+57h+mins], xmm0
          vcmpltss xmm0, xmm1, xmm2
          vblendvps xmm0, xmm1, xmm2, xmm0
          vmovss  xmm1, dword ptr [rbp+57h+maxs+4]
          vmovss  dword ptr [rbp+57h+maxs], xmm0
          vmovss  dword ptr [rbp+57h+var_78], xmm2
          vmovss  xmm2, dword ptr [rbp+57h+mins+4]
          vcmpltss xmm0, xmm3, xmm2
          vblendvps xmm0, xmm2, xmm3, xmm0
          vmovss  xmm2, dword ptr [rbp+57h+mins+8]
          vmovss  dword ptr [rbp+57h+mins+4], xmm0
          vcmpltss xmm0, xmm1, xmm3
          vblendvps xmm0, xmm1, xmm3, xmm0
          vmovss  xmm1, dword ptr [rbp+57h+maxs+8]
          vmovss  dword ptr [rbp+57h+maxs+4], xmm0
          vcmpltss xmm0, xmm4, xmm2
          vblendvps xmm0, xmm2, xmm4, xmm0
          vmovss  dword ptr [rbp+57h+mins+8], xmm0
          vcmpltss xmm0, xmm1, xmm4
          vblendvps xmm0, xmm1, xmm4, xmm0
          vmovss  dword ptr [rbp+57h+maxs+8], xmm0
          vmovss  dword ptr [rbp+57h+var_78+4], xmm3
          vmovss  dword ptr [rbp+57h+var_78+8], xmm4
        }
      }
      ++v12;
    }
    while ( v12 <= 6 );
    ++v11;
  }
  while ( v11 <= 9 );
  __asm
  {
    vmovss  xmm0, dword ptr [rbp+57h+mins]
    vmovss  xmm7, dword ptr cs:__xmm@7fffffff7fffffff7fffffff7fffffff
    vandps  xmm0, xmm0, xmm7
    vcomiss xmm0, xmm6
  }
  v41 = CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\physics\\private\\core\\physicscoverwall.cpp", 304, ASSERT_TYPE_ASSERT, "(abs( minExtents[0] ) <= 5000 && abs( minExtents[1] ) <= 5000 && abs( minExtents[1] ) <= 5000)", (const char *)&queryFormat, "abs( minExtents[0] ) <= 5000 && abs( minExtents[1] ) <= 5000 && abs( minExtents[1] ) <= 5000");
  if ( v41 )
    __debugbreak();
  __asm
  {
    vmovss  xmm0, dword ptr [rbp+57h+maxs]
    vandps  xmm0, xmm0, xmm7
    vcomiss xmm0, xmm6
  }
  if ( v41 )
  {
    if ( CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\physics\\private\\core\\physicscoverwall.cpp", 305, ASSERT_TYPE_ASSERT, "(abs( maxExtents[0] ) <= 5000 && abs( maxExtents[1] ) <= 5000 && abs( maxExtents[1] ) <= 5000)", (const char *)&queryFormat, "abs( maxExtents[0] ) <= 5000 && abs( maxExtents[1] ) <= 5000 && abs( maxExtents[1] ) <= 5000") )
      __debugbreak();
  }
  else
  {
    __asm
    {
      vmovss  xmm0, dword ptr [rbp+57h+maxs+4]
      vandps  xmm0, xmm0, xmm7
      vcomiss xmm0, xmm6
    }
  }
  if ( v5 <= 0 )
  {
    __asm
    {
      vmovss  xmm0, cs:__real@bf800000
      vmovss  dword ptr [rbp+57h+mins], xmm0
      vmovss  dword ptr [rbp+57h+mins+4], xmm0
      vmovss  dword ptr [rbp+57h+mins+8], xmm0
      vmovss  dword ptr [rbp+57h+maxs], xmm8
      vmovss  dword ptr [rbp+57h+maxs+4], xmm8
      vmovss  dword ptr [rbp+57h+maxs+8], xmm8
    }
  }
  else
  {
    *(double *)&_XMM0 = BG_CoverWall_GetCollisionRadius();
    __asm
    {
      vaddss  xmm3, xmm0, cs:__real@3f000000
      vmovss  xmm1, dword ptr [rbp+57h+mins]
      vmovss  xmm0, dword ptr [rbp+57h+mins+4]
      vsubss  xmm2, xmm1, xmm3
      vsubss  xmm1, xmm0, xmm3
      vmovss  dword ptr [rbp+57h+mins], xmm2
      vmovss  xmm2, dword ptr [rbp+57h+mins+8]
      vsubss  xmm0, xmm2, xmm3
      vaddss  xmm2, xmm3, dword ptr [rbp+57h+maxs]
      vmovss  dword ptr [rbp+57h+mins+8], xmm0
      vaddss  xmm0, xmm3, dword ptr [rbp+57h+maxs+8]
      vmovss  dword ptr [rbp+57h+mins+4], xmm1
      vaddss  xmm1, xmm3, dword ptr [rbp+57h+maxs+4]
      vmovss  dword ptr [rbp+57h+maxs+8], xmm0
      vmovss  dword ptr [rbp+57h+maxs], xmm2
      vmovss  dword ptr [rbp+57h+maxs+4], xmm1
    }
  }
  result = Physics_CreateShapeConvexHullFromAABB(&mins, &maxs);
  _R11 = &vars0;
  __asm
  {
    vmovaps xmm6, xmmword ptr [r11-10h]
    vmovaps xmm7, xmmword ptr [r11-20h]
    vmovaps xmm8, xmmword ptr [r11-30h]
  }
  return result;
}

/*
==============
PhysicsCoverWall_Shutdown
==============
*/
void PhysicsCoverWall_Shutdown(void)
{
  centity_t *(*v0)[16]; 
  __int64 v1; 

  v0 = s_physicsCoverWallCGEntities;
  v1 = 16i64;
  do
  {
    if ( (*v0)[0] )
    {
      if ( CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\physics\\private\\core\\physicscoverwall.cpp", 98, ASSERT_TYPE_ASSERT, "(s_physicsCoverWallCGEntities[LOCAL_CLIENT_0][entryIt] == 0)", (const char *)&queryFormat, "s_physicsCoverWallCGEntities[LOCAL_CLIENT_0][entryIt] == NULL") )
        __debugbreak();
    }
    v0 = (centity_t *(*)[16])((char *)v0 + 8);
    --v1;
  }
  while ( v1 );
}

/*
==============
PhysicsCoverWall_Write
==============
*/
void PhysicsCoverWall_Write(MemoryFile *memFile)
{
  hkMonitorStream *Value; 
  hkMonitorStream *v3; 
  __int16 p; 
  __int16 number; 
  __int16 v6; 
  __int16 v7; 
  __int16 v8; 
  __int16 v9; 
  __int16 v10; 
  __int16 v11; 
  __int16 v12; 
  __int16 v13; 
  __int16 v14; 
  __int16 v15; 
  __int16 v16; 
  __int16 v17; 
  __int16 v18; 
  __int16 v19; 

  Value = (hkMonitorStream *)TlsGetValue(hkMonitorStream__m_instance.m_slotID);
  v3 = Value;
  if ( Value )
    hkMonitorStream::timerBegin(Value, "TtPhysicsCoverWall_Write");
  if ( s_physicsCoverWallGEntities[0] )
    p = s_physicsCoverWallGEntities[0]->s.number;
  else
    p = 2047;
  if ( s_physicsCoverWallGEntities[1] )
    number = s_physicsCoverWallGEntities[1]->s.number;
  else
    number = 2047;
  if ( s_physicsCoverWallGEntities[2] )
    v6 = s_physicsCoverWallGEntities[2]->s.number;
  else
    v6 = 2047;
  if ( s_physicsCoverWallGEntities[3] )
    v7 = s_physicsCoverWallGEntities[3]->s.number;
  else
    v7 = 2047;
  if ( s_physicsCoverWallGEntities[4] )
    v8 = s_physicsCoverWallGEntities[4]->s.number;
  else
    v8 = 2047;
  if ( s_physicsCoverWallGEntities[5] )
    v9 = s_physicsCoverWallGEntities[5]->s.number;
  else
    v9 = 2047;
  if ( s_physicsCoverWallGEntities[6] )
    v10 = s_physicsCoverWallGEntities[6]->s.number;
  else
    v10 = 2047;
  if ( s_physicsCoverWallGEntities[7] )
    v11 = s_physicsCoverWallGEntities[7]->s.number;
  else
    v11 = 2047;
  if ( s_physicsCoverWallGEntities[8] )
    v12 = s_physicsCoverWallGEntities[8]->s.number;
  else
    v12 = 2047;
  if ( s_physicsCoverWallGEntities[9] )
    v13 = s_physicsCoverWallGEntities[9]->s.number;
  else
    v13 = 2047;
  if ( s_physicsCoverWallGEntities[10] )
    v14 = s_physicsCoverWallGEntities[10]->s.number;
  else
    v14 = 2047;
  if ( s_physicsCoverWallGEntities[11] )
    v15 = s_physicsCoverWallGEntities[11]->s.number;
  else
    v15 = 2047;
  if ( s_physicsCoverWallGEntities[12] )
    v16 = s_physicsCoverWallGEntities[12]->s.number;
  else
    v16 = 2047;
  if ( s_physicsCoverWallGEntities[13] )
    v17 = s_physicsCoverWallGEntities[13]->s.number;
  else
    v17 = 2047;
  if ( s_physicsCoverWallGEntities[14] )
    v18 = s_physicsCoverWallGEntities[14]->s.number;
  else
    v18 = 2047;
  if ( s_physicsCoverWallGEntities[15] )
    v19 = s_physicsCoverWallGEntities[15]->s.number;
  else
    v19 = 2047;
  MemFile_WriteData(memFile, 0x20ui64, &p);
  MemFile_WriteData(memFile, 0x40ui64, s_physicsCoverWallGInstances);
  MemFile_WriteData(memFile, 0x40ui64, s_physicsCoverWallGDetailInstances);
  MemFile_WriteData(memFile, 0x40ui64, s_physicsCoverWallGPlayerClipInstances);
  if ( v3 )
    hkMonitorStream::timerEnd(v3, "Et");
}

/*
==============
PhysicsCoverWall_WriteShapeData
==============
*/
void PhysicsCoverWall_WriteShapeData(MemoryFile *memFile, Physics_WorldId worldId, unsigned int instanceId)
{
  int v6; 
  __int64 v7; 
  unsigned int *v8; 
  int v9; 
  __int64 v10; 
  const gentity_s *v11; 
  const unsigned int *CoverGrid; 
  unsigned int p; 

  v6 = -1;
  if ( (unsigned int)worldId > PHYSICS_WORLD_ID_SERVER_DETAIL && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\physics\\private\\core\\physicscoverwall.cpp", 412, ASSERT_TYPE_ASSERT, "(worldId == PHYSICS_WORLD_ID_SERVER_MAIN || worldId == PHYSICS_WORLD_ID_SERVER_DETAIL)", (const char *)&queryFormat, "worldId == PHYSICS_WORLD_ID_SERVER_MAIN || worldId == PHYSICS_WORLD_ID_SERVER_DETAIL") )
    __debugbreak();
  v7 = 0i64;
  if ( worldId )
  {
    if ( worldId != PHYSICS_WORLD_ID_SERVER_DETAIL )
      goto LABEL_13;
    v8 = s_physicsCoverWallGDetailInstances;
  }
  else
  {
    v8 = s_physicsCoverWallGInstances;
  }
  v9 = 0;
  v10 = 0i64;
  while ( instanceId != v8[v10] )
  {
    ++v9;
    if ( ++v10 >= 16 )
      goto LABEL_13;
  }
  v6 = v9;
LABEL_13:
  if ( v6 == -1 && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\physics\\private\\core\\physicscoverwall.cpp", 136, ASSERT_TYPE_ASSERT, "(entityId != -1)", (const char *)&queryFormat, "entityId != -1") )
    __debugbreak();
  v11 = s_physicsCoverWallGEntities[v6];
  if ( !v11 && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\physics\\private\\core\\physicscoverwall.cpp", 139, ASSERT_TYPE_ASSERT, "(ent)", (const char *)&queryFormat, "ent") )
    __debugbreak();
  CoverGrid = G_CoverWall_GetCoverGrid(v11);
  if ( !CoverGrid && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\physics\\private\\core\\physicscoverwall.cpp", 142, ASSERT_TYPE_ASSERT, "(coverGrid)", (const char *)&queryFormat, "coverGrid") )
    __debugbreak();
  do
  {
    p = CoverGrid[v7];
    MemFile_WriteData(memFile, 4ui64, &p);
    ++v7;
  }
  while ( v7 < 7 );
}

/*
==============
PhysicsCoverWall_WriteShapeData_PlayerClip
==============
*/
void PhysicsCoverWall_WriteShapeData_PlayerClip(MemoryFile *memFile, Physics_WorldId worldId, unsigned int instanceId)
{
  int v5; 
  __int64 v6; 
  unsigned int *v7; 
  int v8; 
  const gentity_s *v9; 
  const unsigned int *CoverGrid; 
  unsigned int p; 

  v5 = -1;
  if ( worldId && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\physics\\private\\core\\physicscoverwall.cpp", 446, ASSERT_TYPE_ASSERT, "(worldId == PHYSICS_WORLD_ID_SERVER_MAIN)", (const char *)&queryFormat, "worldId == PHYSICS_WORLD_ID_SERVER_MAIN") )
    __debugbreak();
  v6 = 0i64;
  v7 = s_physicsCoverWallGPlayerClipInstances;
  v8 = 0;
  while ( instanceId != *v7 )
  {
    ++v8;
    if ( (__int64)++v7 >= (__int64)s_physicsCoverWallCGEntities )
      goto LABEL_9;
  }
  v5 = v8;
LABEL_9:
  if ( v5 == -1 && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\physics\\private\\core\\physicscoverwall.cpp", 155, ASSERT_TYPE_ASSERT, "(entityId != -1)", (const char *)&queryFormat, "entityId != -1") )
    __debugbreak();
  v9 = s_physicsCoverWallGEntities[v5];
  if ( !v9 && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\physics\\private\\core\\physicscoverwall.cpp", 158, ASSERT_TYPE_ASSERT, "(ent)", (const char *)&queryFormat, "ent") )
    __debugbreak();
  CoverGrid = G_CoverWall_GetCoverGrid(v9);
  if ( !CoverGrid && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\physics\\private\\core\\physicscoverwall.cpp", 161, ASSERT_TYPE_ASSERT, "(coverGrid)", (const char *)&queryFormat, "coverGrid") )
    __debugbreak();
  do
  {
    p = CoverGrid[v6];
    MemFile_WriteData(memFile, 4ui64, &p);
    ++v6;
  }
  while ( v6 < 7 );
}

