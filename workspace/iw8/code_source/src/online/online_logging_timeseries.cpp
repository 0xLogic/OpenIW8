/*
==============
OnlineTimeSeriesLog::CheckForWriteBuffer
==============
*/

void __fastcall OnlineTimeSeriesLog::CheckForWriteBuffer(OnlineTimeSeriesLog *this)
{
  ?CheckForWriteBuffer@OnlineTimeSeriesLog@@AEAAXXZ(this);
}

/*
==============
OnlineTimeSeriesLog::AddFieldValue
==============
*/

void __fastcall OnlineTimeSeriesLog::AddFieldValue(OnlineTimeSeriesLog *this, const unsigned __int64 measurementHandle, const char *fieldName, const int value)
{
  ?AddFieldValue@OnlineTimeSeriesLog@@QEAAX_KPEBDH@Z(this, measurementHandle, fieldName, value);
}

/*
==============
OnlineTimeSeriesLog::WriteBuffer
==============
*/

bool __fastcall OnlineTimeSeriesLog::WriteBuffer(OnlineTimeSeriesLog *this, char *bufferToSend)
{
  return ?WriteBuffer@OnlineTimeSeriesLog@@AEAA_NPEAD@Z(this, bufferToSend);
}

/*
==============
OnlineTimeSeriesLog::AddFieldValue
==============
*/

void __fastcall OnlineTimeSeriesLog::AddFieldValue(OnlineTimeSeriesLog *this, const unsigned __int64 measurementHandle, const char *fieldName, const unsigned __int16 value)
{
  ?AddFieldValue@OnlineTimeSeriesLog@@QEAAX_KPEBDG@Z(this, measurementHandle, fieldName, value);
}

/*
==============
OnlineTimeSeriesLog::BeginMeasurement
==============
*/

unsigned __int64 __fastcall OnlineTimeSeriesLog::BeginMeasurement(OnlineTimeSeriesLog *this, const char *measurementName)
{
  return ?BeginMeasurement@OnlineTimeSeriesLog@@QEAA_KPEBD@Z(this, measurementName);
}

/*
==============
OnlineTimeSeriesLog::Init
==============
*/

bool __fastcall OnlineTimeSeriesLog::Init(OnlineTimeSeriesLog *this)
{
  return ?Init@OnlineTimeSeriesLog@@UEAA_NXZ(this);
}

/*
==============
OnlineTimeSeriesLog::AddFieldValue
==============
*/

void __fastcall OnlineTimeSeriesLog::AddFieldValue(OnlineTimeSeriesLog *this, const unsigned __int64 measurementHandle, const char *fieldName, const bool value)
{
  ?AddFieldValue@OnlineTimeSeriesLog@@QEAAX_KPEBD_N@Z(this, measurementHandle, fieldName, value);
}

/*
==============
OnlineTimeSeriesLog::AddFieldValue
==============
*/

void __fastcall OnlineTimeSeriesLog::AddFieldValue(OnlineTimeSeriesLog *this, const unsigned __int64 measurementHandle, const char *fieldName, const unsigned int value)
{
  ?AddFieldValue@OnlineTimeSeriesLog@@QEAAX_KPEBDI@Z(this, measurementHandle, fieldName, value);
}

/*
==============
OnlineTimeSeriesLog::OnUnregistered
==============
*/

void __fastcall OnlineTimeSeriesLog::OnUnregistered(OnlineTimeSeriesLog *this)
{
  ?OnUnregistered@OnlineTimeSeriesLog@@UEAAXXZ(this);
}

/*
==============
OnlineTimeSeriesLog::CollectMetrics_Dedi
==============
*/

void __fastcall OnlineTimeSeriesLog::CollectMetrics_Dedi(OnlineTimeSeriesLog *this)
{
  ?CollectMetrics_Dedi@OnlineTimeSeriesLog@@AEAAXXZ(this);
}

/*
==============
OnlineTimeSeriesLog::PumpInflightBuffer
==============
*/

void __fastcall OnlineTimeSeriesLog::PumpInflightBuffer(OnlineTimeSeriesLog *this)
{
  ?PumpInflightBuffer@OnlineTimeSeriesLog@@AEAAXXZ(this);
}

/*
==============
OnlineTimeSeriesLog::WriteEventGauge
==============
*/

void __fastcall OnlineTimeSeriesLog::WriteEventGauge(OnlineTimeSeriesLog *this, const char *eventName, const unsigned int value)
{
  ?WriteEventGauge@OnlineTimeSeriesLog@@QEAAXPEBDI@Z(this, eventName, value);
}

/*
==============
OnlineTimeSeriesLog::OnRegistered
==============
*/

void __fastcall OnlineTimeSeriesLog::OnRegistered(OnlineTimeSeriesLog *this)
{
  ?OnRegistered@OnlineTimeSeriesLog@@UEAAXXZ(this);
}

/*
==============
OnlineTimeSeriesLog::AddFieldValue
==============
*/

void __fastcall OnlineTimeSeriesLog::AddFieldValue(OnlineTimeSeriesLog *this, const unsigned __int64 measurementHandle, const char *fieldName, const float value)
{
  ?AddFieldValue@OnlineTimeSeriesLog@@QEAAX_KPEBDM@Z(this, measurementHandle, fieldName, value);
}

/*
==============
OnlineTimeSeriesLog::AddFieldValue
==============
*/

void __fastcall OnlineTimeSeriesLog::AddFieldValue(OnlineTimeSeriesLog *this, const unsigned __int64 measurementHandle, const char *fieldName, const unsigned __int64 value)
{
  ?AddFieldValue@OnlineTimeSeriesLog@@QEAAX_KPEBD0@Z(this, measurementHandle, fieldName, value);
}

/*
==============
OnlineTimeSeriesLog::WriteEventUInt
==============
*/

void __fastcall OnlineTimeSeriesLog::WriteEventUInt(OnlineTimeSeriesLog *this, const char *eventName, const unsigned int value)
{
  ?WriteEventUInt@OnlineTimeSeriesLog@@QEAAXPEBDI@Z(this, eventName, value);
}

/*
==============
OnlineTimeSeriesLog::WriteEventFloat
==============
*/

void __fastcall OnlineTimeSeriesLog::WriteEventFloat(OnlineTimeSeriesLog *this, const char *eventName, const float value)
{
  ?WriteEventFloat@OnlineTimeSeriesLog@@QEAAXPEBDM@Z(this, eventName, value);
}

/*
==============
OnlineTimeSeriesLog::OnlineTimeSeriesLog
==============
*/

void __fastcall OnlineTimeSeriesLog::OnlineTimeSeriesLog(OnlineTimeSeriesLog *this)
{
  ??0OnlineTimeSeriesLog@@QEAA@XZ(this);
}

/*
==============
OnlineTimeSeriesLog::CollectMetrics_Client
==============
*/

void __fastcall OnlineTimeSeriesLog::CollectMetrics_Client(OnlineTimeSeriesLog *this)
{
  ?CollectMetrics_Client@OnlineTimeSeriesLog@@AEAAXXZ(this);
}

/*
==============
OnlineTimeSeriesLog::Frame
==============
*/

void __fastcall OnlineTimeSeriesLog::Frame(OnlineTimeSeriesLog *this)
{
  ?Frame@OnlineTimeSeriesLog@@UEAAXXZ(this);
}

/*
==============
OnlineTimeSeriesLog::AddFieldValue
==============
*/

void __fastcall OnlineTimeSeriesLog::AddFieldValue(OnlineTimeSeriesLog *this, const unsigned __int64 measurementHandle, const char *fieldName, const char *value)
{
  ?AddFieldValue@OnlineTimeSeriesLog@@QEAAX_KPEBD1@Z(this, measurementHandle, fieldName, value);
}

/*
==============
OnlineTimeSeriesLog::OnSignedIn
==============
*/

void __fastcall OnlineTimeSeriesLog::OnSignedIn(OnlineTimeSeriesLog *this, const int controllerIndex, GenericSignInState signinState)
{
  ?OnSignedIn@OnlineTimeSeriesLog@@UEAAXHW4GenericSignInState@@@Z(this, controllerIndex, signinState);
}

/*
==============
OnlineTimeSeriesLog::OnDisconnect
==============
*/

void __fastcall OnlineTimeSeriesLog::OnDisconnect(OnlineTimeSeriesLog *this, ONLINE_DISCONNECT reason)
{
  ?OnDisconnect@OnlineTimeSeriesLog@@UEAAXW4ONLINE_DISCONNECT@@@Z(this, reason);
}

/*
==============
OnlineTimeSeriesLog::WriteEventSet
==============
*/

void __fastcall OnlineTimeSeriesLog::WriteEventSet(OnlineTimeSeriesLog *this, const char *eventName, const float value)
{
  ?WriteEventSet@OnlineTimeSeriesLog@@QEAAXPEBDM@Z(this, eventName, value);
}

/*
==============
OnlineTimeSeriesLog::WriteInflightBufferToHTTPS
==============
*/

bool __fastcall OnlineTimeSeriesLog::WriteInflightBufferToHTTPS(OnlineTimeSeriesLog *this, const char *bufferToSend)
{
  return ?WriteInflightBufferToHTTPS@OnlineTimeSeriesLog@@AEAA_NPEBD@Z(this, bufferToSend);
}

/*
==============
OnlineTimeSeriesLog::OnSignedOut
==============
*/

void __fastcall OnlineTimeSeriesLog::OnSignedOut(OnlineTimeSeriesLog *this, const int controllerIndex, GenericSignOutState signOutState)
{
  ?OnSignedOut@OnlineTimeSeriesLog@@UEAAXHW4GenericSignOutState@@@Z(this, controllerIndex, signOutState);
}

/*
==============
OnlineTimeSeriesLog::RegisterLuaFunctions
==============
*/

void __fastcall OnlineTimeSeriesLog::RegisterLuaFunctions(OnlineTimeSeriesLog *this, lua_State *luaVM)
{
  ?RegisterLuaFunctions@OnlineTimeSeriesLog@@UEAAXPEAUlua_State@@@Z(this, luaVM);
}

/*
==============
OnlineTimeSeriesLog::AssemblePreamble
==============
*/

bool __fastcall OnlineTimeSeriesLog::AssemblePreamble(OnlineTimeSeriesLog *this, const char *eventName, char *resultBuffer, const unsigned int lenResultBuffer)
{
  return ?AssemblePreamble@OnlineTimeSeriesLog@@AEBA_NPEBDPEADI@Z(this, eventName, resultBuffer, lenResultBuffer);
}

/*
==============
OnlineTimeSeriesLog::WriteEventCounter
==============
*/

void __fastcall OnlineTimeSeriesLog::WriteEventCounter(OnlineTimeSeriesLog *this, const char *eventName, const unsigned int value)
{
  ?WriteEventCounter@OnlineTimeSeriesLog@@QEAAXPEBDI@Z(this, eventName, value);
}

/*
==============
OnlineTimeSeriesLog::Uninit
==============
*/

void __fastcall OnlineTimeSeriesLog::Uninit(OnlineTimeSeriesLog *this)
{
  ?Uninit@OnlineTimeSeriesLog@@UEAAXXZ(this);
}

/*
==============
OnlineTimeSeriesLog::WriteEventInt
==============
*/

void __fastcall OnlineTimeSeriesLog::WriteEventInt(OnlineTimeSeriesLog *this, const char *eventName, const int value)
{
  ?WriteEventInt@OnlineTimeSeriesLog@@QEAAXPEBDH@Z(this, eventName, value);
}

/*
==============
OnlineTimeSeriesLog::OutputCurrentState
==============
*/

void __fastcall OnlineTimeSeriesLog::OutputCurrentState(OnlineTimeSeriesLog *this, const int controllerIndex)
{
  ?OutputCurrentState@OnlineTimeSeriesLog@@UEAAXH@Z(this, controllerIndex);
}

/*
==============
OnlineTimeSeriesLog::WriteInflightBufferToUDP
==============
*/

bool __fastcall OnlineTimeSeriesLog::WriteInflightBufferToUDP(OnlineTimeSeriesLog *this, const char *bufferToSend)
{
  return ?WriteInflightBufferToUDP@OnlineTimeSeriesLog@@AEAA_NPEBD@Z(this, bufferToSend);
}

/*
==============
OnlineTimeSeriesLog::WriteEventTiming
==============
*/

void __fastcall OnlineTimeSeriesLog::WriteEventTiming(OnlineTimeSeriesLog *this, const char *eventName, const float timingValue)
{
  ?WriteEventTiming@OnlineTimeSeriesLog@@QEAAXPEBDM@Z(this, eventName, timingValue);
}

/*
==============
OnlineTimeSeriesLog::ControllerFrame
==============
*/

void __fastcall OnlineTimeSeriesLog::ControllerFrame(OnlineTimeSeriesLog *this, const int controllerIndex)
{
  ?ControllerFrame@OnlineTimeSeriesLog@@UEAAXH@Z(this, controllerIndex);
}

/*
==============
OnlineTimeSeriesLog::EndMeasurement
==============
*/

void __fastcall OnlineTimeSeriesLog::EndMeasurement(OnlineTimeSeriesLog *this, const unsigned __int64 measurementHandle)
{
  ?EndMeasurement@OnlineTimeSeriesLog@@QEAAX_K@Z(this, measurementHandle);
}

/*
==============
OnlineTimeSeriesLog::AddFieldValue
==============
*/

void __fastcall OnlineTimeSeriesLog::AddFieldValue(OnlineTimeSeriesLog *this, const unsigned __int64 measurementHandle, const char *fieldName, const unsigned __int8 value)
{
  ?AddFieldValue@OnlineTimeSeriesLog@@QEAAX_KPEBDE@Z(this, measurementHandle, fieldName, value);
}

/*
==============
OnlineTimeSeriesLog::FlushInfluxDBMeasurement
==============
*/

bool __fastcall OnlineTimeSeriesLog::FlushInfluxDBMeasurement(OnlineTimeSeriesLog *this, tInfluxMeasurement *measurement)
{
  return ?FlushInfluxDBMeasurement@OnlineTimeSeriesLog@@AEAA_NPEAUtInfluxMeasurement@@@Z(this, measurement);
}

/*
==============
OnlineTimeSeriesLog::AddMetaTag
==============
*/

void __fastcall OnlineTimeSeriesLog::AddMetaTag(OnlineTimeSeriesLog *this, const unsigned __int64 measurementHandle, const char *tagName, const char *valueName)
{
  ?AddMetaTag@OnlineTimeSeriesLog@@QEAAX_KPEBD1@Z(this, measurementHandle, tagName, valueName);
}

/*
==============
OnlineTimeSeriesLog::Get
==============
*/

OnlineTimeSeriesLog *__fastcall OnlineTimeSeriesLog::Get()
{
  return ?Get@OnlineTimeSeriesLog@@SAAEAV1@XZ();
}

/*
==============
OnlineTimeSeriesLog::~OnlineTimeSeriesLog
==============
*/

void __fastcall OnlineTimeSeriesLog::~OnlineTimeSeriesLog(OnlineTimeSeriesLog *this)
{
  ??1OnlineTimeSeriesLog@@QEAA@XZ(this);
}

/*
==============
OnlineTimeSeriesLog::OnlineTimeSeriesLog
==============
*/
void OnlineTimeSeriesLog::OnlineTimeSeriesLog(OnlineTimeSeriesLog *this)
{
  this->__vftable = (OnlineTimeSeriesLog_vtbl *)&OnlineTimeSeriesLog::`vftable';
  this->m_nextSystem = NULL;
  this->m_initialized = 0;
  this->m_httpInterface = NULL;
  this->m_isInFlight = 0;
  this->m_timeTillNextFlushms = 0;
  this->m_nextMetricsCollection_ms = 0;
}

/*
==============
OnlineTimeSeriesLog::~OnlineTimeSeriesLog
==============
*/
void OnlineTimeSeriesLog::~OnlineTimeSeriesLog(OnlineTimeSeriesLog *this)
{
  this->__vftable = (OnlineTimeSeriesLog_vtbl *)&OnlineTimeSeriesLog::`vftable';
}

/*
==============
OnlineTimeSeriesLog::AddFieldValue
==============
*/
void OnlineTimeSeriesLog::AddFieldValue(OnlineTimeSeriesLog *this, const unsigned __int64 measurementHandle, const char *fieldName, const unsigned __int64 value)
{
  if ( !measurementHandle && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\online\\online_logging_timeseries.cpp", 694, ASSERT_TYPE_ASSERT, "(measurement)", (const char *)&queryFormat, "measurement") )
    __debugbreak();
  if ( !*(_BYTE *)measurementHandle && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\online\\online_logging_timeseries.cpp", 695, ASSERT_TYPE_ASSERT, "(measurement->m_inUse)", (const char *)&queryFormat, "measurement->m_inUse") )
    __debugbreak();
  if ( !*(_BYTE *)(measurementHandle + 8560) )
  {
    if ( !DLog_Break((DLogContext *)(measurementHandle + 8)) )
      Com_PrintWarning(25, "Failed to write Influx break before Field %s to DLog context\n", fieldName);
    *(_BYTE *)(measurementHandle + 8560) = 1;
  }
  if ( !DLog_UInt64((DLogContext *)(measurementHandle + 8), fieldName, value) )
    Com_PrintWarning(25, "Failed to write Field %s to DLog context\n", fieldName);
}

/*
==============
OnlineTimeSeriesLog::AddFieldValue
==============
*/
void OnlineTimeSeriesLog::AddFieldValue(OnlineTimeSeriesLog *this, const unsigned __int64 measurementHandle, const char *fieldName, const char *value)
{
  if ( !measurementHandle && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\online\\online_logging_timeseries.cpp", 746, ASSERT_TYPE_ASSERT, "(measurement)", (const char *)&queryFormat, "measurement") )
    __debugbreak();
  if ( !*(_BYTE *)measurementHandle && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\online\\online_logging_timeseries.cpp", 747, ASSERT_TYPE_ASSERT, "(measurement->m_inUse)", (const char *)&queryFormat, "measurement->m_inUse") )
    __debugbreak();
  if ( !*(_BYTE *)(measurementHandle + 8560) )
  {
    if ( !DLog_Break((DLogContext *)(measurementHandle + 8)) )
      Com_PrintWarning(25, "Failed to write Influx break before Field %s to DLog context\n", fieldName);
    *(_BYTE *)(measurementHandle + 8560) = 1;
  }
  if ( !DLog_String((DLogContext *)(measurementHandle + 8), fieldName, value, 0) )
    Com_PrintWarning(25, "Failed to write Field %s to DLog context\n", fieldName);
}

/*
==============
OnlineTimeSeriesLog::AddFieldValue
==============
*/
void OnlineTimeSeriesLog::AddFieldValue(OnlineTimeSeriesLog *this, const unsigned __int64 measurementHandle, const char *fieldName, const unsigned __int8 value)
{
  if ( !measurementHandle && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\online\\online_logging_timeseries.cpp", 668, ASSERT_TYPE_ASSERT, "(measurement)", (const char *)&queryFormat, "measurement") )
    __debugbreak();
  if ( !*(_BYTE *)measurementHandle && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\online\\online_logging_timeseries.cpp", 669, ASSERT_TYPE_ASSERT, "(measurement->m_inUse)", (const char *)&queryFormat, "measurement->m_inUse") )
    __debugbreak();
  if ( !*(_BYTE *)(measurementHandle + 8560) )
  {
    if ( !DLog_Break((DLogContext *)(measurementHandle + 8)) )
      Com_PrintWarning(25, "Failed to write Influx break before Field %s to DLog context\n", fieldName);
    *(_BYTE *)(measurementHandle + 8560) = 1;
  }
  if ( !DLog_UInt8((DLogContext *)(measurementHandle + 8), fieldName, value) )
    Com_PrintWarning(25, "Failed to write Field %s to DLog context\n", fieldName);
}

/*
==============
OnlineTimeSeriesLog::AddFieldValue
==============
*/
void OnlineTimeSeriesLog::AddFieldValue(OnlineTimeSeriesLog *this, const unsigned __int64 measurementHandle, const char *fieldName, const unsigned __int16 value)
{
  if ( !measurementHandle && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\online\\online_logging_timeseries.cpp", 642, ASSERT_TYPE_ASSERT, "(measurement)", (const char *)&queryFormat, "measurement") )
    __debugbreak();
  if ( !*(_BYTE *)measurementHandle && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\online\\online_logging_timeseries.cpp", 643, ASSERT_TYPE_ASSERT, "(measurement->m_inUse)", (const char *)&queryFormat, "measurement->m_inUse") )
    __debugbreak();
  if ( !*(_BYTE *)(measurementHandle + 8560) )
  {
    if ( !DLog_Break((DLogContext *)(measurementHandle + 8)) )
      Com_PrintWarning(25, "Failed to write Influx break before Field %s to DLog context\n", fieldName);
    *(_BYTE *)(measurementHandle + 8560) = 1;
  }
  if ( !DLog_UInt16((DLogContext *)(measurementHandle + 8), fieldName, value) )
    Com_PrintWarning(25, "Failed to write Field %s to DLog context\n", fieldName);
}

/*
==============
OnlineTimeSeriesLog::AddFieldValue
==============
*/
void OnlineTimeSeriesLog::AddFieldValue(OnlineTimeSeriesLog *this, const unsigned __int64 measurementHandle, const char *fieldName, const int value)
{
  if ( !measurementHandle && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\online\\online_logging_timeseries.cpp", 590, ASSERT_TYPE_ASSERT, "(measurement)", (const char *)&queryFormat, "measurement") )
    __debugbreak();
  if ( !*(_BYTE *)measurementHandle && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\online\\online_logging_timeseries.cpp", 591, ASSERT_TYPE_ASSERT, "(measurement->m_inUse)", (const char *)&queryFormat, "measurement->m_inUse") )
    __debugbreak();
  if ( !*(_BYTE *)(measurementHandle + 8560) )
  {
    if ( !DLog_Break((DLogContext *)(measurementHandle + 8)) )
      Com_PrintWarning(25, "Failed to write Influx break before Field %s to DLog context\n", fieldName);
    *(_BYTE *)(measurementHandle + 8560) = 1;
  }
  if ( !DLog_Int32((DLogContext *)(measurementHandle + 8), fieldName, value) )
    Com_PrintWarning(25, "Failed to write Field %s to DLog context\n", fieldName);
}

/*
==============
OnlineTimeSeriesLog::AddFieldValue
==============
*/
void OnlineTimeSeriesLog::AddFieldValue(OnlineTimeSeriesLog *this, const unsigned __int64 measurementHandle, const char *fieldName, const unsigned int value)
{
  if ( !measurementHandle && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\online\\online_logging_timeseries.cpp", 616, ASSERT_TYPE_ASSERT, "(measurement)", (const char *)&queryFormat, "measurement") )
    __debugbreak();
  if ( !*(_BYTE *)measurementHandle && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\online\\online_logging_timeseries.cpp", 617, ASSERT_TYPE_ASSERT, "(measurement->m_inUse)", (const char *)&queryFormat, "measurement->m_inUse") )
    __debugbreak();
  if ( !*(_BYTE *)(measurementHandle + 8560) )
  {
    if ( !DLog_Break((DLogContext *)(measurementHandle + 8)) )
      Com_PrintWarning(25, "Failed to write Influx break before Field %s to DLog context\n", fieldName);
    *(_BYTE *)(measurementHandle + 8560) = 1;
  }
  if ( !DLog_UInt32((DLogContext *)(measurementHandle + 8), fieldName, value) )
    Com_PrintWarning(25, "Failed to write Field %s to DLog context\n", fieldName);
}

/*
==============
OnlineTimeSeriesLog::AddFieldValue
==============
*/

void __fastcall OnlineTimeSeriesLog::AddFieldValue(OnlineTimeSeriesLog *this, const unsigned __int64 measurementHandle, const char *fieldName, double value)
{
  __asm
  {
    vmovaps [rsp+48h+var_18], xmm6
    vmovaps xmm6, xmm3
  }
  if ( !measurementHandle && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\online\\online_logging_timeseries.cpp", 720, ASSERT_TYPE_ASSERT, "(measurement)", (const char *)&queryFormat, "measurement") )
    __debugbreak();
  if ( !*(_BYTE *)measurementHandle && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\online\\online_logging_timeseries.cpp", 721, ASSERT_TYPE_ASSERT, "(measurement->m_inUse)", (const char *)&queryFormat, "measurement->m_inUse") )
    __debugbreak();
  if ( !*(_BYTE *)(measurementHandle + 8560) )
  {
    if ( !DLog_Break((DLogContext *)(measurementHandle + 8)) )
      Com_PrintWarning(25, "Failed to write Influx break before Field %s to DLog context\n", fieldName);
    *(_BYTE *)(measurementHandle + 8560) = 1;
  }
  __asm { vmovaps xmm2, xmm6; value }
  if ( !DLog_Float32((DLogContext *)(measurementHandle + 8), fieldName, *(float *)&_XMM2) )
    Com_PrintWarning(25, "Failed to write Field %s to DLog context\n", fieldName);
  __asm { vmovaps xmm6, [rsp+48h+var_18] }
}

/*
==============
OnlineTimeSeriesLog::AddFieldValue
==============
*/
void OnlineTimeSeriesLog::AddFieldValue(OnlineTimeSeriesLog *this, const unsigned __int64 measurementHandle, const char *fieldName, const bool value)
{
  if ( !measurementHandle && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\online\\online_logging_timeseries.cpp", 772, ASSERT_TYPE_ASSERT, "(measurement)", (const char *)&queryFormat, "measurement") )
    __debugbreak();
  if ( !*(_BYTE *)measurementHandle && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\online\\online_logging_timeseries.cpp", 773, ASSERT_TYPE_ASSERT, "(measurement->m_inUse)", (const char *)&queryFormat, "measurement->m_inUse") )
    __debugbreak();
  if ( !*(_BYTE *)(measurementHandle + 8560) )
  {
    if ( !DLog_Break((DLogContext *)(measurementHandle + 8)) )
      Com_PrintWarning(25, "Failed to write Influx break before Field %s to DLog context\n", fieldName);
    *(_BYTE *)(measurementHandle + 8560) = 1;
  }
  if ( !DLog_Bool((DLogContext *)(measurementHandle + 8), fieldName, value) )
    Com_PrintWarning(25, "Failed to write Field %s to DLog context\n", fieldName);
}

/*
==============
OnlineTimeSeriesLog::AddMetaTag
==============
*/
void OnlineTimeSeriesLog::AddMetaTag(OnlineTimeSeriesLog *this, const unsigned __int64 measurementHandle, const char *tagName, const char *valueName)
{
  if ( !measurementHandle && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\online\\online_logging_timeseries.cpp", 567, ASSERT_TYPE_ASSERT, "(measurement)", (const char *)&queryFormat, "measurement") )
    __debugbreak();
  if ( !*(_BYTE *)measurementHandle && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\online\\online_logging_timeseries.cpp", 568, ASSERT_TYPE_ASSERT, "(measurement->m_inUse)", (const char *)&queryFormat, "measurement->m_inUse") )
    __debugbreak();
  if ( !*(_BYTE *)(measurementHandle + 8560) )
    goto LABEL_16;
  if ( CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\online\\online_logging_timeseries.cpp", 569, ASSERT_TYPE_ASSERT, "(!measurement->m_break)", (const char *)&queryFormat, "!measurement->m_break") )
    __debugbreak();
  if ( *(_BYTE *)(measurementHandle + 8560) )
  {
    Com_PrintWarning(25, "Failed trying to write Influx MetaTag after already breaking for Fields Values, MetaTag %s\n", tagName);
  }
  else
  {
LABEL_16:
    if ( !DLog_String((DLogContext *)(measurementHandle + 8), tagName, valueName, 0) )
      Com_PrintWarning(25, "Failed to write MetaTag %s value %s to DLog context\n", tagName, valueName);
  }
}

/*
==============
OnlineTimeSeriesLog::AssemblePreamble
==============
*/
bool OnlineTimeSeriesLog::AssemblePreamble(OnlineTimeSeriesLog *this, const char *eventName, char *resultBuffer, const unsigned int lenResultBuffer)
{
  DWServicesAccess *Instance; 
  const char *EnvironmentString; 
  DWServicesAccess *v9; 
  unsigned int TitleID; 

  Instance = DWServicesAccess::GetInstance();
  EnvironmentString = DWServicesAccess::GetEnvironmentString(Instance);
  v9 = DWServicesAccess::GetInstance();
  TitleID = DWServicesAccess::GetTitleID(v9);
  return Com_sprintf_truncate(resultBuffer, lenResultBuffer, "iw8.%d.%s.%s.%s", TitleID, EnvironmentString, "gc", eventName) >= 0;
}

/*
==============
OnlineTimeSeriesLog::BeginMeasurement
==============
*/
__int64 OnlineTimeSeriesLog::BeginMeasurement(OnlineTimeSeriesLog *this, const char *measurementName)
{
  int v4; 
  tInfluxMeasurement *i; 
  char *v7; 
  _BYTE *v8; 
  __int64 v9; 
  const char *BootIdString; 
  const char *MatchIdString; 

  Sys_EnterCriticalSection(CRITSECT_INFLUXDB);
  v4 = 0;
  for ( i = this->m_measurements; i->m_inUse; ++i )
  {
    if ( (unsigned int)++v4 >= 0x14 )
    {
      if ( CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\online\\online_logging_timeseries.cpp", 536, ASSERT_TYPE_ASSERT, (const char *)&queryFormat.fmt + 3, "Couldn't find a free measurement. You may need to increase MAX_MEASUREMENTS\n") )
        __debugbreak();
      Sys_LeaveCriticalSection(CRITSECT_INFLUXDB);
      return 0xFFFFFFFFi64;
    }
  }
  v7 = (char *)this + 8568 * v4;
  v8 = v7 + 197720;
  v7[197720] = 1;
  Sys_LeaveCriticalSection(CRITSECT_INFLUXDB);
  v9 = (__int64)(v7 + 197720);
  DLog_CreateContext((DLogContext *)(v7 + 197728), 0i64, v7 + 198080, 0x2000);
  if ( DLog_BeginEvent((DLogContext *)(v7 + 197728), measurementName) )
  {
    BootIdString = OnlineBootId::GetBootIdString();
    OnlineTimeSeriesLog::AddMetaTag(this, (const unsigned __int64)v8, "boot_guid", BootIdString);
    MatchIdString = OnlineMatchId::GetMatchIdString();
    OnlineTimeSeriesLog::AddMetaTag(this, (const unsigned __int64)v8, "match_guid", MatchIdString);
  }
  else
  {
    Com_PrintWarning(25, "Failed to begin measurement %s\n", measurementName);
    v9 = 0xFFFFFFFFi64;
    *v8 = 0;
  }
  return v9;
}

/*
==============
OnlineTimeSeriesLog::CheckForWriteBuffer
==============
*/
void OnlineTimeSeriesLog::CheckForWriteBuffer(OnlineTimeSeriesLog *this)
{
  unsigned int m_readyToSendOffset; 
  unsigned int v3; 
  unsigned int v4; 
  __int64 v5; 
  __int64 v6; 
  __int64 v7; 
  int v8; 

  if ( !Sys_IsMainThread() && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\online\\online_logging_timeseries.cpp", 920, ASSERT_TYPE_ASSERT, "(Sys_IsMainThread())", (const char *)&queryFormat, "Sys_IsMainThread()", -2i64) )
    __debugbreak();
  if ( !this->m_isInFlight )
  {
    Sys_EnterCriticalSection(CRITSECT_INFLUXDB);
    m_readyToSendOffset = this->m_readyToSendOffset;
    v3 = m_readyToSendOffset + 1;
    v4 = m_readyToSendOffset + 3;
    if ( v3 < v4 )
    {
      while ( 1 )
      {
        v5 = v3 & 1;
        if ( this->m_readyToSend[v5] )
          break;
        if ( ++v3 >= v4 )
          goto LABEL_23;
      }
      v6 = 8i64 * tls_index;
      if ( dword_14A2683FC > *(_DWORD *)(*(_QWORD *)((char *)NtCurrentTeb()->Reserved1[11] + v6) + 1772i64) )
      {
        j__Init_thread_header(&dword_14A2683FC);
        if ( dword_14A2683FC == -1 )
        {
          bdSocket::bdSocket(&socket_1);
          j_atexit(OnlineTimeSeriesLog::WriteInflightBufferToUDP_::_2_::_dynamic_atexit_destructor_for__socket__);
          j__Init_thread_footer(&dword_14A2683FC);
        }
      }
      if ( dword_14A2684C8 > *(_DWORD *)(*(_QWORD *)((char *)NtCurrentTeb()->Reserved1[11] + v6) + 1772i64) )
      {
        j__Init_thread_header(&dword_14A2684C8);
        if ( dword_14A2684C8 == -1 )
        {
          bdAddr::bdAddr(&addr, destAddress);
          j__Init_thread_footer(&dword_14A2684C8);
        }
      }
      if ( bSocketCreated || (bSocketCreated = bdSocket::create(&socket_1, 0, 1, 1)) )
      {
        v7 = -1i64;
        do
          ++v7;
        while ( this->m_inflightBuffer[v5][v7] );
        v8 = bdSocket::sendTo(&socket_1, &addr, this->m_inflightBuffer[v5], v7);
        if ( v8 >= 0 )
        {
          this->m_isInFlight = 0;
          this->m_readyToSend[v5] = 0;
          goto LABEL_23;
        }
        Com_PrintError(25, "WriteInflightBufferToUDP - failed with error %i\n", (unsigned int)v8);
      }
      Com_Printf(25, "CheckForWriteBuffer - Something has gone wrong!\n");
    }
LABEL_23:
    Sys_LeaveCriticalSection(CRITSECT_INFLUXDB);
  }
}

/*
==============
OnlineTimeSeriesLog::CollectMetrics_Client
==============
*/
void OnlineTimeSeriesLog::CollectMetrics_Client(OnlineTimeSeriesLog *this)
{
  unsigned int v2; 
  const dvar_t *v3; 
  int integer; 
  int ControllerFromClient; 
  DWServicesAccess *Instance; 
  DWLogin *Login; 
  DWServicesAccess *v8; 
  DWServicesAccess *v9; 
  DWLobbyService *DWLobbyService; 
  const char *CountryCodeString; 
  const char *v12; 
  const char *v13; 
  const char *v14; 
  char ActiveGameMode; 
  const char *v16; 
  const char *v17; 
  bool IsActive; 
  const char *v19; 
  const char *v20; 
  bool v21; 
  const char *v22; 
  bool v23; 
  const char *v24; 
  const char *v25; 

  v2 = Sys_Milliseconds();
  if ( v2 > this->m_nextMetricsCollection_ms )
  {
    v3 = DVARINT_online_logging_metrics_collection_interval_ms;
    if ( DVARINT_online_logging_metrics_collection_interval_ms )
    {
      Dvar_CheckFrontendServerThread(DVARINT_online_logging_metrics_collection_interval_ms);
      integer = v3->current.integer;
    }
    else
    {
      integer = 30000;
    }
    this->m_nextMetricsCollection_ms = v2 + integer;
    ControllerFromClient = CL_Mgr_GetControllerFromClient(LOCAL_CLIENT_0);
    if ( ControllerFromClient >= 0 )
    {
      Instance = DWServicesAccess::GetInstance();
      Login = DWServicesAccess::GetLogin(Instance, ControllerFromClient);
      if ( DWLogin::succeeded(Login) )
        OnlineTimeSeriesLog::WriteEventCounter(this, "auth.count", 1u);
      v8 = DWServicesAccess::GetInstance();
      if ( DWServicesAccess::isReady(v8, ControllerFromClient) )
      {
        v9 = DWServicesAccess::GetInstance();
        DWLobbyService = DWServicesAccess::GetDWLobbyService(v9, ControllerFromClient);
        if ( DWLobbyService::getStatus(DWLobbyService) == CONNECTED )
        {
          CountryCodeString = LiveRegionInfo_GetCountryCodeString();
          v12 = j_va("lobby.%s.count", CountryCodeString);
          OnlineTimeSeriesLog::WriteEventCounter(this, v12, 1u);
          v13 = NULL;
          v14 = LiveRegionInfo_GetCountryCodeString();
          ActiveGameMode = Com_GameMode_GetActiveGameMode();
          switch ( ActiveGameMode )
          {
            case 1:
              v16 = j_va("gamemode.sp.%s.count", v14);
              break;
            case 2:
              v13 = "mp";
              v16 = j_va("gamemode.mp.%s.count", v14);
              break;
            case 3:
              v13 = "cp";
              v16 = j_va("gamemode.cp.%s.count", v14);
              break;
            default:
              v16 = j_va("gamemode.no.%s.count", v14);
              break;
          }
          OnlineTimeSeriesLog::WriteEventCounter(this, v16, 1u);
          if ( v13 )
          {
            if ( Dvar_GetBool_Internal_DebugName(DVARBOOL_xblive_privatematch, "xblive_privatematch") )
            {
              v17 = LiveRegionInfo_GetCountryCodeString();
              IsActive = Com_FrontEndScene_IsActive();
              v19 = "ig";
              if ( IsActive )
                v19 = "fe";
              v20 = j_va("game.private.%s.%s.%s.count", v13, v19, v17);
              OnlineTimeSeriesLog::WriteEventCounter(this, v20, 1u);
            }
            else
            {
              v21 = Live_IsInSystemlinkLobby();
              v22 = LiveRegionInfo_GetCountryCodeString();
              v23 = Com_FrontEndScene_IsActive();
              v24 = "ig";
              if ( v21 )
              {
                if ( v23 )
                  v24 = "fe";
                v25 = j_va("game.system.%s.%s.%s.count", v13, v24, v22);
              }
              else
              {
                if ( v23 )
                  v24 = "fe";
                v25 = j_va("game.online.%s.%s.%s.count", v13, v24, v22);
              }
              OnlineTimeSeriesLog::WriteEventCounter(this, v25, 1u);
            }
          }
        }
      }
    }
  }
}

/*
==============
OnlineTimeSeriesLog::CollectMetrics_Dedi
==============
*/
void OnlineTimeSeriesLog::CollectMetrics_Dedi(OnlineTimeSeriesLog *this)
{
  ;
}

/*
==============
OnlineTimeSeriesLog::ControllerFrame
==============
*/
void OnlineTimeSeriesLog::ControllerFrame(OnlineTimeSeriesLog *this, const int controllerIndex)
{
  ;
}

/*
==============
OnlineTimeSeriesLog::EndMeasurement
==============
*/
void OnlineTimeSeriesLog::EndMeasurement(OnlineTimeSeriesLog *this, const unsigned __int64 measurementHandle)
{
  if ( !measurementHandle && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\online\\online_logging_timeseries.cpp", 799, ASSERT_TYPE_ASSERT, "(measurement)", (const char *)&queryFormat, "measurement") )
    __debugbreak();
  if ( !*(_BYTE *)measurementHandle && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\online\\online_logging_timeseries.cpp", 800, ASSERT_TYPE_ASSERT, "(measurement->m_inUse)", (const char *)&queryFormat, "measurement->m_inUse") )
    __debugbreak();
  DLog_EndEvent((DLogContext *)(measurementHandle + 8));
  DLog_RecordContext((DLogContext *)(measurementHandle + 8));
  *(_BYTE *)(measurementHandle + 8560) = 0;
  *(_BYTE *)measurementHandle = 0;
}

/*
==============
OnlineTimeSeriesLog::FlushInfluxDBMeasurement
==============
*/
bool OnlineTimeSeriesLog::FlushInfluxDBMeasurement(OnlineTimeSeriesLog *this, tInfluxMeasurement *measurement)
{
  return 0;
}

/*
==============
OnlineTimeSeriesLog::Frame
==============
*/
void OnlineTimeSeriesLog::Frame(OnlineTimeSeriesLog *this)
{
  DWServicesAccess *Instance; 
  DWGameMetrics *GameMetrics; 
  const dvar_t *v5; 
  __int64 v6; 
  unsigned int m_readyToSendOffset; 
  __int64 v11; 
  unsigned int v12; 
  bool *v13; 
  bdHTTP *m_httpInterface; 
  bdHTTP::bdStatus v15; 
  bdHTTP::bdStatus v16; 
  int v17; 
  unsigned int v18; 
  const char *StatusCodeString; 
  char *fmt; 

  Instance = DWServicesAccess::GetInstance();
  GameMetrics = DWServicesAccess::GetGameMetrics(Instance);
  if ( GameMetrics->isReady(GameMetrics) )
  {
    v5 = DVARBOOL_online_matchmaking_using_metrics;
    if ( !DVARBOOL_online_matchmaking_using_metrics && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\universal\\dvar.h", 692, ASSERT_TYPE_ASSERT, "(dvar)", "%s\n\tDvar %s accessed after deregistration", "dvar", "online_matchmaking_using_metrics") )
      __debugbreak();
    Dvar_CheckFrontendServerThread(v5);
    if ( v5->current.enabled )
    {
      OnlineTimeSeriesLog::CollectMetrics_Client(this);
      if ( this->m_httpInterface )
      {
        OnlineTimeSeriesLog::CheckForWriteBuffer(this);
        v6 = -1i64;
        do
          ++v6;
        while ( this->m_outgoingBuffer1[v6] );
        if ( (_DWORD)v6 )
        {
          __asm
          {
            vxorps  xmm0, xmm0, xmm0
            vcvtsi2ss xmm0, xmm0, rax
            vmulss  xmm1, xmm0, cs:__real@37800000
            vcomiss xmm1, cs:__real@3f4ccccd
          }
          Sys_EnterCriticalSection(CRITSECT_INFLUXDB);
          m_readyToSendOffset = this->m_readyToSendOffset;
          v11 = m_readyToSendOffset & 1;
          v12 = m_readyToSendOffset + 2;
          if ( m_readyToSendOffset < m_readyToSendOffset + 2 )
          {
            while ( this->m_readyToSend[m_readyToSendOffset & 1] )
            {
              if ( ++m_readyToSendOffset >= v12 )
                goto LABEL_16;
            }
            v11 = m_readyToSendOffset & 1;
          }
LABEL_16:
          v13 = &this->m_readyToSend[v11];
          if ( *v13 )
          {
            LODWORD(fmt) = this->m_isInFlight;
            Com_Printf(25, "WriteBuffer - Something has gone wrong! [%u,%u] is in flight = %u\n", this->m_readyToSend[0], this->m_readyToSend[1], fmt);
          }
          else
          {
            Core_strcpy(this->m_inflightBuffer[(unsigned __int64)(unsigned int)v11], 0x10000ui64, this->m_outgoingBuffer1);
            *v13 = 1;
            ++this->m_readyToSendOffset;
            memset_0(this->m_outgoingBuffer1, 0, sizeof(this->m_outgoingBuffer1));
          }
          Sys_LeaveCriticalSection(CRITSECT_INFLUXDB);
        }
        if ( this->m_isInFlight )
        {
          if ( !this->m_httpInterface && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\online\\online_logging_timeseries.cpp", 990, ASSERT_TYPE_ASSERT, "(m_httpInterface)", (const char *)&queryFormat, "m_httpInterface") )
            __debugbreak();
          if ( this->m_isInFlight )
          {
            m_httpInterface = this->m_httpInterface;
            if ( m_httpInterface )
            {
              v15 = ((unsigned int (*)(void))m_httpInterface->getStatus)();
              v16 = v15;
              if ( ((v15 - 1) & 0xFFFFFFFD) != 0 )
              {
                if ( v15 != BD_CANCELLED )
                {
                  v17 = this->m_httpInterface->getInternalError(this->m_httpInterface);
                  v18 = this->m_httpInterface->getLastHTTPStatus(this->m_httpInterface);
                  StatusCodeString = bdAuthHTTPUtility::getStatusCodeString(v16);
                  LODWORD(fmt) = v17;
                  Com_Printf(25, "OnlineTimeSeriesLog::PumpInflightBuffer : Failed to write HTTP buffer [%s] HTTP Code [%d] DW Error [%d]\n", StatusCodeString, v18, fmt);
                }
                this->m_isInFlight = 0;
              }
            }
          }
        }
      }
    }
  }
}

/*
==============
OnlineTimeSeriesLog::Get
==============
*/
OnlineTimeSeriesLog *OnlineTimeSeriesLog::Get()
{
  return &OnlineTimeSeriesLog::ms_instance;
}

/*
==============
OnlineTimeSeriesLog::Init
==============
*/
char OnlineTimeSeriesLog::Init(OnlineTimeSeriesLog *this)
{
  const dvar_t *v1; 

  v1 = DVARBOOL_online_logging_timeseries_onoff;
  if ( !DVARBOOL_online_logging_timeseries_onoff && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\universal\\dvar.h", 692, ASSERT_TYPE_ASSERT, "(dvar)", "%s\n\tDvar %s accessed after deregistration", "dvar", "online_logging_timeseries_onoff") )
    __debugbreak();
  Dvar_CheckFrontendServerThread(v1);
  if ( !v1->current.enabled )
    return 0;
  if ( !this->m_httpInterface )
    this->m_httpInterface = bdHTTPUtility::newHTTP(0, 0);
  if ( this->m_isInFlight && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\online\\online_logging_timeseries.cpp", 91, ASSERT_TYPE_ASSERT, "(!m_isInFlight)", (const char *)&queryFormat, "!m_isInFlight") )
    __debugbreak();
  memset_0(this->m_outgoingBuffer1, 0, sizeof(this->m_outgoingBuffer1));
  this->m_readyToSendOffset = 0;
  *(_WORD *)this->m_readyToSend = 0;
  memset_0(this->m_responseBuffer, 0, sizeof(this->m_responseBuffer));
  memset_0(this->m_inflightBuffer, 0, sizeof(this->m_inflightBuffer));
  memset_0(this->m_measurements, 0, sizeof(this->m_measurements));
  return 1;
}

/*
==============
OnlineTimeSeriesLog::OnDisconnect
==============
*/
void OnlineTimeSeriesLog::OnDisconnect(OnlineTimeSeriesLog *this, ONLINE_DISCONNECT reason)
{
  ;
}

/*
==============
OnlineTimeSeriesLog::OnRegistered
==============
*/
void OnlineTimeSeriesLog::OnRegistered(OnlineTimeSeriesLog *this)
{
  ;
}

/*
==============
OnlineTimeSeriesLog::OnSignedIn
==============
*/
void OnlineTimeSeriesLog::OnSignedIn(OnlineTimeSeriesLog *this, const int controllerIndex, GenericSignInState signinState)
{
  ;
}

/*
==============
OnlineTimeSeriesLog::OnSignedOut
==============
*/
void OnlineTimeSeriesLog::OnSignedOut(OnlineTimeSeriesLog *this, const int controllerIndex, GenericSignOutState signOutState)
{
  ;
}

/*
==============
OnlineTimeSeriesLog::OnUnregistered
==============
*/
void OnlineTimeSeriesLog::OnUnregistered(OnlineTimeSeriesLog *this)
{
  ;
}

/*
==============
OnlineTimeSeriesLog::OutputCurrentState
==============
*/
void OnlineTimeSeriesLog::OutputCurrentState(OnlineTimeSeriesLog *this, const int controllerIndex)
{
  ;
}

/*
==============
OnlineTimeSeriesLog::PumpInflightBuffer
==============
*/
void OnlineTimeSeriesLog::PumpInflightBuffer(OnlineTimeSeriesLog *this)
{
  bdHTTP *m_httpInterface; 
  bdHTTP::bdStatus v3; 
  bdHTTP::bdStatus v4; 
  int v5; 
  unsigned int v6; 
  const char *StatusCodeString; 
  char *fmt; 

  if ( !this->m_httpInterface && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\online\\online_logging_timeseries.cpp", 990, ASSERT_TYPE_ASSERT, "(m_httpInterface)", (const char *)&queryFormat, "m_httpInterface") )
    __debugbreak();
  if ( this->m_isInFlight )
  {
    m_httpInterface = this->m_httpInterface;
    if ( m_httpInterface )
    {
      v3 = ((unsigned int (*)(void))m_httpInterface->getStatus)();
      v4 = v3;
      if ( ((v3 - 1) & 0xFFFFFFFD) != 0 )
      {
        if ( v3 != BD_CANCELLED )
        {
          v5 = this->m_httpInterface->getInternalError(this->m_httpInterface);
          v6 = this->m_httpInterface->getLastHTTPStatus(this->m_httpInterface);
          StatusCodeString = bdAuthHTTPUtility::getStatusCodeString(v4);
          LODWORD(fmt) = v5;
          Com_Printf(25, "OnlineTimeSeriesLog::PumpInflightBuffer : Failed to write HTTP buffer [%s] HTTP Code [%d] DW Error [%d]\n", StatusCodeString, v6, fmt);
        }
        this->m_isInFlight = 0;
      }
    }
  }
}

/*
==============
OnlineTimeSeriesLog::RegisterLuaFunctions
==============
*/
void OnlineTimeSeriesLog::RegisterLuaFunctions(OnlineTimeSeriesLog *this, lua_State *luaVM)
{
  ;
}

/*
==============
OnlineTimeSeriesLog::Uninit
==============
*/
void OnlineTimeSeriesLog::Uninit(OnlineTimeSeriesLog *this)
{
  bdHTTP *m_httpInterface; 

  m_httpInterface = this->m_httpInterface;
  if ( m_httpInterface )
  {
    ((void (__fastcall *)(bdHTTP *, __int64))m_httpInterface->~bdHTTP)(m_httpInterface, 1i64);
    this->m_httpInterface = NULL;
  }
}

/*
==============
OnlineTimeSeriesLog::WriteBuffer
==============
*/
__int64 OnlineTimeSeriesLog::WriteBuffer(OnlineTimeSeriesLog *this, char *bufferToSend)
{
  unsigned __int8 v4; 
  unsigned int m_readyToSendOffset; 
  __int64 v6; 
  unsigned int v7; 
  bool *v8; 

  v4 = 0;
  Sys_EnterCriticalSection(CRITSECT_INFLUXDB);
  m_readyToSendOffset = this->m_readyToSendOffset;
  v6 = m_readyToSendOffset & 1;
  v7 = m_readyToSendOffset + 2;
  if ( m_readyToSendOffset < m_readyToSendOffset + 2 )
  {
    while ( this->m_readyToSend[m_readyToSendOffset & 1] )
    {
      if ( ++m_readyToSendOffset >= v7 )
        goto LABEL_6;
    }
    v6 = m_readyToSendOffset & 1;
  }
LABEL_6:
  v8 = &this->m_readyToSend[v6];
  if ( *v8 )
  {
    Com_Printf(25, "WriteBuffer - Something has gone wrong! [%u,%u] is in flight = %u\n", this->m_readyToSend[0], this->m_readyToSend[1], this->m_isInFlight);
  }
  else
  {
    Core_strcpy(this->m_inflightBuffer[(unsigned __int64)(unsigned int)v6], 0x10000ui64, bufferToSend);
    *v8 = 1;
    ++this->m_readyToSendOffset;
    memset_0(bufferToSend, 0, 0x10000ui64);
    v4 = 1;
  }
  Sys_LeaveCriticalSection(CRITSECT_INFLUXDB);
  return v4;
}

/*
==============
OnlineTimeSeriesLog::WriteEventCounter
==============
*/

void __fastcall OnlineTimeSeriesLog::WriteEventCounter(OnlineTimeSeriesLog *this, const char *eventName, const unsigned int value, double _XMM3_8)
{
  DWServicesAccess *Instance; 
  DWGameMetrics *GameMetrics; 
  const dvar_t *v7; 
  DWServicesAccess *v8; 
  const char *EnvironmentString; 
  DWServicesAccess *v10; 
  unsigned int TitleID; 
  unsigned __int64 EpochTimeFromAuth_s; 
  DWServicesAccess *v13; 
  DWGameMetrics *v14; 
  char dest[208]; 

  if ( !eventName && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\online\\online_logging_timeseries.cpp", 347, ASSERT_TYPE_ASSERT, "(eventName)", (const char *)&queryFormat, "eventName") )
    __debugbreak();
  Instance = DWServicesAccess::GetInstance();
  GameMetrics = DWServicesAccess::GetGameMetrics(Instance);
  if ( GameMetrics->isReady(GameMetrics) )
  {
    v7 = DVARBOOL_online_matchmaking_using_metrics;
    if ( !DVARBOOL_online_matchmaking_using_metrics && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\universal\\dvar.h", 692, ASSERT_TYPE_ASSERT, "(dvar)", "%s\n\tDvar %s accessed after deregistration", "dvar", "online_matchmaking_using_metrics") )
      __debugbreak();
    Dvar_CheckFrontendServerThread(v7);
    if ( v7->current.enabled )
    {
      v8 = DWServicesAccess::GetInstance();
      EnvironmentString = DWServicesAccess::GetEnvironmentString(v8);
      v10 = DWServicesAccess::GetInstance();
      TitleID = DWServicesAccess::GetTitleID(v10);
      if ( Com_sprintf_truncate(dest, 0xC8ui64, "iw8.%d.%s.%s.%s", TitleID, EnvironmentString, "gc", eventName) < 0 )
      {
        Com_Printf(25, "OnlineTimeSeriesLog::WriteEventUInt - failed to write %s due to inadequate preamble buffer size.\n", eventName);
      }
      else
      {
        EpochTimeFromAuth_s = Online_GetEpochTimeFromAuth_s();
        v13 = DWServicesAccess::GetInstance();
        v14 = DWServicesAccess::GetGameMetrics(v13);
        __asm
        {
          vxorps  xmm3, xmm3, xmm3
          vcvtsi2sd xmm3, xmm3, rsi; value
        }
        if ( !DWGameMetrics::counter(v14, EpochTimeFromAuth_s, dest, *(long double *)&_XMM3) )
          Com_Printf(25, "OnlineTimeSeriesLog::WriteEventUInt - failed to write %s due to failure in game metrics.\n", eventName);
      }
    }
  }
}

/*
==============
OnlineTimeSeriesLog::WriteEventFloat
==============
*/

void __fastcall OnlineTimeSeriesLog::WriteEventFloat(OnlineTimeSeriesLog *this, const char *eventName, double value)
{
  __asm { vcvttss2si r8, xmm2; value }
  OnlineTimeSeriesLog::WriteEventCounter(this, eventName, _R8);
}

/*
==============
OnlineTimeSeriesLog::WriteEventGauge
==============
*/

void __fastcall OnlineTimeSeriesLog::WriteEventGauge(OnlineTimeSeriesLog *this, const char *eventName, const unsigned int value, double _XMM3_8)
{
  DWServicesAccess *Instance; 
  DWGameMetrics *GameMetrics; 
  const dvar_t *v7; 
  DWServicesAccess *v8; 
  const char *EnvironmentString; 
  DWServicesAccess *v10; 
  unsigned int TitleID; 
  unsigned __int64 EpochTimeFromAuth_s; 
  DWServicesAccess *v13; 
  DWGameMetrics *v14; 
  char dest[208]; 

  if ( !eventName && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\online\\online_logging_timeseries.cpp", 391, ASSERT_TYPE_ASSERT, "(eventName)", (const char *)&queryFormat, "eventName") )
    __debugbreak();
  Instance = DWServicesAccess::GetInstance();
  GameMetrics = DWServicesAccess::GetGameMetrics(Instance);
  if ( GameMetrics->isReady(GameMetrics) )
  {
    v7 = DVARBOOL_online_matchmaking_using_metrics;
    if ( !DVARBOOL_online_matchmaking_using_metrics && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\universal\\dvar.h", 692, ASSERT_TYPE_ASSERT, "(dvar)", "%s\n\tDvar %s accessed after deregistration", "dvar", "online_matchmaking_using_metrics") )
      __debugbreak();
    Dvar_CheckFrontendServerThread(v7);
    if ( v7->current.enabled )
    {
      v8 = DWServicesAccess::GetInstance();
      EnvironmentString = DWServicesAccess::GetEnvironmentString(v8);
      v10 = DWServicesAccess::GetInstance();
      TitleID = DWServicesAccess::GetTitleID(v10);
      if ( Com_sprintf_truncate(dest, 0xC8ui64, "iw8.%d.%s.%s.%s", TitleID, EnvironmentString, "gc", eventName) < 0 )
      {
        Com_Printf(25, "OnlineTimeSeriesLog::WriteEventUInt - failed to write %s due to inadequate preamble buffer size.\n", eventName);
      }
      else
      {
        EpochTimeFromAuth_s = Online_GetEpochTimeFromAuth_s();
        v13 = DWServicesAccess::GetInstance();
        v14 = DWServicesAccess::GetGameMetrics(v13);
        __asm
        {
          vxorps  xmm3, xmm3, xmm3
          vcvtsi2sd xmm3, xmm3, rsi; value
        }
        if ( !DWGameMetrics::gauge(v14, EpochTimeFromAuth_s, dest, *(long double *)&_XMM3) )
          Com_Printf(25, "OnlineTimeSeriesLog::WriteEventUInt - failed to write %s due to failure in game metrics.\n", eventName);
      }
    }
  }
}

/*
==============
OnlineTimeSeriesLog::WriteEventInt
==============
*/

void __fastcall OnlineTimeSeriesLog::WriteEventInt(OnlineTimeSeriesLog *this, const char *eventName, const int value)
{
  OnlineTimeSeriesLog::WriteEventCounter(this, eventName, value);
}

/*
==============
OnlineTimeSeriesLog::WriteEventSet
==============
*/

void __fastcall OnlineTimeSeriesLog::WriteEventSet(OnlineTimeSeriesLog *this, const char *eventName, double value)
{
  DWServicesAccess *Instance; 
  DWGameMetrics *GameMetrics; 
  const dvar_t *v8; 
  DWServicesAccess *v9; 
  const char *EnvironmentString; 
  DWServicesAccess *v11; 
  unsigned int TitleID; 
  unsigned __int64 EpochTimeFromAuth_s; 
  DWServicesAccess *v14; 
  DWGameMetrics *v15; 
  char dest[208]; 

  __asm
  {
    vmovaps [rsp+138h+var_18], xmm6
    vmovaps xmm6, xmm2
  }
  if ( !eventName && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\online\\online_logging_timeseries.cpp", 479, ASSERT_TYPE_ASSERT, "(eventName)", (const char *)&queryFormat, "eventName") )
    __debugbreak();
  Instance = DWServicesAccess::GetInstance();
  GameMetrics = DWServicesAccess::GetGameMetrics(Instance);
  if ( GameMetrics->isReady(GameMetrics) )
  {
    v8 = DVARBOOL_online_matchmaking_using_metrics;
    if ( !DVARBOOL_online_matchmaking_using_metrics && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\universal\\dvar.h", 692, ASSERT_TYPE_ASSERT, "(dvar)", "%s\n\tDvar %s accessed after deregistration", "dvar", "online_matchmaking_using_metrics") )
      __debugbreak();
    Dvar_CheckFrontendServerThread(v8);
    if ( v8->current.enabled )
    {
      v9 = DWServicesAccess::GetInstance();
      EnvironmentString = DWServicesAccess::GetEnvironmentString(v9);
      v11 = DWServicesAccess::GetInstance();
      TitleID = DWServicesAccess::GetTitleID(v11);
      if ( Com_sprintf_truncate(dest, 0xC8ui64, "iw8.%d.%s.%s.%s", TitleID, EnvironmentString, "gc", eventName) < 0 )
      {
        Com_Printf(25, "OnlineTimeSeriesLog::WriteEventUInt - failed to write %s due to inadequate preamble buffer size.\n", eventName);
      }
      else
      {
        EpochTimeFromAuth_s = Online_GetEpochTimeFromAuth_s();
        v14 = DWServicesAccess::GetInstance();
        v15 = DWServicesAccess::GetGameMetrics(v14);
        __asm { vcvtss2sd xmm3, xmm6, xmm6; value }
        if ( !DWGameMetrics::set(v15, EpochTimeFromAuth_s, dest, *(long double *)&_XMM3) )
          Com_Printf(25, "OnlineTimeSeriesLog::WriteEventUInt - failed to write %s due to failure in game metrics.\n", eventName);
      }
    }
  }
  __asm { vmovaps xmm6, [rsp+138h+var_18] }
}

/*
==============
OnlineTimeSeriesLog::WriteEventTiming
==============
*/

void __fastcall OnlineTimeSeriesLog::WriteEventTiming(OnlineTimeSeriesLog *this, const char *eventName, double timingValue)
{
  DWServicesAccess *Instance; 
  DWGameMetrics *GameMetrics; 
  const dvar_t *v8; 
  DWServicesAccess *v9; 
  const char *EnvironmentString; 
  DWServicesAccess *v11; 
  unsigned int TitleID; 
  unsigned __int64 EpochTimeFromAuth_s; 
  DWServicesAccess *v14; 
  DWGameMetrics *v15; 
  char dest[208]; 

  __asm
  {
    vmovaps [rsp+138h+var_18], xmm6
    vmovaps xmm6, xmm2
  }
  if ( !eventName && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\online\\online_logging_timeseries.cpp", 435, ASSERT_TYPE_ASSERT, "(eventName)", (const char *)&queryFormat, "eventName") )
    __debugbreak();
  Instance = DWServicesAccess::GetInstance();
  GameMetrics = DWServicesAccess::GetGameMetrics(Instance);
  if ( GameMetrics->isReady(GameMetrics) )
  {
    v8 = DVARBOOL_online_matchmaking_using_metrics;
    if ( !DVARBOOL_online_matchmaking_using_metrics && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\universal\\dvar.h", 692, ASSERT_TYPE_ASSERT, "(dvar)", "%s\n\tDvar %s accessed after deregistration", "dvar", "online_matchmaking_using_metrics") )
      __debugbreak();
    Dvar_CheckFrontendServerThread(v8);
    if ( v8->current.enabled )
    {
      v9 = DWServicesAccess::GetInstance();
      EnvironmentString = DWServicesAccess::GetEnvironmentString(v9);
      v11 = DWServicesAccess::GetInstance();
      TitleID = DWServicesAccess::GetTitleID(v11);
      if ( Com_sprintf_truncate(dest, 0xC8ui64, "iw8.%d.%s.%s.%s", TitleID, EnvironmentString, "gc", eventName) < 0 )
      {
        Com_Printf(25, "OnlineTimeSeriesLog::WriteEventUInt - failed to write %s due to inadequate preamble buffer size.\n", eventName);
      }
      else
      {
        EpochTimeFromAuth_s = Online_GetEpochTimeFromAuth_s();
        v14 = DWServicesAccess::GetInstance();
        v15 = DWServicesAccess::GetGameMetrics(v14);
        __asm { vcvtss2sd xmm3, xmm6, xmm6; value }
        if ( !DWGameMetrics::timing(v15, EpochTimeFromAuth_s, dest, *(long double *)&_XMM3) )
          Com_Printf(25, "OnlineTimeSeriesLog::WriteEventUInt - failed to write %s due to failure in game metrics.\n", eventName);
      }
    }
  }
  __asm { vmovaps xmm6, [rsp+138h+var_18] }
}

/*
==============
OnlineTimeSeriesLog::WriteEventUInt
==============
*/

void __fastcall OnlineTimeSeriesLog::WriteEventUInt(OnlineTimeSeriesLog *this, const char *eventName, const unsigned int value)
{
  OnlineTimeSeriesLog::WriteEventCounter(this, eventName, value);
}

/*
==============
OnlineTimeSeriesLog::WriteInflightBufferToHTTPS
==============
*/
__int64 OnlineTimeSeriesLog::WriteInflightBufferToHTTPS(OnlineTimeSeriesLog *this, const char *bufferToSend)
{
  unsigned __int8 v4; 
  bdHTTP *m_httpInterface; 
  __int64 v6; 
  bdHTTP::bdStatus v7; 

  if ( !Sys_IsMainThread() && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\online\\online_logging_timeseries.cpp", 949, ASSERT_TYPE_ASSERT, "(Sys_IsMainThread())", (const char *)&queryFormat, "Sys_IsMainThread()") )
    __debugbreak();
  v4 = 0;
  if ( !this->m_httpInterface && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\online\\online_logging_timeseries.cpp", 953, ASSERT_TYPE_ASSERT, "(m_httpInterface)", (const char *)&queryFormat, "m_httpInterface") )
    __debugbreak();
  m_httpInterface = this->m_httpInterface;
  if ( m_httpInterface )
  {
    if ( ((unsigned __int8 (__fastcall *)(bdHTTP *, __int64, const char *))m_httpInterface->initRequest)(m_httpInterface, 3i64, "http:
    {
      v6 = -1i64;
      do
        ++v6;
      while ( bufferToSend[v6] );
      bdHTTP::setUploadData(this->m_httpInterface, bufferToSend, v6);
      bdHTTP::setDownloadBuffer(this->m_httpInterface, this->m_responseBuffer, 0x400u);
      v7 = this->m_httpInterface->sendRequest(this->m_httpInterface);
      if ( v7 == BD_FAILED )
      {
        this->m_isInFlight = 1;
        v4 = 1;
      }
      else
      {
        Com_Printf(25, "OnlineTimeSeriesLog::WriteInflightBufferToHTTPS - failed with %d.\n", (unsigned int)v7);
      }
      this->m_timeTillNextFlushms = Sys_Milliseconds() + 30000;
    }
    else if ( CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\online\\online_logging_timeseries.cpp", 978, ASSERT_TYPE_ASSERT, "(false)", (const char *)&queryFormat, "false") )
    {
      __debugbreak();
    }
  }
  return v4;
}

/*
==============
OnlineTimeSeriesLog::WriteInflightBufferToUDP
==============
*/
char OnlineTimeSeriesLog::WriteInflightBufferToUDP(OnlineTimeSeriesLog *this, const char *bufferToSend)
{
  __int64 v4; 
  __int64 v5; 
  int v6; 

  v4 = 8i64 * tls_index;
  if ( dword_14A2683FC > *(_DWORD *)(*(_QWORD *)((char *)NtCurrentTeb()->Reserved1[11] + v4) + 1772i64) )
  {
    j__Init_thread_header(&dword_14A2683FC);
    if ( dword_14A2683FC == -1 )
    {
      bdSocket::bdSocket(&socket_1);
      j_atexit(OnlineTimeSeriesLog::WriteInflightBufferToUDP_::_2_::_dynamic_atexit_destructor_for__socket__);
      j__Init_thread_footer(&dword_14A2683FC);
    }
  }
  if ( dword_14A2684C8 > *(_DWORD *)(*(_QWORD *)((char *)NtCurrentTeb()->Reserved1[11] + v4) + 1772i64) )
  {
    j__Init_thread_header(&dword_14A2684C8);
    if ( dword_14A2684C8 == -1 )
    {
      bdAddr::bdAddr(&addr, destAddress);
      j__Init_thread_footer(&dword_14A2684C8);
    }
  }
  if ( bSocketCreated || (bSocketCreated = bdSocket::create(&socket_1, 0, 1, 1)) )
  {
    v5 = -1i64;
    do
      ++v5;
    while ( bufferToSend[v5] );
    v6 = bdSocket::sendTo(&socket_1, &addr, bufferToSend, v5);
    if ( v6 >= 0 )
    {
      this->m_isInFlight = 0;
      return 1;
    }
    Com_PrintError(25, "WriteInflightBufferToUDP - failed with error %i\n", (unsigned int)v6);
  }
  return 0;
}

