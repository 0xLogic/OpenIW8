/*
==============
CL_TransientsCommonMP_OnLevelLoad
==============
*/

void CL_TransientsCommonMP_OnLevelLoad(void)
{
  ?CL_TransientsCommonMP_OnLevelLoad@@YAXXZ();
}

/*
==============
CL_TransientsCommonMP_GetWorldWeaponMemoryCost
==============
*/

unsigned __int64 __fastcall CL_TransientsCommonMP_GetWorldWeaponMemoryCost()
{
  return ?CL_TransientsCommonMP_GetWorldWeaponMemoryCost@@YA_KXZ();
}

/*
==============
CL_TransientsCommonMP_Update
==============
*/

void CL_TransientsCommonMP_Update(void)
{
  ?CL_TransientsCommonMP_Update@@YAXXZ();
}

/*
==============
CL_TransientsCommonMP_GetViewArmsMemoryCost
==============
*/

unsigned __int64 __fastcall CL_TransientsCommonMP_GetViewArmsMemoryCost()
{
  return ?CL_TransientsCommonMP_GetViewArmsMemoryCost@@YA_KXZ();
}

/*
==============
CL_TransientsCommonMP_GetMemoryBudget
==============
*/

unsigned __int64 __fastcall CL_TransientsCommonMP_GetMemoryBudget()
{
  return ?CL_TransientsCommonMP_GetMemoryBudget@@YA_KXZ();
}

/*
==============
CL_TransientsCommonMP_OnLobbyToGameStart
==============
*/

void CL_TransientsCommonMP_OnLobbyToGameStart(void)
{
  ?CL_TransientsCommonMP_OnLobbyToGameStart@@YAXXZ();
}

/*
==============
CL_TransientsCommonMP_RegisterFileIndex
==============
*/

void __fastcall CL_TransientsCommonMP_RegisterFileIndex(const TransientInfo *const transientInfo, unsigned __int16 fileIndex, unsigned __int16 transientInfoIndex)
{
  ?CL_TransientsCommonMP_RegisterFileIndex@@YAXQEBUTransientInfo@@GG@Z(transientInfo, fileIndex, transientInfoIndex);
}

/*
==============
CL_TransientsCommonMP_GetViewWeaponMemoryCost
==============
*/

unsigned __int64 __fastcall CL_TransientsCommonMP_GetViewWeaponMemoryCost()
{
  return ?CL_TransientsCommonMP_GetViewWeaponMemoryCost@@YA_KXZ();
}

/*
==============
CL_TransientsCommonMP_SetPrioritizationFlags
==============
*/

void __fastcall CL_TransientsCommonMP_SetPrioritizationFlags(const CL_TransientsCommonMP_PrioritizationFlags flags)
{
  ?CL_TransientsCommonMP_SetPrioritizationFlags@@YAXW4CL_TransientsCommonMP_PrioritizationFlags@@@Z(flags);
}

/*
==============
CL_TransientsCommonMP_GetHeadMemoryCost
==============
*/

unsigned __int64 __fastcall CL_TransientsCommonMP_GetHeadMemoryCost()
{
  return ?CL_TransientsCommonMP_GetHeadMemoryCost@@YA_KXZ();
}

/*
==============
CL_TransientsCommonMP_IsEnabled
==============
*/

bool __fastcall CL_TransientsCommonMP_IsEnabled()
{
  return ?CL_TransientsCommonMP_IsEnabled@@YA_NXZ();
}

/*
==============
CL_TransientsCommonMP_GetPrioritizationFlags
==============
*/

CL_TransientsCommonMP_PrioritizationFlags __fastcall CL_TransientsCommonMP_GetPrioritizationFlags()
{
  return ?CL_TransientsCommonMP_GetPrioritizationFlags@@YA?AW4CL_TransientsCommonMP_PrioritizationFlags@@XZ();
}

/*
==============
CL_TransientsCommonMP_GetBodyMemoryCost
==============
*/

unsigned __int64 __fastcall CL_TransientsCommonMP_GetBodyMemoryCost()
{
  return ?CL_TransientsCommonMP_GetBodyMemoryCost@@YA_KXZ();
}

/*
==============
CL_TransientsCommonMP_AreModelsLoaded
==============
*/

bool __fastcall CL_TransientsCommonMP_AreModelsLoaded(const char *const *modelNames, const unsigned int modelCount)
{
  return ?CL_TransientsCommonMP_AreModelsLoaded@@YA_NPEBQEBDI@Z(modelNames, modelCount);
}

/*
==============
CL_TransientsCommonMP_UnregisterTransientInfo
==============
*/

void __fastcall CL_TransientsCommonMP_UnregisterTransientInfo(const TransientInfo *const transientInfo)
{
  ?CL_TransientsCommonMP_UnregisterTransientInfo@@YAXQEBUTransientInfo@@@Z(transientInfo);
}

/*
==============
CL_TransientsCommonMP_OnLevelUnload
==============
*/

void CL_TransientsCommonMP_OnLevelUnload(void)
{
  ?CL_TransientsCommonMP_OnLevelUnload@@YAXXZ();
}

/*
==============
CL_TransientsCommonMP_UnloadModels
==============
*/

void __fastcall CL_TransientsCommonMP_UnloadModels(const char *const *modelNames, const unsigned int modelCount)
{
  ?CL_TransientsCommonMP_UnloadModels@@YAXPEBQEBDI@Z(modelNames, modelCount);
}

/*
==============
CL_TransientsCommonMP_AnyUnloadsProcessed
==============
*/

bool __fastcall CL_TransientsCommonMP_AnyUnloadsProcessed()
{
  return ?CL_TransientsCommonMP_AnyUnloadsProcessed@@YA_NXZ();
}

/*
==============
CL_TransientsCommonMP_SetLoadPriorities
==============
*/

void __fastcall CL_TransientsCommonMP_SetLoadPriorities(const char *const *modelNames, const unsigned int modelCount, const AssetStreamingPriority priority)
{
  ?CL_TransientsCommonMP_SetLoadPriorities@@YAXPEBQEBDITAssetStreamingPriority@@@Z(modelNames, modelCount, priority);
}

/*
==============
CL_TransientsCommonMP_LoadModels
==============
*/

bool __fastcall CL_TransientsCommonMP_LoadModels(const char *const *modelNames, const unsigned int modelCount, const AssetStreamingPriority priority)
{
  return ?CL_TransientsCommonMP_LoadModels@@YA_NPEBQEBDITAssetStreamingPriority@@@Z(modelNames, modelCount, priority);
}

/*
==============
CL_TransientsCommonMP_RegisterTransientInfo
==============
*/

void __fastcall CL_TransientsCommonMP_RegisterTransientInfo(const TransientInfo *const transientInfo)
{
  ?CL_TransientsCommonMP_RegisterTransientInfo@@YAXQEBUTransientInfo@@@Z(transientInfo);
}

/*
==============
CL_TransientsCommonMP_ProcessFastfiles
==============
*/

void CL_TransientsCommonMP_ProcessFastfiles(void)
{
  ?CL_TransientsCommonMP_ProcessFastfiles@@YAXXZ();
}

/*
==============
CL_TransientsCommonMP_AnyUnloadsProcessed
==============
*/
_BOOL8 CL_TransientsCommonMP_AnyUnloadsProcessed()
{
  return s_transientsCommonMP.anyUnloadsProcessed;
}

/*
==============
CL_TransientsCommonMP_AreModelsLoaded
==============
*/
char CL_TransientsCommonMP_AreModelsLoaded(const char *const *modelNames, const unsigned int modelCount)
{
  unsigned __int16 v4; 
  unsigned int TransientAssetIndices; 
  unsigned __int16 v6; 
  unsigned __int64 v7; 
  __int64 v9; 
  __int64 v10; 
  unsigned __int16 outAssetIndices[20]; 

  v4 = 0;
  if ( !modelCount && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\client_mp\\cl_transients_common_mp.cpp", 1189, ASSERT_TYPE_ASSERT, "( modelCount ) != ( 0 )", "%s != %s\n\t%i, %i", "modelCount", "0", 0, 0i64) )
    __debugbreak();
  Sys_ProfBeginNamedEvent(0xFF808080, "CL_TransientsCommonMP_LookupTransientAssetsForRequest");
  TransientAssetIndices = CL_TransientsMP_GetTransientAssetIndices(modelNames, modelCount, ASSET_TYPE_XMODEL, outAssetIndices);
  v6 = truncate_cast<unsigned short,unsigned int>(TransientAssetIndices);
  Sys_ProfEndNamedEvent();
  if ( !v6 )
    return 1;
  while ( 1 )
  {
    v7 = outAssetIndices[v4];
    if ( (unsigned int)v7 >= 0x4000 )
    {
      LODWORD(v10) = 0x4000;
      LODWORD(v9) = outAssetIndices[v4];
      if ( CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\qcommon\\bitarray.h", 257, ASSERT_TYPE_ASSERT, "( pos ) < ( impl()->getBitCount() )", "pos < impl()->getBitCount()\n\t%i, %i", v9, v10) )
        __debugbreak();
    }
    if ( ((0x80000000 >> (v7 & 0x1F)) & s_transientsCommonMP.assetsLoadCompleted.array[v7 >> 5]) == 0 )
      break;
    if ( ++v4 >= v6 )
      return 1;
  }
  return 0;
}

/*
==============
CL_TransientsCommonMP_GetBodyMemoryCost
==============
*/
unsigned __int64 CL_TransientsCommonMP_GetBodyMemoryCost()
{
  return s_transientsCommonMP.perTypeCost[1].curCost;
}

/*
==============
CL_TransientsCommonMP_GetHeadMemoryCost
==============
*/
unsigned __int64 CL_TransientsCommonMP_GetHeadMemoryCost()
{
  return s_transientsCommonMP.perTypeCost[0].curCost;
}

/*
==============
CL_TransientsCommonMP_GetMemoryBudget
==============
*/
__int64 CL_TransientsCommonMP_GetMemoryBudget()
{
  const dvar_t *v1; 
  const char *v2; 

  if ( !s_transientsCommonMP.transientInfo )
    return 0i64;
  if ( (unsigned __int8)Com_GameMode_GetActiveGameMode() != LONG )
  {
    if ( cls.maxClients <= 20 )
    {
      v1 = DCONST_DVARINT_cl_transientCommon_mpMemoryBudgetMB;
      if ( DCONST_DVARINT_cl_transientCommon_mpMemoryBudgetMB )
        goto LABEL_13;
      v2 = "cl_transientCommon_mpMemoryBudgetMB";
    }
    else
    {
      v1 = DCONST_DVARINT_cl_transientCommon_mpLPCMemoryBudgetMB;
      if ( DCONST_DVARINT_cl_transientCommon_mpLPCMemoryBudgetMB )
        goto LABEL_13;
      v2 = "cl_transientCommon_mpLPCMemoryBudgetMB";
    }
LABEL_11:
    if ( CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\universal\\dvar.h", 699, ASSERT_TYPE_ASSERT, "(dvar)", "%s\n\tDvar %s accessed after deregistration", "dvar", v2) )
      __debugbreak();
    goto LABEL_13;
  }
  v1 = DCONST_DVARINT_cl_transientCommon_cpMemoryBudgetMB;
  if ( !DCONST_DVARINT_cl_transientCommon_cpMemoryBudgetMB )
  {
    v2 = "cl_transientCommon_cpMemoryBudgetMB";
    goto LABEL_11;
  }
LABEL_13:
  Dvar_CheckFrontendServerThread(v1);
  return (__int64)v1->current.integer << 20;
}

/*
==============
CL_TransientsCommonMP_GetPrioritizationFlags
==============
*/
__int64 CL_TransientsCommonMP_GetPrioritizationFlags()
{
  return (unsigned int)s_transientsCommonMP.nextPrioritizationFlags;
}

/*
==============
CL_TransientsCommonMP_GetRegisteredFileType
==============
*/
ClTransientsCommonMPType CL_TransientsCommonMP_GetRegisteredFileType(const unsigned __int16 fileIndex)
{
  unsigned __int16 v2; 
  unsigned __int8 type; 
  ClTransientsCommonMPType result; 
  __int64 v5; 
  __int64 v6; 

  if ( fileIndex == 0xFFFF )
  {
    if ( CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\client_mp\\cl_transients_common_mp.cpp", 371, ASSERT_TYPE_ASSERT, "( fileIndex ) != ( UNUSED_FILE )", "%s != %s\n\t%i, %i", "fileIndex", "UNUSED_FILE", 0xFFFF, 0xFFFF) )
      __debugbreak();
  }
  else if ( fileIndex < 0x280Du )
  {
    goto LABEL_7;
  }
  LODWORD(v6) = 10253;
  LODWORD(v5) = fileIndex;
  if ( CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\client_mp\\cl_transients_common_mp.cpp", 372, ASSERT_TYPE_ASSERT, "(unsigned)( fileIndex ) < (unsigned)( ( sizeof( *array_counter( s_transientsCommonMP.transientInfoIndex ) ) + 0 ) )", "fileIndex doesn't index ARRAY_COUNT( s_transientsCommonMP.transientInfoIndex )\n\t%i not in [0, %i)", v5, v6) )
    __debugbreak();
LABEL_7:
  v2 = s_transientsCommonMP.transientInfoIndex[fileIndex];
  if ( !s_transientsCommonMP.transientInfo && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\client_mp\\cl_transients_common_mp.cpp", 381, ASSERT_TYPE_ASSERT, "( ( s_transientsCommonMP.transientInfo != nullptr ) )", "( s_transientsCommonMP.transientInfo ) = %p", NULL) )
    __debugbreak();
  if ( v2 >= s_transientsCommonMP.transientInfo->transientFileCount )
  {
    LODWORD(v6) = s_transientsCommonMP.transientInfo->transientFileCount;
    LODWORD(v5) = v2;
    if ( CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\client_mp\\cl_transients_common_mp.cpp", 382, ASSERT_TYPE_ASSERT, "(unsigned)( infoIndex ) < (unsigned)( s_transientsCommonMP.transientInfo->transientFileCount )", "infoIndex doesn't index s_transientsCommonMP.transientInfo->transientFileCount\n\t%i not in [0, %i)", v5, v6) )
      __debugbreak();
  }
  type = s_transientsCommonMP.transientInfo->transientFiles[v2].type;
  if ( type >= 0xEu )
  {
    LODWORD(v6) = 14;
    LODWORD(v5) = type;
    if ( CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\client_mp\\cl_transients_common_mp.cpp", 384, ASSERT_TYPE_ASSERT, "(unsigned)( transientFileType ) < (unsigned)( TransientFileType::COUNT )", "transientFileType doesn't index TransientFileType::COUNT\n\t%i not in [0, %i)", v5, v6) )
      __debugbreak();
  }
  switch ( type )
  {
    case 7u:
      result = CL_TRANSIENTS_COMMON_MP_TYPE_BODY;
      break;
    case 8u:
      result = CL_TRANSIENTS_COMMON_MP_TYPE_HEAD;
      break;
    case 9u:
      result = CL_TRANSIENTS_COMMON_MP_TYPE_VIEW_ARMS;
      break;
    case 0xAu:
    case 0xCu:
      result = CL_TRANSIENTS_COMMON_MP_TYPE_WEAPON;
      break;
    case 0xBu:
    case 0xDu:
      result = CL_TRANSIENTS_COMMON_MP_TYPE_VIEW_WEAPON;
      break;
    default:
      Com_Error_impl(ERR_DROP, (const ObfuscateErrorText)&stru_143D0B360, 5865i64);
      LODWORD(v6) = 5;
      LODWORD(v5) = 5;
      if ( CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\client_mp\\cl_transients_common_mp.cpp", 386, ASSERT_TYPE_ASSERT, "(unsigned)( fileType ) < (unsigned)( CL_TRANSIENTS_COMMON_MP_TYPE_COUNT )", "fileType doesn't index CL_TRANSIENTS_COMMON_MP_TYPE_COUNT\n\t%i not in [0, %i)", v5, v6) )
        __debugbreak();
      result = CL_TRANSIENTS_COMMON_MP_TYPE_COUNT;
      break;
  }
  return result;
}

/*
==============
CL_TransientsCommonMP_GetTransientPriorityForAssetIndex
==============
*/
unsigned int CL_TransientsCommonMP_GetTransientPriorityForAssetIndex(const unsigned __int16 assetIndex)
{
  int v3; 
  int v4; 

  if ( assetIndex >= 0x4000u )
  {
    v4 = 0x4000;
    v3 = assetIndex;
    if ( CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\client_mp\\cl_transients_common_mp.cpp", 363, ASSERT_TYPE_ASSERT, "(unsigned)( assetIndex ) < (unsigned)( ( sizeof( *array_counter( s_transientsCommonMP.assetsPriorities ) ) + 0 ) )", "assetIndex doesn't index s_transientsCommonMP.assetsPriorities\n\t%i not in [0, %i)", v3, v4) )
      __debugbreak();
  }
  return CL_TransientsCommonMP_GetTransientPriorityForAssetStreamingPriority(s_transientsCommonMP.assetsPriorities[assetIndex]);
}

/*
==============
CL_TransientsCommonMP_GetTransientPriorityForAssetStreamingPriority
==============
*/
__int64 CL_TransientsCommonMP_GetTransientPriorityForAssetStreamingPriority(const AssetStreamingPriority priority)
{
  unsigned int v2; 
  unsigned int v4; 
  char nextPrioritizationFlags; 
  unsigned int v6; 
  unsigned int v7; 
  unsigned int v8; 
  __int64 v9; 
  unsigned int v10; 
  __int64 v11; 
  __int64 v12; 
  __int64 v13; 
  int v14; 
  __int64 v15; 
  __int64 v16; 
  unsigned int v17; 
  unsigned int v18; 

  v2 = priority.raw >> 26;
  if ( (priority.raw & 0x4000000) != 0 )
    return (unsigned __int8)(priority.raw >> 15);
  v4 = dword_143D0B3C8[(priority.raw >> 23) & 7];
  if ( (v2 & 2) != 0 )
  {
    if ( v4 == 4 )
    {
      v4 = 12;
    }
    else if ( v4 == 5 )
    {
      v4 = 13;
    }
  }
  nextPrioritizationFlags = s_transientsCommonMP.nextPrioritizationFlags;
  if ( (s_transientsCommonMP.nextPrioritizationFlags & 1) != 0 && (v2 & 4) != 0 )
  {
    if ( v4 == 4 )
    {
      v4 = 14;
    }
    else if ( v4 == 5 )
    {
      v4 = 15;
    }
  }
  if ( (s_transientsCommonMP.nextPrioritizationFlags & 4) != 0 && (v2 & 8) != 0 )
  {
    if ( v4 == 4 )
    {
      v4 = 6;
    }
    else if ( v4 == 5 )
    {
      v4 = 7;
    }
  }
  if ( (v2 & 0x20) != 0 )
  {
    if ( v4 != 5 )
    {
      v14 = 5;
      v10 = v4;
      if ( CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\client_mp\\cl_transients_common_mp.cpp", 293, ASSERT_TYPE_ASSERT, "( semantics == CL_TRANSIENTS_COMMON_MP_SEMANTICS_EQUIPPED_WORLD )", "ClTransientsCommonMP encountered a weapon streaming request flagged as ASSET_STREAMING_REQUEST_FLAGS_WEAPON_MAP and in semantic group %u, expected group %u (CL_TRANSIENTS_COMMON_MP_SEMANTICS_EQUIPPED_WORLD)", v10, v14) )
        __debugbreak();
      nextPrioritizationFlags = s_transientsCommonMP.nextPrioritizationFlags;
    }
    v4 = 16;
  }
  if ( (nextPrioritizationFlags & 2) != 0 )
  {
    if ( v4 == 4 )
    {
      v4 = 2;
    }
    else if ( v4 == 5 )
    {
      v4 = 3;
    }
  }
  if ( (v2 & 0x10) == 0 )
    goto LABEL_36;
  if ( v4 != 4 )
  {
    if ( v4 == 5 )
    {
      v4 = 3;
      goto LABEL_43;
    }
LABEL_36:
    if ( v4 >= 0x11 )
    {
      LODWORD(v13) = 17;
      LODWORD(v9) = v4;
      if ( CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\client_mp\\cl_transients_common_mp.cpp", 349, ASSERT_TYPE_ASSERT, "(unsigned)( semantics ) < (unsigned)( ( sizeof( *array_counter( s_transientsCommonMP_semanticPriorityRanges ) ) + 0 ) )", "semantics doesn't index s_transientsCommonMP_semanticPriorityRanges\n\t%i not in [0, %i)", v9, v13) )
        __debugbreak();
      LODWORD(v15) = 17;
      LODWORD(v11) = v4;
      if ( CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\client_mp\\cl_transients_common_mp.cpp", 350, ASSERT_TYPE_ASSERT, "(unsigned)( semantics ) < (unsigned)( CL_TRANSIENTS_COMMON_MP_SEMANTICS_COUNT )", "semantics doesn't index CL_TRANSIENTS_COMMON_MP_SEMANTICS_COUNT\n\t%i not in [0, %i)", v11, v15) )
        __debugbreak();
      LODWORD(v16) = 17;
      LODWORD(v12) = v4;
      if ( CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\client_mp\\cl_transients_common_mp.cpp", 326, ASSERT_TYPE_ASSERT, "(unsigned)( semantics ) < (unsigned)( ( sizeof( *array_counter( s_transientsCommonMP_semanticPriorityRanges ) ) + 0 ) )", "semantics doesn't index s_transientsCommonMP_semanticPriorityRanges\n\t%i not in [0, %i)", v12, v16) )
        __debugbreak();
    }
    goto LABEL_43;
  }
  v4 = 2;
LABEL_43:
  v6 = s_transientsCommonMP_semanticPriorityRanges[v4][0];
  v7 = s_transientsCommonMP_semanticPriorityRanges[v4][1];
  if ( v7 < v6 )
  {
    v18 = v6;
    v17 = v7;
    if ( CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\client_mp\\cl_transients_common_mp.cpp", 353, ASSERT_TYPE_ASSERT, "( rangeEnd ) >= ( rangeStart )", "%s >= %s\n\t%u, %u", "rangeEnd", "rangeStart", v17, v18) )
      __debugbreak();
  }
  v8 = v7 - v6;
  if ( v7 - v6 > (unsigned __int8)(priority.raw >> 15) )
    v8 = (unsigned __int8)(priority.raw >> 15);
  return v7 - v8;
}

/*
==============
CL_TransientsCommonMP_GetViewArmsMemoryCost
==============
*/
unsigned __int64 CL_TransientsCommonMP_GetViewArmsMemoryCost()
{
  return s_transientsCommonMP.perTypeCost[3].curCost;
}

/*
==============
CL_TransientsCommonMP_GetViewWeaponMemoryCost
==============
*/
unsigned __int64 CL_TransientsCommonMP_GetViewWeaponMemoryCost()
{
  return s_transientsCommonMP.perTypeCost[4].curCost;
}

/*
==============
CL_TransientsCommonMP_GetWorldWeaponMemoryCost
==============
*/
unsigned __int64 CL_TransientsCommonMP_GetWorldWeaponMemoryCost()
{
  return s_transientsCommonMP.perTypeCost[2].curCost;
}

/*
==============
CL_TransientsCommonMP_IsEnabled
==============
*/
bool CL_TransientsCommonMP_IsEnabled()
{
  return s_transientsCommonMP.transientInfo != NULL;
}

/*
==============
CL_TransientsCommonMP_LoadAssetInternal
==============
*/
void CL_TransientsCommonMP_LoadAssetInternal(const unsigned __int16 fileIndex, const unsigned __int16 assetIndex)
{
  const char *AssetName; 
  const dvar_t *v5; 
  unsigned __int16 FileIndexForAssetIndex; 
  unsigned int v7; 
  unsigned int *v8; 
  unsigned int TransientPriorityForAssetIndex; 
  char *fmt; 
  __int64 v11; 
  __int64 v12; 
  __int64 v13; 
  __int64 v14; 
  char dest[1024]; 

  AssetName = "UNUSED_ASSET";
  if ( assetIndex == 0xFFFF && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\client_mp\\cl_transients_common_mp.cpp", 569, ASSERT_TYPE_ASSERT, "( assetIndex ) != ( UNUSED_ASSET )", "%s != %s\n\t%i, %i", "assetIndex", "UNUSED_ASSET", 0xFFFF, 0xFFFF) )
    __debugbreak();
  if ( fileIndex == 0xFFFF )
  {
    LODWORD(v14) = 0xFFFF;
    LODWORD(v13) = 0xFFFF;
    if ( CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\client_mp\\cl_transients_common_mp.cpp", 570, ASSERT_TYPE_ASSERT, "( fileIndex ) != ( UNUSED_FILE )", "%s != %s\n\t%i, %i", "fileIndex", "UNUSED_FILE", v13, v14) )
      __debugbreak();
  }
  v5 = DCONST_DVARBOOL_cl_transientCommon_debugVerbose;
  if ( !DCONST_DVARBOOL_cl_transientCommon_debugVerbose && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\universal\\dvar.h", 692, ASSERT_TYPE_ASSERT, "(dvar)", "%s\n\tDvar %s accessed after deregistration", "dvar", "cl_transientCommon_debugVerbose") )
    __debugbreak();
  Dvar_CheckFrontendServerThread(v5);
  if ( v5->current.enabled )
  {
    FileIndexForAssetIndex = CL_TransientsMP_GetFileIndexForAssetIndex(assetIndex);
    if ( assetIndex != 0xFFFF )
      AssetName = CL_TransientsMP_GetAssetName(assetIndex);
    LODWORD(v12) = FileIndexForAssetIndex;
    LODWORD(v11) = assetIndex;
    LODWORD(fmt) = CL_TransientsCommonMP_GetTransientPriorityForAssetIndex(assetIndex);
    Com_sprintf_truncate(dest, 0x400ui64, "%s, prio=%u, asset=%u, file=%u", AssetName, fmt, v11, v12);
    Com_Printf(14, "CL_TransientsCommonMP: loading %s\n", dest);
  }
  if ( !s_transientsCommonMP.fileReferenceCount[fileIndex] )
  {
    LODWORD(v13) = 0;
    if ( CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\client_mp\\cl_transients_common_mp.cpp", 581, ASSERT_TYPE_ASSERT, "( s_transientsCommonMP.fileReferenceCount[fileIndex] ) != ( 0 )", "%s != %s\n\t%i, %i", "s_transientsCommonMP.fileReferenceCount[fileIndex]", "0", v13, 0i64) )
      __debugbreak();
  }
  if ( assetIndex >= 0x4000u )
  {
    LODWORD(v12) = 0x4000;
    LODWORD(v11) = assetIndex;
    if ( CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\qcommon\\bitarray.h", 257, ASSERT_TYPE_ASSERT, "( pos ) < ( impl()->getBitCount() )", "pos < impl()->getBitCount()\n\t%i, %i", v11, v12) )
      __debugbreak();
  }
  v7 = 0x80000000 >> (assetIndex & 0x1F);
  v8 = &s_transientsCommonMP.assetsLoadSubmitted.array[(unsigned __int64)assetIndex >> 5];
  if ( (v7 & *v8) != 0 && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\client_mp\\cl_transients_common_mp.cpp", 582, ASSERT_TYPE_ASSERT, "(!s_transientsCommonMP.assetsLoadSubmitted.testBit( assetIndex ))", (const char *)&queryFormat, "!s_transientsCommonMP.assetsLoadSubmitted.testBit( assetIndex )") )
    __debugbreak();
  TransientPriorityForAssetIndex = CL_TransientsCommonMP_GetTransientPriorityForAssetIndex(assetIndex);
  if ( assetIndex >= 0x4000u )
  {
    LODWORD(v14) = 0x4000;
    LODWORD(v13) = assetIndex;
    if ( CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\qcommon\\bitarray.h", 263, ASSERT_TYPE_ASSERT, "( pos ) < ( impl()->getBitCount() )", "%s < %s\n\t%u, %u", "pos", "impl()->getBitCount()", v13, v14) )
      __debugbreak();
  }
  *v8 |= v7;
  CL_TransientsMP_LoadByAssetIndex(assetIndex, TransientPriorityForAssetIndex);
  if ( s_transientsCommonMP.pendingLoadCount == -1 )
  {
    LODWORD(v14) = -1;
    LODWORD(v13) = s_transientsCommonMP.pendingLoadCount;
    if ( CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\client_mp\\cl_transients_common_mp.cpp", 588, ASSERT_TYPE_ASSERT, "( s_transientsCommonMP.pendingLoadCount ) < ( 0xffffffff )", "%s < %s\n\t%u, %u", "s_transientsCommonMP.pendingLoadCount", "UINT_MAX", v13, v14) )
      __debugbreak();
    ++s_transientsCommonMP.pendingLoadCount;
  }
  else
  {
    ++s_transientsCommonMP.pendingLoadCount;
  }
}

/*
==============
CL_TransientsCommonMP_LoadModels
==============
*/
char CL_TransientsCommonMP_LoadModels(const char *const *modelNames, const unsigned int modelCount, const AssetStreamingPriority priority)
{
  unsigned int TransientAssetIndices; 
  unsigned __int16 v8; 
  bool ModelsInternal; 
  unsigned __int16 outAssetIndices[20]; 

  if ( !Sys_IsMainThread() && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\client_mp\\cl_transients_common_mp.cpp", 1216, ASSERT_TYPE_ASSERT, "(Sys_IsMainThread())", (const char *)&queryFormat, "Sys_IsMainThread()", -2i64) )
    __debugbreak();
  if ( !s_transientsCommonMP.transientInfo )
  {
    if ( CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\client_mp\\cl_transients_common_mp.cpp", 1218, ASSERT_TYPE_ASSERT, "(CL_TransientsCommonMP_IsEnabled())", (const char *)&queryFormat, "CL_TransientsCommonMP_IsEnabled()") )
      __debugbreak();
    if ( !s_transientsCommonMP.transientInfo )
      return 0;
  }
  if ( !modelCount )
    return 1;
  Sys_ProfBeginNamedEvent(0xFF808080, "CL_TransientsCommonMP_LoadRequest");
  Sys_ProfBeginNamedEvent(0xFF808080, "CL_TransientsCommonMP_LookupTransientAssetsForRequest");
  TransientAssetIndices = CL_TransientsMP_GetTransientAssetIndices(modelNames, modelCount, ASSET_TYPE_XMODEL, outAssetIndices);
  v8 = truncate_cast<unsigned short,unsigned int>(TransientAssetIndices);
  Sys_ProfEndNamedEvent();
  ModelsInternal = CL_TransientsCommonMP_LoadModelsInternal(outAssetIndices, v8, priority);
  Sys_ProfEndNamedEvent();
  return ModelsInternal;
}

/*
==============
CL_TransientsCommonMP_LoadModelsInternal
==============
*/
char CL_TransientsCommonMP_LoadModelsInternal(const unsigned __int16 *assetIndices, const unsigned __int16 assetCount, const AssetStreamingPriority priority)
{
  const dvar_t *v6; 
  bool enabled; 
  unsigned __int16 v8; 
  unsigned __int16 v9; 
  unsigned int v10; 
  unsigned __int64 v11; 
  unsigned __int16 FileIndexForAssetIndex; 
  unsigned __int64 CostToLoad; 
  unsigned __int64 curCost; 
  const char *AssetName; 
  unsigned __int8 *v17; 
  __int64 v18; 
  __int64 v19; 
  __int64 v20; 
  __int64 v21; 
  bool v22; 

  if ( !assetIndices && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\client_mp\\cl_transients_common_mp.cpp", 702, ASSERT_TYPE_ASSERT, "( ( assetIndices != nullptr ) )", "( assetIndices ) = %p", NULL) )
    __debugbreak();
  v6 = DCONST_DVARBOOL_cl_transientCommon_memoryBudgetStrictlyEnforced;
  if ( !DCONST_DVARBOOL_cl_transientCommon_memoryBudgetStrictlyEnforced && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\universal\\dvar.h", 692, ASSERT_TYPE_ASSERT, "(dvar)", "%s\n\tDvar %s accessed after deregistration", "dvar", "cl_transientCommon_memoryBudgetStrictlyEnforced") )
    __debugbreak();
  Dvar_CheckFrontendServerThread(v6);
  enabled = v6->current.enabled;
  v8 = 0;
  v22 = enabled;
  if ( assetCount )
  {
    while ( 1 )
    {
      v9 = assetIndices[v8];
      if ( v9 >= 0x4000u )
      {
        LODWORD(v19) = 0x4000;
        LODWORD(v18) = v9;
        if ( CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\client_mp\\cl_transients_common_mp.cpp", 709, ASSERT_TYPE_ASSERT, "(unsigned)( assetIndex ) < (unsigned)( MAX_TRANSIENT_ASSETS )", "assetIndex doesn't index MAX_TRANSIENT_ASSETS\n\t%i not in [0, %i)", v18, v19) )
          __debugbreak();
      }
      if ( CL_TransientsCommonMP_SkipAssetIndex(v9) )
        goto LABEL_47;
      if ( enabled )
      {
        if ( v9 >= 0x4000u )
        {
          LODWORD(v19) = 0x4000;
          LODWORD(v18) = v9;
          if ( CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\qcommon\\bitarray.h", 257, ASSERT_TYPE_ASSERT, "( pos ) < ( impl()->getBitCount() )", "pos < impl()->getBitCount()\n\t%i, %i", v18, v19) )
            __debugbreak();
        }
        v10 = 0x80000000 >> (v9 & 0x1F);
        v11 = (unsigned __int64)v9 >> 5;
        if ( (v10 & s_transientsCommonMP.assetsRequested.array[v11]) == 0 )
        {
          if ( v9 >= 0x4000u )
          {
            LODWORD(v19) = 0x4000;
            LODWORD(v18) = v9;
            if ( CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\qcommon\\bitarray.h", 257, ASSERT_TYPE_ASSERT, "( pos ) < ( impl()->getBitCount() )", "pos < impl()->getBitCount()\n\t%i, %i", v18, v19) )
              __debugbreak();
          }
          if ( (v10 & s_transientsCommonMP.assetsLoadSubmitted.array[v11]) == 0 )
            break;
        }
      }
LABEL_38:
      if ( v9 >= 0x4000u )
      {
        LODWORD(v19) = 0x4000;
        LODWORD(v18) = v9;
        if ( CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\client_mp\\cl_transients_common_mp.cpp", 519, ASSERT_TYPE_ASSERT, "(unsigned)( assetIndex ) < (unsigned)( ( sizeof( *array_counter( s_transientsCommonMP.assetsReferenceCount ) ) + 0 ) )", "assetIndex doesn't index ARRAY_COUNT( s_transientsCommonMP.assetsReferenceCount )\n\t%i not in [0, %i)", v18, v19) )
          __debugbreak();
      }
      v17 = &s_transientsCommonMP.assetsReferenceCount[v9];
      if ( *v17 == 0xFF )
      {
        LODWORD(v21) = 255;
        LODWORD(v20) = 255;
        if ( CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\client_mp\\cl_transients_common_mp.cpp", 520, ASSERT_TYPE_ASSERT, "( s_transientsCommonMP.assetsReferenceCount[assetIndex] ) != ( 0xffui8 )", "%s != %s\n\t%i, %i", "s_transientsCommonMP.assetsReferenceCount[assetIndex]", "UINT8_MAX", v20, v21) )
          __debugbreak();
      }
      if ( ++*v17 == 1 )
        CL_TransientsCommonMP_MarkAssetLoadRequested(v9, priority);
      enabled = v22;
LABEL_47:
      if ( ++v8 >= assetCount )
        return 1;
    }
    if ( v9 == 0xFFFF )
    {
      LODWORD(v21) = 0xFFFF;
      LODWORD(v20) = 0xFFFF;
      if ( CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\client_mp\\cl_transients_common_mp.cpp", 403, ASSERT_TYPE_ASSERT, "( assetIndex ) != ( UNUSED_ASSET )", "%s != %s\n\t%i, %i", "assetIndex", "UNUSED_ASSET", v20, v21) )
        __debugbreak();
    }
    FileIndexForAssetIndex = CL_TransientsMP_GetFileIndexForAssetIndex(v9);
    if ( FileIndexForAssetIndex == 0xFFFF )
    {
      LODWORD(v21) = 0xFFFF;
      LODWORD(v20) = 0xFFFF;
      if ( CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\client_mp\\cl_transients_common_mp.cpp", 406, ASSERT_TYPE_ASSERT, "( fileIndex ) != ( UNUSED_FILE )", "%s != %s\n\t%i, %i", "fileIndex", "UNUSED_FILE", v20, v21) )
        __debugbreak();
    }
    else if ( FileIndexForAssetIndex < 0x280Du )
    {
      goto LABEL_30;
    }
    LODWORD(v19) = 10253;
    LODWORD(v18) = FileIndexForAssetIndex;
    if ( CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\client_mp\\cl_transients_common_mp.cpp", 407, ASSERT_TYPE_ASSERT, "(unsigned)( fileIndex ) < (unsigned)( ( sizeof( *array_counter( s_transientsCommonMP.fileReferenceCount ) ) + 0 ) )", "fileIndex doesn't index s_transientsCommonMP.fileReferenceCount\n\t%i not in [0, %i)", v18, v19) )
      __debugbreak();
LABEL_30:
    if ( s_transientsCommonMP.fileReferenceCount[FileIndexForAssetIndex] )
      CostToLoad = 0i64;
    else
      CostToLoad = TransientCostCalc_GetCostToLoad(&s_transientsCommonMP.totalCost, FileIndexForAssetIndex, 0);
    curCost = s_transientsCommonMP.totalCost.curCost;
    if ( curCost > CL_TransientsCommonMP_GetMemoryBudget() )
    {
      LODWORD(v21) = CL_TransientsCommonMP_GetMemoryBudget();
      LODWORD(v20) = curCost;
      if ( CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\client_mp\\cl_transients_common_mp.cpp", 421, ASSERT_TYPE_ASSERT, "( memoryRequestedTotal ) <= ( CL_TransientsCommonMP_GetMemoryBudget() )", "%s <= %s\n\t%i, %i", "memoryRequestedTotal", "CL_TransientsCommonMP_GetMemoryBudget()", v20, v21) )
        __debugbreak();
    }
    if ( CL_TransientsCommonMP_GetMemoryBudget() - curCost < CostToLoad )
    {
      AssetName = CL_TransientsMP_GetAssetName(v9);
      Com_PrintWarning(14, "WARNING: Request to load asset %u '%s' would exceed MPCommon transient budget -- ignoring.\n", v9, AssetName);
      return 0;
    }
    goto LABEL_38;
  }
  return 1;
}

/*
==============
CL_TransientsCommonMP_MarkAssetLoadRequested
==============
*/
void CL_TransientsCommonMP_MarkAssetLoadRequested(const unsigned __int16 assetIndex, const AssetStreamingPriority priority)
{
  unsigned __int16 FileIndexForAssetIndex; 
  unsigned __int8 *v5; 
  unsigned int v6; 
  ClTransientsCommonMPType RegisteredFileType; 
  ClTransientsCommonMPType v8; 
  const dvar_t *v9; 
  unsigned __int16 v10; 
  const char *AssetName; 
  const dvar_t *v12; 
  unsigned __int64 curCost; 
  char *fmt; 
  __int64 v15; 
  __int64 v16; 
  __int64 v17; 
  __int64 v18; 
  char dest[1024]; 

  if ( assetIndex == 0xFFFF && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\client_mp\\cl_transients_common_mp.cpp", 440, ASSERT_TYPE_ASSERT, "(assetIndex != UNUSED_ASSET)", (const char *)&queryFormat, "assetIndex != UNUSED_ASSET") )
    __debugbreak();
  FileIndexForAssetIndex = CL_TransientsMP_GetFileIndexForAssetIndex(assetIndex);
  if ( FileIndexForAssetIndex == 0xFFFF )
  {
    if ( CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\client_mp\\cl_transients_common_mp.cpp", 443, ASSERT_TYPE_ASSERT, "(fileIndex != UNUSED_ASSET)", (const char *)&queryFormat, "fileIndex != UNUSED_ASSET") )
      __debugbreak();
  }
  else if ( FileIndexForAssetIndex < 0x280Du )
  {
    goto LABEL_10;
  }
  LODWORD(v15) = FileIndexForAssetIndex;
  if ( CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\client_mp\\cl_transients_common_mp.cpp", 445, ASSERT_TYPE_ASSERT, "(unsigned)( fileIndex ) < (unsigned)( ( sizeof( *array_counter( s_transientsCommonMP.fileReferenceCount ) ) + 0 ) )", "fileIndex doesn't index ARRAY_COUNT( s_transientsCommonMP.fileReferenceCount )\n\t%i not in [0, %i)", v15, 10253) )
    __debugbreak();
LABEL_10:
  v5 = &s_transientsCommonMP.fileReferenceCount[FileIndexForAssetIndex];
  if ( *v5 == 0xFF && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\client_mp\\cl_transients_common_mp.cpp", 446, ASSERT_TYPE_ASSERT, "( s_transientsCommonMP.fileReferenceCount[fileIndex] ) < ( 0xffui8 )", "%s < %s\n\t%i, %i", "s_transientsCommonMP.fileReferenceCount[fileIndex]", "UINT8_MAX", 255, 255) )
    __debugbreak();
  if ( ++*v5 == 1 )
  {
    v6 = FileIndexForAssetIndex;
    TransientCostCalc_Load(&s_transientsCommonMP.totalCost, FileIndexForAssetIndex);
    RegisteredFileType = CL_TransientsCommonMP_GetRegisteredFileType(FileIndexForAssetIndex);
    v8 = RegisteredFileType;
    if ( (unsigned __int8)RegisteredFileType >= CL_TRANSIENTS_COMMON_MP_TYPE_COUNT )
    {
      LODWORD(v16) = 5;
      LODWORD(v15) = (unsigned __int8)RegisteredFileType;
      if ( CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\client_mp\\cl_transients_common_mp.cpp", 455, ASSERT_TYPE_ASSERT, "(unsigned)( fileType ) < (unsigned)( ( sizeof( *array_counter( s_transientsCommonMP.perTypeCost ) ) + 0 ) )", "fileType doesn't index ARRAY_COUNT( s_transientsCommonMP.perTypeCost )\n\t%i not in [0, %i)", v15, v16) )
        __debugbreak();
    }
    TransientCostCalc_Load(&s_transientsCommonMP.perTypeCost[(unsigned __int8)v8], v6);
  }
  if ( assetIndex >= 0x4000u )
  {
    LODWORD(v18) = 0x4000;
    LODWORD(v17) = assetIndex;
    if ( CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\qcommon\\bitarray.h", 296, ASSERT_TYPE_ASSERT, "( pos ) < ( impl()->getBitCount() )", "%s < %s\n\t%u, %u", "pos", "impl()->getBitCount()", v17, v18) )
      __debugbreak();
  }
  s_transientsCommonMP.assetsRequested.array[(unsigned __int64)assetIndex >> 5] ^= 0x80000000 >> (assetIndex & 0x1F);
  s_transientsCommonMP.assetsPriorities[assetIndex] = priority;
  v9 = DCONST_DVARBOOL_cl_transientCommon_debugVerbose;
  if ( !DCONST_DVARBOOL_cl_transientCommon_debugVerbose && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\universal\\dvar.h", 692, ASSERT_TYPE_ASSERT, "(dvar)", "%s\n\tDvar %s accessed after deregistration", "dvar", "cl_transientCommon_debugVerbose") )
    __debugbreak();
  Dvar_CheckFrontendServerThread(v9);
  if ( v9->current.enabled )
  {
    v10 = CL_TransientsMP_GetFileIndexForAssetIndex(assetIndex);
    if ( assetIndex == 0xFFFF )
      AssetName = "UNUSED_ASSET";
    else
      AssetName = CL_TransientsMP_GetAssetName(assetIndex);
    LODWORD(v16) = v10;
    LODWORD(v15) = assetIndex;
    LODWORD(fmt) = CL_TransientsCommonMP_GetTransientPriorityForAssetIndex(assetIndex);
    Com_sprintf_truncate(dest, 0x400ui64, "%s, prio=%u, asset=%u, file=%u", AssetName, fmt, v15, v16);
    Com_Printf(14, "CL_TransientsCommonMP: load requested for %s\n", dest);
  }
  v12 = DCONST_DVARBOOL_cl_transientCommon_memoryBudgetStrictlyEnforced;
  if ( !DCONST_DVARBOOL_cl_transientCommon_memoryBudgetStrictlyEnforced && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\universal\\dvar.h", 692, ASSERT_TYPE_ASSERT, "(dvar)", "%s\n\tDvar %s accessed after deregistration", "dvar", "cl_transientCommon_memoryBudgetStrictlyEnforced") )
    __debugbreak();
  Dvar_CheckFrontendServerThread(v12);
  if ( v12->current.enabled )
  {
    curCost = s_transientsCommonMP.totalCost.curCost;
    if ( curCost > CL_TransientsCommonMP_GetMemoryBudget() )
    {
      LODWORD(v18) = CL_TransientsCommonMP_GetMemoryBudget();
      LODWORD(v17) = curCost;
      if ( CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\client_mp\\cl_transients_common_mp.cpp", 433, ASSERT_TYPE_ASSERT, "( memoryRequestedTotal ) <= ( CL_TransientsCommonMP_GetMemoryBudget() )", "%s <= %s\n\t%i, %i", "memoryRequestedTotal", "CL_TransientsCommonMP_GetMemoryBudget()", v17, v18) )
        __debugbreak();
    }
  }
}

/*
==============
CL_TransientsCommonMP_MarkAssetUnloadRequested
==============
*/
void CL_TransientsCommonMP_MarkAssetUnloadRequested(const unsigned __int16 assetIndex)
{
  unsigned __int16 FileIndexForAssetIndex; 
  unsigned __int8 *v3; 
  unsigned int v5; 
  ClTransientsCommonMPType RegisteredFileType; 
  ClTransientsCommonMPType v7; 
  unsigned __int64 v8; 
  unsigned int v9; 
  const dvar_t *v10; 
  unsigned __int16 v11; 
  const char *AssetName; 
  char *fmt; 
  __int64 v14; 
  __int64 v15; 
  __int64 v16; 
  __int64 v17; 
  char dest[1024]; 

  if ( assetIndex == 0xFFFF && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\client_mp\\cl_transients_common_mp.cpp", 483, ASSERT_TYPE_ASSERT, "(assetIndex != UNUSED_ASSET)", (const char *)&queryFormat, "assetIndex != UNUSED_ASSET") )
    __debugbreak();
  FileIndexForAssetIndex = CL_TransientsMP_GetFileIndexForAssetIndex(assetIndex);
  if ( FileIndexForAssetIndex == 0xFFFF )
  {
    if ( CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\client_mp\\cl_transients_common_mp.cpp", 486, ASSERT_TYPE_ASSERT, "(fileIndex != UNUSED_ASSET)", (const char *)&queryFormat, "fileIndex != UNUSED_ASSET") )
      __debugbreak();
  }
  else if ( FileIndexForAssetIndex < 0x280Du )
  {
    goto LABEL_10;
  }
  LODWORD(v14) = FileIndexForAssetIndex;
  if ( CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\client_mp\\cl_transients_common_mp.cpp", 488, ASSERT_TYPE_ASSERT, "(unsigned)( fileIndex ) < (unsigned)( ( sizeof( *array_counter( s_transientsCommonMP.fileReferenceCount ) ) + 0 ) )", "fileIndex doesn't index ARRAY_COUNT( s_transientsCommonMP.fileReferenceCount )\n\t%i not in [0, %i)", v14, 10253) )
    __debugbreak();
LABEL_10:
  v3 = &s_transientsCommonMP.fileReferenceCount[FileIndexForAssetIndex];
  if ( !*v3 && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\client_mp\\cl_transients_common_mp.cpp", 489, ASSERT_TYPE_ASSERT, "( s_transientsCommonMP.fileReferenceCount[fileIndex] ) != ( 0 )", "%s != %s\n\t%i, %i", "s_transientsCommonMP.fileReferenceCount[fileIndex]", "0", 0, 0i64) )
    __debugbreak();
  if ( (*v3)-- == 1 )
  {
    v5 = FileIndexForAssetIndex;
    TransientCostCalc_Unload(&s_transientsCommonMP.totalCost, FileIndexForAssetIndex);
    RegisteredFileType = CL_TransientsCommonMP_GetRegisteredFileType(FileIndexForAssetIndex);
    v7 = RegisteredFileType;
    if ( (unsigned __int8)RegisteredFileType >= CL_TRANSIENTS_COMMON_MP_TYPE_COUNT )
    {
      LODWORD(v15) = 5;
      LODWORD(v14) = (unsigned __int8)RegisteredFileType;
      if ( CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\client_mp\\cl_transients_common_mp.cpp", 498, ASSERT_TYPE_ASSERT, "(unsigned)( fileType ) < (unsigned)( ( sizeof( *array_counter( s_transientsCommonMP.perTypeCost ) ) + 0 ) )", "fileType doesn't index ARRAY_COUNT( s_transientsCommonMP.perTypeCost )\n\t%i not in [0, %i)", v14, v15) )
        __debugbreak();
    }
    TransientCostCalc_Unload(&s_transientsCommonMP.perTypeCost[(unsigned __int8)v7], v5);
  }
  if ( assetIndex >= 0x4000u )
  {
    LODWORD(v17) = 0x4000;
    LODWORD(v16) = assetIndex;
    if ( CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\qcommon\\bitarray.h", 296, ASSERT_TYPE_ASSERT, "( pos ) < ( impl()->getBitCount() )", "%s < %s\n\t%u, %u", "pos", "impl()->getBitCount()", v16, v17) )
      __debugbreak();
  }
  v8 = (unsigned __int64)assetIndex >> 5;
  v9 = 0x80000000 >> (assetIndex & 0x1F);
  s_transientsCommonMP.assetsRequested.array[v8] ^= v9;
  if ( assetIndex >= 0x4000u )
  {
    LODWORD(v17) = 0x4000;
    LODWORD(v16) = assetIndex;
    if ( CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\qcommon\\bitarray.h", 290, ASSERT_TYPE_ASSERT, "( pos ) < ( impl()->getBitCount() )", "%s < %s\n\t%u, %u", "pos", "impl()->getBitCount()", v16, v17) )
      __debugbreak();
  }
  s_transientsCommonMP.assetsModifiedPriority.array[v8] &= ~v9;
  v10 = DCONST_DVARBOOL_cl_transientCommon_debugVerbose;
  if ( !DCONST_DVARBOOL_cl_transientCommon_debugVerbose && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\universal\\dvar.h", 692, ASSERT_TYPE_ASSERT, "(dvar)", "%s\n\tDvar %s accessed after deregistration", "dvar", "cl_transientCommon_debugVerbose") )
    __debugbreak();
  Dvar_CheckFrontendServerThread(v10);
  if ( v10->current.enabled )
  {
    v11 = CL_TransientsMP_GetFileIndexForAssetIndex(assetIndex);
    if ( assetIndex == 0xFFFF )
      AssetName = "UNUSED_ASSET";
    else
      AssetName = CL_TransientsMP_GetAssetName(assetIndex);
    LODWORD(v15) = v11;
    LODWORD(v14) = assetIndex;
    LODWORD(fmt) = CL_TransientsCommonMP_GetTransientPriorityForAssetIndex(assetIndex);
    Com_sprintf_truncate(dest, 0x400ui64, "%s, prio=%u, asset=%u, file=%u", AssetName, fmt, v14, v15);
    Com_Printf(14, "CL_TransientsCommonMP: unload requested for %s\n", dest);
  }
}

/*
==============
CL_TransientsCommonMP_MarkSetLoadPriorityRequested
==============
*/
void CL_TransientsCommonMP_MarkSetLoadPriorityRequested(const unsigned __int16 assetIndex, const AssetStreamingPriority priority)
{
  const char *AssetName; 
  unsigned int v5; 
  unsigned __int64 v6; 
  const dvar_t *v7; 
  unsigned __int16 FileIndexForAssetIndex; 
  char *fmt; 
  __int64 v10; 
  __int64 v11; 
  __int64 v12; 
  __int64 v13; 
  char dest[1024]; 

  AssetName = "UNUSED_ASSET";
  if ( assetIndex == 0xFFFF && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\client_mp\\cl_transients_common_mp.cpp", 545, ASSERT_TYPE_ASSERT, "( assetIndex ) != ( UNUSED_ASSET )", "%s != %s\n\t%i, %i", "assetIndex", "UNUSED_ASSET", 0xFFFF, 0xFFFF) )
    __debugbreak();
  if ( assetIndex >= 0x4000u )
  {
    LODWORD(v11) = 0x4000;
    LODWORD(v10) = assetIndex;
    if ( CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\qcommon\\bitarray.h", 257, ASSERT_TYPE_ASSERT, "( pos ) < ( impl()->getBitCount() )", "pos < impl()->getBitCount()\n\t%i, %i", v10, v11) )
      __debugbreak();
  }
  v5 = 0x80000000 >> (assetIndex & 0x1F);
  v6 = (unsigned __int64)assetIndex >> 5;
  if ( (v5 & s_transientsCommonMP.assetsLoadSubmitted.array[v6]) == 0 )
  {
    if ( assetIndex >= 0x4000u )
    {
      LODWORD(v11) = 0x4000;
      LODWORD(v10) = assetIndex;
      if ( CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\qcommon\\bitarray.h", 257, ASSERT_TYPE_ASSERT, "( pos ) < ( impl()->getBitCount() )", "pos < impl()->getBitCount()\n\t%i, %i", v10, v11) )
        __debugbreak();
    }
    if ( (v5 & s_transientsCommonMP.assetsRequested.array[v6]) == 0 && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\client_mp\\cl_transients_common_mp.cpp", 547, ASSERT_TYPE_ASSERT, "(s_transientsCommonMP.assetsLoadSubmitted.testBit( assetIndex ) || s_transientsCommonMP.assetsRequested.testBit( assetIndex ))", (const char *)&queryFormat, "s_transientsCommonMP.assetsLoadSubmitted.testBit( assetIndex ) || s_transientsCommonMP.assetsRequested.testBit( assetIndex )") )
      __debugbreak();
  }
  if ( assetIndex >= 0x4000u )
  {
    LODWORD(v11) = 0x4000;
    LODWORD(v10) = assetIndex;
    if ( CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\qcommon\\bitarray.h", 257, ASSERT_TYPE_ASSERT, "( pos ) < ( impl()->getBitCount() )", "pos < impl()->getBitCount()\n\t%i, %i", v10, v11) )
      __debugbreak();
  }
  if ( (v5 & s_transientsCommonMP.assetsLoadCompleted.array[v6]) == 0 )
  {
    if ( assetIndex >= 0x4000u )
    {
      LODWORD(v11) = 0x4000;
      LODWORD(v10) = assetIndex;
      if ( CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\client_mp\\cl_transients_common_mp.cpp", 551, ASSERT_TYPE_ASSERT, "(unsigned)( assetIndex ) < (unsigned)( ( sizeof( *array_counter( s_transientsCommonMP.assetsPriorities ) ) + 0 ) )", "assetIndex doesn't index ARRAY_COUNT( s_transientsCommonMP.assetsPriorities )\n\t%i not in [0, %i)", v10, v11) )
        __debugbreak();
    }
    s_transientsCommonMP.assetsPriorities[assetIndex] = priority;
    if ( assetIndex >= 0x4000u )
    {
      LODWORD(v13) = 0x4000;
      LODWORD(v12) = assetIndex;
      if ( CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\qcommon\\bitarray.h", 263, ASSERT_TYPE_ASSERT, "( pos ) < ( impl()->getBitCount() )", "%s < %s\n\t%u, %u", "pos", "impl()->getBitCount()", v12, v13) )
        __debugbreak();
    }
    v7 = DCONST_DVARBOOL_cl_transientCommon_debugVerbose;
    s_transientsCommonMP.assetsModifiedPriority.array[v6] |= v5;
    if ( !v7 && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\universal\\dvar.h", 692, ASSERT_TYPE_ASSERT, "(dvar)", "%s\n\tDvar %s accessed after deregistration", "dvar", "cl_transientCommon_debugVerbose") )
      __debugbreak();
    Dvar_CheckFrontendServerThread(v7);
    if ( v7->current.enabled )
    {
      FileIndexForAssetIndex = CL_TransientsMP_GetFileIndexForAssetIndex(assetIndex);
      if ( assetIndex != 0xFFFF )
        AssetName = CL_TransientsMP_GetAssetName(assetIndex);
      LODWORD(v11) = FileIndexForAssetIndex;
      LODWORD(v10) = assetIndex;
      LODWORD(fmt) = CL_TransientsCommonMP_GetTransientPriorityForAssetIndex(assetIndex);
      Com_sprintf_truncate(dest, 0x400ui64, "%s, prio=%u, asset=%u, file=%u", AssetName, fmt, v10, v11);
      Com_Printf(14, "CL_TransientsCommonMP: priority change requested for %s\n", dest);
    }
  }
}

/*
==============
CL_TransientsCommonMP_OnLevelLoad
==============
*/
void CL_TransientsCommonMP_OnLevelLoad(void)
{
  if ( !Sys_IsMainThread() && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\client_mp\\cl_transients_common_mp.cpp", 984, ASSERT_TYPE_ASSERT, "(Sys_IsMainThread())", (const char *)&queryFormat, "Sys_IsMainThread()") )
    __debugbreak();
  s_transientsCommonMP.lobbyToGameStart = 0;
}

/*
==============
CL_TransientsCommonMP_OnLevelUnload
==============
*/
void CL_TransientsCommonMP_OnLevelUnload(void)
{
  if ( !Sys_IsMainThread() && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\client_mp\\cl_transients_common_mp.cpp", 1171, ASSERT_TYPE_ASSERT, "(Sys_IsMainThread())", (const char *)&queryFormat, "Sys_IsMainThread()", -2i64) )
    __debugbreak();
  if ( s_transientsCommonMP.transientInfo )
  {
    Sys_ProfBeginNamedEvent(0xFF808080, "CL_TransientsCommonMP_ProcessFastfiles");
    CL_TransientsCommonMP_ProcessFastfilesInternal();
    Sys_ProfEndNamedEvent();
  }
}

/*
==============
CL_TransientsCommonMP_OnLobbyToGameStart
==============
*/
void CL_TransientsCommonMP_OnLobbyToGameStart(void)
{
  if ( !Sys_IsMainThread() && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\client_mp\\cl_transients_common_mp.cpp", 975, ASSERT_TYPE_ASSERT, "(Sys_IsMainThread())", (const char *)&queryFormat, "Sys_IsMainThread()") )
    __debugbreak();
  s_transientsCommonMP.lobbyToGameStart = 1;
}

/*
==============
CL_TransientsCommonMP_ProcessFastfileLoadRequests
==============
*/
void CL_TransientsCommonMP_ProcessFastfileLoadRequests()
{
  int v0; 
  __int64 v1; 
  __int64 v2; 
  __int64 v5; 
  unsigned int v19; 
  _DWORD *v20; 
  const dvar_t *v21; 
  __int64 v22; 
  unsigned int *v23; 
  __int64 v24; 
  unsigned int v25; 
  __int64 v26; 
  unsigned int v27; 
  unsigned __int64 v28; 
  unsigned __int16 FileIndexForAssetIndex; 
  unsigned __int64 v30; 
  unsigned int v31; 
  __int64 v32; 
  __int64 v33; 
  __int64 v34; 
  __int64 v35; 
  _DWORD v36[514]; 

  Sys_ProfBeginNamedEvent(0xFF808080, "CL_TransientsCommonMP_ProcessFastfileLoadRequests");
  v0 = 0;
  v1 = 0i64;
  v2 = 256i64;
  _R15 = &s_transientsCommonMP;
  do
  {
    v36[v1] = s_transientsCommonMP.assetsRequested.array[v1];
    v36[v1 + 1] = s_transientsCommonMP.assetsRequested.array[v1 + 1];
    v1 += 2i64;
    --v2;
  }
  while ( v2 );
  _RAX = 0i64;
  v5 = 32i64;
  __asm { vmovdqu xmm3, cs:__xmm@ffffffffffffffffffffffffffffffff }
  do
  {
    __asm
    {
      vmovdqu xmm0, xmmword ptr [rax+r15+3D8D4h]
      vpandn  xmm2, xmm0, xmm3
      vpand   xmm0, xmm2, [rsp+rax+898h+var_838]
      vmovdqu [rsp+rax+898h+var_838], xmm0
      vmovdqu xmm0, xmmword ptr [rax+r15+3D8E4h]
      vpandn  xmm2, xmm0, xmm3
      vpand   xmm0, xmm2, [rsp+rax+898h+var_828]
      vmovdqu [rsp+rax+898h+var_828], xmm0
      vmovdqu xmm0, xmmword ptr [rax+r15+3D8F4h]
      vpandn  xmm2, xmm0, xmm3
      vpand   xmm0, xmm2, [rsp+rax+898h+var_818]
      vmovdqu [rsp+rax+898h+var_818], xmm0
      vmovdqu xmm0, xmmword ptr [rax+r15+3D904h]
      vpandn  xmm2, xmm0, xmm3
      vpand   xmm0, xmm2, [rsp+rax+898h+var_808]
      vmovdqu [rsp+rax+898h+var_808], xmm0
    }
    _RAX += 64i64;
    --v5;
  }
  while ( v5 );
  v19 = 0;
  v20 = v36;
  while ( !*v20 )
  {
    ++v19;
    ++v20;
    if ( v19 >= 0x200 )
      goto LABEL_16;
  }
  v21 = DCONST_DVARBOOL_cl_transientCommon_debugVerbose;
  if ( !DCONST_DVARBOOL_cl_transientCommon_debugVerbose && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\universal\\dvar.h", 692, ASSERT_TYPE_ASSERT, "(dvar)", "%s\n\tDvar %s accessed after deregistration", "dvar", "cl_transientCommon_debugVerbose") )
    __debugbreak();
  Dvar_CheckFrontendServerThread(v21);
  if ( v21->current.enabled )
  {
    LODWORD(v22) = 0;
    v23 = v36;
    v24 = 512i64;
    do
    {
      v22 = __popcnt(*v23++) + (unsigned int)v22;
      --v24;
    }
    while ( v24 );
    Com_Printf(14, "CL_TransientsCommonMP: loading %d fastfiles\n", v22);
  }
LABEL_16:
  v25 = v36[0];
  while ( v25 )
  {
LABEL_20:
    v27 = __lzcnt(v25);
    LODWORD(v28) = v27 + 32 * v0;
    if ( v27 >= 0x20 )
    {
      LODWORD(v33) = 32;
      LODWORD(v32) = v27;
      if ( CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\universal\\com_bitops.h", 104, ASSERT_TYPE_ASSERT, "(unsigned)( count ) < (unsigned)( 32 )", "count doesn't index 32\n\t%i not in [0, %i)", v32, v33) )
        __debugbreak();
    }
    if ( (v25 & (0x80000000 >> v27)) == 0 && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\qcommon\\bitarrayiterator.h", 76, ASSERT_TYPE_ASSERT, "(iter->bits & bit)", (const char *)&queryFormat, "iter->bits & bit") )
      __debugbreak();
    v25 &= ~(0x80000000 >> v27);
    if ( (unsigned int)v28 > 0xFFFF && CoreAssert_Handler("c:\\workspace\\iw8\\shared\\codware\\core\\core_assert.h", 385, ASSERT_TYPE_ASSERT, (const char *)&queryFormat.fmt + 3, "%s (SmallType) %s 0x%jx == (BigType) %s 0x%jx", "unsigned short __cdecl truncate_cast_impl<unsigned short,unsigned int>(unsigned int)", "unsigned", (unsigned __int16)(v27 + 32 * v0), "unsigned", (unsigned int)v28) )
      __debugbreak();
    FileIndexForAssetIndex = CL_TransientsMP_GetFileIndexForAssetIndex(v27 + 32 * v0);
    CL_TransientsCommonMP_LoadAssetInternal(FileIndexForAssetIndex, v27 + 32 * v0);
    v28 = (unsigned __int16)v28;
    if ( (unsigned __int16)v28 >= 0x4000u )
    {
      LODWORD(v35) = 0x4000;
      LODWORD(v34) = v28;
      if ( CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\qcommon\\bitarray.h", 290, ASSERT_TYPE_ASSERT, "( pos ) < ( impl()->getBitCount() )", "%s < %s\n\t%u, %u", "pos", "impl()->getBitCount()", v34, v35) )
        __debugbreak();
    }
    v30 = v28 >> 5;
    v31 = ~(0x80000000 >> (v28 & 0x1F));
    s_transientsCommonMP.assetsRequested.array[v30] &= v31;
    if ( (unsigned int)v28 >= 0x4000 )
    {
      LODWORD(v35) = 0x4000;
      LODWORD(v34) = v28;
      if ( CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\qcommon\\bitarray.h", 290, ASSERT_TYPE_ASSERT, "( pos ) < ( impl()->getBitCount() )", "%s < %s\n\t%u, %u", "pos", "impl()->getBitCount()", v34, v35) )
        __debugbreak();
    }
    s_transientsCommonMP.assetsModifiedPriority.array[v30] &= v31;
  }
  while ( 1 )
  {
    v26 = (unsigned int)(v0 + 1);
    v0 = v26;
    if ( (unsigned int)v26 >= 0x200 )
      break;
    v25 = v36[v26];
    if ( v25 )
      goto LABEL_20;
  }
  Sys_ProfEndNamedEvent();
}

/*
==============
CL_TransientsCommonMP_ProcessFastfilePendingLoads
==============
*/
void CL_TransientsCommonMP_ProcessFastfilePendingLoads(bitarray<16384> *pendingLoadMask)
{
  bitarray_base<bitarray<16384> > *v1; 
  __int64 v2; 
  unsigned int v3; 
  unsigned int v4; 
  unsigned int v5; 
  unsigned int v6; 
  unsigned __int64 v7; 
  const dvar_t *v8; 
  unsigned __int16 FileIndexForAssetIndex; 
  const char *AssetName; 
  unsigned int pendingLoadCount; 
  char *fmt; 
  __int64 v13; 
  __int64 v14; 
  __int64 v15; 
  __int64 v16; 
  char dest[1032]; 

  v1 = pendingLoadMask;
  Sys_ProfBeginNamedEvent(0xFF808080, "CL_TransientsCommonMP_ProcessFastfilePendingLoads");
  if ( !bitarray_base<bitarray<16384>>::anyBitsOn(v1) && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\client_mp\\cl_transients_common_mp.cpp", 859, ASSERT_TYPE_ASSERT, "(pendingLoadMask.anyBitsOn())", (const char *)&queryFormat, "pendingLoadMask.anyBitsOn()") )
    __debugbreak();
  LODWORD(v2) = 0;
  v3 = *(_DWORD *)v1;
  while ( v3 )
  {
LABEL_8:
    v4 = __lzcnt(v3);
    v5 = v4 + 32 * v2;
    if ( v4 >= 0x20 )
    {
      LODWORD(v14) = 32;
      LODWORD(v13) = v4;
      if ( CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\universal\\com_bitops.h", 104, ASSERT_TYPE_ASSERT, "(unsigned)( count ) < (unsigned)( 32 )", "count doesn't index 32\n\t%i not in [0, %i)", v13, v14) )
        __debugbreak();
    }
    if ( (v3 & (0x80000000 >> v4)) == 0 && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\qcommon\\bitarrayiterator.h", 76, ASSERT_TYPE_ASSERT, "(iter->bits & bit)", (const char *)&queryFormat, "iter->bits & bit") )
      __debugbreak();
    v3 &= ~(0x80000000 >> v4);
    if ( v5 > 0xFFFF && CoreAssert_Handler("c:\\workspace\\iw8\\shared\\codware\\core\\core_assert.h", 385, ASSERT_TYPE_ASSERT, (const char *)&queryFormat.fmt + 3, "%s (SmallType) %s 0x%jx == (BigType) %s 0x%jx", "unsigned short __cdecl truncate_cast_impl<unsigned short,unsigned int>(unsigned int)", "unsigned", (unsigned __int16)v5, "unsigned", v5) )
      __debugbreak();
    if ( CL_TransientsMP_IsXModelAssetIndexLoaded(v5) )
    {
      if ( (unsigned __int16)v5 >= 0x4000u )
      {
        LODWORD(v14) = 0x4000;
        LODWORD(v13) = (unsigned __int16)v5;
        if ( CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\qcommon\\bitarray.h", 257, ASSERT_TYPE_ASSERT, "( pos ) < ( impl()->getBitCount() )", "pos < impl()->getBitCount()\n\t%i, %i", v13, v14) )
          __debugbreak();
      }
      v6 = 0x80000000 >> (v5 & 0x1F);
      v7 = (unsigned __int64)(unsigned __int16)v5 >> 5;
      if ( (v6 & s_transientsCommonMP.assetsLoadCompleted.array[v7]) != 0 && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\client_mp\\cl_transients_common_mp.cpp", 870, ASSERT_TYPE_ASSERT, "(!s_transientsCommonMP.assetsLoadCompleted.testBit( assetIndex ))", (const char *)&queryFormat, "!s_transientsCommonMP.assetsLoadCompleted.testBit( assetIndex )") )
        __debugbreak();
      v8 = DCONST_DVARBOOL_cl_transientCommon_debugVerbose;
      if ( !DCONST_DVARBOOL_cl_transientCommon_debugVerbose && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\universal\\dvar.h", 692, ASSERT_TYPE_ASSERT, "(dvar)", "%s\n\tDvar %s accessed after deregistration", "dvar", "cl_transientCommon_debugVerbose") )
        __debugbreak();
      Dvar_CheckFrontendServerThread(v8);
      if ( v8->current.enabled )
      {
        FileIndexForAssetIndex = CL_TransientsMP_GetFileIndexForAssetIndex(v5);
        if ( (_WORD)v5 == 0xFFFF )
        {
          AssetName = "UNUSED_ASSET";
LABEL_32:
          LODWORD(v14) = 0x4000;
          LODWORD(v13) = (unsigned __int16)v5;
          if ( CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\client_mp\\cl_transients_common_mp.cpp", 363, ASSERT_TYPE_ASSERT, "(unsigned)( assetIndex ) < (unsigned)( ( sizeof( *array_counter( s_transientsCommonMP.assetsPriorities ) ) + 0 ) )", "assetIndex doesn't index s_transientsCommonMP.assetsPriorities\n\t%i not in [0, %i)", v13, v14) )
            __debugbreak();
        }
        else
        {
          AssetName = CL_TransientsMP_GetAssetName(v5);
          if ( (unsigned __int16)v5 >= 0x4000u )
            goto LABEL_32;
        }
        LODWORD(v14) = FileIndexForAssetIndex;
        LODWORD(v13) = (unsigned __int16)v5;
        LODWORD(fmt) = CL_TransientsCommonMP_GetTransientPriorityForAssetStreamingPriority(s_transientsCommonMP.assetsPriorities[(unsigned __int16)v5]);
        Com_sprintf_truncate(dest, 0x400ui64, "%s, prio=%u, asset=%u, file=%u", AssetName, fmt, v13, v14);
        Com_Printf(14, "CL_TransientsCommonMP: load completed for %s\n", dest);
        v1 = pendingLoadMask;
      }
      if ( (unsigned __int16)v5 >= 0x4000u )
      {
        LODWORD(v16) = 0x4000;
        LODWORD(v15) = (unsigned __int16)v5;
        if ( CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\qcommon\\bitarray.h", 290, ASSERT_TYPE_ASSERT, "( pos ) < ( impl()->getBitCount() )", "%s < %s\n\t%u, %u", "pos", "impl()->getBitCount()", v15, v16) )
          __debugbreak();
      }
      s_transientsCommonMP.assetsModifiedPriority.array[v7] &= ~v6;
      if ( (unsigned __int16)v5 >= 0x4000u )
      {
        LODWORD(v16) = 0x4000;
        LODWORD(v15) = (unsigned __int16)v5;
        if ( CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\qcommon\\bitarray.h", 263, ASSERT_TYPE_ASSERT, "( pos ) < ( impl()->getBitCount() )", "%s < %s\n\t%u, %u", "pos", "impl()->getBitCount()", v15, v16) )
          __debugbreak();
      }
      s_transientsCommonMP.assetsLoadCompleted.array[v7] |= v6;
      if ( (unsigned __int16)v5 >= 0x4000u )
      {
        LODWORD(v16) = 0x4000;
        LODWORD(v15) = (unsigned __int16)v5;
        if ( CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\qcommon\\bitarray.h", 290, ASSERT_TYPE_ASSERT, "( pos ) < ( impl()->getBitCount() )", "%s < %s\n\t%u, %u", "pos", "impl()->getBitCount()", v15, v16) )
          __debugbreak();
      }
      *(_DWORD *)&v1[v7 * 4] &= ~v6;
      pendingLoadCount = s_transientsCommonMP.pendingLoadCount;
      if ( !s_transientsCommonMP.pendingLoadCount )
      {
        LODWORD(v15) = s_transientsCommonMP.pendingLoadCount;
        if ( CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\client_mp\\cl_transients_common_mp.cpp", 885, ASSERT_TYPE_ASSERT, "( s_transientsCommonMP.pendingLoadCount ) > ( 0 )", "%s > %s\n\t%u, %u", "s_transientsCommonMP.pendingLoadCount", "0", v15, 0i64) )
          __debugbreak();
        pendingLoadCount = s_transientsCommonMP.pendingLoadCount;
      }
      s_transientsCommonMP.pendingLoadCount = pendingLoadCount - 1;
    }
  }
  while ( 1 )
  {
    v2 = (unsigned int)(v2 + 1);
    if ( (unsigned int)v2 >= 0x200 )
      break;
    v3 = *(_DWORD *)&v1[4 * v2];
    if ( v3 )
      goto LABEL_8;
  }
  Sys_ProfEndNamedEvent();
}

/*
==============
CL_TransientsCommonMP_ProcessFastfilePriorityUpdates
==============
*/
void CL_TransientsCommonMP_ProcessFastfilePriorityUpdates(const bitarray<16384> *const pendingLoadMaskConstPtr)
{
  bitarray<16384> *p_assetsModifiedPriority; 
  const dvar_t *v3; 
  bitarray<16384> *v4; 
  signed __int64 v5; 
  __int64 v6; 
  __int64 v9; 
  __int64 v18; 
  unsigned int v19; 
  unsigned int v20; 
  bitarray<16384> *v21; 
  const dvar_t *v22; 
  __int64 v23; 
  __int64 v24; 
  unsigned int v25; 
  unsigned __int64 v26; 
  __int64 v27; 
  __int64 v28; 
  __int64 v29; 
  __int64 v30; 

  Sys_ProfBeginNamedEvent(0xFF808080, "CL_TransientsCommonMP_ProcessFastfilePriorityUpdates");
  p_assetsModifiedPriority = &s_transientsCommonMP.assetsModifiedPriority;
  if ( s_transientsCommonMP.prevPrioritizationFlags != s_transientsCommonMP.nextPrioritizationFlags && pendingLoadMaskConstPtr )
  {
    v3 = DCONST_DVARBOOL_cl_transientCommon_debugVerbose;
    if ( !DCONST_DVARBOOL_cl_transientCommon_debugVerbose && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\universal\\dvar.h", 692, ASSERT_TYPE_ASSERT, "(dvar)", "%s\n\tDvar %s accessed after deregistration", "dvar", "cl_transientCommon_debugVerbose") )
      __debugbreak();
    Dvar_CheckFrontendServerThread(v3);
    if ( v3->current.enabled )
      Com_Printf(14, "CL_TransientsCommonMP: system priotiziation flagging changed from %d => %d\n", (unsigned int)s_transientsCommonMP.prevPrioritizationFlags, (unsigned int)s_transientsCommonMP.nextPrioritizationFlags);
    if ( &s_transientsCommonMP.assetsModifiedPriority > (bitarray<16384> *)&pendingLoadMaskConstPtr->array[511] || &s_transientsCommonMP.assetsModifiedPriority.array[511] < (unsigned int *)pendingLoadMaskConstPtr )
    {
      _RAX = &s_transientsCommonMP.assetsModifiedPriority.array[4];
      _RBX = (char *)pendingLoadMaskConstPtr - (char *)&s_transientsCommonMP.assetsModifiedPriority.array[4];
      v9 = 32i64;
      do
      {
        __asm
        {
          vmovdqu xmm1, xmmword ptr [rbx+rax]
          vpor    xmm1, xmm1, xmmword ptr [rax-10h]
          vmovdqu xmmword ptr [rax-10h], xmm1
          vmovdqu xmm2, xmmword ptr [rbx+rax+10h]
          vpor    xmm1, xmm2, xmmword ptr [rax]
          vmovdqu xmmword ptr [rax], xmm1
          vmovdqu xmm1, xmmword ptr [rbx+rax+20h]
          vpor    xmm1, xmm1, xmmword ptr [rax+10h]
          vmovdqu xmmword ptr [rax+10h], xmm1
          vmovdqu xmm1, xmmword ptr [rbx+rax+30h]
          vpor    xmm1, xmm1, xmmword ptr [rax+20h]
          vmovdqu xmmword ptr [rax+20h], xmm1
        }
        _RAX += 16;
        --v9;
      }
      while ( v9 );
    }
    else
    {
      v4 = &s_transientsCommonMP.assetsModifiedPriority;
      v5 = (char *)pendingLoadMaskConstPtr - (char *)&s_transientsCommonMP.assetsModifiedPriority;
      v6 = 512i64;
      do
      {
        v4->array[0] |= *(unsigned int *)((char *)v4->array + v5);
        v4 = (bitarray<16384> *)((char *)v4 + 4);
        --v6;
      }
      while ( v6 );
    }
  }
  LODWORD(v18) = 0;
  v19 = s_transientsCommonMP.assetsModifiedPriority.array[0];
  v20 = 0;
  v21 = &s_transientsCommonMP.assetsModifiedPriority;
  while ( !v21->array[0] )
  {
    ++v20;
    v21 = (bitarray<16384> *)((char *)v21 + 4);
    if ( v20 >= 0x200 )
      goto LABEL_26;
  }
  v22 = DCONST_DVARBOOL_cl_transientCommon_debugVerbose;
  if ( !DCONST_DVARBOOL_cl_transientCommon_debugVerbose && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\universal\\dvar.h", 692, ASSERT_TYPE_ASSERT, "(dvar)", "%s\n\tDvar %s accessed after deregistration", "dvar", "cl_transientCommon_debugVerbose") )
    __debugbreak();
  Dvar_CheckFrontendServerThread(v22);
  if ( v22->current.enabled )
  {
    LODWORD(v23) = 0;
    v24 = 512i64;
    do
    {
      v23 = __popcnt(p_assetsModifiedPriority->array[0]) + (unsigned int)v23;
      p_assetsModifiedPriority = (bitarray<16384> *)((char *)p_assetsModifiedPriority + 4);
      --v24;
    }
    while ( v24 );
    Com_Printf(14, "CL_TransientsCommonMP: updating priorities for %d fastfiles\n", v23);
  }
LABEL_26:
  while ( v19 )
  {
LABEL_29:
    v25 = __lzcnt(v19);
    LODWORD(v26) = v25 + 32 * v18;
    if ( v25 >= 0x20 )
    {
      LODWORD(v28) = 32;
      LODWORD(v27) = v25;
      if ( CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\universal\\com_bitops.h", 104, ASSERT_TYPE_ASSERT, "(unsigned)( count ) < (unsigned)( 32 )", "count doesn't index 32\n\t%i not in [0, %i)", v27, v28) )
        __debugbreak();
    }
    if ( (v19 & (0x80000000 >> v25)) == 0 && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\qcommon\\bitarrayiterator.h", 76, ASSERT_TYPE_ASSERT, "(iter->bits & bit)", (const char *)&queryFormat, "iter->bits & bit") )
      __debugbreak();
    v19 &= ~(0x80000000 >> v25);
    if ( (unsigned int)v26 > 0xFFFF && CoreAssert_Handler("c:\\workspace\\iw8\\shared\\codware\\core\\core_assert.h", 385, ASSERT_TYPE_ASSERT, (const char *)&queryFormat.fmt + 3, "%s (SmallType) %s 0x%jx == (BigType) %s 0x%jx", "unsigned short __cdecl truncate_cast_impl<unsigned short,unsigned int>(unsigned int)", "unsigned", (unsigned __int16)(v25 + 32 * v18), "unsigned", (unsigned int)v26) )
      __debugbreak();
    CL_TransientsCommonMP_SetLoadPriorityInternal(v25 + 32 * v18, s_transientsCommonMP.assetsPriorities[(unsigned __int16)(v25 + 32 * v18)]);
    v26 = (unsigned __int16)v26;
    if ( (unsigned __int16)v26 >= 0x4000u )
    {
      LODWORD(v30) = 0x4000;
      LODWORD(v29) = v26;
      if ( CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\qcommon\\bitarray.h", 290, ASSERT_TYPE_ASSERT, "( pos ) < ( impl()->getBitCount() )", "%s < %s\n\t%u, %u", "pos", "impl()->getBitCount()", v29, v30) )
        __debugbreak();
    }
    s_transientsCommonMP.assetsModifiedPriority.array[v26 >> 5] &= ~(0x80000000 >> (v26 & 0x1F));
  }
  while ( 1 )
  {
    v18 = (unsigned int)(v18 + 1);
    if ( (unsigned int)v18 >= 0x200 )
      break;
    v19 = s_transientsCommonMP.assetsModifiedPriority.array[v18];
    if ( v19 )
      goto LABEL_29;
  }
  s_transientsCommonMP.prevPrioritizationFlags = s_transientsCommonMP.nextPrioritizationFlags;
  Sys_ProfEndNamedEvent();
}

/*
==============
CL_TransientsCommonMP_ProcessFastfileUnloads
==============
*/
void CL_TransientsCommonMP_ProcessFastfileUnloads()
{
  int v0; 
  __int64 v1; 
  __int64 v2; 
  __int64 v5; 
  unsigned int v14; 
  _DWORD *v15; 
  const dvar_t *v16; 
  __int64 v17; 
  unsigned int *v18; 
  __int64 v19; 
  unsigned int v20; 
  _DWORD *v21; 
  bool v22; 
  unsigned int v23; 
  __int64 v24; 
  unsigned int v25; 
  unsigned __int64 v26; 
  unsigned __int16 FileIndexForAssetIndex; 
  __int64 v28; 
  __int64 v29; 
  __int64 v30; 
  __int64 v31; 
  _DWORD v32[514]; 

  Sys_ProfBeginNamedEvent(0xFF808080, "CL_TransientsCommonMP_ProcessFastfileUnloads");
  v0 = 0;
  v1 = 0i64;
  v2 = 256i64;
  _R15 = &s_transientsCommonMP;
  do
  {
    v32[v1] = s_transientsCommonMP.assetsLoadSubmitted.array[v1];
    v32[v1 + 1] = s_transientsCommonMP.assetsLoadSubmitted.array[v1 + 1];
    v1 += 2i64;
    --v2;
  }
  while ( v2 );
  _RAX = 0i64;
  v5 = 32i64;
  do
  {
    __asm
    {
      vmovdqu xmm1, xmmword ptr [rax+r15+3E0D4h]
      vpand   xmm1, xmm1, [rsp+rax+898h+var_838]
      vmovdqu [rsp+rax+898h+var_838], xmm1
      vmovdqu xmm1, xmmword ptr [rax+r15+3E0E4h]
      vpand   xmm1, xmm1, [rsp+rax+898h+var_828]
      vmovdqu [rsp+rax+898h+var_828], xmm1
      vmovdqu xmm1, xmmword ptr [rax+r15+3E0F4h]
      vpand   xmm1, xmm1, [rsp+rax+898h+var_818]
      vmovdqu [rsp+rax+898h+var_818], xmm1
      vmovdqu xmm1, xmmword ptr [rax+r15+3E104h]
      vpand   xmm1, xmm1, [rsp+rax+898h+var_808]
      vmovdqu [rsp+rax+898h+var_808], xmm1
    }
    _RAX += 64i64;
    --v5;
  }
  while ( v5 );
  v14 = 0;
  v15 = v32;
  while ( !*v15 )
  {
    ++v14;
    ++v15;
    if ( v14 >= 0x200 )
      goto LABEL_16;
  }
  v16 = DCONST_DVARBOOL_cl_transientCommon_debugVerbose;
  if ( !DCONST_DVARBOOL_cl_transientCommon_debugVerbose && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\universal\\dvar.h", 692, ASSERT_TYPE_ASSERT, "(dvar)", "%s\n\tDvar %s accessed after deregistration", "dvar", "cl_transientCommon_debugVerbose") )
    __debugbreak();
  Dvar_CheckFrontendServerThread(v16);
  if ( v16->current.enabled )
  {
    LODWORD(v17) = 0;
    v18 = v32;
    v19 = 512i64;
    do
    {
      v17 = __popcnt(*v18++) + (unsigned int)v17;
      --v19;
    }
    while ( v19 );
    Com_Printf(14, "CL_TransientsCommonMP: unloading %d fastfiles\n", v17);
  }
LABEL_16:
  v20 = 0;
  v21 = v32;
  while ( !*v21 )
  {
    ++v20;
    ++v21;
    if ( v20 >= 0x200 )
    {
      v22 = 0;
      goto LABEL_21;
    }
  }
  v22 = 1;
LABEL_21:
  s_transientsCommonMP.anyUnloadsProcessed = v22;
  v23 = v32[0];
  while ( v23 )
  {
LABEL_25:
    v25 = __lzcnt(v23);
    LODWORD(v26) = v25 + 32 * v0;
    if ( v25 >= 0x20 )
    {
      LODWORD(v29) = 32;
      LODWORD(v28) = v25;
      if ( CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\universal\\com_bitops.h", 104, ASSERT_TYPE_ASSERT, "(unsigned)( count ) < (unsigned)( 32 )", "count doesn't index 32\n\t%i not in [0, %i)", v28, v29) )
        __debugbreak();
    }
    if ( (v23 & (0x80000000 >> v25)) == 0 && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\qcommon\\bitarrayiterator.h", 76, ASSERT_TYPE_ASSERT, "(iter->bits & bit)", (const char *)&queryFormat, "iter->bits & bit") )
      __debugbreak();
    v23 &= ~(0x80000000 >> v25);
    if ( (unsigned int)v26 > 0xFFFF && CoreAssert_Handler("c:\\workspace\\iw8\\shared\\codware\\core\\core_assert.h", 385, ASSERT_TYPE_ASSERT, (const char *)&queryFormat.fmt + 3, "%s (SmallType) %s 0x%jx == (BigType) %s 0x%jx", "unsigned short __cdecl truncate_cast_impl<unsigned short,unsigned int>(unsigned int)", "unsigned", (unsigned __int16)(v25 + 32 * v0), "unsigned", (unsigned int)v26) )
      __debugbreak();
    FileIndexForAssetIndex = CL_TransientsMP_GetFileIndexForAssetIndex(v25 + 32 * v0);
    CL_TransientsCommonMP_UnloadAssetInternal(FileIndexForAssetIndex, v25 + 32 * v0);
    v26 = (unsigned __int16)v26;
    if ( (unsigned __int16)v26 >= 0x4000u )
    {
      LODWORD(v31) = 0x4000;
      LODWORD(v30) = v26;
      if ( CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\qcommon\\bitarray.h", 290, ASSERT_TYPE_ASSERT, "( pos ) < ( impl()->getBitCount() )", "%s < %s\n\t%u, %u", "pos", "impl()->getBitCount()", v30, v31) )
        __debugbreak();
    }
    s_transientsCommonMP.assetsRequested.array[v26 >> 5] &= ~(0x80000000 >> (v26 & 0x1F));
  }
  while ( 1 )
  {
    v24 = (unsigned int)(v0 + 1);
    v0 = v24;
    if ( (unsigned int)v24 >= 0x200 )
      break;
    v23 = v32[v24];
    if ( v23 )
      goto LABEL_25;
  }
  Sys_ProfEndNamedEvent();
}

/*
==============
CL_TransientsCommonMP_ProcessFastfiles
==============
*/
void CL_TransientsCommonMP_ProcessFastfiles(void)
{
  if ( !Sys_IsMainThread() && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\client_mp\\cl_transients_common_mp.cpp", 1171, ASSERT_TYPE_ASSERT, "(Sys_IsMainThread())", (const char *)&queryFormat, "Sys_IsMainThread()", -2i64) )
    __debugbreak();
  if ( s_transientsCommonMP.transientInfo )
  {
    Sys_ProfBeginNamedEvent(0xFF808080, "CL_TransientsCommonMP_ProcessFastfiles");
    CL_TransientsCommonMP_ProcessFastfilesInternal();
    Sys_ProfEndNamedEvent();
  }
}

/*
==============
CL_TransientsCommonMP_ProcessFastfilesInternal
==============
*/
void CL_TransientsCommonMP_ProcessFastfilesInternal()
{
  int v1; 
  __int64 v4; 
  unsigned int v17; 
  bitarray<16384> *p_pendingLoadMask; 
  int v19; 
  bitarray<16384> *v20; 
  __int64 v21; 
  bitarray<16384> *v22; 
  unsigned int v23; 
  bitarray<16384> *p_assetsModifiedPriority; 
  bitarray<16384> *i; 
  bitarray<16384> pendingLoadMask; 

  CL_TransientsCommonMP_ProcessFastfileUnloads();
  if ( !s_transientsCommonMP.lobbyToGameStart )
  {
    if ( s_transientsCommonMP.pendingLoadCount )
    {
      memcpy_0(&pendingLoadMask, &s_transientsCommonMP.assetsLoadSubmitted, sizeof(pendingLoadMask));
      __asm { vmovdqu xmm3, cs:__xmm@ffffffffffffffffffffffffffffffff }
      v1 = 0;
      _RDX = &s_transientsCommonMP;
      _RAX = 0i64;
      v4 = 32i64;
      do
      {
        __asm { vmovdqu xmm0, xmmword ptr [rax+rdx+3D0D4h] }
        _RAX += 64i64;
        __asm
        {
          vpandn  xmm2, xmm0, xmm3
          vpand   xmm0, xmm2, [rsp+rax+848h+var_858]
          vmovdqu [rsp+rax+848h+var_858], xmm0
          vmovdqu xmm0, xmmword ptr [rax+rdx+3D0A4h]
          vpandn  xmm2, xmm0, xmm3
          vpand   xmm0, xmm2, [rsp+rax+848h+var_848]
          vmovdqu [rsp+rax+848h+var_848], xmm0
          vmovdqu xmm0, xmmword ptr [rax+rdx+3D0B4h]
          vpandn  xmm2, xmm0, xmm3
          vpand   xmm0, xmm2, [rsp+rax+848h+var_838]
          vmovdqu [rsp+rax+848h+var_838], xmm0
          vmovdqu xmm0, xmmword ptr [rax+rdx+3D0C4h]
          vpandn  xmm2, xmm0, xmm3
          vpand   xmm0, xmm2, xmmword ptr [rsp+rax+848h+fmt]
          vmovdqu xmmword ptr [rsp+rax+848h+fmt], xmm0
        }
        --v4;
      }
      while ( v4 );
      v17 = 0;
      p_pendingLoadMask = &pendingLoadMask;
      while ( !p_pendingLoadMask->array[0] )
      {
        ++v17;
        p_pendingLoadMask = (bitarray<16384> *)((char *)p_pendingLoadMask + 4);
        if ( v17 >= 0x200 )
        {
          if ( CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\client_mp\\cl_transients_common_mp.cpp", 951, ASSERT_TYPE_ASSERT, "(pendingLoadsMask.anyBitsOn())", (const char *)&queryFormat, "pendingLoadsMask.anyBitsOn()") )
            __debugbreak();
          break;
        }
      }
      v19 = 0;
      v20 = &pendingLoadMask;
      v21 = 512i64;
      do
      {
        v19 += __popcnt(v20->array[0]);
        v20 = (bitarray<16384> *)((char *)v20 + 4);
        --v21;
      }
      while ( v21 );
      if ( s_transientsCommonMP.pendingLoadCount != v19 && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\client_mp\\cl_transients_common_mp.cpp", 952, ASSERT_TYPE_ASSERT, "(s_transientsCommonMP.pendingLoadCount == pendingLoadsMask.popCnt())", (const char *)&queryFormat, "s_transientsCommonMP.pendingLoadCount == pendingLoadsMask.popCnt()") )
        __debugbreak();
      CL_TransientsCommonMP_ProcessFastfilePendingLoads(&pendingLoadMask);
      v22 = &pendingLoadMask;
    }
    else
    {
      v1 = 0;
      v22 = NULL;
    }
    CL_TransientsCommonMP_ProcessFastfileLoadRequests();
    CL_TransientsCommonMP_ProcessFastfilePriorityUpdates(v22);
    if ( s_transientsCommonMP.prevPrioritizationFlags != s_transientsCommonMP.nextPrioritizationFlags && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\client_mp\\cl_transients_common_mp.cpp", 967, ASSERT_TYPE_ASSERT, "(s_transientsCommonMP.prevPrioritizationFlags == s_transientsCommonMP.nextPrioritizationFlags)", (const char *)&queryFormat, "s_transientsCommonMP.prevPrioritizationFlags == s_transientsCommonMP.nextPrioritizationFlags") )
      __debugbreak();
    v23 = 0;
    p_assetsModifiedPriority = &s_transientsCommonMP.assetsModifiedPriority;
    while ( !p_assetsModifiedPriority->array[0] )
    {
      ++v23;
      p_assetsModifiedPriority = (bitarray<16384> *)((char *)p_assetsModifiedPriority + 4);
      if ( v23 >= 0x200 )
        goto LABEL_26;
    }
    if ( CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\client_mp\\cl_transients_common_mp.cpp", 968, ASSERT_TYPE_ASSERT, "(s_transientsCommonMP.assetsModifiedPriority.noBitsOn())", (const char *)&queryFormat, "s_transientsCommonMP.assetsModifiedPriority.noBitsOn()") )
      __debugbreak();
LABEL_26:
    for ( i = &s_transientsCommonMP.assetsRequested; !i->array[0]; i = (bitarray<16384> *)((char *)i + 4) )
    {
      if ( (unsigned int)++v1 >= 0x200 )
        return;
    }
    if ( CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\client_mp\\cl_transients_common_mp.cpp", 969, ASSERT_TYPE_ASSERT, "(s_transientsCommonMP.assetsRequested.noBitsOn())", (const char *)&queryFormat, "s_transientsCommonMP.assetsRequested.noBitsOn()") )
      __debugbreak();
  }
}

/*
==============
CL_TransientsCommonMP_RegisterFileIndex
==============
*/
void CL_TransientsCommonMP_RegisterFileIndex(const TransientInfo *const transientInfo, unsigned __int16 fileIndex, unsigned __int16 transientInfoIndex)
{
  const TransientInfo *v6; 
  __int64 v7; 
  __int64 v8; 

  if ( fileIndex >= 0x280Du && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\client_mp\\cl_transients_common_mp.cpp", 1161, ASSERT_TYPE_ASSERT, "(unsigned)( fileIndex ) < (unsigned)( ( sizeof( *array_counter( s_transientsCommonMP.transientInfoIndex ) ) + 0 ) )", "fileIndex doesn't index ARRAY_COUNT( s_transientsCommonMP.transientInfoIndex )\n\t%i not in [0, %i)", fileIndex, 10253) )
    __debugbreak();
  if ( !transientInfo && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\client_mp\\cl_transients_common_mp.cpp", 1162, ASSERT_TYPE_ASSERT, "( ( transientInfo != nullptr ) )", "( transientInfo ) = %p", NULL) )
    __debugbreak();
  v6 = s_transientsCommonMP.transientInfo;
  if ( s_transientsCommonMP.transientInfo != transientInfo )
  {
    if ( CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\client_mp\\cl_transients_common_mp.cpp", 1163, ASSERT_TYPE_ASSERT, "( ( s_transientsCommonMP.transientInfo == transientInfo ) )", "( s_transientsCommonMP.transientInfo ) = %p", s_transientsCommonMP.transientInfo) )
      __debugbreak();
    v6 = s_transientsCommonMP.transientInfo;
  }
  if ( transientInfoIndex >= v6->transientFileCount )
  {
    LODWORD(v8) = v6->transientFileCount;
    LODWORD(v7) = transientInfoIndex;
    if ( CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\client_mp\\cl_transients_common_mp.cpp", 1164, ASSERT_TYPE_ASSERT, "(unsigned)( transientInfoIndex ) < (unsigned)( s_transientsCommonMP.transientInfo->transientFileCount )", "transientInfoIndex doesn't index s_transientsCommonMP.transientInfo->transientFileCount\n\t%i not in [0, %i)", v7, v8) )
      __debugbreak();
  }
  s_transientsCommonMP.transientInfoIndex[fileIndex] = transientInfoIndex;
}

/*
==============
CL_TransientsCommonMP_RegisterTransientInfo
==============
*/
void CL_TransientsCommonMP_RegisterTransientInfo(const TransientInfo *const transientInfo)
{
  TransientCosts *p_transientCosts; 
  TransientCostCalc *perTypeCost; 
  __int64 v4; 
  __int64 v5; 
  bitarray<16384> *p_assetsLoadCompleted; 
  __int64 v7; 
  bitarray<16384> *p_assetsLoadSubmitted; 
  __int64 v9; 
  bitarray<16384> *p_assetsRequested; 
  __int64 v11; 
  bitarray<16384> *p_assetsModifiedPriority; 

  if ( !transientInfo && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\client_mp\\cl_transients_common_mp.cpp", 1144, ASSERT_TYPE_ASSERT, "( ( transientInfo != nullptr ) )", "( transientInfo ) = %p", NULL) )
    __debugbreak();
  if ( s_transientsCommonMP.transientInfo && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\client_mp\\cl_transients_common_mp.cpp", 1145, ASSERT_TYPE_ASSERT, "( ( s_transientsCommonMP.transientInfo == nullptr ) )", "( s_transientsCommonMP.transientInfo ) = %p", s_transientsCommonMP.transientInfo) )
    __debugbreak();
  s_transientsCommonMP.transientInfo = transientInfo;
  Com_Printf(14, "CL_TransientsCommonMP: Reset()\n");
  if ( !transientInfo && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\client_mp\\cl_transients_common_mp.cpp", 1002, ASSERT_TYPE_ASSERT, "(transientInfo)", (const char *)&queryFormat, "transientInfo") )
    __debugbreak();
  DebugWipe(s_transientsCommonMP.transientInfoIndex, 0x501Aui64);
  p_transientCosts = &transientInfo->transientCosts;
  TransientCostCalc_Init(&s_transientsCommonMP.totalCost, &transientInfo->transientCosts);
  perTypeCost = s_transientsCommonMP.perTypeCost;
  v4 = 5i64;
  do
  {
    TransientCostCalc_Init(perTypeCost++, p_transientCosts);
    --v4;
  }
  while ( v4 );
  memset_0(s_transientsCommonMP.assetsReferenceCount, 0, 0x680Dui64);
  v5 = 32i64;
  p_assetsLoadCompleted = &s_transientsCommonMP.assetsLoadCompleted;
  v7 = 32i64;
  do
  {
    *(_QWORD *)p_assetsLoadCompleted->array = 0i64;
    *(_QWORD *)&p_assetsLoadCompleted->array[2] = 0i64;
    *(_QWORD *)&p_assetsLoadCompleted->array[4] = 0i64;
    p_assetsLoadCompleted = (bitarray<16384> *)((char *)p_assetsLoadCompleted + 64);
    *(_QWORD *)&p_assetsLoadCompleted[-1].array[502] = 0i64;
    *(_QWORD *)&p_assetsLoadCompleted[-1].array[504] = 0i64;
    *(_QWORD *)&p_assetsLoadCompleted[-1].array[506] = 0i64;
    *(_QWORD *)&p_assetsLoadCompleted[-1].array[508] = 0i64;
    *(_QWORD *)&p_assetsLoadCompleted[-1].array[510] = 0i64;
    --v7;
  }
  while ( v7 );
  p_assetsLoadSubmitted = &s_transientsCommonMP.assetsLoadSubmitted;
  v9 = 32i64;
  do
  {
    *(_QWORD *)p_assetsLoadSubmitted->array = 0i64;
    *(_QWORD *)&p_assetsLoadSubmitted->array[2] = 0i64;
    *(_QWORD *)&p_assetsLoadSubmitted->array[4] = 0i64;
    p_assetsLoadSubmitted = (bitarray<16384> *)((char *)p_assetsLoadSubmitted + 64);
    *(_QWORD *)&p_assetsLoadSubmitted[-1].array[502] = 0i64;
    *(_QWORD *)&p_assetsLoadSubmitted[-1].array[504] = 0i64;
    *(_QWORD *)&p_assetsLoadSubmitted[-1].array[506] = 0i64;
    *(_QWORD *)&p_assetsLoadSubmitted[-1].array[508] = 0i64;
    *(_QWORD *)&p_assetsLoadSubmitted[-1].array[510] = 0i64;
    --v9;
  }
  while ( v9 );
  p_assetsRequested = &s_transientsCommonMP.assetsRequested;
  v11 = 32i64;
  do
  {
    *(_QWORD *)p_assetsRequested->array = 0i64;
    *(_QWORD *)&p_assetsRequested->array[2] = 0i64;
    *(_QWORD *)&p_assetsRequested->array[4] = 0i64;
    p_assetsRequested = (bitarray<16384> *)((char *)p_assetsRequested + 64);
    *(_QWORD *)&p_assetsRequested[-1].array[502] = 0i64;
    *(_QWORD *)&p_assetsRequested[-1].array[504] = 0i64;
    *(_QWORD *)&p_assetsRequested[-1].array[506] = 0i64;
    *(_QWORD *)&p_assetsRequested[-1].array[508] = 0i64;
    *(_QWORD *)&p_assetsRequested[-1].array[510] = 0i64;
    --v11;
  }
  while ( v11 );
  DebugWipe(s_transientsCommonMP.assetsPriorities, 0x10000ui64);
  p_assetsModifiedPriority = &s_transientsCommonMP.assetsModifiedPriority;
  do
  {
    *(_QWORD *)p_assetsModifiedPriority->array = 0i64;
    *(_QWORD *)&p_assetsModifiedPriority->array[2] = 0i64;
    *(_QWORD *)&p_assetsModifiedPriority->array[4] = 0i64;
    p_assetsModifiedPriority = (bitarray<16384> *)((char *)p_assetsModifiedPriority + 64);
    *(_QWORD *)&p_assetsModifiedPriority[-1].array[502] = 0i64;
    *(_QWORD *)&p_assetsModifiedPriority[-1].array[504] = 0i64;
    *(_QWORD *)&p_assetsModifiedPriority[-1].array[506] = 0i64;
    *(_QWORD *)&p_assetsModifiedPriority[-1].array[508] = 0i64;
    *(_QWORD *)&p_assetsModifiedPriority[-1].array[510] = 0i64;
    --v5;
  }
  while ( v5 );
  *(_WORD *)&s_transientsCommonMP.anyUnloadsProcessed = 0;
  *(_QWORD *)&s_transientsCommonMP.prevPrioritizationFlags = 0i64;
  s_transientsCommonMP.pendingLoadCount = 0;
}

/*
==============
CL_TransientsCommonMP_SetLoadPriorities
==============
*/
void CL_TransientsCommonMP_SetLoadPriorities(const char *const *modelNames, const unsigned int modelCount, const AssetStreamingPriority priority)
{
  unsigned int TransientAssetIndices; 
  unsigned __int16 v7; 
  unsigned __int16 *v8; 
  __int64 v9; 
  unsigned __int16 v10; 
  __int64 v11; 
  __int64 v12; 
  __int64 v13; 
  __int64 v14; 
  unsigned __int16 outAssetIndices[20]; 

  if ( !Sys_IsMainThread() && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\client_mp\\cl_transients_common_mp.cpp", 1266, ASSERT_TYPE_ASSERT, "(Sys_IsMainThread())", (const char *)&queryFormat, "Sys_IsMainThread()") )
    __debugbreak();
  if ( s_transientsCommonMP.transientInfo )
    goto LABEL_8;
  if ( CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\client_mp\\cl_transients_common_mp.cpp", 1268, ASSERT_TYPE_ASSERT, "(CL_TransientsCommonMP_IsEnabled())", (const char *)&queryFormat, "CL_TransientsCommonMP_IsEnabled()") )
    __debugbreak();
  if ( s_transientsCommonMP.transientInfo )
  {
LABEL_8:
    if ( modelCount )
    {
      Sys_ProfBeginNamedEvent(0xFF808080, "CL_TransientsCommonMP_SetLoadPriority");
      Sys_ProfBeginNamedEvent(0xFF808080, "CL_TransientsCommonMP_LookupTransientAssetsForRequest");
      TransientAssetIndices = CL_TransientsMP_GetTransientAssetIndices(modelNames, modelCount, ASSET_TYPE_XMODEL, outAssetIndices);
      v7 = truncate_cast<unsigned short,unsigned int>(TransientAssetIndices);
      Sys_ProfEndNamedEvent();
      if ( v7 )
      {
        v8 = outAssetIndices;
        v9 = v7;
        do
        {
          v10 = *v8;
          if ( *v8 >= 0x4000u )
          {
            LODWORD(v12) = 0x4000;
            LODWORD(v11) = v10;
            if ( CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\client_mp\\cl_transients_common_mp.cpp", 781, ASSERT_TYPE_ASSERT, "(unsigned)( assetIndex ) < (unsigned)( MAX_TRANSIENT_ASSETS )", "assetIndex doesn't index MAX_TRANSIENT_ASSETS\n\t%i not in [0, %i)", v11, v12) )
              __debugbreak();
          }
          if ( v10 == 0xFFFF )
          {
            LODWORD(v14) = 0xFFFF;
            LODWORD(v13) = 0xFFFF;
            if ( CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\client_mp\\cl_transients_common_mp.cpp", 782, ASSERT_TYPE_ASSERT, "( assetIndex ) != ( UNUSED_ASSET )", "%s != %s\n\t%i, %i", "assetIndex", "UNUSED_ASSET", v13, v14) )
              __debugbreak();
          }
          if ( !CL_TransientsCommonMP_SkipAssetIndex(v10) )
            CL_TransientsCommonMP_MarkSetLoadPriorityRequested(v10, priority);
          ++v8;
          --v9;
        }
        while ( v9 );
      }
      Sys_ProfEndNamedEvent();
    }
  }
}

/*
==============
CL_TransientsCommonMP_SetLoadPriorityInternal
==============
*/
void CL_TransientsCommonMP_SetLoadPriorityInternal(const unsigned __int16 assetIndex, const AssetStreamingPriority priority)
{
  const char *AssetName; 
  unsigned int v4; 
  unsigned __int64 v5; 
  const dvar_t *v6; 
  unsigned __int16 FileIndexForAssetIndex; 
  unsigned int TransientPriorityForAssetIndex; 
  char *fmt; 
  __int64 v10; 
  __int64 v11; 
  char dest[1024]; 

  AssetName = "UNUSED_ASSET";
  if ( assetIndex == 0xFFFF && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\client_mp\\cl_transients_common_mp.cpp", 626, ASSERT_TYPE_ASSERT, "( assetIndex ) != ( UNUSED_ASSET )", "%s != %s\n\t%i, %i", "assetIndex", "UNUSED_ASSET", 0xFFFF, 0xFFFF) )
    __debugbreak();
  if ( assetIndex >= 0x4000u )
  {
    LODWORD(v11) = 0x4000;
    LODWORD(v10) = assetIndex;
    if ( CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\qcommon\\bitarray.h", 257, ASSERT_TYPE_ASSERT, "( pos ) < ( impl()->getBitCount() )", "pos < impl()->getBitCount()\n\t%i, %i", v10, v11) )
      __debugbreak();
  }
  v4 = 0x80000000 >> (assetIndex & 0x1F);
  v5 = (unsigned __int64)assetIndex >> 5;
  if ( (v4 & s_transientsCommonMP.assetsLoadCompleted.array[v5]) != 0 && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\client_mp\\cl_transients_common_mp.cpp", 628, ASSERT_TYPE_ASSERT, "(!s_transientsCommonMP.assetsLoadCompleted.testBit( assetIndex ))", (const char *)&queryFormat, "!s_transientsCommonMP.assetsLoadCompleted.testBit( assetIndex )") )
    __debugbreak();
  if ( assetIndex >= 0x4000u )
  {
    LODWORD(v11) = 0x4000;
    LODWORD(v10) = assetIndex;
    if ( CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\qcommon\\bitarray.h", 257, ASSERT_TYPE_ASSERT, "( pos ) < ( impl()->getBitCount() )", "pos < impl()->getBitCount()\n\t%i, %i", v10, v11) )
      __debugbreak();
  }
  if ( (v4 & s_transientsCommonMP.assetsLoadSubmitted.array[v5]) == 0 )
  {
    if ( assetIndex >= 0x4000u )
    {
      LODWORD(v11) = 0x4000;
      LODWORD(v10) = assetIndex;
      if ( CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\qcommon\\bitarray.h", 257, ASSERT_TYPE_ASSERT, "( pos ) < ( impl()->getBitCount() )", "pos < impl()->getBitCount()\n\t%i, %i", v10, v11) )
        __debugbreak();
    }
    if ( (v4 & s_transientsCommonMP.assetsRequested.array[v5]) == 0 && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\client_mp\\cl_transients_common_mp.cpp", 629, ASSERT_TYPE_ASSERT, "(s_transientsCommonMP.assetsLoadSubmitted.testBit( assetIndex ) || s_transientsCommonMP.assetsRequested.testBit( assetIndex ))", (const char *)&queryFormat, "s_transientsCommonMP.assetsLoadSubmitted.testBit( assetIndex ) || s_transientsCommonMP.assetsRequested.testBit( assetIndex )") )
      __debugbreak();
  }
  v6 = DCONST_DVARBOOL_cl_transientCommon_debugVerbose;
  if ( !DCONST_DVARBOOL_cl_transientCommon_debugVerbose && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\universal\\dvar.h", 692, ASSERT_TYPE_ASSERT, "(dvar)", "%s\n\tDvar %s accessed after deregistration", "dvar", "cl_transientCommon_debugVerbose") )
    __debugbreak();
  Dvar_CheckFrontendServerThread(v6);
  if ( v6->current.enabled )
  {
    FileIndexForAssetIndex = CL_TransientsMP_GetFileIndexForAssetIndex(assetIndex);
    if ( assetIndex != 0xFFFF )
      AssetName = CL_TransientsMP_GetAssetName(assetIndex);
    LODWORD(v11) = FileIndexForAssetIndex;
    LODWORD(v10) = assetIndex;
    LODWORD(fmt) = CL_TransientsCommonMP_GetTransientPriorityForAssetIndex(assetIndex);
    Com_sprintf_truncate(dest, 0x400ui64, "%s, prio=%u, asset=%u, file=%u", AssetName, fmt, v10, v11);
    Com_Printf(14, "CL_TransientsCommonMP: priority changed for %s\n", dest);
  }
  TransientPriorityForAssetIndex = CL_TransientsCommonMP_GetTransientPriorityForAssetIndex(assetIndex);
  CL_TransientsMP_SetLoadPriorityByAssetIndex(assetIndex, TransientPriorityForAssetIndex);
}

/*
==============
CL_TransientsCommonMP_SetPrioritizationFlags
==============
*/
void CL_TransientsCommonMP_SetPrioritizationFlags(const CL_TransientsCommonMP_PrioritizationFlags flags)
{
  s_transientsCommonMP.nextPrioritizationFlags = flags;
}

/*
==============
CL_TransientsCommonMP_SkipAssetIndex
==============
*/
bool CL_TransientsCommonMP_SkipAssetIndex(const unsigned __int16 assetIndex)
{
  unsigned __int16 FileIndexForAssetIndex; 
  ClTransientsCommonMPType RegisteredFileType; 
  const dvar_t *v4; 
  const char *v5; 

  FileIndexForAssetIndex = CL_TransientsMP_GetFileIndexForAssetIndex(assetIndex);
  RegisteredFileType = CL_TransientsCommonMP_GetRegisteredFileType(FileIndexForAssetIndex);
  switch ( RegisteredFileType )
  {
    case CL_TRANSIENTS_COMMON_MP_TYPE_HEAD:
      v4 = DCONST_DVARBOOL_cl_transientCommon_devAllowHeads;
      if ( DCONST_DVARBOOL_cl_transientCommon_devAllowHeads )
        goto LABEL_19;
      v5 = "cl_transientCommon_devAllowHeads";
      goto LABEL_17;
    case CL_TRANSIENTS_COMMON_MP_TYPE_BODY:
      v4 = DCONST_DVARBOOL_cl_transientCommon_devAllowBodies;
      if ( DCONST_DVARBOOL_cl_transientCommon_devAllowBodies )
        goto LABEL_19;
      v5 = "cl_transientCommon_devAllowBodies";
      goto LABEL_17;
    case CL_TRANSIENTS_COMMON_MP_TYPE_WEAPON:
      v4 = DCONST_DVARBOOL_cl_transientCommon_devAllowWeapons;
      if ( DCONST_DVARBOOL_cl_transientCommon_devAllowWeapons )
        goto LABEL_19;
      v5 = "cl_transientCommon_devAllowWeapons";
      goto LABEL_17;
    case CL_TRANSIENTS_COMMON_MP_TYPE_VIEW_ARMS:
      v4 = DCONST_DVARBOOL_cl_transientCommon_devAllowViewArms;
      if ( DCONST_DVARBOOL_cl_transientCommon_devAllowViewArms )
        goto LABEL_19;
      v5 = "cl_transientCommon_devAllowViewArms";
LABEL_17:
      if ( CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\universal\\dvar.h", 692, ASSERT_TYPE_ASSERT, "(dvar)", "%s\n\tDvar %s accessed after deregistration", "dvar", v5) )
        __debugbreak();
      goto LABEL_19;
  }
  if ( RegisteredFileType != CL_TRANSIENTS_COMMON_MP_TYPE_VIEW_WEAPON )
    return 0;
  v4 = DCONST_DVARBOOL_cl_transientCommon_devAllowViewWeapons;
  if ( !DCONST_DVARBOOL_cl_transientCommon_devAllowViewWeapons )
  {
    v5 = "cl_transientCommon_devAllowViewWeapons";
    goto LABEL_17;
  }
LABEL_19:
  Dvar_CheckFrontendServerThread(v4);
  return !v4->current.enabled;
}

/*
==============
CL_TransientsCommonMP_UnloadAssetInternal
==============
*/
void CL_TransientsCommonMP_UnloadAssetInternal(const unsigned __int16 fileIndex, const unsigned __int16 assetIndex)
{
  const char *AssetName; 
  const dvar_t *v5; 
  unsigned __int16 FileIndexForAssetIndex; 
  unsigned int v7; 
  unsigned int v8; 
  unsigned __int64 v9; 
  unsigned int pendingLoadCount; 
  char *fmt; 
  __int64 v12; 
  __int64 v13; 
  __int64 v14; 
  __int64 v15; 
  char dest[1024]; 

  AssetName = "UNUSED_ASSET";
  if ( assetIndex == 0xFFFF && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\client_mp\\cl_transients_common_mp.cpp", 595, ASSERT_TYPE_ASSERT, "( assetIndex ) != ( UNUSED_ASSET )", "%s != %s\n\t%i, %i", "assetIndex", "UNUSED_ASSET", 0xFFFF, 0xFFFF) )
    __debugbreak();
  if ( fileIndex == 0xFFFF )
  {
    LODWORD(v15) = 0xFFFF;
    LODWORD(v14) = 0xFFFF;
    if ( CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\client_mp\\cl_transients_common_mp.cpp", 596, ASSERT_TYPE_ASSERT, "( fileIndex ) != ( UNUSED_FILE )", "%s != %s\n\t%i, %i", "fileIndex", "UNUSED_FILE", v14, v15) )
      __debugbreak();
  }
  v5 = DCONST_DVARBOOL_cl_transientCommon_debugVerbose;
  if ( !DCONST_DVARBOOL_cl_transientCommon_debugVerbose && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\universal\\dvar.h", 692, ASSERT_TYPE_ASSERT, "(dvar)", "%s\n\tDvar %s accessed after deregistration", "dvar", "cl_transientCommon_debugVerbose") )
    __debugbreak();
  Dvar_CheckFrontendServerThread(v5);
  if ( v5->current.enabled )
  {
    FileIndexForAssetIndex = CL_TransientsMP_GetFileIndexForAssetIndex(assetIndex);
    if ( assetIndex != 0xFFFF )
      AssetName = CL_TransientsMP_GetAssetName(assetIndex);
    LODWORD(v13) = FileIndexForAssetIndex;
    v7 = assetIndex;
    LODWORD(v12) = assetIndex;
    LODWORD(fmt) = CL_TransientsCommonMP_GetTransientPriorityForAssetIndex(assetIndex);
    Com_sprintf_truncate(dest, 0x400ui64, "%s, prio=%u, asset=%u, file=%u", AssetName, fmt, v12, v13);
    Com_Printf(14, "CL_TransientsCommonMP: unloading %s\n", dest);
  }
  else
  {
    v7 = assetIndex;
  }
  if ( v7 >= 0x4000 )
  {
    LODWORD(v13) = 0x4000;
    LODWORD(v12) = v7;
    if ( CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\qcommon\\bitarray.h", 257, ASSERT_TYPE_ASSERT, "( pos ) < ( impl()->getBitCount() )", "pos < impl()->getBitCount()\n\t%i, %i", v12, v13) )
      __debugbreak();
  }
  v8 = 0x80000000 >> (v7 & 0x1F);
  v9 = (unsigned __int64)v7 >> 5;
  if ( (v8 & s_transientsCommonMP.assetsLoadCompleted.array[v9]) != 0 )
  {
    if ( v7 >= 0x4000 )
    {
      LODWORD(v15) = 0x4000;
      LODWORD(v14) = v7;
      if ( CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\qcommon\\bitarray.h", 290, ASSERT_TYPE_ASSERT, "( pos ) < ( impl()->getBitCount() )", "%s < %s\n\t%u, %u", "pos", "impl()->getBitCount()", v14, v15) )
        __debugbreak();
    }
    s_transientsCommonMP.assetsLoadCompleted.array[v9] &= ~v8;
  }
  else
  {
    pendingLoadCount = s_transientsCommonMP.pendingLoadCount;
    if ( !s_transientsCommonMP.pendingLoadCount )
    {
      LODWORD(v14) = s_transientsCommonMP.pendingLoadCount;
      if ( CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\client_mp\\cl_transients_common_mp.cpp", 613, ASSERT_TYPE_ASSERT, "( s_transientsCommonMP.pendingLoadCount ) > ( 0 )", "%s > %s\n\t%u, %u", "s_transientsCommonMP.pendingLoadCount", "0", v14, 0i64) )
        __debugbreak();
      pendingLoadCount = s_transientsCommonMP.pendingLoadCount;
    }
    s_transientsCommonMP.pendingLoadCount = pendingLoadCount - 1;
  }
  if ( v7 >= 0x4000 )
  {
    LODWORD(v13) = 0x4000;
    LODWORD(v12) = v7;
    if ( CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\qcommon\\bitarray.h", 257, ASSERT_TYPE_ASSERT, "( pos ) < ( impl()->getBitCount() )", "pos < impl()->getBitCount()\n\t%i, %i", v12, v13) )
      __debugbreak();
  }
  if ( (v8 & s_transientsCommonMP.assetsLoadSubmitted.array[v9]) == 0 && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\client_mp\\cl_transients_common_mp.cpp", 617, ASSERT_TYPE_ASSERT, "(s_transientsCommonMP.assetsLoadSubmitted.testBit( assetIndex ))", (const char *)&queryFormat, "s_transientsCommonMP.assetsLoadSubmitted.testBit( assetIndex )") )
    __debugbreak();
  if ( v7 >= 0x4000 )
  {
    LODWORD(v15) = 0x4000;
    LODWORD(v14) = v7;
    if ( CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\qcommon\\bitarray.h", 290, ASSERT_TYPE_ASSERT, "( pos ) < ( impl()->getBitCount() )", "%s < %s\n\t%u, %u", "pos", "impl()->getBitCount()", v14, v15) )
      __debugbreak();
  }
  s_transientsCommonMP.assetsLoadSubmitted.array[v9] &= ~v8;
  CL_TransientsMP_UnloadByAssetIndex(assetIndex);
}

/*
==============
CL_TransientsCommonMP_UnloadModels
==============
*/
void CL_TransientsCommonMP_UnloadModels(const char *const *modelNames, const unsigned int modelCount)
{
  unsigned int TransientAssetIndices; 
  unsigned __int16 v5; 
  unsigned __int16 outAssetIndices[20]; 

  if ( !Sys_IsMainThread() && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\client_mp\\cl_transients_common_mp.cpp", 1241, ASSERT_TYPE_ASSERT, "(Sys_IsMainThread())", (const char *)&queryFormat, "Sys_IsMainThread()", -2i64) )
    __debugbreak();
  if ( s_transientsCommonMP.transientInfo )
    goto LABEL_8;
  if ( CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\client_mp\\cl_transients_common_mp.cpp", 1243, ASSERT_TYPE_ASSERT, "(CL_TransientsCommonMP_IsEnabled())", (const char *)&queryFormat, "CL_TransientsCommonMP_IsEnabled()") )
    __debugbreak();
  if ( s_transientsCommonMP.transientInfo )
  {
LABEL_8:
    if ( modelCount )
    {
      Sys_ProfBeginNamedEvent(0xFF808080, "CL_TransientsCommonMP_UnloadRequest");
      Sys_ProfBeginNamedEvent(0xFF808080, "CL_TransientsCommonMP_LookupTransientAssetsForRequest");
      TransientAssetIndices = CL_TransientsMP_GetTransientAssetIndices(modelNames, modelCount, ASSET_TYPE_XMODEL, outAssetIndices);
      v5 = truncate_cast<unsigned short,unsigned int>(TransientAssetIndices);
      Sys_ProfEndNamedEvent();
      CL_TransientsCommonMP_UnloadModelsInternal(outAssetIndices, v5);
      Sys_ProfEndNamedEvent();
    }
  }
}

/*
==============
CL_TransientsCommonMP_UnloadModelsInternal
==============
*/
void CL_TransientsCommonMP_UnloadModelsInternal(const unsigned __int16 *assetIndices, const unsigned __int16 assetCount)
{
  const unsigned __int16 *v3; 
  const dvar_t *v4; 
  bool enabled; 
  __int64 v6; 
  unsigned __int16 v7; 
  unsigned int v8; 
  unsigned __int64 v9; 
  const char *AssetName; 
  unsigned __int8 *v11; 
  __int64 v13; 
  __int64 v14; 
  __int64 v15; 

  v3 = assetIndices;
  if ( !assetIndices && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\client_mp\\cl_transients_common_mp.cpp", 742, ASSERT_TYPE_ASSERT, "( ( assetIndices != nullptr ) )", "( assetIndices ) = %p", NULL) )
    __debugbreak();
  v4 = DCONST_DVARBOOL_cl_transientCommon_memoryBudgetStrictlyEnforced;
  if ( !DCONST_DVARBOOL_cl_transientCommon_memoryBudgetStrictlyEnforced && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\universal\\dvar.h", 692, ASSERT_TYPE_ASSERT, "(dvar)", "%s\n\tDvar %s accessed after deregistration", "dvar", "cl_transientCommon_memoryBudgetStrictlyEnforced") )
    __debugbreak();
  Dvar_CheckFrontendServerThread(v4);
  enabled = v4->current.enabled;
  if ( assetCount )
  {
    v6 = assetCount;
    do
    {
      v7 = *v3;
      if ( *v3 >= 0x4000u )
      {
        LODWORD(v14) = 0x4000;
        LODWORD(v13) = v7;
        if ( CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\client_mp\\cl_transients_common_mp.cpp", 749, ASSERT_TYPE_ASSERT, "(unsigned)( assetIndex ) < (unsigned)( MAX_TRANSIENT_ASSETS )", "assetIndex doesn't index MAX_TRANSIENT_ASSETS\n\t%i not in [0, %i)", v13, v14) )
          __debugbreak();
      }
      if ( !CL_TransientsCommonMP_SkipAssetIndex(v7) )
      {
        if ( !enabled )
          goto LABEL_34;
        if ( v7 >= 0x4000u )
        {
          LODWORD(v14) = 0x4000;
          LODWORD(v13) = v7;
          if ( CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\qcommon\\bitarray.h", 257, ASSERT_TYPE_ASSERT, "( pos ) < ( impl()->getBitCount() )", "pos < impl()->getBitCount()\n\t%i, %i", v13, v14) )
            __debugbreak();
        }
        v8 = 0x80000000 >> (v7 & 0x1F);
        v9 = (unsigned __int64)v7 >> 5;
        if ( (v8 & s_transientsCommonMP.assetsRequested.array[v9]) != 0 )
          goto LABEL_34;
        if ( v7 >= 0x4000u )
        {
          LODWORD(v14) = 0x4000;
          LODWORD(v13) = v7;
          if ( CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\qcommon\\bitarray.h", 257, ASSERT_TYPE_ASSERT, "( pos ) < ( impl()->getBitCount() )", "pos < impl()->getBitCount()\n\t%i, %i", v13, v14) )
            __debugbreak();
        }
        if ( (v8 & s_transientsCommonMP.assetsLoadSubmitted.array[v9]) != 0 )
        {
LABEL_34:
          if ( v7 >= 0x4000u )
          {
            LODWORD(v14) = 0x4000;
            LODWORD(v13) = v7;
            if ( CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\client_mp\\cl_transients_common_mp.cpp", 532, ASSERT_TYPE_ASSERT, "(unsigned)( assetIndex ) < (unsigned)( ( sizeof( *array_counter( s_transientsCommonMP.assetsReferenceCount ) ) + 0 ) )", "assetIndex doesn't index ARRAY_COUNT( s_transientsCommonMP.assetsReferenceCount )\n\t%i not in [0, %i)", v13, v14) )
              __debugbreak();
          }
          v11 = &s_transientsCommonMP.assetsReferenceCount[v7];
          if ( !*v11 )
          {
            LODWORD(v15) = 0;
            if ( CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\client_mp\\cl_transients_common_mp.cpp", 533, ASSERT_TYPE_ASSERT, "( s_transientsCommonMP.assetsReferenceCount[assetIndex] ) != ( 0 )", "%s != %s\n\t%i, %i", "s_transientsCommonMP.assetsReferenceCount[assetIndex]", "0", v15, 0i64) )
              __debugbreak();
          }
          if ( (*v11)-- == 1 )
            CL_TransientsCommonMP_MarkAssetUnloadRequested(v7);
        }
        else
        {
          AssetName = CL_TransientsMP_GetAssetName(v7);
          Com_PrintWarning(14, "WARNING: Failed to unload asset %u '%s' -- asset not in cache.\n", v7, AssetName);
        }
      }
      ++v3;
      --v6;
    }
    while ( v6 );
  }
}

/*
==============
CL_TransientsCommonMP_UnregisterTransientInfo
==============
*/
void CL_TransientsCommonMP_UnregisterTransientInfo(const TransientInfo *const transientInfo)
{
  if ( !transientInfo && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\client_mp\\cl_transients_common_mp.cpp", 1153, ASSERT_TYPE_ASSERT, "( ( transientInfo != nullptr ) )", "( transientInfo ) = %p", NULL) )
    __debugbreak();
  if ( s_transientsCommonMP.transientInfo != transientInfo && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\client_mp\\cl_transients_common_mp.cpp", 1154, ASSERT_TYPE_ASSERT, "( ( s_transientsCommonMP.transientInfo == transientInfo ) )", "( s_transientsCommonMP.transientInfo ) = %p", s_transientsCommonMP.transientInfo) )
    __debugbreak();
  s_transientsCommonMP.transientInfo = NULL;
}

/*
==============
CL_TransientsCommonMP_Update
==============
*/
void CL_TransientsCommonMP_Update()
{
  const dvar_t *v4; 
  unsigned int v5; 
  __int64 v6; 
  unsigned int v7; 
  unsigned int v8; 
  char v9; 
  unsigned __int16 FileIndexForAssetIndex; 
  const char *AssetName; 
  const dvar_t *v12; 
  int integer; 
  unsigned int v14; 
  int v15; 
  unsigned int v16; 
  __int64 v17; 
  unsigned int v22; 
  char v23; 
  unsigned __int16 v24; 
  const char *v25; 
  char *fmt; 
  __int64 fromServer; 
  __int64 duration; 
  unsigned int v39; 
  char dest[1024]; 

  if ( s_transientsCommonMP.transientInfo )
  {
    v4 = DVARBOOL_cl_transientCommon_debugDump;
    if ( !DVARBOOL_cl_transientCommon_debugDump && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\universal\\dvar.h", 692, ASSERT_TYPE_ASSERT, "(dvar)", "%s\n\tDvar %s accessed after deregistration", "dvar", "cl_transientCommon_debugDump") )
      __debugbreak();
    Dvar_CheckFrontendServerThread(v4);
    if ( v4->current.enabled )
    {
      Dvar_SetBool_Internal(DVARBOOL_cl_transientCommon_debugDump, 0);
      Com_Printf(14, "CL_TransientsCommonMP currently submitted requests:\n");
      v5 = s_transientsCommonMP.assetsLoadSubmitted.array[0];
      LODWORD(v6) = 0;
      v7 = v39;
      while ( 1 )
      {
        if ( v5 )
        {
LABEL_10:
          v8 = __lzcnt(v5);
          v7 = v8 + 32 * v6;
          if ( v8 >= 0x20 )
          {
            LODWORD(duration) = 32;
            LODWORD(fromServer) = v8;
            if ( CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\universal\\com_bitops.h", 104, ASSERT_TYPE_ASSERT, "(unsigned)( count ) < (unsigned)( 32 )", "count doesn't index 32\n\t%i not in [0, %i)", fromServer, duration) )
              __debugbreak();
          }
          if ( (v5 & (0x80000000 >> v8)) == 0 && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\qcommon\\bitarrayiterator.h", 76, ASSERT_TYPE_ASSERT, "(iter->bits & bit)", (const char *)&queryFormat, "iter->bits & bit") )
            __debugbreak();
          v5 &= ~(0x80000000 >> v8);
          v9 = 1;
        }
        else
        {
          while ( 1 )
          {
            v6 = (unsigned int)(v6 + 1);
            if ( (unsigned int)v6 >= 0x200 )
              break;
            v5 = s_transientsCommonMP.assetsLoadSubmitted.array[v6];
            if ( v5 )
              goto LABEL_10;
          }
          v9 = 0;
        }
        if ( !v9 )
          break;
        if ( v7 > 0xFFFF && CoreAssert_Handler("c:\\workspace\\iw8\\shared\\codware\\core\\core_assert.h", 385, ASSERT_TYPE_ASSERT, (const char *)&queryFormat.fmt + 3, "%s (SmallType) %s 0x%jx == (BigType) %s 0x%jx", "unsigned short __cdecl truncate_cast_impl<unsigned short,unsigned int>(unsigned int)", "unsigned", (unsigned __int16)v7, "unsigned", v7) )
          __debugbreak();
        FileIndexForAssetIndex = CL_TransientsMP_GetFileIndexForAssetIndex(v7);
        if ( (_WORD)v7 == 0xFFFF )
        {
          AssetName = "UNUSED_ASSET";
        }
        else
        {
          AssetName = CL_TransientsMP_GetAssetName(v7);
          if ( (unsigned __int16)v7 < 0x4000u )
            goto LABEL_28;
        }
        LODWORD(duration) = 0x4000;
        LODWORD(fromServer) = (unsigned __int16)v7;
        if ( CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\client_mp\\cl_transients_common_mp.cpp", 363, ASSERT_TYPE_ASSERT, "(unsigned)( assetIndex ) < (unsigned)( ( sizeof( *array_counter( s_transientsCommonMP.assetsPriorities ) ) + 0 ) )", "assetIndex doesn't index s_transientsCommonMP.assetsPriorities\n\t%i not in [0, %i)", fromServer, duration) )
          __debugbreak();
LABEL_28:
        LODWORD(duration) = FileIndexForAssetIndex;
        LODWORD(fromServer) = (unsigned __int16)v7;
        LODWORD(fmt) = CL_TransientsCommonMP_GetTransientPriorityForAssetStreamingPriority(s_transientsCommonMP.assetsPriorities[(unsigned __int16)v7]);
        Com_sprintf_truncate(dest, 0x400ui64, "%s, prio=%u, asset=%u, file=%u", AssetName, fmt, fromServer, duration);
        Com_Printf(14, "\t%s\n", dest);
      }
    }
    v12 = DCONST_DVARINT_cl_transientCommon_debugListLoadingAssets;
    if ( !DCONST_DVARINT_cl_transientCommon_debugListLoadingAssets && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\universal\\dvar.h", 699, ASSERT_TYPE_ASSERT, "(dvar)", "%s\n\tDvar %s accessed after deregistration", "dvar", "cl_transientCommon_debugListLoadingAssets") )
      __debugbreak();
    Dvar_CheckFrontendServerThread(v12);
    integer = v12->current.integer;
    if ( integer )
    {
      v14 = s_transientsCommonMP.assetsLoadSubmitted.array[0];
      v15 = 0;
      v16 = v39;
      LODWORD(v17) = 0;
      __asm
      {
        vmovaps [rsp+4D8h+var_38], xmm6
        vmovaps [rsp+4D8h+var_48], xmm7
        vmovss  xmm7, cs:__real@41a00000
        vmovaps [rsp+4D8h+var_58], xmm8
        vmovss  xmm8, cs:__real@3f99999a
        vmovaps [rsp+4D8h+var_68], xmm9
        vmovss  xmm9, cs:__real@41800000
        vmovaps xmm6, xmm7
      }
      while ( 1 )
      {
        do
        {
          if ( v14 )
          {
LABEL_37:
            v22 = __lzcnt(v14);
            v16 = v22 + 32 * v17;
            if ( v22 >= 0x20 )
            {
              LODWORD(duration) = 32;
              LODWORD(fromServer) = v22;
              if ( CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\universal\\com_bitops.h", 104, ASSERT_TYPE_ASSERT, "(unsigned)( count ) < (unsigned)( 32 )", "count doesn't index 32\n\t%i not in [0, %i)", fromServer, duration) )
                __debugbreak();
            }
            if ( (v14 & (0x80000000 >> v22)) == 0 && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\qcommon\\bitarrayiterator.h", 76, ASSERT_TYPE_ASSERT, "(iter->bits & bit)", (const char *)&queryFormat, "iter->bits & bit") )
              __debugbreak();
            v23 = 1;
            v14 &= ~(0x80000000 >> v22);
          }
          else
          {
            while ( 1 )
            {
              v17 = (unsigned int)(v17 + 1);
              if ( (unsigned int)v17 >= 0x200 )
                break;
              v14 = s_transientsCommonMP.assetsLoadSubmitted.array[v17];
              if ( v14 )
                goto LABEL_37;
            }
            v23 = 0;
          }
          if ( !v23 )
          {
LABEL_59:
            __asm
            {
              vmovaps xmm8, [rsp+4D8h+var_58]
              vmovaps xmm7, [rsp+4D8h+var_48]
              vmovaps xmm6, [rsp+4D8h+var_38]
              vmovaps xmm9, [rsp+4D8h+var_68]
            }
            return;
          }
          if ( v16 > 0xFFFF && CoreAssert_Handler("c:\\workspace\\iw8\\shared\\codware\\core\\core_assert.h", 385, ASSERT_TYPE_ASSERT, (const char *)&queryFormat.fmt + 3, "%s (SmallType) %s 0x%jx == (BigType) %s 0x%jx", "unsigned short __cdecl truncate_cast_impl<unsigned short,unsigned int>(unsigned int)", "unsigned", (unsigned __int16)v16, "unsigned", v16) )
            __debugbreak();
          if ( v15 >= integer )
          {
            __asm
            {
              vmovaps xmm3, xmm8; scale
              vmovaps xmm1, xmm6; y
              vmovaps xmm0, xmm7; x
            }
            CL_AddDebugString2D(*(float *)&_XMM0, *(float *)&_XMM1, &colorWhite, *(float *)&_XMM3, "...", 0, 0);
            goto LABEL_59;
          }
        }
        while ( CL_TransientsMP_IsXModelAssetIndexLoaded(v16) );
        v24 = CL_TransientsMP_GetFileIndexForAssetIndex(v16);
        if ( (_WORD)v16 == 0xFFFF )
        {
          v25 = "UNUSED_ASSET";
        }
        else
        {
          v25 = CL_TransientsMP_GetAssetName(v16);
          if ( (unsigned __int16)v16 < 0x4000u )
            goto LABEL_57;
        }
        LODWORD(duration) = 0x4000;
        LODWORD(fromServer) = (unsigned __int16)v16;
        if ( CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\client_mp\\cl_transients_common_mp.cpp", 363, ASSERT_TYPE_ASSERT, "(unsigned)( assetIndex ) < (unsigned)( ( sizeof( *array_counter( s_transientsCommonMP.assetsPriorities ) ) + 0 ) )", "assetIndex doesn't index s_transientsCommonMP.assetsPriorities\n\t%i not in [0, %i)", fromServer, duration) )
          __debugbreak();
LABEL_57:
        LODWORD(duration) = v24;
        LODWORD(fromServer) = (unsigned __int16)v16;
        LODWORD(fmt) = CL_TransientsCommonMP_GetTransientPriorityForAssetStreamingPriority(s_transientsCommonMP.assetsPriorities[(unsigned __int16)v16]);
        Com_sprintf_truncate(dest, 0x400ui64, "%s, prio=%u, asset=%u, file=%u", v25, fmt, fromServer, duration);
        __asm
        {
          vmovaps xmm3, xmm8; scale
          vmovaps xmm1, xmm6; y
          vmovaps xmm0, xmm7; x
        }
        CL_AddDebugString2D(*(float *)&_XMM0, *(float *)&_XMM1, &colorWhite, *(float *)&_XMM3, dest, 0, 0);
        ++v15;
        __asm { vaddss  xmm6, xmm6, xmm9 }
      }
    }
  }
}

