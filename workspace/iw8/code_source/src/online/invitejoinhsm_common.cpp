/*
==============
InviteJoinHSM::SetAcceptingInviteInitialized
==============
*/

void __fastcall InviteJoinHSM::SetAcceptingInviteInitialized(InviteJoinHSM *this)
{
  ?SetAcceptingInviteInitialized@InviteJoinHSM@@QEAAXXZ(this);
}

/*
==============
InviteJoinHSM::InviteAcceptFenceUpdate
==============
*/

void __fastcall InviteJoinHSM::InviteAcceptFenceUpdate(InviteJoinHSM *this)
{
  ?InviteAcceptFenceUpdate@InviteJoinHSM@@UEAAXXZ(this);
}

/*
==============
InviteJoinHSM::WaitForDemonwareAuthenticationUpdate
==============
*/

void __fastcall InviteJoinHSM::WaitForDemonwareAuthenticationUpdate(InviteJoinHSM *this)
{
  ?WaitForDemonwareAuthenticationUpdate@InviteJoinHSM@@UEAAXXZ(this);
}

/*
==============
InviteJoinHSM::CheckIfAddressMatchesHostAddressForJoin
==============
*/

bool __fastcall InviteJoinHSM::CheckIfAddressMatchesHostAddressForJoin(InviteJoinHSM *this, const netadr_t *from)
{
  return ?CheckIfAddressMatchesHostAddressForJoin@InviteJoinHSM@@QEAA_NPEBUnetadr_t@@@Z(this, from);
}

/*
==============
InviteJoinHSM::IsHSMHandlingInvitation
==============
*/

bool __fastcall InviteJoinHSM::IsHSMHandlingInvitation(InviteJoinHSM *this)
{
  return ?IsHSMHandlingInvitation@InviteJoinHSM@@QEAA_NXZ(this);
}

/*
==============
InviteJoinHSM::HandleSessionSearchCompleteLobbyFound
==============
*/

void __fastcall InviteJoinHSM::HandleSessionSearchCompleteLobbyFound(InviteJoinHSM *this, const XSESSION_INFO *hostInfo, const unsigned __int64 lobbyId)
{
  ?HandleSessionSearchCompleteLobbyFound@InviteJoinHSM@@QEAAXAEBVXSESSION_INFO@@_K@Z(this, hostInfo, lobbyId);
}

/*
==============
InviteJoinHSM::IsWaitingForConfirmationDialogCurrently
==============
*/

bool __fastcall InviteJoinHSM::IsWaitingForConfirmationDialogCurrently(InviteJoinHSM *this)
{
  return ?IsWaitingForConfirmationDialogCurrently@InviteJoinHSM@@QEAA_NXZ(this);
}

/*
==============
InviteJoinHSM::StartAcceptFriendJoin
==============
*/

void __fastcall InviteJoinHSM::StartAcceptFriendJoin(InviteJoinHSM *this)
{
  ?StartAcceptFriendJoin@InviteJoinHSM@@UEAAXXZ(this);
}

/*
==============
InviteJoinHSM::HandleHSMCallback_ShowMissingInvitablePrivilegePopup
==============
*/

void __fastcall InviteJoinHSM::HandleHSMCallback_ShowMissingInvitablePrivilegePopup(InviteJoinHSM *this)
{
  ?HandleHSMCallback_ShowMissingInvitablePrivilegePopup@InviteJoinHSM@@UEAAXXZ(this);
}

/*
==============
InviteJoinHSM::Handle_CancelInvitationAfterAccountRegistrationCancel
==============
*/

void __fastcall InviteJoinHSM::Handle_CancelInvitationAfterAccountRegistrationCancel(InviteJoinHSM *this)
{
  ?Handle_CancelInvitationAfterAccountRegistrationCancel@InviteJoinHSM@@QEAAXXZ(this);
}

/*
==============
InviteJoinHSM::StartJoiningUser
==============
*/

bool __fastcall InviteJoinHSM::StartJoiningUser(InviteJoinHSM *this, const int controllerIndex, XUID xuid, unsigned __int64 platformId)
{
  return ?StartJoiningUser@InviteJoinHSM@@QEAA_NHUXUID@@_K@Z(this, controllerIndex, xuid, platformId);
}

/*
==============
InviteJoinHSM::HandlePermissionsCheckTimeout
==============
*/

void __fastcall InviteJoinHSM::HandlePermissionsCheckTimeout(InviteJoinHSM *this)
{
  ?HandlePermissionsCheckTimeout@InviteJoinHSM@@UEAAXXZ(this);
}

/*
==============
InviteJoinHSM::HandleAlreadyInThePartySessionThatIsBeingJoinedOnError
==============
*/

void __fastcall InviteJoinHSM::HandleAlreadyInThePartySessionThatIsBeingJoinedOnError(InviteJoinHSM *this)
{
  ?HandleAlreadyInThePartySessionThatIsBeingJoinedOnError@InviteJoinHSM@@UEAAXXZ(this);
}

/*
==============
InviteJoinHSM::HandleSessionSearchCompleteAlreadyInLobby
==============
*/

void __fastcall InviteJoinHSM::HandleSessionSearchCompleteAlreadyInLobby(InviteJoinHSM *this)
{
  ?HandleSessionSearchCompleteAlreadyInLobby@InviteJoinHSM@@QEAAXXZ(this);
}

/*
==============
InviteJoinHSM::InviteePermissionsCheckUpdate
==============
*/

void __fastcall InviteJoinHSM::InviteePermissionsCheckUpdate(InviteJoinHSM *this)
{
  ?InviteePermissionsCheckUpdate@InviteJoinHSM@@UEAAXXZ(this);
}

/*
==============
InviteJoinHSM::VerifyEULAAccepted
==============
*/

void __fastcall InviteJoinHSM::VerifyEULAAccepted(InviteJoinHSM *this)
{
  ?VerifyEULAAccepted@InviteJoinHSM@@UEAAXXZ(this);
}

/*
==============
InviteJoinHSM::HandleCantJoinOnExistingSessionError
==============
*/

void __fastcall InviteJoinHSM::HandleCantJoinOnExistingSessionError(InviteJoinHSM *this)
{
  ?HandleCantJoinOnExistingSessionError@InviteJoinHSM@@UEAAXXZ(this);
}

/*
==============
InviteJoinHSM::CleanupForInviteFailures
==============
*/

void __fastcall InviteJoinHSM::CleanupForInviteFailures(InviteJoinHSM *this)
{
  ?CleanupForInviteFailures@InviteJoinHSM@@UEAAXXZ(this);
}

/*
==============
InviteJoinHSM::InviteJoinHSM
==============
*/

void __fastcall InviteJoinHSM::InviteJoinHSM(InviteJoinHSM *this)
{
  ??0InviteJoinHSM@@QEAA@XZ(this);
}

/*
==============
InviteJoinHSM::StartCrossLaunchJoin
==============
*/

void __fastcall InviteJoinHSM::StartCrossLaunchJoin(InviteJoinHSM *this, int controllerIndex, const OnlineJoinInfo *joinInfo)
{
  ?StartCrossLaunchJoin@InviteJoinHSM@@QEAAXHPEBUOnlineJoinInfo@@@Z(this, controllerIndex, joinInfo);
}

/*
==============
InviteJoinHSM::HandleMatchmakerSessionSearchFailedDueToBackoff
==============
*/

void __fastcall InviteJoinHSM::HandleMatchmakerSessionSearchFailedDueToBackoff(InviteJoinHSM *this)
{
  ?HandleMatchmakerSessionSearchFailedDueToBackoff@InviteJoinHSM@@UEAAXXZ(this);
}

/*
==============
InviteJoinHSM::HandleSessionSearchCompleteContinueWithCurrentJoinInfo
==============
*/

void __fastcall InviteJoinHSM::HandleSessionSearchCompleteContinueWithCurrentJoinInfo(InviteJoinHSM *this)
{
  ?HandleSessionSearchCompleteContinueWithCurrentJoinInfo@InviteJoinHSM@@QEAAXXZ(this);
}

/*
==============
InviteJoinHSM::StartAtomicPartyJoin
==============
*/

void __fastcall InviteJoinHSM::StartAtomicPartyJoin(InviteJoinHSM *this)
{
  ?StartAtomicPartyJoin@InviteJoinHSM@@UEAAXXZ(this);
}

/*
==============
InviteJoinHSM::SendJoinInfoRequestSuccess
==============
*/

void __fastcall InviteJoinHSM::SendJoinInfoRequestSuccess(InviteJoinHSM *this)
{
  ?SendJoinInfoRequestSuccess@InviteJoinHSM@@QEAAXXZ(this);
}

/*
==============
InviteJoinHSM::StartMainMenuFence
==============
*/

void __fastcall InviteJoinHSM::StartMainMenuFence(InviteJoinHSM *this)
{
  ?StartMainMenuFence@InviteJoinHSM@@UEAAXXZ(this);
}

/*
==============
InviteJoinHSM::HandleEulaDeclined
==============
*/

void __fastcall InviteJoinHSM::HandleEulaDeclined(InviteJoinHSM *this)
{
  ?HandleEulaDeclined@InviteJoinHSM@@UEAAXXZ(this);
}

/*
==============
InviteJoinHSM::CopyCurrentStateFromHSMToMemberVariable
==============
*/

void __fastcall InviteJoinHSM::CopyCurrentStateFromHSMToMemberVariable(InviteJoinHSM *this)
{
  ?CopyCurrentStateFromHSMToMemberVariable@InviteJoinHSM@@QEAAXXZ(this);
}

/*
==============
InviteJoinHSM::RegisterCallbackFromExternalSystem
==============
*/

void __fastcall InviteJoinHSM::RegisterCallbackFromExternalSystem(InviteJoinHSM *this, void (__fastcall *callback)(const int, const InviteJoinHSMResult, const char *))
{
  ?RegisterCallbackFromExternalSystem@InviteJoinHSM@@QEAAXP6AXHW4InviteJoinHSMResult@@PEBD@Z@Z(this, callback);
}

/*
==============
InviteJoinHSM::ShouldShowJoiningGameSessionPopup
==============
*/

bool __fastcall InviteJoinHSM::ShouldShowJoiningGameSessionPopup(InviteJoinHSM *this)
{
  return ?ShouldShowJoiningGameSessionPopup@InviteJoinHSM@@QEAA_NXZ(this);
}

/*
==============
InviteJoinHSM::ResetPartyAtomicJoinForRetry
==============
*/

void __fastcall InviteJoinHSM::ResetPartyAtomicJoinForRetry(InviteJoinHSM *this)
{
  ?ResetPartyAtomicJoinForRetry@InviteJoinHSM@@UEAAXXZ(this);
}

/*
==============
InviteJoinHSM::UserIdResolved
==============
*/

void __fastcall InviteJoinHSM::UserIdResolved(InviteJoinHSM *this, GenericTask *task, eTaskManagerTaskState taskState)
{
  ?UserIdResolved@InviteJoinHSM@@QEAAXPEAVGenericTask@@W4eTaskManagerTaskState@@@Z(this, task, taskState);
}

/*
==============
InviteJoinHSM::SetMatchmakerStartBackOffRequested
==============
*/

void __fastcall InviteJoinHSM::SetMatchmakerStartBackOffRequested(InviteJoinHSM *this)
{
  ?SetMatchmakerStartBackOffRequested@InviteJoinHSM@@QEAAXXZ(this);
}

/*
==============
InviteJoinHSM::ResolveInviterUniversalId
==============
*/

void __fastcall InviteJoinHSM::ResolveInviterUniversalId(InviteJoinHSM *this)
{
  ?ResolveInviterUniversalId@InviteJoinHSM@@UEAAXXZ(this);
}

/*
==============
InviteJoinHSM::HandleHSMCallback_WaitForUIReady
==============
*/

void __fastcall InviteJoinHSM::HandleHSMCallback_WaitForUIReady(InviteJoinHSM *this)
{
  ?HandleHSMCallback_WaitForUIReady@InviteJoinHSM@@UEAAXXZ(this);
}

/*
==============
InviteJoinHSM::HandlePartyJoinRequestDenied
==============
*/

void __fastcall InviteJoinHSM::HandlePartyJoinRequestDenied(InviteJoinHSM *this)
{
  ?HandlePartyJoinRequestDenied@InviteJoinHSM@@QEAAXXZ(this);
}

/*
==============
InviteJoinHSM::CleanupInvitation
==============
*/

void __fastcall InviteJoinHSM::CleanupInvitation(InviteJoinHSM *this)
{
  ?CleanupInvitation@InviteJoinHSM@@UEAAXXZ(this);
}

/*
==============
InviteJoinHSM::HandleAlreadyInTheGameServerSessionThatIsBeingJoinedOnError
==============
*/

void __fastcall InviteJoinHSM::HandleAlreadyInTheGameServerSessionThatIsBeingJoinedOnError(InviteJoinHSM *this)
{
  ?HandleAlreadyInTheGameServerSessionThatIsBeingJoinedOnError@InviteJoinHSM@@UEAAXXZ(this);
}

/*
==============
InviteJoinHSM::StoreLastEventTriggered
==============
*/

void __fastcall InviteJoinHSM::StoreLastEventTriggered(InviteJoinHSM *this, InvitationHSM_base::eHSMEvents event)
{
  ?StoreLastEventTriggered@InviteJoinHSM@@QEAAXW4eHSMEvents@InvitationHSM_base@@@Z(this, event);
}

/*
==============
InviteJoinHSM::IsAcceptingInviteInitialized
==============
*/

bool __fastcall InviteJoinHSM::IsAcceptingInviteInitialized(InviteJoinHSM *this)
{
  return ?IsAcceptingInviteInitialized@InviteJoinHSM@@QEAA_NXZ(this);
}

/*
==============
InviteJoinHSM::SetUIReadyToProcessInviteJoins
==============
*/

void __fastcall InviteJoinHSM::SetUIReadyToProcessInviteJoins(InviteJoinHSM *this, bool value)
{
  ?SetUIReadyToProcessInviteJoins@InviteJoinHSM@@QEAAX_N@Z(this, value);
}

/*
==============
InviteJoinHSM::HandleSubscriptionRequiredError
==============
*/

void __fastcall InviteJoinHSM::HandleSubscriptionRequiredError(InviteJoinHSM *this)
{
  ?HandleSubscriptionRequiredError@InviteJoinHSM@@UEAAXXZ(this);
}

/*
==============
InviteJoinHSM::Handle_UserCancelInvitation
==============
*/

void __fastcall InviteJoinHSM::Handle_UserCancelInvitation(InviteJoinHSM *this)
{
  ?Handle_UserCancelInvitation@InviteJoinHSM@@QEAAXXZ(this);
}

/*
==============
InviteJoinHSM::OnDWInstantMessageFromUser
==============
*/

void __fastcall InviteJoinHSM::OnDWInstantMessageFromUser(InviteJoinHSM *this, const int controllerIndex, const XUID senderXuid, const char *message, const int msgSize)
{
  ?OnDWInstantMessageFromUser@InviteJoinHSM@@QEAAXHUXUID@@PEBDH@Z(this, controllerIndex, senderXuid, message, msgSize);
}

/*
==============
InviteJoinHSM::HandleHSMCallback_CheckIfNextApplicationSpecificJoinabilityCheckPending
==============
*/

void __fastcall InviteJoinHSM::HandleHSMCallback_CheckIfNextApplicationSpecificJoinabilityCheckPending(InviteJoinHSM *this)
{
  ?HandleHSMCallback_CheckIfNextApplicationSpecificJoinabilityCheckPending@InviteJoinHSM@@UEAAXXZ(this);
}

/*
==============
InviteJoinHSM::HandleTURequiredError
==============
*/

void __fastcall InviteJoinHSM::HandleTURequiredError(InviteJoinHSM *this)
{
  ?HandleTURequiredError@InviteJoinHSM@@UEAAXXZ(this);
}

/*
==============
InviteJoinHSM::HandleResolveInviterUniversalIdFailed
==============
*/

void __fastcall InviteJoinHSM::HandleResolveInviterUniversalIdFailed(InviteJoinHSM *this)
{
  ?HandleResolveInviterUniversalIdFailed@InviteJoinHSM@@UEAAXXZ(this);
}

/*
==============
InviteJoinHSM::SetIsInviteOnline
==============
*/

void __fastcall InviteJoinHSM::SetIsInviteOnline(InviteJoinHSM *this, bool isInviteOnline)
{
  ?SetIsInviteOnline@InviteJoinHSM@@QEAAX_N@Z(this, isInviteOnline);
}

/*
==============
InviteJoinHSM::StartMatchMakerSessionSearch
==============
*/

void __fastcall InviteJoinHSM::StartMatchMakerSessionSearch(InviteJoinHSM *this)
{
  ?StartMatchMakerSessionSearch@InviteJoinHSM@@UEAAXXZ(this);
}

/*
==============
InviteJoinHSM::CopyLocalizedErrorCodeFromErrorManager
==============
*/

void __fastcall InviteJoinHSM::CopyLocalizedErrorCodeFromErrorManager(InviteJoinHSM *this)
{
  ?CopyLocalizedErrorCodeFromErrorManager@InviteJoinHSM@@QEAAXXZ(this);
}

/*
==============
InviteJoinHSM::RegisterApplicationSpecificPreJoinChecks
==============
*/

void __fastcall InviteJoinHSM::RegisterApplicationSpecificPreJoinChecks(InviteJoinHSM *this, InviteHSMApplicationSpecificPreJoinCheckType type, void (__fastcall *startCallback)(InviteHSMApplicationSpecificPreJoinCheckData *__struct_ptr), InviteHSMApplicationSpecificPreJoinCheckReturnValue (__fastcall *updateCallback)(InviteHSMApplicationSpecificPreJoinCheckData *__struct_ptr))
{
  ?RegisterApplicationSpecificPreJoinChecks@InviteJoinHSM@@QEAAXW4InviteHSMApplicationSpecificPreJoinCheckType@@P6AXUInviteHSMApplicationSpecificPreJoinCheckData@@@ZP6A?AW4InviteHSMApplicationSpecificPreJoinCheckReturnValue@@1@Z@Z(this, type, startCallback, updateCallback);
}

/*
==============
InviteJoinHSM::HandleSessionSearchRefused
==============
*/

void __fastcall InviteJoinHSM::HandleSessionSearchRefused(InviteJoinHSM *this, const char *errorMessage)
{
  ?HandleSessionSearchRefused@InviteJoinHSM@@QEAAXPEBD@Z(this, errorMessage);
}

/*
==============
InviteJoinHSM::HandleInvitationCancelledByUser
==============
*/

void __fastcall InviteJoinHSM::HandleInvitationCancelledByUser(InviteJoinHSM *this)
{
  ?HandleInvitationCancelledByUser@InviteJoinHSM@@UEAAXXZ(this);
}

/*
==============
InviteJoinHSM::HSM_PrintDebugInfo
==============
*/

void __fastcall InviteJoinHSM::HSM_PrintDebugInfo(InviteJoinHSM *this, const char *pDebugString)
{
  ?HSM_PrintDebugInfo@InviteJoinHSM@@UEAAXPEBD@Z(this, pDebugString);
}

/*
==============
InviteJoinHSM::HandleHSMCallback_GetHostInfoForLobbyFromMatchmakerTimedout
==============
*/

void __fastcall InviteJoinHSM::HandleHSMCallback_GetHostInfoForLobbyFromMatchmakerTimedout(InviteJoinHSM *this)
{
  ?HandleHSMCallback_GetHostInfoForLobbyFromMatchmakerTimedout@InviteJoinHSM@@UEAAXXZ(this);
}

/*
==============
InviteJoinHSM::JoinFromOnlineInvitation
==============
*/

bool __fastcall InviteJoinHSM::JoinFromOnlineInvitation(InviteJoinHSM *this, const int controllerIndex, const Online_Invitation *inviteData)
{
  return ?JoinFromOnlineInvitation@InviteJoinHSM@@QEAA_NHPEBUOnline_Invitation@@@Z(this, controllerIndex, inviteData);
}

/*
==============
InviteJoinHSM::SendJoinInfoRequestFailed
==============
*/

void __fastcall InviteJoinHSM::SendJoinInfoRequestFailed(InviteJoinHSM *this)
{
  ?SendJoinInfoRequestFailed@InviteJoinHSM@@QEAAXXZ(this);
}

/*
==============
InviteJoinHSM::GetHostInfoForLobbyFromMatchmakerDocParseFailed
==============
*/

void __fastcall InviteJoinHSM::GetHostInfoForLobbyFromMatchmakerDocParseFailed(InviteJoinHSM *this)
{
  ?GetHostInfoForLobbyFromMatchmakerDocParseFailed@InviteJoinHSM@@QEAAXXZ(this);
}

/*
==============
InviteJoinHSM::HandleHSMCallback_AccountRegistrationCancelled
==============
*/

void __fastcall InviteJoinHSM::HandleHSMCallback_AccountRegistrationCancelled(InviteJoinHSM *this)
{
  ?HandleHSMCallback_AccountRegistrationCancelled@InviteJoinHSM@@UEAAXXZ(this);
}

/*
==============
InviteJoinHSM::OnEnterStartGetSenderXUID
==============
*/

void __fastcall InviteJoinHSM::OnEnterStartGetSenderXUID(InviteJoinHSM *this)
{
  ?OnEnterStartGetSenderXUID@InviteJoinHSM@@UEAAXXZ(this);
}

/*
==============
InviteJoinHSM::Handle_CancelInvitationAfterEulaDecline
==============
*/

void __fastcall InviteJoinHSM::Handle_CancelInvitationAfterEulaDecline(InviteJoinHSM *this)
{
  ?Handle_CancelInvitationAfterEulaDecline@InviteJoinHSM@@QEAAXXZ(this);
}

/*
==============
InviteJoinHSM::HandleAtomicJoinFenceTimeout
==============
*/

void __fastcall InviteJoinHSM::HandleAtomicJoinFenceTimeout(InviteJoinHSM *this)
{
  ?HandleAtomicJoinFenceTimeout@InviteJoinHSM@@UEAAXXZ(this);
}

/*
==============
InviteJoinHSM::InviteJoinPreRequisitesCheckUpdate
==============
*/

void __fastcall InviteJoinHSM::InviteJoinPreRequisitesCheckUpdate(InviteJoinHSM *this)
{
  ?InviteJoinPreRequisitesCheckUpdate@InviteJoinHSM@@UEAAXXZ(this);
}

/*
==============
InviteJoinHSM::HandlePartyJoinAttemptAborted
==============
*/

void __fastcall InviteJoinHSM::HandlePartyJoinAttemptAborted(InviteJoinHSM *this)
{
  ?HandlePartyJoinAttemptAborted@InviteJoinHSM@@QEAAXXZ(this);
}

/*
==============
InviteJoinHSM::InviteHSMUpdate
==============
*/

void __fastcall InviteJoinHSM::InviteHSMUpdate(InviteJoinHSM *this, int dt)
{
  ?InviteHSMUpdate@InviteJoinHSM@@QEAAXH@Z(this, dt);
}

/*
==============
InviteJoinHSM::HaveJoinInfo
==============
*/

bool __fastcall InviteJoinHSM::HaveJoinInfo(InviteJoinHSM *this)
{
  return ?HaveJoinInfo@InviteJoinHSM@@QEAA_NXZ(this);
}

/*
==============
InviteJoinHSM::Initialize
==============
*/

void __fastcall InviteJoinHSM::Initialize(InviteJoinHSM *this)
{
  ?Initialize@InviteJoinHSM@@QEAAXXZ(this);
}

/*
==============
InviteJoinHSM::HandleHSMCallback_GettingSenderXuidTimedout
==============
*/

void __fastcall InviteJoinHSM::HandleHSMCallback_GettingSenderXuidTimedout(InviteJoinHSM *this)
{
  ?HandleHSMCallback_GettingSenderXuidTimedout@InviteJoinHSM@@UEAAXXZ(this);
}

/*
==============
InviteJoinHSM::HandleProcessingTimeout
==============
*/

void __fastcall InviteJoinHSM::HandleProcessingTimeout(InviteJoinHSM *this)
{
  ?HandleProcessingTimeout@InviteJoinHSM@@UEAAXXZ(this);
}

/*
==============
InviteJoinHSM::ResetExternalCallbacks
==============
*/

void __fastcall InviteJoinHSM::ResetExternalCallbacks(InviteJoinHSM *this)
{
  ?ResetExternalCallbacks@InviteJoinHSM@@AEAAXXZ(this);
}

/*
==============
InviteJoinHSM::HandleGettingSenderXUIDFailure
==============
*/

void __fastcall InviteJoinHSM::HandleGettingSenderXUIDFailure(InviteJoinHSM *this)
{
  ?HandleGettingSenderXUIDFailure@InviteJoinHSM@@QEAAXXZ(this);
}

/*
==============
InviteJoinHSM::HandleHSMCallback_StartGatheringJoinInfoFromUser
==============
*/

void __fastcall InviteJoinHSM::HandleHSMCallback_StartGatheringJoinInfoFromUser(InviteJoinHSM *this)
{
  ?HandleHSMCallback_StartGatheringJoinInfoFromUser@InviteJoinHSM@@UEAAXXZ(this);
}

/*
==============
InviteJoinHSM::HandleResolveInviterUniversalIdTimeout
==============
*/

void __fastcall InviteJoinHSM::HandleResolveInviterUniversalIdTimeout(InviteJoinHSM *this)
{
  ?HandleResolveInviterUniversalIdTimeout@InviteJoinHSM@@UEAAXXZ(this);
}

/*
==============
InviteJoinHSM::HandleHSMCallback_InvitePermissionsCheckTimeout
==============
*/

void __fastcall InviteJoinHSM::HandleHSMCallback_InvitePermissionsCheckTimeout(InviteJoinHSM *this)
{
  ?HandleHSMCallback_InvitePermissionsCheckTimeout@InviteJoinHSM@@UEAAXXZ(this);
}

/*
==============
InviteJoinHSM::HandleHSMCallback_WaitingForDemonwareTimedout
==============
*/

void __fastcall InviteJoinHSM::HandleHSMCallback_WaitingForDemonwareTimedout(InviteJoinHSM *this)
{
  ?HandleHSMCallback_WaitingForDemonwareTimedout@InviteJoinHSM@@UEAAXXZ(this);
}

/*
==============
InviteJoinHSM::HandleHSMCallback_InviteWaitingForAccountRegistration
==============
*/

void __fastcall InviteJoinHSM::HandleHSMCallback_InviteWaitingForAccountRegistration(InviteJoinHSM *this)
{
  ?HandleHSMCallback_InviteWaitingForAccountRegistration@InviteJoinHSM@@UEAAXXZ(this);
}

/*
==============
InviteJoinHSM::IsInSessionSearchState
==============
*/

bool __fastcall InviteJoinHSM::IsInSessionSearchState(InviteJoinHSM *this)
{
  return ?IsInSessionSearchState@InviteJoinHSM@@QEAA_NXZ(this);
}

/*
==============
InviteJoinHSM::HandleMPPermissionRequiredError
==============
*/

void __fastcall InviteJoinHSM::HandleMPPermissionRequiredError(InviteJoinHSM *this)
{
  ?HandleMPPermissionRequiredError@InviteJoinHSM@@UEAAXXZ(this);
}

/*
==============
InviteJoinHSM::~InviteJoinHSM
==============
*/

void __fastcall InviteJoinHSM::~InviteJoinHSM(InviteJoinHSM *this)
{
  ??1InviteJoinHSM@@UEAA@XZ(this);
}

/*
==============
InviteJoinHSM::ShouldShowLeavePartyConfirmationWarningPopup
==============
*/

bool __fastcall InviteJoinHSM::ShouldShowLeavePartyConfirmationWarningPopup(InviteJoinHSM *this)
{
  return ?ShouldShowLeavePartyConfirmationWarningPopup@InviteJoinHSM@@IEAA_NXZ(this);
}

/*
==============
InviteJoinHSM::HandleInvalidPlatformSessionInfoError
==============
*/

void __fastcall InviteJoinHSM::HandleInvalidPlatformSessionInfoError(InviteJoinHSM *this)
{
  ?HandleInvalidPlatformSessionInfoError@InviteJoinHSM@@UEAAXXZ(this);
}

/*
==============
InviteJoinHSM::VerifyJoinability
==============
*/

void __fastcall InviteJoinHSM::VerifyJoinability(InviteJoinHSM *this)
{
  ?VerifyJoinability@InviteJoinHSM@@UEAAXXZ(this);
}

/*
==============
InviteJoinHSM::ResetDemonwareLogonRetry
==============
*/

void __fastcall InviteJoinHSM::ResetDemonwareLogonRetry(InviteJoinHSM *this)
{
  ?ResetDemonwareLogonRetry@InviteJoinHSM@@UEAAXXZ(this);
}

/*
==============
InviteJoinHSM::GetHostInfoForLobbyFromMatchmakerComplete
==============
*/

void __fastcall InviteJoinHSM::GetHostInfoForLobbyFromMatchmakerComplete(InviteJoinHSM *this, const XSESSION_INFO *hostInfo, const unsigned __int64 lobbyId)
{
  ?GetHostInfoForLobbyFromMatchmakerComplete@InviteJoinHSM@@QEAAXAEBVXSESSION_INFO@@_K@Z(this, hostInfo, lobbyId);
}

/*
==============
InviteJoinHSM::StartJoinAccept
==============
*/

void __fastcall InviteJoinHSM::StartJoinAccept(InviteJoinHSM *this)
{
  ?StartJoinAccept@InviteJoinHSM@@EEAAXXZ(this);
}

/*
==============
InviteJoinHSM::IsUserBeingJoinedOnIsAlreadyInParty
==============
*/

bool __fastcall InviteJoinHSM::IsUserBeingJoinedOnIsAlreadyInParty(InviteJoinHSM *this)
{
  return ?IsUserBeingJoinedOnIsAlreadyInParty@InviteJoinHSM@@QEAA_NXZ(this);
}

/*
==============
InviteJoinHSM::HandlePartyJoinStart
==============
*/

void __fastcall InviteJoinHSM::HandlePartyJoinStart(InviteJoinHSM *this)
{
  ?HandlePartyJoinStart@InviteJoinHSM@@QEAAXXZ(this);
}

/*
==============
InviteJoinHSM::HandleComError
==============
*/

void __fastcall InviteJoinHSM::HandleComError(InviteJoinHSM *this)
{
  ?HandleComError@InviteJoinHSM@@QEAAXXZ(this);
}

/*
==============
InviteJoinHSM::HandleAlreadyInThePartyThatIsBeingJoinedOnError
==============
*/

void __fastcall InviteJoinHSM::HandleAlreadyInThePartyThatIsBeingJoinedOnError(InviteJoinHSM *this)
{
  ?HandleAlreadyInThePartyThatIsBeingJoinedOnError@InviteJoinHSM@@QEAAXXZ(this);
}

/*
==============
InviteJoinHSM::HandlePartyJoinNotApprovedByMatchMakerError
==============
*/

void __fastcall InviteJoinHSM::HandlePartyJoinNotApprovedByMatchMakerError(InviteJoinHSM *this, PartyJoinInfo *partyJoinInfo)
{
  ?HandlePartyJoinNotApprovedByMatchMakerError@InviteJoinHSM@@QEAAXPEAUPartyJoinInfo@@@Z(this, partyJoinInfo);
}

/*
==============
InviteJoinHSM::HandleInviteDialogAgainError
==============
*/

void __fastcall InviteJoinHSM::HandleInviteDialogAgainError(InviteJoinHSM *this)
{
  ?HandleInviteDialogAgainError@InviteJoinHSM@@UEAAXXZ(this);
}

/*
==============
InviteJoinHSM::ResetAcceptingInviteInitialized
==============
*/

void __fastcall InviteJoinHSM::ResetAcceptingInviteInitialized(InviteJoinHSM *this)
{
  ?ResetAcceptingInviteInitialized@InviteJoinHSM@@QEAAXXZ(this);
}

/*
==============
InviteJoinHSM::ShouldShowCancelButtonOnJoiningGameSessionPopup
==============
*/

bool __fastcall InviteJoinHSM::ShouldShowCancelButtonOnJoiningGameSessionPopup(InviteJoinHSM *this)
{
  return ?ShouldShowCancelButtonOnJoiningGameSessionPopup@InviteJoinHSM@@QEAA_NXZ(this);
}

/*
==============
InviteJoinHSM::HandleHSMCallback_OnlineRequirementsFenceStart
==============
*/

void __fastcall InviteJoinHSM::HandleHSMCallback_OnlineRequirementsFenceStart(InviteJoinHSM *this)
{
  ?HandleHSMCallback_OnlineRequirementsFenceStart@InviteJoinHSM@@UEAAXXZ(this);
}

/*
==============
InviteJoinHSM::HandlePartyJoinFail
==============
*/

void __fastcall InviteJoinHSM::HandlePartyJoinFail(InviteJoinHSM *this)
{
  ?HandlePartyJoinFail@InviteJoinHSM@@QEAAXXZ(this);
}

/*
==============
InviteJoinHSM::HandleHSMCallback_VerifyInvitablePrivilege
==============
*/

void __fastcall InviteJoinHSM::HandleHSMCallback_VerifyInvitablePrivilege(InviteJoinHSM *this)
{
  ?HandleHSMCallback_VerifyInvitablePrivilege@InviteJoinHSM@@UEAAXXZ(this);
}

/*
==============
InviteJoinHSM::ResetCommonInvitationData
==============
*/

void __fastcall InviteJoinHSM::ResetCommonInvitationData(InviteJoinHSM *this)
{
  ?ResetCommonInvitationData@InviteJoinHSM@@AEAAXXZ(this);
}

/*
==============
InviteJoinHSM::HandleHSMCallback_GetHostInfoForLobbyFromMatchmaker
==============
*/

void __fastcall InviteJoinHSM::HandleHSMCallback_GetHostInfoForLobbyFromMatchmaker(InviteJoinHSM *this)
{
  ?HandleHSMCallback_GetHostInfoForLobbyFromMatchmaker@InviteJoinHSM@@UEAAXXZ(this);
}

/*
==============
InviteJoinHSM::HandlePartyJoinComplete
==============
*/

void __fastcall InviteJoinHSM::HandlePartyJoinComplete(InviteJoinHSM *this)
{
  ?HandlePartyJoinComplete@InviteJoinHSM@@QEAAXXZ(this);
}

/*
==============
InviteJoinHSM::Handle_UserDeclineInvitation
==============
*/

void __fastcall InviteJoinHSM::Handle_UserDeclineInvitation(InviteJoinHSM *this)
{
  ?Handle_UserDeclineInvitation@InviteJoinHSM@@QEAAXXZ(this);
}

/*
==============
InviteJoinHSM::GetHostInfoForLobbyFromMatchmakerFailed
==============
*/

void __fastcall InviteJoinHSM::GetHostInfoForLobbyFromMatchmakerFailed(InviteJoinHSM *this)
{
  ?GetHostInfoForLobbyFromMatchmakerFailed@InviteJoinHSM@@QEAAXXZ(this);
}

/*
==============
InviteJoinHSM::DidInvitationFail
==============
*/

bool __fastcall InviteJoinHSM::DidInvitationFail(InviteJoinHSM *this)
{
  return ?DidInvitationFail@InviteJoinHSM@@QEAA_NXZ(this);
}

/*
==============
InviteJoinHSM::HandleHSMCallback_WaitingForExeTimedout
==============
*/

void __fastcall InviteJoinHSM::HandleHSMCallback_WaitingForExeTimedout(InviteJoinHSM *this)
{
  ?HandleHSMCallback_WaitingForExeTimedout@InviteJoinHSM@@UEAAXXZ(this);
}

/*
==============
InviteJoinHSM::HandleSessionSearchCompleteLobbyNotFound
==============
*/

void __fastcall InviteJoinHSM::HandleSessionSearchCompleteLobbyNotFound(InviteJoinHSM *this)
{
  ?HandleSessionSearchCompleteLobbyNotFound@InviteJoinHSM@@QEAAXXZ(this);
}

/*
==============
InviteJoinHSM::Handle_StartConfirmAcceptInvitation
==============
*/

void __fastcall InviteJoinHSM::Handle_StartConfirmAcceptInvitation(InviteJoinHSM *this)
{
  ?Handle_StartConfirmAcceptInvitation@InviteJoinHSM@@QEAAXXZ(this);
}

/*
==============
InviteJoinHSM::OnSuspendResume
==============
*/

void __fastcall InviteJoinHSM::OnSuspendResume(InviteJoinHSM *this)
{
  ?OnSuspendResume@InviteJoinHSM@@QEAAXXZ(this);
}

/*
==============
InviteJoinHSM::HasStartedJoinProcess
==============
*/

bool __fastcall InviteJoinHSM::HasStartedJoinProcess(InviteJoinHSM *this)
{
  return ?HasStartedJoinProcess@InviteJoinHSM@@QEAA_NXZ(this);
}

/*
==============
InviteJoinHSM::ResolveJoinerUniversalId
==============
*/

void __fastcall InviteJoinHSM::ResolveJoinerUniversalId(InviteJoinHSM *this)
{
  ?ResolveJoinerUniversalId@InviteJoinHSM@@UEAAXXZ(this);
}

/*
==============
InviteJoinHSM::HandleGettingInvalidInvitationFailure
==============
*/

void __fastcall InviteJoinHSM::HandleGettingInvalidInvitationFailure(InviteJoinHSM *this)
{
  ?HandleGettingInvalidInvitationFailure@InviteJoinHSM@@QEAAXXZ(this);
}

/*
==============
InviteJoinHSM::VerifyInvitationController
==============
*/

void __fastcall InviteJoinHSM::VerifyInvitationController(InviteJoinHSM *this)
{
  ?VerifyInvitationController@InviteJoinHSM@@UEAAXXZ(this);
}

/*
==============
InviteJoinHSM::FireCallbacksToExternalSystems
==============
*/

void __fastcall InviteJoinHSM::FireCallbacksToExternalSystems(InviteJoinHSM *this)
{
  ?FireCallbacksToExternalSystems@InviteJoinHSM@@AEAAXXZ(this);
}

/*
==============
InviteJoinHSM::HandleHSMCallback_StartMainMenuFenceForAccountRegistration
==============
*/

void __fastcall InviteJoinHSM::HandleHSMCallback_StartMainMenuFenceForAccountRegistration(InviteJoinHSM *this)
{
  ?HandleHSMCallback_StartMainMenuFenceForAccountRegistration@InviteJoinHSM@@UEAAXXZ(this);
}

/*
==============
InviteJoinHSM::HandleHSMCallback_GatheringJoinInfoFromUserTimedOut
==============
*/

void __fastcall InviteJoinHSM::HandleHSMCallback_GatheringJoinInfoFromUserTimedOut(InviteJoinHSM *this)
{
  ?HandleHSMCallback_GatheringJoinInfoFromUserTimedOut@InviteJoinHSM@@UEAAXXZ(this);
}

/*
==============
InviteJoinHSM::ClearHostSessionInfoForJoin
==============
*/

void __fastcall InviteJoinHSM::ClearHostSessionInfoForJoin(InviteJoinHSM *this)
{
  ?ClearHostSessionInfoForJoin@InviteJoinHSM@@QEAAXXZ(this);
}

/*
==============
InviteJoinHSM::HandleHSMCallback_WaitForCurrentApplicationSpecificJoinabilityChecks
==============
*/

void __fastcall InviteJoinHSM::HandleHSMCallback_WaitForCurrentApplicationSpecificJoinabilityChecks(InviteJoinHSM *this)
{
  ?HandleHSMCallback_WaitForCurrentApplicationSpecificJoinabilityChecks@InviteJoinHSM@@UEAAXXZ(this);
}

/*
==============
InviteJoinHSM::Handle_WaitingForConfirmAcceptInvitationDialog
==============
*/

void __fastcall InviteJoinHSM::Handle_WaitingForConfirmAcceptInvitationDialog(InviteJoinHSM *this)
{
  ?Handle_WaitingForConfirmAcceptInvitationDialog@InviteJoinHSM@@QEAAXXZ(this);
}

/*
==============
InviteJoinHSM::StartAcceptInviteJoin
==============
*/

void __fastcall InviteJoinHSM::StartAcceptInviteJoin(InviteJoinHSM *this)
{
  ?StartAcceptInviteJoin@InviteJoinHSM@@UEAAXXZ(this);
}

/*
==============
InviteJoinHSM::Handle_ConfirmInvitation
==============
*/

void __fastcall InviteJoinHSM::Handle_ConfirmInvitation(InviteJoinHSM *this)
{
  ?Handle_ConfirmInvitation@InviteJoinHSM@@QEAAXXZ(this);
}

/*
==============
InviteJoinHSM::HandleHSMCallback_BeginCurrentApplicationSpecificJoinabilityChecks
==============
*/

void __fastcall InviteJoinHSM::HandleHSMCallback_BeginCurrentApplicationSpecificJoinabilityChecks(InviteJoinHSM *this)
{
  ?HandleHSMCallback_BeginCurrentApplicationSpecificJoinabilityChecks@InviteJoinHSM@@UEAAXXZ(this);
}

/*
==============
InviteJoinHSM::InviteWaitingForEULA
==============
*/

void __fastcall InviteJoinHSM::InviteWaitingForEULA(InviteJoinHSM *this)
{
  ?InviteWaitingForEULA@InviteJoinHSM@@UEAAXXZ(this);
}

/*
==============
InviteJoinHSM::HandleHSMCallback_VerifyAccountRegistered
==============
*/

void __fastcall InviteJoinHSM::HandleHSMCallback_VerifyAccountRegistered(InviteJoinHSM *this)
{
  ?HandleHSMCallback_VerifyAccountRegistered@InviteJoinHSM@@UEAAXXZ(this);
}

/*
==============
InviteJoinHSM::HandleSessionSearchTimeout
==============
*/

void __fastcall InviteJoinHSM::HandleSessionSearchTimeout(InviteJoinHSM *this)
{
  ?HandleSessionSearchTimeout@InviteJoinHSM@@UEAAXXZ(this);
}

/*
==============
InviteJoinHSM::StartJoiningLobby
==============
*/

bool __fastcall InviteJoinHSM::StartJoiningLobby(InviteJoinHSM *this, int controllerIndex, const unsigned __int64 lobbyId)
{
  return ?StartJoiningLobby@InviteJoinHSM@@QEAA_NH_K@Z(this, controllerIndex, lobbyId);
}

/*
==============
InviteJoinHSM::InviteJoinHSM
==============
*/
void InviteJoinHSM::InviteJoinHSM(InviteJoinHSM *this)
{
  InvitationHSM_base::InvitationHSM_base(this);
  this->__vftable = (InviteJoinHSM_vtbl *)&InviteJoinHSM::`vftable';
  XUID::XUID(&this->m_commonInviteData.m_xuidOfUserBeingJoinedOn);
  XUID::XUID(&this->m_commonInviteData.m_xuidOfUserJoining);
  bdSecurityID::bdSecurityID(&this->m_joinInfoOfTheCurrentInviteJoinInProgress.communicationInfo.session.m_security.m_id);
  bdSecurityKey::bdSecurityKey(&this->m_joinInfoOfTheCurrentInviteJoinInProgress.communicationInfo.session.m_security.m_key);
  XUID::XUID(this->m_userIdResolver.m_xuids);
  this->m_userIdResolver.m_numXuids = 0;
  this->m_userIdResolver.m_numPlatformIds = 0;
  this->m_userIdResolver.m_taskId = 0;
  this->m_pendingInvitationController = -1;
  this->m_initialDataTypeForJoining = UNIVERSAL_ID;
  this->m_HSMVerboseDebug = 1;
  *(_WORD *)&this->m_didWeComErrorDuringUpdate = 0;
  this->m_sessionSearchAttemptCount = 0;
  *(_WORD *)&this->m_shouldCheckIfExeIsReadyToProcessInviteJoinBeforeCheckOnlineServices = 0;
  this->m_uiReadyToProcessInviteJoins = 0;
  this->m_hasBeenInitialized = 0;
  this->m_inviteJoinResult = MOVEMENT;
  this->m_currentApplicationSpecificPreJoinCheck = -1;
  this->m_applicationSpecificPreJoinChecks[0].m_startCallback = NULL;
  this->m_applicationSpecificPreJoinChecks[0].m_updateCallback = NULL;
  this->m_externalCallbacks[0] = NULL;
  this->m_externalCallbacks[1] = NULL;
  this->m_externalCallbacks[2] = NULL;
  this->m_externalCallbacks[3] = NULL;
  this->m_LastErrorCodeFromErrorManagerBeforeError[0] = 0;
  *(_QWORD *)&this->m_lastStateBeforeError = -1i64;
  this->m_lastStateSpecificErrorCode = -1;
  this->m_didWeRestartJoinBecauseLocalClientBecameInactive = 0;
  this->m_applicationDidSuspendResume = 0;
  *(_QWORD *)&this->m_framesSinceSuspendResumedFlagWasSet = 0i64;
}

/*
==============
InviteJoinHSM::~InviteJoinHSM
==============
*/
void InviteJoinHSM::~InviteJoinHSM(InviteJoinHSM *this)
{
  this->__vftable = (InviteJoinHSM_vtbl *)&InviteJoinHSM::`vftable';
  this->m_hasBeenInitialized = 0;
  this->m_HSMVerboseDebug = 0;
  InvitationHSM_base::HSM_Shutdown(this);
  bdSecurityKey::~bdSecurityKey(&this->m_joinInfoOfTheCurrentInviteJoinInProgress.communicationInfo.session.m_security.m_key);
  bdSecurityID::~bdSecurityID(&this->m_joinInfoOfTheCurrentInviteJoinInProgress.communicationInfo.session.m_security.m_id);
  InvitationHSM_base::~InvitationHSM_base(this);
}

/*
==============
InviteJoinHSM::CheckIfAddressMatchesHostAddressForJoin
==============
*/
bool InviteJoinHSM::CheckIfAddressMatchesHostAddressForJoin(InviteJoinHSM *this, const netadr_t *from)
{
  bool result; 
  const XNADDR *Address; 

  if ( !from && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\online\\invitejoinhsm_common.cpp", 1999, ASSERT_TYPE_ASSERT, "(from)", (const char *)&queryFormat, "from") )
    __debugbreak();
  result = XSESSION_INFO::IsValidSessionId(&this->m_joinInfoOfTheCurrentInviteJoinInProgress.communicationInfo.session);
  if ( result )
  {
    Address = XSESSION_INFO::GetAddress(&this->m_joinInfoOfTheCurrentInviteJoinInProgress.communicationInfo.session);
    return NET_IsRemoteXnaddr(Address, from);
  }
  return result;
}

/*
==============
InviteJoinHSM::CleanupForInviteFailures
==============
*/
void InviteJoinHSM::CleanupForInviteFailures(InviteJoinHSM *this)
{
  const dvar_t *v2; 
  Online_ErrorReporting *InstancePtr; 
  char *fmt; 
  __int64 v5; 
  char dest[256]; 

  Com_Printf(25, ">>>>> CleanupForInviteFailures()\n");
  if ( Online_Telemetry_IsOnlineCommunicationTelemetryEnabled() )
    Online_Telemetry_SendCommunicationEvent(this->m_pendingInvitationController, this->m_commonInviteData.m_xuidOfUserBeingJoinedOn, INVITE_JOIN_FAILED, NULL);
  if ( this->m_inviteJoinResult == COUNT )
    OnlineMatchmakerOmniscient::ResetLobby(&OnlineMatchmakerOmniscient::ms_instance);
  InviteJoinHSM::CopyLocalizedErrorCodeFromErrorManager(this);
  v2 = DVARBOOL_online_invite_hsm_should_report_failure_cleanup_info;
  if ( !DVARBOOL_online_invite_hsm_should_report_failure_cleanup_info && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\universal\\dvar.h", 692, ASSERT_TYPE_ASSERT, "(dvar)", "%s\n\tDvar %s accessed after deregistration", "dvar", "online_invite_hsm_should_report_failure_cleanup_info") )
    __debugbreak();
  Dvar_CheckFrontendServerThread(v2);
  if ( v2->current.enabled )
  {
    LODWORD(v5) = this->m_lastStateSpecificErrorCode;
    LODWORD(fmt) = this->m_lastEventTriggeredBeforeError;
    Com_sprintf(dest, 0x100ui64, "%d,%d,%d,%s", (unsigned int)this->m_lastStateBeforeError, fmt, v5, this->m_LastErrorCodeFromErrorManagerBeforeError);
    InstancePtr = Online_ErrorReporting::GetInstancePtr();
    Online_ErrorReporting::ReportError(InstancePtr, (Online_Error_CAT_INVITE2_t)64, dest);
  }
  this->CleanupInvitation(this);
}

/*
==============
InviteJoinHSM::CleanupInvitation
==============
*/
void InviteJoinHSM::CleanupInvitation(InviteJoinHSM *this)
{
  const XUID *v2; 
  const XUID *v3; 
  const XUID *v4; 
  bool v5; 
  void (__fastcall **m_externalCallbacks)(const int, const InviteJoinHSMResult, const char *); 
  __int64 v7; 
  void (__fastcall *v8)(const int, const InviteJoinHSMResult, const char *); 
  __int64 m_pendingInvitationController; 
  XUID result; 
  char dest[256]; 

  Com_Printf(25, ">>>>> CleanupInvitation()\n");
  v2 = XUID::NullXUID(&result);
  XUID::operator=(&this->m_commonInviteData.m_xuidOfUserBeingJoinedOn, v2);
  v3 = XUID::NullXUID(&result);
  XUID::operator=(&this->m_commonInviteData.m_xuidOfUserJoining, v3);
  this->m_commonInviteData.m_platformIdOfUserBeingJoinedOn = 0i64;
  this->m_commonInviteData.m_platformIdOfUserJoining = 0i64;
  this->m_commonInviteData.fromGameInvite = 0;
  this->m_commonInviteData.lobbyid = 0i64;
  *(_WORD *)&this->m_commonInviteData.acceptingInviteInitialized = 0;
  this->m_initialDataTypeForJoining = UNIVERSAL_ID;
  this->m_sessionSearchAttemptCount = 0;
  this->m_matchmakerStartBackOffRequested = 0;
  this->m_didWeDoADisconnectFromServerToJoinSomeone = 0;
  v4 = XUID::NullXUID(&result);
  XUID::operator=(&g_launchData.invitedXUID, v4);
  memset_0(&this->m_joinInfoOfTheCurrentInviteJoinInProgress, 0, sizeof(this->m_joinInfoOfTheCurrentInviteJoinInProgress));
  this->m_userIdResolver.m_numXuids = 0;
  this->m_userIdResolver.m_numPlatformIds = 0;
  this->m_userIdResolver.m_taskId = 0;
  v5 = this->m_inviteJoinResult == 5;
  dest[0] = 0;
  if ( !v5 )
    Com_sprintf(dest, 0x100ui64, "%d,%d,%d,%s", (unsigned int)this->m_lastStateBeforeError, this->m_lastEventTriggeredBeforeError, this->m_lastStateSpecificErrorCode, this->m_LastErrorCodeFromErrorManagerBeforeError);
  m_externalCallbacks = this->m_externalCallbacks;
  v7 = 4i64;
  do
  {
    v8 = *m_externalCallbacks;
    if ( *m_externalCallbacks )
    {
      m_pendingInvitationController = (unsigned int)this->m_pendingInvitationController;
      if ( (_DWORD)m_pendingInvitationController == -1 )
      {
        Com_PrintWarning(25, "InviteJoinHSM firing callbacks with an invalid controller index\n");
        m_pendingInvitationController = (unsigned int)this->m_pendingInvitationController;
        v8 = *m_externalCallbacks;
      }
      v8(m_pendingInvitationController, (const InviteJoinHSMResult)this->m_inviteJoinResult, dest);
    }
    ++m_externalCallbacks;
    --v7;
  }
  while ( v7 );
  this->m_inviteJoinResult = MOVEMENT;
  OnlineMatchmakerOmniscient::ResetInviteData(&OnlineMatchmakerOmniscient::ms_instance);
  this->m_pendingInvitationController = -1;
  this->m_currentApplicationSpecificPreJoinCheck = -1;
  this->m_LastErrorCodeFromErrorManagerBeforeError[0] = 0;
  *(_QWORD *)&this->m_lastStateBeforeError = -1i64;
  this->m_lastStateSpecificErrorCode = -1;
  this->m_didWeRestartJoinBecauseLocalClientBecameInactive = 0;
  *(_WORD *)&this->m_applicationDidSuspendResume = 0;
  *(_QWORD *)&this->m_framesSinceSuspendResumedFlagWasSet = 0i64;
}

/*
==============
InviteJoinHSM::ClearHostSessionInfoForJoin
==============
*/
void InviteJoinHSM::ClearHostSessionInfoForJoin(InviteJoinHSM *this)
{
  const dvar_t *v1; 

  v1 = DVARBOOL_online_invite_hsm_should_clear_session_info_in_decline_invitation;
  if ( !DVARBOOL_online_invite_hsm_should_clear_session_info_in_decline_invitation && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\universal\\dvar.h", 692, ASSERT_TYPE_ASSERT, "(dvar)", "%s\n\tDvar %s accessed after deregistration", "dvar", "online_invite_hsm_should_clear_session_info_in_decline_invitation") )
    __debugbreak();
  Dvar_CheckFrontendServerThread(v1);
  if ( v1->current.enabled || InvitationHSM_base::HSM_GetCurrentState(this) != st_invite_accept_fence )
    memset_0(&this->m_joinInfoOfTheCurrentInviteJoinInProgress, 0, 0x6Cui64);
}

/*
==============
InviteJoinHSM::CopyCurrentStateFromHSMToMemberVariable
==============
*/
void InviteJoinHSM::CopyCurrentStateFromHSMToMemberVariable(InviteJoinHSM *this)
{
  this->m_lastStateBeforeError = InvitationHSM_base::HSM_GetCurrentState(this);
}

/*
==============
InviteJoinHSM::CopyLocalizedErrorCodeFromErrorManager
==============
*/
void InviteJoinHSM::CopyLocalizedErrorCodeFromErrorManager(InviteJoinHSM *this)
{
  const dvar_t *v1; 
  const char *LastRecorderErrorCodeLocalized; 

  v1 = DVARBOOL_online_invite_hsm_should_report_failure_cleanup_info;
  if ( !DVARBOOL_online_invite_hsm_should_report_failure_cleanup_info && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\universal\\dvar.h", 692, ASSERT_TYPE_ASSERT, "(dvar)", "%s\n\tDvar %s accessed after deregistration", "dvar", "online_invite_hsm_should_report_failure_cleanup_info") )
    __debugbreak();
  Dvar_CheckFrontendServerThread(v1);
  if ( v1->current.enabled )
  {
    if ( *OnlineErrorManager::GetLastRecorderErrorCodeLocalized(&g_onlineMgr.m_errorManager) )
    {
      LastRecorderErrorCodeLocalized = OnlineErrorManager::GetLastRecorderErrorCodeLocalized(&g_onlineMgr.m_errorManager);
      Core_strcpy(this->m_LastErrorCodeFromErrorManagerBeforeError, 0x100ui64, LastRecorderErrorCodeLocalized);
    }
  }
}

/*
==============
InviteJoinHSM::DidInvitationFail
==============
*/
bool InviteJoinHSM::DidInvitationFail(InviteJoinHSM *this)
{
  return InvitationHSM_base::HSM_IsInState(this, st_handle_error);
}

/*
==============
InviteJoinHSM::FireCallbacksToExternalSystems
==============
*/
void InviteJoinHSM::FireCallbacksToExternalSystems(InviteJoinHSM *this)
{
  bool v1; 
  void (__fastcall **m_externalCallbacks)(const int, const InviteJoinHSMResult, const char *); 
  __int64 v4; 
  void (__fastcall *v5)(const int, const InviteJoinHSMResult, const char *); 
  __int64 m_pendingInvitationController; 
  char dest[256]; 

  v1 = this->m_inviteJoinResult == 5;
  dest[0] = 0;
  if ( !v1 )
    Com_sprintf(dest, 0x100ui64, "%d,%d,%d,%s", (unsigned int)this->m_lastStateBeforeError, this->m_lastEventTriggeredBeforeError, this->m_lastStateSpecificErrorCode, this->m_LastErrorCodeFromErrorManagerBeforeError);
  m_externalCallbacks = this->m_externalCallbacks;
  v4 = 4i64;
  do
  {
    v5 = *m_externalCallbacks;
    if ( *m_externalCallbacks )
    {
      m_pendingInvitationController = (unsigned int)this->m_pendingInvitationController;
      if ( (_DWORD)m_pendingInvitationController == -1 )
      {
        Com_PrintWarning(25, "InviteJoinHSM firing callbacks with an invalid controller index\n");
        m_pendingInvitationController = (unsigned int)this->m_pendingInvitationController;
        v5 = *m_externalCallbacks;
      }
      v5(m_pendingInvitationController, (const InviteJoinHSMResult)this->m_inviteJoinResult, dest);
    }
    ++m_externalCallbacks;
    --v4;
  }
  while ( v4 );
}

/*
==============
InviteJoinHSM::GetHostInfoForLobbyFromMatchmakerComplete
==============
*/
void InviteJoinHSM::GetHostInfoForLobbyFromMatchmakerComplete(InviteJoinHSM *this, const XSESSION_INFO *hostInfo, const unsigned __int64 lobbyId)
{
  if ( this->m_commonInviteData.lobbyid != lobbyId && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\online\\invitejoinhsm_common.cpp", 1438, ASSERT_TYPE_ASSERT, "(m_commonInviteData.lobbyid == lobbyId)", (const char *)&queryFormat, "m_commonInviteData.lobbyid == lobbyId") )
    __debugbreak();
  XSESSION_INFO::operator=(&this->m_joinInfoOfTheCurrentInviteJoinInProgress.communicationInfo.session, hostInfo);
  InvitationHSM_base::HSM_TriggerEvent(this, SESSION_SEARCH_COMPLETE_PERFORM_PARTY_JOIN);
  this->m_lastStateBeforeError = InvitationHSM_base::HSM_GetCurrentState(this);
  this->m_lastEventTriggeredBeforeError = 65;
}

/*
==============
InviteJoinHSM::GetHostInfoForLobbyFromMatchmakerDocParseFailed
==============
*/
void InviteJoinHSM::GetHostInfoForLobbyFromMatchmakerDocParseFailed(InviteJoinHSM *this)
{
  OnlineErrorManager::SetLastRecordedErrorCode(&g_onlineMgr.m_errorManager, (Online_Error_CAT_INVITE2_t)32, NULL);
  Com_SetErrorMessage("MENU/JOIN_SESSION_INVALID");
  InvitationHSM_base::HSM_TriggerEvent(this, INVITE_GENERIC_ERROR_NO_MSG);
  InviteJoinHSM::CopyLocalizedErrorCodeFromErrorManager(this);
  this->m_lastStateBeforeError = InvitationHSM_base::HSM_GetCurrentState(this);
  this->m_lastEventTriggeredBeforeError = 1;
}

/*
==============
InviteJoinHSM::GetHostInfoForLobbyFromMatchmakerFailed
==============
*/
void InviteJoinHSM::GetHostInfoForLobbyFromMatchmakerFailed(InviteJoinHSM *this)
{
  OnlineErrorManager::SetLastRecordedErrorCode(&g_onlineMgr.m_errorManager, (Online_Error_CAT_INVITE2_t)16, NULL);
  Com_SetErrorMessage("MENU/JOIN_SESSION_INVALID");
  InvitationHSM_base::HSM_TriggerEvent(this, INVITE_GENERIC_ERROR_NO_MSG);
  InviteJoinHSM::CopyLocalizedErrorCodeFromErrorManager(this);
  this->m_lastStateBeforeError = InvitationHSM_base::HSM_GetCurrentState(this);
  this->m_lastEventTriggeredBeforeError = 1;
}

/*
==============
InviteJoinHSM::HSM_PrintDebugInfo
==============
*/
void InviteJoinHSM::HSM_PrintDebugInfo(InviteJoinHSM *this, const char *pDebugString)
{
  Com_Printf(16, "InviteJoinHSM DEBUG: controller id %d : %s", (unsigned int)this->m_pendingInvitationController, pDebugString);
}

/*
==============
InviteJoinHSM::HandleAlreadyInTheGameServerSessionThatIsBeingJoinedOnError
==============
*/
void InviteJoinHSM::HandleAlreadyInTheGameServerSessionThatIsBeingJoinedOnError(InviteJoinHSM *this)
{
  Com_Printf(16, "HandleAlreadyInTheGameServerSessionThatIsBeingJoinedOnError\n");
  OnlineErrorManager::SetLastRecordedErrorCode(&g_onlineMgr.m_errorManager, MOVEMENT, NULL);
  Com_SetErrorMessage((const char *)&stru_143DD5890);
  InviteJoinHSM::CopyLocalizedErrorCodeFromErrorManager(this);
}

/*
==============
InviteJoinHSM::HandleAlreadyInThePartySessionThatIsBeingJoinedOnError
==============
*/
void InviteJoinHSM::HandleAlreadyInThePartySessionThatIsBeingJoinedOnError(InviteJoinHSM *this)
{
  Com_Printf(16, "HandleAlreadyInThePartySessionThatIsBeingJoinedOnError\n");
  OnlineErrorManager::SetLastRecordedErrorCode(&g_onlineMgr.m_errorManager, MOVEMENT, NULL);
  Com_SetErrorMessage((const char *)&stru_143DD5890);
  InviteJoinHSM::CopyLocalizedErrorCodeFromErrorManager(this);
}

/*
==============
InviteJoinHSM::HandleAlreadyInThePartyThatIsBeingJoinedOnError
==============
*/
void InviteJoinHSM::HandleAlreadyInThePartyThatIsBeingJoinedOnError(InviteJoinHSM *this)
{
  Com_Printf(16, "HandleAlreadyInThePartyThatIsBeingJoinedOnError\n");
  OnlineErrorManager::SetLastRecordedErrorCode(&g_onlineMgr.m_errorManager, MOVEMENT, NULL);
  Com_SetErrorMessage("MPUI/CANTJOINALREADYINPARTY");
  InviteJoinHSM::CopyLocalizedErrorCodeFromErrorManager(this);
}

/*
==============
InviteJoinHSM::HandleAtomicJoinFenceTimeout
==============
*/
void InviteJoinHSM::HandleAtomicJoinFenceTimeout(InviteJoinHSM *this)
{
  Com_Printf(16, "HandleAtomicJoinFenceTimeout Timed out\n");
  OnlineErrorManager::SetLastRecordedErrorCode(&g_onlineMgr.m_errorManager, MOVEMENT, NULL);
  Com_SetErrorMessage((const char *)&stru_143DD5890);
  InviteJoinHSM::CopyLocalizedErrorCodeFromErrorManager(this);
}

/*
==============
InviteJoinHSM::HandleCantJoinOnExistingSessionError
==============
*/
void InviteJoinHSM::HandleCantJoinOnExistingSessionError(InviteJoinHSM *this)
{
  Com_SetErrorMessage("PLATFORM/JOIN_ON_EXISTING_SESSION_ERROR");
  InviteJoinHSM::CopyLocalizedErrorCodeFromErrorManager(this);
}

/*
==============
InviteJoinHSM::HandleComError
==============
*/
void InviteJoinHSM::HandleComError(InviteJoinHSM *this)
{
  if ( (InvitationHSM_base::HSM_IsInState(this, st_processing_invite) || InvitationHSM_base::HSM_IsInState(this, st_preparing_users_for_processing_invite)) && !this->m_didWeDoADisconnectFromServerToJoinSomeone )
  {
    Com_PrintError(25, "InviteJoinHSM::HandleComError\n");
    Com_SetErrorMessage((const char *)&stru_143DD5890);
    InvitationHSM_base::HSM_TriggerEvent(this, INVITE_GENERIC_ERROR_NO_MSG);
    this->m_lastStateBeforeError = InvitationHSM_base::HSM_GetCurrentState(this);
    this->m_lastEventTriggeredBeforeError = 1;
  }
}

/*
==============
InviteJoinHSM::HandleEulaDeclined
==============
*/
void InviteJoinHSM::HandleEulaDeclined(InviteJoinHSM *this)
{
  Com_Printf(16, "HandleEulaDeclined\n");
  Com_SetErrorMessage("MENU/CLAN_DECLINED_INVITATION");
  InviteJoinHSM::CopyLocalizedErrorCodeFromErrorManager(this);
}

/*
==============
InviteJoinHSM::HandleGettingInvalidInvitationFailure
==============
*/
void InviteJoinHSM::HandleGettingInvalidInvitationFailure(InviteJoinHSM *this)
{
  Com_SetErrorMessage("MENU/JOIN_SESSION_INVALID");
  OnlineErrorManager::SetLastRecordedErrorCode(&g_onlineMgr.m_errorManager, MOVEMENT, NULL);
  InvitationHSM_base::HSM_TriggerEvent(this, CANT_JOIN_INVALID_INVITATION);
  InviteJoinHSM::CopyLocalizedErrorCodeFromErrorManager(this);
  this->m_lastStateBeforeError = InvitationHSM_base::HSM_GetCurrentState(this);
  this->m_lastEventTriggeredBeforeError = 34;
}

/*
==============
InviteJoinHSM::HandleGettingSenderXUIDFailure
==============
*/
void InviteJoinHSM::HandleGettingSenderXUIDFailure(InviteJoinHSM *this)
{
  Com_SetErrorMessage((const char *)&stru_143DD5890);
  InvitationHSM_base::HSM_TriggerEvent(this, INVITE_GENERIC_ERROR_NO_MSG);
  this->m_lastStateBeforeError = InvitationHSM_base::HSM_GetCurrentState(this);
  this->m_lastEventTriggeredBeforeError = 1;
}

/*
==============
InviteJoinHSM::HandleHSMCallback_AccountRegistrationCancelled
==============
*/
void InviteJoinHSM::HandleHSMCallback_AccountRegistrationCancelled(InviteJoinHSM *this)
{
  Com_Printf(16, "HandleHSMCallback_AccountRegistrationCancelled\n");
  InviteJoinHSM::CopyLocalizedErrorCodeFromErrorManager(this);
}

/*
==============
InviteJoinHSM::HandleHSMCallback_BeginCurrentApplicationSpecificJoinabilityChecks
==============
*/
void InviteJoinHSM::HandleHSMCallback_BeginCurrentApplicationSpecificJoinabilityChecks(InviteJoinHSM *this)
{
  __int64 v2; 
  XUID v3[4]; 
  __m256i v4; 

  XUID::XUID(&v3[1]);
  LODWORD(v3[0].m_id) = this->m_pendingInvitationController;
  XUID::operator=(&v3[1], &this->m_commonInviteData.m_xuidOfUserBeingJoinedOn);
  v3[2] = (XUID)this->m_joinInfoOfTheCurrentInviteJoinInProgress.tournamentId;
  LODWORD(v3[3].m_id) = this->m_initialDataTypeForJoining;
  if ( !this->m_applicationSpecificPreJoinChecks[this->m_currentApplicationSpecificPreJoinCheck].m_startCallback && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\online\\invitejoinhsm_common.cpp", 1500, ASSERT_TYPE_ASSERT, "(m_applicationSpecificPreJoinChecks[m_currentApplicationSpecificPreJoinCheck].m_startCallback)", (const char *)&queryFormat, "m_applicationSpecificPreJoinChecks[m_currentApplicationSpecificPreJoinCheck].m_startCallback") )
    __debugbreak();
  v2 = 2 * (this->m_currentApplicationSpecificPreJoinCheck + 48i64);
  v4 = *(__m256i *)&v3[0].m_id;
  (*((void (__fastcall **)(__m256i *))&this->__vftable + v2))(&v4);
}

/*
==============
InviteJoinHSM::HandleHSMCallback_CheckIfNextApplicationSpecificJoinabilityCheckPending
==============
*/
void InviteJoinHSM::HandleHSMCallback_CheckIfNextApplicationSpecificJoinabilityCheckPending(InviteJoinHSM *this)
{
  int v2; 

  v2 = (++this->m_currentApplicationSpecificPreJoinCheck >= 1) + 49;
  InvitationHSM_base::HSM_TriggerEvent(this, (InvitationHSM_base::eHSMEvents)v2);
  this->m_lastStateBeforeError = InvitationHSM_base::HSM_GetCurrentState(this);
  this->m_lastEventTriggeredBeforeError = v2;
}

/*
==============
InviteJoinHSM::HandleHSMCallback_GatheringJoinInfoFromUserTimedOut
==============
*/
void InviteJoinHSM::HandleHSMCallback_GatheringJoinInfoFromUserTimedOut(InviteJoinHSM *this)
{
  Com_SetErrorMessage("MENU/JOIN_SESSION_INVALID");
  OnlineErrorManager::SetLastRecordedErrorCode(&g_onlineMgr.m_errorManager, MOVEMENT, NULL);
  InviteJoinHSM::CopyLocalizedErrorCodeFromErrorManager(this);
}

/*
==============
InviteJoinHSM::HandleHSMCallback_GetHostInfoForLobbyFromMatchmaker
==============
*/
void InviteJoinHSM::HandleHSMCallback_GetHostInfoForLobbyFromMatchmaker(InviteJoinHSM *this)
{
  if ( !this->m_commonInviteData.lobbyid && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\online\\invitejoinhsm_common.cpp", 1451, ASSERT_TYPE_ASSERT, "(m_commonInviteData.lobbyid)", (const char *)&queryFormat, "m_commonInviteData.lobbyid") )
    __debugbreak();
  if ( !Session_GetHostInfoForLobbyForInviteJoin(this->m_pendingInvitationController, this->m_commonInviteData.lobbyid) )
  {
    OnlineErrorManager::SetLastRecordedErrorCode(&g_onlineMgr.m_errorManager, (Online_Error_CAT_INVITE2_t)4, NULL);
    Com_SetErrorMessage("MENU/JOIN_SESSION_INVALID");
    InvitationHSM_base::HSM_TriggerEvent(this, MATCHMAKER_GET_HOST_INFO_FOR_LOBBY_FAILED);
    InviteJoinHSM::CopyLocalizedErrorCodeFromErrorManager(this);
    this->m_lastStateBeforeError = InvitationHSM_base::HSM_GetCurrentState(this);
    this->m_lastEventTriggeredBeforeError = 73;
  }
}

/*
==============
InviteJoinHSM::HandleHSMCallback_GetHostInfoForLobbyFromMatchmakerTimedout
==============
*/
void InviteJoinHSM::HandleHSMCallback_GetHostInfoForLobbyFromMatchmakerTimedout(InviteJoinHSM *this)
{
  OnlineErrorManager::SetLastRecordedErrorCode(&g_onlineMgr.m_errorManager, (Online_Error_CAT_INVITE2_t)8, NULL);
  Com_SetErrorMessage("MENU/JOIN_SESSION_INVALID");
  InviteJoinHSM::CopyLocalizedErrorCodeFromErrorManager(this);
}

/*
==============
InviteJoinHSM::HandleHSMCallback_GettingSenderXuidTimedout
==============
*/
void InviteJoinHSM::HandleHSMCallback_GettingSenderXuidTimedout(InviteJoinHSM *this)
{
  OnlineErrorManager::SetLastRecordedErrorCode(&g_onlineMgr.m_errorManager, MOVEMENT, NULL);
  Com_SetErrorMessage((const char *)&stru_143DD5890);
  InviteJoinHSM::CopyLocalizedErrorCodeFromErrorManager(this);
}

/*
==============
InviteJoinHSM::HandleHSMCallback_InvitePermissionsCheckTimeout
==============
*/
void InviteJoinHSM::HandleHSMCallback_InvitePermissionsCheckTimeout(InviteJoinHSM *this)
{
  const dvar_t *v1; 
  int m_permissionsCheckAttemptCount; 
  int v4; 

  v1 = DVARINT_invite_hsm_permissions_check_retries_max_count;
  if ( !DVARINT_invite_hsm_permissions_check_retries_max_count && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\universal\\dvar.h", 699, ASSERT_TYPE_ASSERT, "(dvar)", "%s\n\tDvar %s accessed after deregistration", "dvar", "invite_hsm_permissions_check_retries_max_count") )
    __debugbreak();
  Dvar_CheckFrontendServerThread(v1);
  m_permissionsCheckAttemptCount = this->m_permissionsCheckAttemptCount;
  if ( m_permissionsCheckAttemptCount >= v1->current.integer )
  {
    v4 = 19;
  }
  else
  {
    v4 = 18;
    this->m_permissionsCheckAttemptCount = m_permissionsCheckAttemptCount + 1;
  }
  InvitationHSM_base::HSM_TriggerEvent(this, (InvitationHSM_base::eHSMEvents)v4);
  this->m_lastStateBeforeError = InvitationHSM_base::HSM_GetCurrentState(this);
  this->m_lastEventTriggeredBeforeError = v4;
}

/*
==============
InviteJoinHSM::HandleHSMCallback_InviteWaitingForAccountRegistration
==============
*/
void InviteJoinHSM::HandleHSMCallback_InviteWaitingForAccountRegistration(InviteJoinHSM *this)
{
  Online_AccountRegistration *Instance; 

  Instance = Online_AccountRegistration::GetInstance();
  if ( !Online_AccountRegistration::IsRegistering(Instance) )
  {
    InvitationHSM_base::HSM_TriggerEvent(this, INVITE_WAIT_FOR_USER_AUTH);
    this->m_lastStateBeforeError = InvitationHSM_base::HSM_GetCurrentState(this);
    this->m_lastEventTriggeredBeforeError = 11;
  }
}

/*
==============
InviteJoinHSM::HandleHSMCallback_OnlineRequirementsFenceStart
==============
*/
void InviteJoinHSM::HandleHSMCallback_OnlineRequirementsFenceStart(InviteJoinHSM *this)
{
  Live_NetworkingFenceStart(this->m_pendingInvitationController);
}

/*
==============
InviteJoinHSM::HandleHSMCallback_ShowMissingInvitablePrivilegePopup
==============
*/
void InviteJoinHSM::HandleHSMCallback_ShowMissingInvitablePrivilegePopup(InviteJoinHSM *this)
{
  UI_ShowAcceptInviteWarningForMissingInvitablePrivilege(LOCAL_CLIENT_0);
}

/*
==============
InviteJoinHSM::HandleHSMCallback_StartGatheringJoinInfoFromUser
==============
*/
void InviteJoinHSM::HandleHSMCallback_StartGatheringJoinInfoFromUser(InviteJoinHSM *this)
{
  __int64 v2; 
  unsigned __int64 v3; 
  unsigned int v4; 
  DWServicesAccess *Instance; 
  DWMessaging *Messaging; 
  unsigned __int64 UniversalId; 
  TaskCreateRequest *v8; 
  bdRemoteTask *v9; 
  TaskManager *v10; 
  Windows::Foundation::IAsyncInfo *m_asyncInfo; 
  TaskCreateRequest pTaskCreateRequest; 
  bdReference<bdRemoteTask> result; 
  __int64 v14; 
  TaskCreateResult pTaskCreateResult; 
  char dest[384]; 

  v14 = -2i64;
  *(_QWORD *)&pTaskCreateRequest.m_controllerIndex = -1i64;
  memset(&pTaskCreateRequest.m_appData, 0, 48);
  pTaskCreateRequest.m_cancelTaskOnSignoutEvent = 1;
  pTaskCreateRequest.m_timeoutInSeconds = 0;
  if ( !XUID::IsValid(&this->m_commonInviteData.m_xuidOfUserBeingJoinedOn) && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\online\\invitejoinhsm_common.cpp", 1089, ASSERT_TYPE_ASSERT, "(m_commonInviteData.m_xuidOfUserBeingJoinedOn.IsValid())", (const char *)&queryFormat, "m_commonInviteData.m_xuidOfUserBeingJoinedOn.IsValid()") )
    __debugbreak();
  Core_strcpy(dest, 0x80ui64, ONLINE_INVITATION_MESSAGE_HEADER);
  v2 = -1i64;
  do
    ++v2;
  while ( ONLINE_INVITATION_MESSAGE_HEADER[v2] );
  v3 = v2 + 1;
  if ( v3 > 0xFFFFFFFF && CoreAssert_Handler("c:\\workspace\\iw8\\shared\\codware\\core\\core_assert.h", 385, ASSERT_TYPE_ASSERT, (const char *)&queryFormat.fmt + 3, "%s (SmallType) %s 0x%jx == (BigType) %s 0x%jx", "unsigned int __cdecl truncate_cast_impl<unsigned int,unsigned __int64>(unsigned __int64)", "unsigned", (unsigned int)v3, "unsigned", v3) )
    __debugbreak();
  dest[128] = 0;
  dest[(unsigned int)v3] = 0;
  v4 = v3 + 1;
  Instance = DWServicesAccess::GetInstance();
  Messaging = DWServicesAccess::GetMessaging(Instance, this->m_pendingInvitationController);
  UniversalId = XUID::GetUniversalId(&this->m_commonInviteData.m_xuidOfUserBeingJoinedOn);
  v8 = (TaskCreateRequest *)DWMessaging::sendGlobalInstantMessage(Messaging, &result, UniversalId, dest, v4);
  if ( v8 != (TaskCreateRequest *)&pTaskCreateRequest.m_remoteDemonwareTask )
  {
    if ( pTaskCreateRequest.m_remoteDemonwareTask.m_ptr && _InterlockedExchangeAdd((volatile signed __int32 *)&pTaskCreateRequest.m_remoteDemonwareTask.m_ptr->m_refCount, 0xFFFFFFFF) == 1 && pTaskCreateRequest.m_remoteDemonwareTask.m_ptr )
      ((void (__fastcall *)(bdRemoteTask *, __int64))pTaskCreateRequest.m_remoteDemonwareTask.m_ptr->~bdReferencable)(pTaskCreateRequest.m_remoteDemonwareTask.m_ptr, 1i64);
    v9 = *(bdRemoteTask **)&v8->m_controllerIndex;
    pTaskCreateRequest.m_remoteDemonwareTask.m_ptr = v9;
    if ( v9 )
      _InterlockedExchangeAdd((volatile signed __int32 *)&v9->m_refCount, 1u);
  }
  if ( result.m_ptr && _InterlockedExchangeAdd((volatile signed __int32 *)&result.m_ptr->m_refCount, 0xFFFFFFFF) == 1 && result.m_ptr )
    ((void (__fastcall *)(bdRemoteTask *, __int64))result.m_ptr->~bdReferencable)(result.m_ptr, 1i64);
  pTaskCreateResult.m_localTaskId = 0;
  pTaskCreateResult.m_task = NULL;
  pTaskCreateRequest.m_controllerIndex = this->m_pendingInvitationController;
  pTaskCreateRequest.m_appData = this;
  pTaskCreateRequest.m_onCompletionCallback = SendJoinInfoRequestComplete;
  v10 = TaskManager::GetInstance();
  if ( !TaskManager::CreateTask(v10, &pTaskCreateRequest, &pTaskCreateResult) )
  {
    Com_PrintError(25, "Online_InvitationManager::SendDWInvite failed\n");
    Com_SetErrorMessage("MENU/JOIN_SESSION_INVALID");
    OnlineErrorManager::SetLastRecordedErrorCode(&g_onlineMgr.m_errorManager, MOVEMENT, NULL);
    InvitationHSM_base::HSM_TriggerEvent(this, GET_JOIN_INFO_FAILED_COULD_NOT_START_TASK);
    InviteJoinHSM::CopyLocalizedErrorCodeFromErrorManager(this);
    this->m_lastStateBeforeError = InvitationHSM_base::HSM_GetCurrentState(this);
    this->m_lastEventTriggeredBeforeError = 42;
  }
  pTaskCreateRequest.m_onCompletionCallback = NULL;
  pTaskCreateRequest.m_onUpdateCallback = NULL;
  pTaskCreateRequest.m_appSecondaryCallback = NULL;
  pTaskCreateRequest.m_timeoutInSeconds = 0;
  m_asyncInfo = pTaskCreateRequest.m_asyncInfo;
  if ( pTaskCreateRequest.m_asyncInfo )
  {
    pTaskCreateRequest.m_asyncInfo->__abi_Release(pTaskCreateRequest.m_asyncInfo);
    m_asyncInfo = NULL;
    pTaskCreateRequest.m_asyncInfo = NULL;
  }
  if ( pTaskCreateRequest.m_remoteDemonwareTask.m_ptr )
  {
    if ( _InterlockedExchangeAdd((volatile signed __int32 *)&pTaskCreateRequest.m_remoteDemonwareTask.m_ptr->m_refCount, 0xFFFFFFFF) == 1 )
    {
      if ( pTaskCreateRequest.m_remoteDemonwareTask.m_ptr )
        ((void (__fastcall *)(bdRemoteTask *, __int64))pTaskCreateRequest.m_remoteDemonwareTask.m_ptr->~bdReferencable)(pTaskCreateRequest.m_remoteDemonwareTask.m_ptr, 1i64);
      pTaskCreateRequest.m_remoteDemonwareTask.m_ptr = NULL;
    }
    m_asyncInfo = pTaskCreateRequest.m_asyncInfo;
  }
  if ( m_asyncInfo )
    m_asyncInfo->__abi_Release(m_asyncInfo);
}

/*
==============
InviteJoinHSM::HandleHSMCallback_StartMainMenuFenceForAccountRegistration
==============
*/
void InviteJoinHSM::HandleHSMCallback_StartMainMenuFenceForAccountRegistration(InviteJoinHSM *this)
{
  Online_AccountRegistration *Instance; 
  LocalClientNum_t outLocalClientNum; 

  if ( this->m_pendingInvitationController == -1 && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\online\\invitejoinhsm_common.cpp", 719, ASSERT_TYPE_ASSERT, "(m_pendingInvitationController != (-1))", (const char *)&queryFormat, "m_pendingInvitationController != INVALID_CONTROLLER_PORT") )
    __debugbreak();
  if ( CL_Mgr_GetMode() == CLIENT_MANAGER_MODE_NO_CLIENTS )
    CL_Mgr_ActivateClient(LOCAL_CLIENT_0, this->m_pendingInvitationController);
  Instance = Online_AccountRegistration::GetInstance();
  if ( Online_AccountRegistration::IsRegistering(Instance) )
  {
    if ( CL_Mgr_IsControllerMappedToClient(this->m_pendingInvitationController, &outLocalClientNum) )
    {
      if ( !Live_InAreaThatHasParties() )
        PartyUI_OpenMenu(outLocalClientNum, AERIAL, 1);
    }
    else if ( CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\online\\invitejoinhsm_common.cpp", 739, ASSERT_TYPE_ASSERT, (const char *)&queryFormat.fmt + 3, "Could not find a client num for pending invitation controller") )
    {
      __debugbreak();
    }
  }
}

/*
==============
InviteJoinHSM::HandleHSMCallback_VerifyAccountRegistered
==============
*/
void InviteJoinHSM::HandleHSMCallback_VerifyAccountRegistered(InviteJoinHSM *this)
{
  Online_AccountRegistration *Instance; 

  Instance = Online_AccountRegistration::GetInstance();
  if ( Online_AccountRegistration::IsRegistering(Instance) )
  {
    InvitationHSM_base::HSM_TriggerEvent(this, WAIT_FOR_ACCOUNT_REGISTRATION);
    this->m_lastEventTriggeredBeforeError = 25;
  }
  else if ( this->m_shouldCheckIfExeIsReadyToProcessInviteJoinBeforeCheckOnlineServices )
  {
    InvitationHSM_base::HSM_TriggerEvent(this, CHECK_IF_EXE_IS_READY_TO_PROCESS_INVITE_JOIN);
    this->m_lastEventTriggeredBeforeError = 10;
  }
  else
  {
    InvitationHSM_base::HSM_TriggerEvent(this, INVITE_WAIT_FOR_USER_AUTH);
    this->m_lastEventTriggeredBeforeError = 11;
  }
  this->m_lastStateBeforeError = InvitationHSM_base::HSM_GetCurrentState(this);
}

/*
==============
InviteJoinHSM::HandleHSMCallback_VerifyInvitablePrivilege
==============
*/
void InviteJoinHSM::HandleHSMCallback_VerifyInvitablePrivilege(InviteJoinHSM *this)
{
  InvitationHSM_base::HSM_TriggerEvent(this, INVITABLE_PRIVILEGE_EXISTS);
  this->m_lastStateBeforeError = InvitationHSM_base::HSM_GetCurrentState(this);
  this->m_lastEventTriggeredBeforeError = 45;
}

/*
==============
InviteJoinHSM::HandleHSMCallback_WaitForCurrentApplicationSpecificJoinabilityChecks
==============
*/
void InviteJoinHSM::HandleHSMCallback_WaitForCurrentApplicationSpecificJoinabilityChecks(InviteJoinHSM *this)
{
  __int64 m_currentApplicationSpecificPreJoinCheck; 
  int v3; 
  XUID v4[4]; 
  __m256i v5; 

  XUID::XUID(&v4[1]);
  LODWORD(v4[0].m_id) = this->m_pendingInvitationController;
  XUID::operator=(&v4[1], &this->m_commonInviteData.m_xuidOfUserBeingJoinedOn);
  v4[2] = (XUID)this->m_joinInfoOfTheCurrentInviteJoinInProgress.tournamentId;
  LODWORD(v4[3].m_id) = this->m_initialDataTypeForJoining;
  if ( !this->m_applicationSpecificPreJoinChecks[this->m_currentApplicationSpecificPreJoinCheck].m_updateCallback && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\online\\invitejoinhsm_common.cpp", 1514, ASSERT_TYPE_ASSERT, "(m_applicationSpecificPreJoinChecks[m_currentApplicationSpecificPreJoinCheck].m_updateCallback)", (const char *)&queryFormat, "m_applicationSpecificPreJoinChecks[m_currentApplicationSpecificPreJoinCheck].m_updateCallback") )
    __debugbreak();
  m_currentApplicationSpecificPreJoinCheck = this->m_currentApplicationSpecificPreJoinCheck;
  v5 = *(__m256i *)&v4[0].m_id;
  v3 = ((__int64 (__fastcall *)(__m256i *))this->m_applicationSpecificPreJoinChecks[m_currentApplicationSpecificPreJoinCheck].m_updateCallback)(&v5);
  if ( v3 == 1 )
  {
    InvitationHSM_base::HSM_TriggerEvent(this, CURRENT_APPLICATION_SEPECIFIC_CHECK_DONE);
    this->m_lastStateBeforeError = InvitationHSM_base::HSM_GetCurrentState(this);
    this->m_lastEventTriggeredBeforeError = 51;
    return;
  }
  if ( v3 != 2 )
  {
    if ( v3 != 3 )
      return;
    this->m_inviteJoinResult = DODGE;
  }
  InvitationHSM_base::HSM_TriggerEvent(this, CURRENT_APPLICATION_SEPECIFIC_CHECK_FAILED);
  this->m_lastStateBeforeError = InvitationHSM_base::HSM_GetCurrentState(this);
  this->m_lastEventTriggeredBeforeError = 52;
}

/*
==============
InviteJoinHSM::HandleHSMCallback_WaitForUIReady
==============
*/
void InviteJoinHSM::HandleHSMCallback_WaitForUIReady(InviteJoinHSM *this)
{
  if ( this->m_uiReadyToProcessInviteJoins )
  {
    InvitationHSM_base::HSM_TriggerEvent(this, UI_READY);
    this->m_lastStateBeforeError = InvitationHSM_base::HSM_GetCurrentState(this);
    this->m_lastEventTriggeredBeforeError = 22;
  }
}

/*
==============
InviteJoinHSM::HandleHSMCallback_WaitingForDemonwareTimedout
==============
*/
void InviteJoinHSM::HandleHSMCallback_WaitingForDemonwareTimedout(InviteJoinHSM *this)
{
  OnlineErrorManager::SetLastRecordedErrorCode(&g_onlineMgr.m_errorManager, MOVEMENT, NULL);
  Com_SetErrorMessage((const char *)&stru_143DD5890);
  InviteJoinHSM::CopyLocalizedErrorCodeFromErrorManager(this);
}

/*
==============
InviteJoinHSM::HandleHSMCallback_WaitingForExeTimedout
==============
*/
void InviteJoinHSM::HandleHSMCallback_WaitingForExeTimedout(InviteJoinHSM *this)
{
  OnlineErrorManager::SetLastRecordedErrorCode(&g_onlineMgr.m_errorManager, MOVEMENT, NULL);
  Com_SetErrorMessage((const char *)&stru_143DD5890);
  InviteJoinHSM::CopyLocalizedErrorCodeFromErrorManager(this);
}

/*
==============
InviteJoinHSM::HandleInvalidPlatformSessionInfoError
==============
*/
void InviteJoinHSM::HandleInvalidPlatformSessionInfoError(InviteJoinHSM *this)
{
  Com_Printf(16, "HandleInvalidPlatformSessionInfoError\n");
  OnlineErrorManager::SetLastRecordedErrorCode(&g_onlineMgr.m_errorManager, MOVEMENT, NULL);
  Com_SetErrorMessage((const char *)&stru_143DD5890);
  InviteJoinHSM::CopyLocalizedErrorCodeFromErrorManager(this);
}

/*
==============
InviteJoinHSM::HandleInvitationCancelledByUser
==============
*/
void InviteJoinHSM::HandleInvitationCancelledByUser(InviteJoinHSM *this)
{
  Com_Printf(16, "Invite cancelled by user\n");
}

/*
==============
InviteJoinHSM::HandleInviteDialogAgainError
==============
*/
void InviteJoinHSM::HandleInviteDialogAgainError(InviteJoinHSM *this)
{
  Com_PrintError(25, "HandleInviteDialogAgainError - went from confirmation dialog back to that dialog, need to debug this!.\n");
  InvitationHSM_base::HSM_TriggerEvent(this, INVITE_GENERIC_ERROR_NO_MSG);
  this->m_lastStateBeforeError = InvitationHSM_base::HSM_GetCurrentState(this);
  this->m_lastEventTriggeredBeforeError = 1;
}

/*
==============
InviteJoinHSM::HandleMPPermissionRequiredError
==============
*/
void InviteJoinHSM::HandleMPPermissionRequiredError(InviteJoinHSM *this)
{
  Com_SetErrorMessage("XBOXLIVE/MPNOTALLOWED");
  InviteJoinHSM::CopyLocalizedErrorCodeFromErrorManager(this);
}

/*
==============
InviteJoinHSM::HandleMatchmakerSessionSearchFailedDueToBackoff
==============
*/
void InviteJoinHSM::HandleMatchmakerSessionSearchFailedDueToBackoff(InviteJoinHSM *this)
{
  Com_Printf(16, "HandleMatchmakerSessionSearchFailedDueToBackoff\n");
  OnlineErrorManager::SetLastRecordedErrorCode(&g_onlineMgr.m_errorManager, MOVEMENT, NULL);
  Com_SetErrorMessage((const char *)&stru_143DD5890);
  InviteJoinHSM::CopyLocalizedErrorCodeFromErrorManager(this);
}

/*
==============
InviteJoinHSM::HandlePartyJoinAttemptAborted
==============
*/
void InviteJoinHSM::HandlePartyJoinAttemptAborted(InviteJoinHSM *this)
{
  const dvar_t *v1; 

  v1 = DVARBOOL_online_invite_hsm_should_cancel_on_handle_party_join_aborts;
  if ( !DVARBOOL_online_invite_hsm_should_cancel_on_handle_party_join_aborts && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\universal\\dvar.h", 692, ASSERT_TYPE_ASSERT, "(dvar)", "%s\n\tDvar %s accessed after deregistration", "dvar", "online_invite_hsm_should_cancel_on_handle_party_join_aborts") )
    __debugbreak();
  Dvar_CheckFrontendServerThread(v1);
  if ( v1->current.enabled && InvitationHSM_base::HSM_GetCurrentState(this) == st_waiting_for_join_approved )
  {
    OnlineErrorManager::SetLastRecordedErrorCode(&g_onlineMgr.m_errorManager, (Online_Error_CAT_INVITE2_t)256, NULL);
    this->m_inviteJoinResult = 4;
    InvitationHSM_base::HSM_TriggerEvent(this, PARTY_JOIN_FAILED);
    InviteJoinHSM::CopyLocalizedErrorCodeFromErrorManager(this);
    this->m_lastStateBeforeError = InvitationHSM_base::HSM_GetCurrentState(this);
    this->m_lastEventTriggeredBeforeError = 77;
  }
}

/*
==============
InviteJoinHSM::HandlePartyJoinComplete
==============
*/
void InviteJoinHSM::HandlePartyJoinComplete(InviteJoinHSM *this)
{
  this->m_inviteJoinResult = 5;
  if ( Online_Telemetry_IsOnlineCommunicationTelemetryEnabled() )
    Online_Telemetry_SendCommunicationEvent(this->m_pendingInvitationController, this->m_commonInviteData.m_xuidOfUserBeingJoinedOn, INVITE_JOIN_COMPLETE, NULL);
  InvitationHSM_base::HSM_TriggerEvent(this, PARTY_JOIN_COMPLETE);
  this->m_lastStateBeforeError = InvitationHSM_base::HSM_GetCurrentState(this);
  this->m_lastEventTriggeredBeforeError = 79;
}

/*
==============
InviteJoinHSM::HandlePartyJoinFail
==============
*/
void InviteJoinHSM::HandlePartyJoinFail(InviteJoinHSM *this)
{
  InvitationHSM_base::HSM_TriggerEvent(this, PARTY_JOIN_FAILED);
  this->m_lastStateBeforeError = InvitationHSM_base::HSM_GetCurrentState(this);
  this->m_lastEventTriggeredBeforeError = 77;
}

/*
==============
InviteJoinHSM::HandlePartyJoinNotApprovedByMatchMakerError
==============
*/
void InviteJoinHSM::HandlePartyJoinNotApprovedByMatchMakerError(InviteJoinHSM *this, PartyJoinInfo *partyJoinInfo)
{
  const dvar_t *v2; 
  PartyDisconnectReason v5; 

  v2 = DVARINT_invite_hsm_matchmaker_session_attempts_max_count;
  if ( !DVARINT_invite_hsm_matchmaker_session_attempts_max_count && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\universal\\dvar.h", 699, ASSERT_TYPE_ASSERT, "(dvar)", "%s\n\tDvar %s accessed after deregistration", "dvar", "invite_hsm_matchmaker_session_attempts_max_count") )
    __debugbreak();
  Dvar_CheckFrontendServerThread(v2);
  if ( this->m_sessionSearchAttemptCount < v2->current.integer )
  {
    InvitationHSM_base::HSM_TriggerEvent(this, SESSION_SEARCH_SUGGESTED);
    this->m_lastStateBeforeError = InvitationHSM_base::HSM_GetCurrentState(this);
    this->m_lastEventTriggeredBeforeError = 78;
    this->m_performSessionSearchDueToJoinError = 1;
  }
  else
  {
    Com_Printf(16, "HandlePartyJoinNotApprovedByMatchMakerError - Retries expired, failing\n");
    OnlineErrorManager::SetLastRecordedErrorCode(&g_onlineMgr.m_errorManager, MOVEMENT, NULL);
    LOBYTE(v5) = 41;
    PartyAtomic_JoinAttemptFailed(partyJoinInfo, (const char *)&stru_143DD5890, v5);
    InviteJoinHSM::CopyLocalizedErrorCodeFromErrorManager(this);
  }
}

/*
==============
InviteJoinHSM::HandlePartyJoinRequestDenied
==============
*/
void InviteJoinHSM::HandlePartyJoinRequestDenied(InviteJoinHSM *this)
{
  OnlineErrorManager::SetLastRecordedErrorCode(&g_onlineMgr.m_errorManager, (Online_Error_CAT_INVITE2_t)128, NULL);
  InvitationHSM_base::HSM_TriggerEvent(this, PARTY_JOIN_FAILED);
  this->m_lastStateBeforeError = InvitationHSM_base::HSM_GetCurrentState(this);
  this->m_lastEventTriggeredBeforeError = 77;
}

/*
==============
InviteJoinHSM::HandlePartyJoinStart
==============
*/
void InviteJoinHSM::HandlePartyJoinStart(InviteJoinHSM *this)
{
  InvitationHSM_base::HSM_TriggerEvent(this, PARTY_JOIN_START);
  this->m_lastStateBeforeError = InvitationHSM_base::HSM_GetCurrentState(this);
  this->m_lastEventTriggeredBeforeError = 76;
}

/*
==============
InviteJoinHSM::HandlePermissionsCheckTimeout
==============
*/
void InviteJoinHSM::HandlePermissionsCheckTimeout(InviteJoinHSM *this)
{
  Com_Printf(16, "HandlePermissionsCheckTimeout\n");
  OnlineErrorManager::SetLastRecordedErrorCode(&g_onlineMgr.m_errorManager, MOVEMENT, NULL);
  Com_SetErrorMessage((const char *)&stru_143DD5890);
  InviteJoinHSM::CopyLocalizedErrorCodeFromErrorManager(this);
}

/*
==============
InviteJoinHSM::HandleProcessingTimeout
==============
*/
void InviteJoinHSM::HandleProcessingTimeout(InviteJoinHSM *this)
{
  Com_Printf(16, "HandleProcessingTimeout Timed out\n");
  OnlineErrorManager::SetLastRecordedErrorCode(&g_onlineMgr.m_errorManager, MOVEMENT, NULL);
  Com_SetErrorMessage((const char *)&stru_143DD5890);
  InviteJoinHSM::CopyLocalizedErrorCodeFromErrorManager(this);
}

/*
==============
InviteJoinHSM::HandleResolveInviterUniversalIdFailed
==============
*/
void InviteJoinHSM::HandleResolveInviterUniversalIdFailed(InviteJoinHSM *this)
{
  Com_PrintError(16, "%s\n", "InviteJoinHSM::HandleResolveInviterUniversalIdFailed");
  OnlineErrorManager::SetLastRecordedErrorCode(&g_onlineMgr.m_errorManager, MOVEMENT, NULL);
  Com_SetErrorMessage((const char *)&stru_143DD5890);
  InviteJoinHSM::CopyLocalizedErrorCodeFromErrorManager(this);
}

/*
==============
InviteJoinHSM::HandleResolveInviterUniversalIdTimeout
==============
*/
void InviteJoinHSM::HandleResolveInviterUniversalIdTimeout(InviteJoinHSM *this)
{
  Com_PrintError(16, "%s\n", "InviteJoinHSM::HandleResolveInviterUniversalIdTimeout");
  OnlineErrorManager::SetLastRecordedErrorCode(&g_onlineMgr.m_errorManager, DODGE, NULL);
  Com_SetErrorMessage((const char *)&stru_143DD5890);
  InviteJoinHSM::CopyLocalizedErrorCodeFromErrorManager(this);
}

/*
==============
InviteJoinHSM::HandleSessionSearchCompleteAlreadyInLobby
==============
*/
void InviteJoinHSM::HandleSessionSearchCompleteAlreadyInLobby(InviteJoinHSM *this)
{
  const char *AddressString; 

  Com_Printf(25, "InviteJoinHSM::HandleSessionSearchCompleteAlreadyInLobby \n");
  if ( Online_Telemetry_IsOnlineCommunicationTelemetryEnabled() )
    Online_Telemetry_SendCommunicationEvent(this->m_pendingInvitationController, this->m_commonInviteData.m_xuidOfUserBeingJoinedOn, INVITE_JOIN_SESSION_SEARCH_ALREADY_IN_LOBBY, NULL);
  if ( this->m_initialDataTypeForJoining )
  {
    if ( !this->m_commonInviteData.lobbyid && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\online\\invitejoinhsm_common.cpp", 1401, ASSERT_TYPE_ASSERT, "(m_commonInviteData.lobbyid)", (const char *)&queryFormat, "m_commonInviteData.lobbyid") )
      __debugbreak();
    InvitationHSM_base::HSM_TriggerEvent(this, SESSION_SEARCH_GET_HOST_INFO_FOR_LOBBY_FROM_MATCHMAKER);
    this->m_lastStateBeforeError = InvitationHSM_base::HSM_GetCurrentState(this);
    this->m_lastEventTriggeredBeforeError = 70;
  }
  else
  {
    AddressString = XSESSION_INFO::GetAddressString(&this->m_joinInfoOfTheCurrentInviteJoinInProgress.communicationInfo.session);
    Com_Printf(25, "InviteJoinHSM::HandleSessionSearchCompleteAlreadyInLobby going to join with the joini info we already have %s\n", AddressString);
    this->m_commonInviteData.lobbyid = this->m_joinInfoOfTheCurrentInviteJoinInProgress.matchmakingLobbyId;
    InviteJoinHSM::HandleSessionSearchCompleteContinueWithCurrentJoinInfo(this);
  }
}

/*
==============
InviteJoinHSM::HandleSessionSearchCompleteContinueWithCurrentJoinInfo
==============
*/
void InviteJoinHSM::HandleSessionSearchCompleteContinueWithCurrentJoinInfo(InviteJoinHSM *this)
{
  const dvar_t *v2; 

  if ( InvitationHSM_base::HSM_IsInState(this, st_match_maker_lobby_search) )
  {
    if ( this->m_matchmakerStartBackOffRequested )
    {
      Com_Printf(25, "HandleSessionSearchCompleteContinueWithCurrentJoinInfo: m_matchmakerStartBackOffRequested is set");
      v2 = DVARINT_invite_hsm_matchmaker_session_attempts_max_count;
      if ( !DVARINT_invite_hsm_matchmaker_session_attempts_max_count && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\universal\\dvar.h", 699, ASSERT_TYPE_ASSERT, "(dvar)", "%s\n\tDvar %s accessed after deregistration", "dvar", "invite_hsm_matchmaker_session_attempts_max_count") )
        __debugbreak();
      Dvar_CheckFrontendServerThread(v2);
      if ( this->m_sessionSearchAttemptCount < v2->current.integer )
      {
        if ( Online_Telemetry_IsOnlineCommunicationTelemetryEnabled() )
          Online_Telemetry_SendCommunicationEvent(this->m_pendingInvitationController, this->m_commonInviteData.m_xuidOfUserBeingJoinedOn, INVITE_JOIN_SESSION_SEARCH_CONTINUE_WITH_JOIN_INFO_BACKOFF, NULL);
        this->m_matchmakerStartBackOffRequested = 0;
        InvitationHSM_base::HSM_TriggerEvent(this, SESSION_SEARCH_WAIT_AND_RETRY);
        Com_Printf(16, "HandleSessionSearchCompleteContinueWithCurrentJoinInfo - Retrying\n");
        this->m_lastStateBeforeError = InvitationHSM_base::HSM_GetCurrentState(this);
        this->m_lastEventTriggeredBeforeError = 68;
      }
      else
      {
        Com_Printf(16, "HandleSessionSearchCompleteContinueWithCurrentJoinInfo - Retries expired, failing\n");
        InvitationHSM_base::HSM_TriggerEvent(this, SESSION_SEARCH_FAILED_DUE_TO_BACKOFF);
        this->m_lastStateBeforeError = InvitationHSM_base::HSM_GetCurrentState(this);
        this->m_lastEventTriggeredBeforeError = 69;
      }
    }
    else
    {
      if ( Online_Telemetry_IsOnlineCommunicationTelemetryEnabled() )
        Online_Telemetry_SendCommunicationEvent(this->m_pendingInvitationController, this->m_commonInviteData.m_xuidOfUserBeingJoinedOn, INVITE_JOIN_SESSION_SEARCH_CONTINUE_WITH_JOIN_INFO, NULL);
      InvitationHSM_base::HSM_TriggerEvent(this, SESSION_SEARCH_COMPLETE_PERFORM_PARTY_JOIN);
      this->m_lastStateBeforeError = InvitationHSM_base::HSM_GetCurrentState(this);
      this->m_lastEventTriggeredBeforeError = 65;
    }
  }
  else
  {
    if ( (InvitationHSM_base::HSM_IsInState(this, st_processing_invite) || InvitationHSM_base::HSM_IsInState(this, st_preparing_users_for_processing_invite)) && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\online\\invitejoinhsm_common.cpp", 1328, ASSERT_TYPE_ASSERT, "(!IsHSMHandlingInvitation())", "%s\n\tHandleSessionSearchCompleteContinueWithCurrentJoinInfo called while accepting invitation but not searching for a session", "!IsHSMHandlingInvitation()") )
      __debugbreak();
    Com_Printf(25, "HandleSessionSearchCompleteContinueWithCurrentJoinInfo called, but we are not in a session search state\n");
  }
}

/*
==============
InviteJoinHSM::HandleSessionSearchCompleteLobbyFound
==============
*/
void InviteJoinHSM::HandleSessionSearchCompleteLobbyFound(InviteJoinHSM *this, const XSESSION_INFO *hostInfo, const unsigned __int64 lobbyId)
{
  char dest[256]; 

  if ( InvitationHSM_base::HSM_IsInState(this, st_match_maker_lobby_search) )
  {
    XSESSION_INFO::operator=(&this->m_joinInfoOfTheCurrentInviteJoinInProgress.communicationInfo.session, hostInfo);
    this->m_commonInviteData.lobbyid = lobbyId;
    if ( !lobbyId && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\online\\invitejoinhsm_common.cpp", 1306, ASSERT_TYPE_ASSERT, "(m_commonInviteData.lobbyid)", (const char *)&queryFormat, "m_commonInviteData.lobbyid") )
      __debugbreak();
    if ( Online_Telemetry_IsOnlineCommunicationTelemetryEnabled() )
    {
      Com_sprintf(dest, 0x100ui64, "%llu", lobbyId);
      Online_Telemetry_SendCommunicationEvent(this->m_pendingInvitationController, this->m_commonInviteData.m_xuidOfUserBeingJoinedOn, INVITE_JOIN_SESSION_SEARCH_LOBBY_FOUND, dest);
    }
    InvitationHSM_base::HSM_TriggerEvent(this, SESSION_SEARCH_COMPLETE_PERFORM_PARTY_JOIN);
    this->m_lastStateBeforeError = InvitationHSM_base::HSM_GetCurrentState(this);
    this->m_lastEventTriggeredBeforeError = 65;
  }
  else
  {
    if ( (InvitationHSM_base::HSM_IsInState(this, st_processing_invite) || InvitationHSM_base::HSM_IsInState(this, st_preparing_users_for_processing_invite)) && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\online\\invitejoinhsm_common.cpp", 1295, ASSERT_TYPE_ASSERT, "(!IsHSMHandlingInvitation())", "%s\n\tHandleSessionSearchCompleteLobbyFound called while accepting invitation but not searching for a session", "!IsHSMHandlingInvitation()") )
      __debugbreak();
    Com_Printf(25, "HandleSessionSearchCompleteLobbyFound called, but we are not in a session search state\n");
  }
}

/*
==============
InviteJoinHSM::HandleSessionSearchCompleteLobbyNotFound
==============
*/
void InviteJoinHSM::HandleSessionSearchCompleteLobbyNotFound(InviteJoinHSM *this)
{
  Com_Printf(25, "InviteJoinHSM::HandleSessionSearchCompleteLobbyNotFound\n");
  if ( Online_Telemetry_IsOnlineCommunicationTelemetryEnabled() )
    Online_Telemetry_SendCommunicationEvent(this->m_pendingInvitationController, this->m_commonInviteData.m_xuidOfUserBeingJoinedOn, INVITE_JOIN_SESSION_SEARCH_LOBBY_NOT_FOUND, NULL);
  if ( this->m_initialDataTypeForJoining == LOBBY_ID )
  {
    Com_PrintError(25, "InviteJoinHSM::HandleSessionSearchCompleteLobbyNotFound We did not find the session for the lobby we were searching for\n");
    Com_SetErrorMessage((const char *)&stru_143DD5890);
    OnlineErrorManager::SetLastRecordedErrorCode(&g_onlineMgr.m_errorManager, (Online_Error_CAT_INVITE2_t)512, NULL);
    InvitationHSM_base::HSM_TriggerEvent(this, SESSION_SEARCH_NO_LOBBY_FOUND_WHEN_SEARCHING_WITH_LOBBY_ID);
  }
  else
  {
    Com_Printf(25, "InviteJoinHSM::HandleSessionSearchCompleteLobbyNotFound Going to join with the info we already have\n");
    InviteJoinHSM::HandleSessionSearchCompleteContinueWithCurrentJoinInfo(this);
  }
}

/*
==============
InviteJoinHSM::HandleSessionSearchRefused
==============
*/
void InviteJoinHSM::HandleSessionSearchRefused(InviteJoinHSM *this, const char *errorMessage)
{
  Com_SetErrorMessage(errorMessage);
  InvitationHSM_base::HSM_TriggerEvent(this, SESSION_SEARCH_REFUSED);
  InviteJoinHSM::CopyLocalizedErrorCodeFromErrorManager(this);
  this->m_lastStateBeforeError = InvitationHSM_base::HSM_GetCurrentState(this);
  this->m_lastEventTriggeredBeforeError = 66;
}

/*
==============
InviteJoinHSM::HandleSessionSearchTimeout
==============
*/
void InviteJoinHSM::HandleSessionSearchTimeout(InviteJoinHSM *this)
{
  Com_Printf(16, "HandleSessionSearchTimedOut Timed out\n");
  OnlineErrorManager::SetLastRecordedErrorCode(&g_onlineMgr.m_errorManager, (Online_Error_CAT_INVITE_t)0x400000, NULL);
  Com_SetErrorMessage((const char *)&stru_143DD5890);
  InviteJoinHSM::CopyLocalizedErrorCodeFromErrorManager(this);
}

/*
==============
InviteJoinHSM::HandleSubscriptionRequiredError
==============
*/
void InviteJoinHSM::HandleSubscriptionRequiredError(InviteJoinHSM *this)
{
  Com_Printf(16, "HandleSubscriptionRequiredError\n");
  Com_SetErrorMessage("PLATFORM/PSPLUS_REQUIRED");
  InviteJoinHSM::CopyLocalizedErrorCodeFromErrorManager(this);
}

/*
==============
InviteJoinHSM::HandleTURequiredError
==============
*/
void InviteJoinHSM::HandleTURequiredError(InviteJoinHSM *this)
{
  Com_SetErrorMessage("PLATFORM/TU_REQUIRED");
  InviteJoinHSM::CopyLocalizedErrorCodeFromErrorManager(this);
}

/*
==============
InviteJoinHSM::Handle_CancelInvitationAfterAccountRegistrationCancel
==============
*/
void InviteJoinHSM::Handle_CancelInvitationAfterAccountRegistrationCancel(InviteJoinHSM *this)
{
  if ( InvitationHSM_base::HSM_IsInState(this, st_processing_invite) || InvitationHSM_base::HSM_IsInState(this, st_preparing_users_for_processing_invite) )
  {
    InvitationHSM_base::HSM_TriggerEvent(this, ACCOUNT_REGISTRATION_CANCELLED);
    this->m_lastStateBeforeError = InvitationHSM_base::HSM_GetCurrentState(this);
    this->m_lastEventTriggeredBeforeError = 26;
  }
  else
  {
    Com_Printf(25, "InviteJoinHSM::Handle_CancelInvitationAfterAccountRegistrationCancel() was called but we are not handling an invitation\n");
  }
}

/*
==============
InviteJoinHSM::Handle_CancelInvitationAfterEulaDecline
==============
*/
void InviteJoinHSM::Handle_CancelInvitationAfterEulaDecline(InviteJoinHSM *this)
{
  InvitationHSM_base::HSM_TriggerEvent(this, EULA_DECLINED);
  this->m_lastStateBeforeError = InvitationHSM_base::HSM_GetCurrentState(this);
  this->m_lastEventTriggeredBeforeError = 24;
}

/*
==============
InviteJoinHSM::Handle_ConfirmInvitation
==============
*/
void InviteJoinHSM::Handle_ConfirmInvitation(InviteJoinHSM *this)
{
  InvitationHSM_base::HSM_TriggerEvent(this, INVITE_CONFIRMED);
  this->m_lastStateBeforeError = InvitationHSM_base::HSM_GetCurrentState(this);
  this->m_lastEventTriggeredBeforeError = 47;
}

/*
==============
InviteJoinHSM::Handle_StartConfirmAcceptInvitation
==============
*/
void InviteJoinHSM::Handle_StartConfirmAcceptInvitation(InviteJoinHSM *this)
{
  InvitationHSM_base::HSM_TriggerEvent(this, INVITE_JOIN_ACCEPTED_START_FENCE);
  this->m_lastStateBeforeError = InvitationHSM_base::HSM_GetCurrentState(this);
  this->m_lastEventTriggeredBeforeError = 57;
}

/*
==============
InviteJoinHSM::Handle_UserCancelInvitation
==============
*/
void InviteJoinHSM::Handle_UserCancelInvitation(InviteJoinHSM *this)
{
  InvitationHSM_base::HSM_TriggerEvent(this, USER_CANCEL_INVITATION);
  this->m_lastStateBeforeError = InvitationHSM_base::HSM_GetCurrentState(this);
  this->m_lastEventTriggeredBeforeError = 12;
}

/*
==============
InviteJoinHSM::Handle_UserDeclineInvitation
==============
*/
void InviteJoinHSM::Handle_UserDeclineInvitation(InviteJoinHSM *this)
{
  InvitationHSM_base::HSM_TriggerEvent(this, USER_DECLINE_INVITATION);
  this->m_lastStateBeforeError = InvitationHSM_base::HSM_GetCurrentState(this);
  this->m_lastEventTriggeredBeforeError = 13;
}

/*
==============
InviteJoinHSM::Handle_WaitingForConfirmAcceptInvitationDialog
==============
*/
void InviteJoinHSM::Handle_WaitingForConfirmAcceptInvitationDialog(InviteJoinHSM *this)
{
  InvitationHSM_base::HSM_TriggerEvent(this, INVITE_JOIN_WAITING_FOR_WARNING_DIALOG);
  this->m_lastStateBeforeError = InvitationHSM_base::HSM_GetCurrentState(this);
  this->m_lastEventTriggeredBeforeError = 58;
}

/*
==============
InviteJoinHSM::HasStartedJoinProcess
==============
*/
bool InviteJoinHSM::HasStartedJoinProcess(InviteJoinHSM *this)
{
  return InvitationHSM_base::HSM_IsInState(this, st_performing_join);
}

/*
==============
InviteJoinHSM::HaveJoinInfo
==============
*/
bool InviteJoinHSM::HaveJoinInfo(InviteJoinHSM *this)
{
  return XSESSION_INFO::IsValidSessionId(&this->m_joinInfoOfTheCurrentInviteJoinInProgress.communicationInfo.session);
}

/*
==============
InviteJoinHSM::Initialize
==============
*/
void InviteJoinHSM::Initialize(InviteJoinHSM *this)
{
  if ( !this->m_hasBeenInitialized )
  {
    InvitationHSM_base::HSM_Init(this);
    this->m_hasBeenInitialized = 1;
  }
}

/*
==============
InviteJoinHSM::InviteAcceptFenceUpdate
==============
*/
void InviteJoinHSM::InviteAcceptFenceUpdate(InviteJoinHSM *this)
{
  CmdText *v2; 
  int v3; 
  __int64 cmdsize; 
  int v5; 
  scrContext_t *v6; 
  int v7; 
  connstate_t *p_connectionState; 
  __int64 v9; 
  __int64 v10; 
  __int64 v11; 
  __int64 v12; 

  this->m_didWeComErrorDuringUpdate = 0;
  if ( !Live_InLoadingScreen() && !Com_ErrorEntered() && !Com_GameStart_IsActive() )
  {
    if ( Com_IsGameLocalServerRunning() && Dvar_GetBool_Internal_DebugName(DVARBOOL_onlinegame, "onlinegame") && !Dvar_GetBool_Internal_DebugName(DVARBOOL_xblive_privatematch, "xblive_privatematch") && Live_InAreaThatHasParties() )
    {
      if ( !SV_IsMigrating() )
      {
        v2 = &s_cmd_textArray[CL_Mgr_GetClientFromController(this->m_pendingInvitationController)];
        if ( !v2 && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\qcommon\\cmd.h", 329, ASSERT_TYPE_ASSERT, "(cmd_text)", (const char *)&queryFormat, "cmd_text") )
          __debugbreak();
        Sys_EnterCriticalSection(CRITSECT_CBUF);
        v3 = strlen_noncrt("hostmigration_start\n");
        cmdsize = v2->cmdsize;
        v5 = v3;
        if ( (int)cmdsize + v3 < v2->maxsize )
        {
          memcpy_noncrt(&v2->data[cmdsize], "hostmigration_start\n", v3 + 1);
          v2->cmdsize += v5;
          v6 = ScriptContext_Server();
          Scr_MonitorCommand(v6, "hostmigration_start\n");
        }
        else
        {
          Com_Printf(16, "Cbuf_AddText: overflow (adding '%s')\n", "hostmigration_start\n");
        }
        Sys_LeaveCriticalSection(CRITSECT_CBUF);
      }
    }
    else
    {
      v7 = 0;
      p_connectionState = &clientUIActives[0].connectionState;
      do
      {
        if ( (unsigned int)v7 >= 2 )
        {
          LODWORD(v11) = 2;
          LODWORD(v9) = v7;
          if ( CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\client\\cl_ui_active_client.h", 182, ASSERT_TYPE_ASSERT, "(unsigned)( localClientNum ) < (unsigned)( 2 )", "localClientNum doesn't index STATIC_MAX_LOCAL_CLIENTS\n\t%i not in [0, %i)", v9, v11) )
            __debugbreak();
          LODWORD(v12) = 2;
          LODWORD(v10) = v7;
          if ( CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\client\\cl_ui_active_client.h", 165, ASSERT_TYPE_ASSERT, "(unsigned)( localClientNum ) < (unsigned)( 2 )", "localClientNum doesn't index STATIC_MAX_LOCAL_CLIENTS\n\t%i not in [0, %i)", v10, v12) )
            __debugbreak();
        }
        if ( !*((_BYTE *)p_connectionState + 28) )
        {
          if ( (unsigned int)v7 >= 2 )
          {
            LODWORD(v11) = 2;
            LODWORD(v9) = v7;
            if ( CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\client\\cl_ui_active_client.h", 174, ASSERT_TYPE_ASSERT, "(unsigned)( localClientNum ) < (unsigned)( 2 )", "localClientNum doesn't index STATIC_MAX_LOCAL_CLIENTS\n\t%i not in [0, %i)", v9, v11) )
              __debugbreak();
          }
          if ( *p_connectionState )
          {
            this->m_didWeDoADisconnectFromServerToJoinSomeone = 1;
            CL_Main_DisconnectLocalClient((LocalClientNum_t)v7, 0);
          }
        }
        ++v7;
        p_connectionState += 110;
      }
      while ( v7 <= 1 );
      if ( this->m_shouldCheckIfExeIsReadyToProcessInviteJoinBeforeCheckOnlineServices )
      {
        this->m_shouldCheckIfExeIsReadyToProcessInviteJoinBeforeCheckOnlineServices = 0;
        Com_Printf(25, "InviteAcceptFenceUpdate complete, since m_shouldCheckIfExeIsReadyToProcessInviteJoinBeforeCheckOnlineServices was set to true, we need to restart the online services check\n");
        InvitationHSM_base::HSM_TriggerEvent(this, EXE_READY_TO_JOIN_CHECK_ONLINE_SERVICES);
        this->m_lastStateBeforeError = InvitationHSM_base::HSM_GetCurrentState(this);
        this->m_lastEventTriggeredBeforeError = 55;
      }
      else
      {
        InvitationHSM_base::HSM_TriggerEvent(this, EXE_READY_TO_JOIN_START_JOIN);
        this->m_lastStateBeforeError = InvitationHSM_base::HSM_GetCurrentState(this);
        this->m_lastEventTriggeredBeforeError = 54;
      }
    }
  }
}

/*
==============
InviteJoinHSM::InviteHSMUpdate
==============
*/
void InviteJoinHSM::InviteHSMUpdate(InviteJoinHSM *this, int dt)
{
  bool v4; 
  const dvar_t *v5; 

  if ( this->m_didWeComErrorDuringUpdate && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\online\\invitejoinhsm_common.cpp", 218, ASSERT_TYPE_ASSERT, "(!m_didWeComErrorDuringUpdate)", (const char *)&queryFormat, "!m_didWeComErrorDuringUpdate") )
    __debugbreak();
  this->m_didWeComErrorDuringUpdate = 1;
  if ( InvitationHSM_base::HSM_GetCurrentState(this) == st_generic_com_error_next_frame_with_msg )
  {
    InvitationHSM_base::HSM_TriggerEvent(this, COM_ERROR_TRIGGERED);
    InvitationHSM_base::HSM_Update(this, dt);
    this->m_didWeComErrorDuringUpdate = 0;
    if ( Com_FrontEnd_IsInFrontEnd() )
      Live_ConfirmAcceptInvitation_Error("@XBOXLIVE/CANTJOINSESSION");
    else
      Live_ThrowError(ERR_DROP, (const char *)&stru_143DD5890);
  }
  else
  {
    InvitationHSM_base::HSM_Update(this, dt);
    this->m_didWeComErrorDuringUpdate = 0;
  }
  v4 = !this->m_applicationDidSuspendResume;
  this->m_didWeDoADisconnectFromServerToJoinSomeone = 0;
  if ( !v4 )
  {
    ++this->m_framesSinceSuspendResumedFlagWasSet;
    v5 = DVARINT_online_invite_hsm_frames_to_wait_before_clearing_suspend_resumed_flag;
    if ( !DVARINT_online_invite_hsm_frames_to_wait_before_clearing_suspend_resumed_flag && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\universal\\dvar.h", 699, ASSERT_TYPE_ASSERT, "(dvar)", "%s\n\tDvar %s accessed after deregistration", "dvar", "online_invite_hsm_frames_to_wait_before_clearing_suspend_resumed_flag") )
      __debugbreak();
    Dvar_CheckFrontendServerThread(v5);
    if ( this->m_framesSinceSuspendResumedFlagWasSet > v5->current.integer )
    {
      this->m_framesSinceSuspendResumedFlagWasSet = 0;
      this->m_applicationDidSuspendResume = 0;
    }
  }
}

/*
==============
InviteJoinHSM::InviteJoinPreRequisitesCheckUpdate
==============
*/
void InviteJoinHSM::InviteJoinPreRequisitesCheckUpdate(InviteJoinHSM *this)
{
  const dvar_t *v1; 
  const dvar_t *v3; 
  int CurrentState; 
  const dvar_t *v5; 
  int v6; 

  this->m_didWeComErrorDuringUpdate = 0;
  v1 = DVARBOOL_online_invite_hsm_should_activate_initial_client_if_not_active;
  if ( !DVARBOOL_online_invite_hsm_should_activate_initial_client_if_not_active && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\universal\\dvar.h", 692, ASSERT_TYPE_ASSERT, "(dvar)", "%s\n\tDvar %s accessed after deregistration", "dvar", "online_invite_hsm_should_activate_initial_client_if_not_active") )
    __debugbreak();
  Dvar_CheckFrontendServerThread(v1);
  if ( v1->current.enabled && CL_Mgr_GetMode() == CLIENT_MANAGER_MODE_NO_CLIENTS && !this->m_didWeRestartJoinBecauseLocalClientBecameInactive )
  {
    this->m_didWeRestartJoinBecauseLocalClientBecameInactive = 1;
    InvitationHSM_base::HSM_TriggerEvent(this, INITIAL_LOCAL_CLIENT_ACTIVE_FENCE_FAILED);
  }
  v3 = DVARBOOL_online_invite_join_should_validate_controller_index_for_atomic_join_fence;
  if ( !DVARBOOL_online_invite_join_should_validate_controller_index_for_atomic_join_fence && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\universal\\dvar.h", 692, ASSERT_TYPE_ASSERT, "(dvar)", "%s\n\tDvar %s accessed after deregistration", "dvar", "online_invite_join_should_validate_controller_index_for_atomic_join_fence") )
    __debugbreak();
  Dvar_CheckFrontendServerThread(v3);
  if ( v3->current.enabled && this->m_pendingInvitationController > 7u )
  {
    OnlineErrorManager::SetLastRecordedErrorCode(&g_onlineMgr.m_errorManager, (Online_Error_CAT_INVITE_t)0x2000000, NULL);
    Com_SetErrorMessage("XBOXLIVE/CANT_DETERMINE_CONTROLLER");
    InvitationHSM_base::HSM_TriggerEvent(this, INVITE_GENERIC_ERROR_NO_MSG);
    CurrentState = InvitationHSM_base::HSM_GetCurrentState(this);
    this->m_lastEventTriggeredBeforeError = 1;
LABEL_21:
    this->m_lastStateBeforeError = CurrentState;
    return;
  }
  if ( !Live_InviteProcessingSessionSearchAndGameModeCheckFencePassedFrame(this->m_pendingInvitationController) )
    return;
  if ( !this->m_joinInfoOfTheCurrentInviteJoinInProgress.isInMatchmakingArea )
  {
    InvitationHSM_base::HSM_TriggerEvent(this, INVITE_JOIN_PRE_REQUISITES_PASSED_START_PARTY_JOIN);
    CurrentState = InvitationHSM_base::HSM_GetCurrentState(this);
    this->m_lastEventTriggeredBeforeError = 63;
    goto LABEL_21;
  }
  v5 = DVARBOOL_online_should_force_skip_session_search_on_initial_join_attempt;
  if ( !DVARBOOL_online_should_force_skip_session_search_on_initial_join_attempt && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\universal\\dvar.h", 692, ASSERT_TYPE_ASSERT, "(dvar)", "%s\n\tDvar %s accessed after deregistration", "dvar", "online_should_force_skip_session_search_on_initial_join_attempt") )
    __debugbreak();
  Dvar_CheckFrontendServerThread(v5);
  v6 = v5->current.enabled + 62;
  InvitationHSM_base::HSM_TriggerEvent(this, (InvitationHSM_base::eHSMEvents)v6);
  this->m_lastStateBeforeError = InvitationHSM_base::HSM_GetCurrentState(this);
  this->m_lastEventTriggeredBeforeError = v6;
}

/*
==============
InviteJoinHSM::InviteWaitingForEULA
==============
*/
void InviteJoinHSM::InviteWaitingForEULA(InviteJoinHSM *this)
{
  if ( Live_HasCompletedFirstBootFlow() )
  {
    InvitationHSM_base::HSM_TriggerEvent(this, EULA_VERIFIED);
    this->m_lastStateBeforeError = InvitationHSM_base::HSM_GetCurrentState(this);
    this->m_lastEventTriggeredBeforeError = 9;
  }
}

/*
==============
InviteJoinHSM::InviteePermissionsCheckUpdate
==============
*/
void InviteJoinHSM::InviteePermissionsCheckUpdate(InviteJoinHSM *this)
{
  InvitationHSM_base::HSM_TriggerEvent(this, INVITE_PERMISSIONS_PASSED);
  this->m_lastStateBeforeError = InvitationHSM_base::HSM_GetCurrentState(this);
  this->m_lastEventTriggeredBeforeError = 17;
}

/*
==============
InviteJoinHSM::IsAcceptingInviteInitialized
==============
*/
_BOOL8 InviteJoinHSM::IsAcceptingInviteInitialized(InviteJoinHSM *this)
{
  return this->m_commonInviteData.acceptingInviteInitialized;
}

/*
==============
InviteJoinHSM::IsHSMHandlingInvitation
==============
*/
bool InviteJoinHSM::IsHSMHandlingInvitation(InviteJoinHSM *this)
{
  bool result; 

  if ( InvitationHSM_base::HSM_IsInState(this, st_processing_invite) )
    return 1;
  result = InvitationHSM_base::HSM_IsInState(this, st_preparing_users_for_processing_invite);
  if ( result )
    return 1;
  return result;
}

/*
==============
InviteJoinHSM::IsInSessionSearchState
==============
*/
bool InviteJoinHSM::IsInSessionSearchState(InviteJoinHSM *this)
{
  return InvitationHSM_base::HSM_IsInState(this, st_match_maker_lobby_search);
}

/*
==============
InviteJoinHSM::IsUserBeingJoinedOnIsAlreadyInParty
==============
*/
bool InviteJoinHSM::IsUserBeingJoinedOnIsAlreadyInParty(InviteJoinHSM *this)
{
  XUID *p_m_xuidOfUserBeingJoinedOn; 
  bool v3; 
  unsigned __int64 m_platformIdOfUserBeingJoinedOn; 
  bool result; 
  PartyType typeOfPartyTheUserIsIn; 

  p_m_xuidOfUserBeingJoinedOn = &this->m_commonInviteData.m_xuidOfUserBeingJoinedOn;
  if ( !XUID::IsValid(&this->m_commonInviteData.m_xuidOfUserBeingJoinedOn) && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\online\\invitejoinhsm_common.cpp", 553, ASSERT_TYPE_ASSERT, "(m_commonInviteData.m_xuidOfUserBeingJoinedOn.IsValid())", (const char *)&queryFormat, "m_commonInviteData.m_xuidOfUserBeingJoinedOn.IsValid()") )
    __debugbreak();
  if ( !XUID::IsValid(&this->m_commonInviteData.m_xuidOfUserJoining) && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\online\\invitejoinhsm_common.cpp", 554, ASSERT_TYPE_ASSERT, "(m_commonInviteData.m_xuidOfUserJoining.IsValid())", (const char *)&queryFormat, "m_commonInviteData.m_xuidOfUserJoining.IsValid()") )
    __debugbreak();
  v3 = XUID::IsValid(p_m_xuidOfUserBeingJoinedOn) && Party_IsPlayerInAnyParty((XUID)p_m_xuidOfUserBeingJoinedOn->m_id, &typeOfPartyTheUserIsIn);
  m_platformIdOfUserBeingJoinedOn = this->m_commonInviteData.m_platformIdOfUserBeingJoinedOn;
  result = m_platformIdOfUserBeingJoinedOn && Party_IsPlatformIdInAnyParty(m_platformIdOfUserBeingJoinedOn, &typeOfPartyTheUserIsIn);
  if ( v3 || result )
    return 1;
  return result;
}

/*
==============
InviteJoinHSM::IsWaitingForConfirmationDialogCurrently
==============
*/
bool InviteJoinHSM::IsWaitingForConfirmationDialogCurrently(InviteJoinHSM *this)
{
  return InvitationHSM_base::HSM_IsInState(this, st_waiting_for_warning_dialog);
}

/*
==============
InviteJoinHSM::JoinFromOnlineInvitation
==============
*/
bool InviteJoinHSM::JoinFromOnlineInvitation(InviteJoinHSM *this, const int controllerIndex, const Online_Invitation *inviteData)
{
  unsigned __int64 m_inviterPlatformId; 
  const char *v7; 
  bool result; 
  __int64 v9; 
  int v10; 

  if ( !this->m_hasBeenInitialized && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\online\\invitejoinhsm_common.cpp", 518, ASSERT_TYPE_ASSERT, "(m_hasBeenInitialized)", (const char *)&queryFormat, "m_hasBeenInitialized") )
    __debugbreak();
  if ( (unsigned int)controllerIndex >= 8 )
  {
    v10 = 8;
    LODWORD(v9) = controllerIndex;
    if ( CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\online\\invitejoinhsm_common.cpp", 519, ASSERT_TYPE_ASSERT, "(unsigned)( controllerIndex ) < (unsigned)( 8 )", "controllerIndex doesn't index MAX_GPAD_COUNT\n\t%i not in [0, %i)", v9, v10) )
      __debugbreak();
  }
  m_inviterPlatformId = inviteData->m_inviterPlatformId;
  v7 = XUID::ToDevString(&inviteData->m_inviterXUID);
  Com_Printf(25, "InviteJoinHSM::JoinFromOnlineInvitation from xuid(%s), platformId(%zu)\n", v7, m_inviterPlatformId);
  if ( InvitationHSM_base::HSM_IsInState(this, st_processing_invite) || InvitationHSM_base::HSM_IsInState(this, st_preparing_users_for_processing_invite) )
  {
    Com_Printf(25, "InviteJoinHSM::JoinFromOnlineInvitation, ignoring because are already joining somebody\n");
    return 0;
  }
  else
  {
    if ( this->m_initialDataTypeForJoining )
    {
      if ( CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\online\\invitejoinhsm_common.cpp", 528, ASSERT_TYPE_ASSERT, "(m_initialDataTypeForJoining == InitialDataTypeForJoining::UNIVERSAL_ID)", (const char *)&queryFormat, "m_initialDataTypeForJoining == InitialDataTypeForJoining::UNIVERSAL_ID") )
        __debugbreak();
    }
    this->m_pendingInvitationController = controllerIndex;
    this->m_commonInviteData.fromGameInvite = 1;
    XUID::operator=(&this->m_commonInviteData.m_xuidOfUserBeingJoinedOn, &inviteData->m_inviterXUID);
    this->m_commonInviteData.m_platformIdOfUserBeingJoinedOn = inviteData->m_inviterPlatformId;
    XUID::operator=(&this->m_commonInviteData.m_xuidOfUserJoining, &inviteData->m_inviteeXUID);
    this->m_commonInviteData.m_platformIdOfUserJoining = inviteData->m_inviteePlatformId;
    InvitationHSM_base::HSM_TriggerEvent(this, INVITE_RECEIVED);
    this->m_lastStateBeforeError = InvitationHSM_base::HSM_GetCurrentState(this);
    result = 1;
    this->m_lastEventTriggeredBeforeError = 2;
  }
  return result;
}

/*
==============
InviteJoinHSM::OnDWInstantMessageFromUser
==============
*/
void InviteJoinHSM::OnDWInstantMessageFromUser(InviteJoinHSM *this, const int controllerIndex, const XUID senderXuid, const char *message)
{
  const char *v7; 
  __int64 v8; 
  int v9; 
  __int64 v10; 
  char v11; 
  char v12; 
  unsigned int v14; 
  InvitationHSM_base::eHSMEvents v15; 
  int CurrentState; 
  __int64 v17; 
  OnlineJoinInfo v18; 
  Online_Invitation v19; 
  XUID xuid; 

  xuid.m_id = senderXuid.m_id;
  Online_Invitation::Online_Invitation(&v19);
  v7 = ONLINE_INVITATION_MESSAGE_HEADER;
  v8 = -1i64;
  do
    ++v8;
  while ( ONLINE_INVITATION_MESSAGE_HEADER[v8] );
  v9 = v8 + 1;
  v10 = (int)v8 + 1;
  if ( !message && CoreAssert_Handler("c:\\workspace\\iw8\\shared\\codware\\core\\core_string.h", 181, ASSERT_TYPE_SANITY, "( s0 )", (const char *)&queryFormat, "s0") )
    __debugbreak();
  do
  {
    v11 = v7[message - ONLINE_INVITATION_MESSAGE_HEADER];
    v12 = *v7++;
    if ( !v10-- )
      break;
    if ( v11 != v12 )
      return;
  }
  while ( v11 );
  if ( message[v9] == 1 && (InvitationHSM_base::HSM_IsInState(this, st_processing_invite) || InvitationHSM_base::HSM_IsInState(this, st_preparing_users_for_processing_invite)) )
  {
    if ( this->m_pendingInvitationController >= 8u )
    {
      LODWORD(v17) = this->m_pendingInvitationController;
      if ( CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\online\\invitejoinhsm_common.cpp", 930, ASSERT_TYPE_ASSERT, "(unsigned)( m_pendingInvitationController ) < (unsigned)( 8 )", "m_pendingInvitationController doesn't index MAX_GPAD_COUNT\n\t%i not in [0, %i)", v17, 8) )
        __debugbreak();
    }
    if ( !XUID::IsValid(&this->m_commonInviteData.m_xuidOfUserBeingJoinedOn) && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\online\\invitejoinhsm_common.cpp", 931, ASSERT_TYPE_ASSERT, "(m_commonInviteData.m_xuidOfUserBeingJoinedOn.IsValid())", (const char *)&queryFormat, "m_commonInviteData.m_xuidOfUserBeingJoinedOn.IsValid()") )
      __debugbreak();
    if ( this->m_pendingInvitationController == controllerIndex && XUID::operator==(&this->m_commonInviteData.m_xuidOfUserBeingJoinedOn, &xuid) )
    {
      bdSecurityID::bdSecurityID(&v18.communicationInfo.session.m_security.m_id);
      bdSecurityKey::bdSecurityKey(&v18.communicationInfo.session.m_security.m_key);
      if ( message[v9 + 1] )
      {
        v14 = 129;
        if ( *(unsigned __int16 *)&message[(int)v8 + 3] < 0x81u )
          v14 = *(unsigned __int16 *)&message[(int)v8 + 3];
        OnlineJoinInfo::Deserialize(&v18, (const unsigned __int8 *)&message[(int)v8 + 5], v14);
        if ( XSESSION_INFO::IsValidSessionId(&v18.communicationInfo.session) )
        {
          if ( Online_Telemetry_IsOnlineCommunicationTelemetryEnabled() )
            Online_Telemetry_SendCommunicationEvent(controllerIndex, xuid, INVITE_JOIN_RECEIVE_JOIN_INFO, NULL);
          if ( Dvar_GetBool_Internal_DebugName(DVARBOOL_online_invite_hsm_should_check_blocklist, "online_invite_hsm_should_check_blocklist") && v18.isJoinerInInvitersBlocklist )
          {
            Com_SetErrorMessage("ONLINE/CANT_JOIN_YOU_ARE_BLOCKED");
            v15 = JOINER_IN_INVITERS_BLOCKLIST;
          }
          else
          {
            XSESSION_INFO::operator=(&this->m_joinInfoOfTheCurrentInviteJoinInProgress.communicationInfo.session, &v18.communicationInfo.session);
            this->m_joinInfoOfTheCurrentInviteJoinInProgress.gameMode[0] = v18.gameMode[0];
            this->m_joinInfoOfTheCurrentInviteJoinInProgress.isInMatchmakingArea = v18.isInMatchmakingArea;
            this->m_joinInfoOfTheCurrentInviteJoinInProgress.clientPlatform[0] = v18.clientPlatform[0];
            this->m_joinInfoOfTheCurrentInviteJoinInProgress.matchmakingLobbyId = v18.matchmakingLobbyId;
            this->m_joinInfoOfTheCurrentInviteJoinInProgress.tournamentId = v18.tournamentId;
            this->m_joinInfoOfTheCurrentInviteJoinInProgress.isJoinerInInvitersBlocklist = v18.isJoinerInInvitersBlocklist;
            v15 = JOIN_INFO_RECEIVED;
          }
          InvitationHSM_base::HSM_TriggerEvent(this, v15);
          CurrentState = InvitationHSM_base::HSM_GetCurrentState(this);
          this->m_lastEventTriggeredBeforeError = 44;
          goto LABEL_41;
        }
        Com_SetErrorMessage("MENU/JOIN_SESSION_INVALID");
      }
      else if ( message[(int)v8 + 3] == 1 || message[(int)v8 + 3] == 2 )
      {
        Com_SetErrorMessage("MENU/JOIN_SESSION_INVALID");
      }
      else
      {
        if ( message[(int)v8 + 3] != 3 )
        {
          if ( CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\online\\invitejoinhsm_common.cpp", 1003, ASSERT_TYPE_ASSERT, (const char *)&queryFormat.fmt + 3, "Unhandled invalid join info") )
            __debugbreak();
          goto LABEL_40;
        }
        Com_SetErrorMessage("XBOXLIVE/CANTJOINSESSION_HOST_PAUSED");
      }
      OnlineErrorManager::SetLastRecordedErrorCode(&g_onlineMgr.m_errorManager, MOVEMENT, NULL);
LABEL_40:
      InvitationHSM_base::HSM_TriggerEvent(this, INVALID_JOIN_INFO_RECEIVED);
      InviteJoinHSM::CopyLocalizedErrorCodeFromErrorManager(this);
      CurrentState = InvitationHSM_base::HSM_GetCurrentState(this);
      this->m_lastEventTriggeredBeforeError = 41;
LABEL_41:
      this->m_lastStateBeforeError = CurrentState;
      bdSecurityKey::~bdSecurityKey(&v18.communicationInfo.session.m_security.m_key);
      bdSecurityID::~bdSecurityID(&v18.communicationInfo.session.m_security.m_id);
    }
  }
}

/*
==============
InviteJoinHSM::OnEnterStartGetSenderXUID
==============
*/
void InviteJoinHSM::OnEnterStartGetSenderXUID(InviteJoinHSM *this)
{
  InvitationHSM_base::HSM_TriggerEvent(this, RESOLVE_INVITER_UNIVERSAL_ID);
  this->m_lastStateBeforeError = InvitationHSM_base::HSM_GetCurrentState(this);
  this->m_lastEventTriggeredBeforeError = 33;
}

/*
==============
InviteJoinHSM::OnSuspendResume
==============
*/
void InviteJoinHSM::OnSuspendResume(InviteJoinHSM *this)
{
  this->m_framesSinceSuspendResumedFlagWasSet = 0;
  this->m_applicationDidSuspendResume = 1;
}

/*
==============
InviteJoinHSM::RegisterApplicationSpecificPreJoinChecks
==============
*/
void InviteJoinHSM::RegisterApplicationSpecificPreJoinChecks(InviteJoinHSM *this, InviteHSMApplicationSpecificPreJoinCheckType type, void (*startCallback)(InviteHSMApplicationSpecificPreJoinCheckData *__struct_ptr), InviteHSMApplicationSpecificPreJoinCheckReturnValue (*updateCallback)(InviteHSMApplicationSpecificPreJoinCheckData *__struct_ptr))
{
  __int64 v4; 
  InviteHSMPreJoinExternalCheck *v8; 
  __int64 v9; 

  v4 = type;
  v8 = &this->m_applicationSpecificPreJoinChecks[type];
  if ( v8->m_startCallback && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\online\\invitejoinhsm_common.cpp", 292, ASSERT_TYPE_ASSERT, "(m_applicationSpecificPreJoinChecks[typeInt].m_startCallback == nullptr)", (const char *)&queryFormat, "m_applicationSpecificPreJoinChecks[typeInt].m_startCallback == nullptr") )
    __debugbreak();
  v9 = v4;
  if ( this->m_applicationSpecificPreJoinChecks[v9].m_updateCallback && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\online\\invitejoinhsm_common.cpp", 293, ASSERT_TYPE_ASSERT, "(m_applicationSpecificPreJoinChecks[typeInt].m_updateCallback == nullptr)", (const char *)&queryFormat, "m_applicationSpecificPreJoinChecks[typeInt].m_updateCallback == nullptr") )
    __debugbreak();
  v8->m_startCallback = (void (__fastcall *)(InviteHSMApplicationSpecificPreJoinCheckData))startCallback;
  this->m_applicationSpecificPreJoinChecks[v9].m_updateCallback = (InviteHSMApplicationSpecificPreJoinCheckReturnValue (__fastcall *)(InviteHSMApplicationSpecificPreJoinCheckData))updateCallback;
}

/*
==============
InviteJoinHSM::RegisterCallbackFromExternalSystem
==============
*/
void InviteJoinHSM::RegisterCallbackFromExternalSystem(InviteJoinHSM *this, void (*callback)(const int, const InviteJoinHSMResult, const char *))
{
  int v2; 
  void (__fastcall **m_externalCallbacks)(const int, const InviteJoinHSMResult, const char *); 
  __int64 i; 

  v2 = 0;
  m_externalCallbacks = this->m_externalCallbacks;
  for ( i = 0i64; i < 4; ++i )
  {
    if ( !*m_externalCallbacks )
    {
      this->m_externalCallbacks[v2] = callback;
      return;
    }
    ++v2;
    ++m_externalCallbacks;
  }
  if ( CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\online\\invitejoinhsm_common.cpp", 285, ASSERT_TYPE_ASSERT, (const char *)&queryFormat.fmt + 3, "InviteJoinHSM::RegisterCallbackFromExternalSystem, no free callback slot found") )
    __debugbreak();
}

/*
==============
InviteJoinHSM::ResetAcceptingInviteInitialized
==============
*/
void InviteJoinHSM::ResetAcceptingInviteInitialized(InviteJoinHSM *this)
{
  this->m_commonInviteData.acceptingInviteInitialized = 0;
}

/*
==============
InviteJoinHSM::ResetCommonInvitationData
==============
*/
void InviteJoinHSM::ResetCommonInvitationData(InviteJoinHSM *this)
{
  const XUID *v2; 
  const XUID *v3; 
  XUID result; 

  v2 = XUID::NullXUID(&result);
  XUID::operator=(&this->m_commonInviteData.m_xuidOfUserBeingJoinedOn, v2);
  v3 = XUID::NullXUID(&result);
  XUID::operator=(&this->m_commonInviteData.m_xuidOfUserJoining, v3);
  this->m_commonInviteData.m_platformIdOfUserBeingJoinedOn = 0i64;
  this->m_commonInviteData.m_platformIdOfUserJoining = 0i64;
  this->m_commonInviteData.fromGameInvite = 0;
  this->m_commonInviteData.lobbyid = 0i64;
  *(_WORD *)&this->m_commonInviteData.acceptingInviteInitialized = 0;
}

/*
==============
InviteJoinHSM::ResetDemonwareLogonRetry
==============
*/
void InviteJoinHSM::ResetDemonwareLogonRetry(InviteJoinHSM *this)
{
  int ControllerFromClient; 

  if ( dwAllDemonWareReconnectsDisabled() )
  {
    ControllerFromClient = CL_Mgr_GetControllerFromClient(LOCAL_CLIENT_0);
    DW_ResetLogon(ControllerFromClient);
  }
}

/*
==============
InviteJoinHSM::ResetExternalCallbacks
==============
*/
void InviteJoinHSM::ResetExternalCallbacks(InviteJoinHSM *this)
{
  this->m_externalCallbacks[0] = NULL;
  this->m_externalCallbacks[1] = NULL;
  this->m_externalCallbacks[2] = NULL;
  this->m_externalCallbacks[3] = NULL;
}

/*
==============
InviteJoinHSM::ResetPartyAtomicJoinForRetry
==============
*/
void InviteJoinHSM::ResetPartyAtomicJoinForRetry(InviteJoinHSM *this)
{
  PartyDisconnectReason v2; 

  Com_Printf(25, "%s\n", "InviteJoinHSM::ResetPartyAtomicJoinForRetry");
  LOBYTE(v2) = 21;
  PartyAtomic_AbortJoinAttempt(&g_partyJoinInfo, v2);
  InvitationHSM_base::HSM_TriggerEvent(this, READY_FOR_SESSION_SEARCH);
  this->m_lastStateBeforeError = InvitationHSM_base::HSM_GetCurrentState(this);
  this->m_lastEventTriggeredBeforeError = 80;
}

/*
==============
InviteJoinHSM::ResolveInviterUniversalId
==============
*/
void InviteJoinHSM::ResolveInviterUniversalId(InviteJoinHSM *this)
{
  UserIdResolver<1> *p_m_userIdResolver; 
  unsigned int *p_m_numXuids; 
  unsigned int v5; 
  unsigned int v7; 
  bool v8; 
  TaskCreateRequest request; 
  TaskCreateResult result; 
  int m_pendingInvitationController; 
  int v12; 
  InviteJoinHSM *v13; 
  __int64 v14; 
  __int64 v15; 
  __int64 v16; 
  void (__fastcall *v17)(GenericTask *, eTaskManagerTaskState); 
  __int64 v18; 
  char v19; 
  int v20; 
  __int64 v21; 

  v21 = -2i64;
  if ( XUID::IsValid(&this->m_commonInviteData.m_xuidOfUserBeingJoinedOn) || XUID::GetXUIDFromPlatformId(this->m_commonInviteData.m_platformIdOfUserBeingJoinedOn, &this->m_commonInviteData.m_xuidOfUserBeingJoinedOn) )
  {
    InvitationHSM_base::HSM_TriggerEvent(this, INVITER_UNIVERSAL_ID_RESOLVED);
    this->m_lastStateBeforeError = InvitationHSM_base::HSM_GetCurrentState(this);
    this->m_lastEventTriggeredBeforeError = 38;
    return;
  }
  if ( this->m_userIdResolver.m_taskId && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\online\\invitejoinhsm_common.cpp", 2095, ASSERT_TYPE_SANITY, "( !m_userIdResolver.IsBusy() )", (const char *)&queryFormat, "!m_userIdResolver.IsBusy()") )
    __debugbreak();
  p_m_userIdResolver = &this->m_userIdResolver;
  if ( (this->m_userIdResolver.m_numPlatformIds || this->m_userIdResolver.m_numXuids) && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\online\\invitejoinhsm_common.cpp", 2096, ASSERT_TYPE_SANITY, "( !m_userIdResolver.IsFull() )", (const char *)&queryFormat, "!m_userIdResolver.IsFull()") )
    __debugbreak();
  if ( !this->m_commonInviteData.m_platformIdOfUserBeingJoinedOn && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\online\\invitejoinhsm_common.cpp", 2097, ASSERT_TYPE_SANITY, "( m_commonInviteData.m_platformIdOfUserBeingJoinedOn != (0) )", (const char *)&queryFormat, "m_commonInviteData.m_platformIdOfUserBeingJoinedOn != INVALID_PLATFORM_ID") )
    __debugbreak();
  if ( p_m_userIdResolver->m_numPlatformIds && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\online\\online_userid_resolver.cpp", 82, ASSERT_TYPE_SANITY, "( m_numPlatformIds < MAX_REQUESTS )", (const char *)&queryFormat, "m_numPlatformIds < MAX_REQUESTS") )
    __debugbreak();
  p_m_numXuids = &this->m_userIdResolver.m_numXuids;
  if ( this->m_userIdResolver.m_numXuids && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\online\\online_userid_resolver.cpp", 83, ASSERT_TYPE_SANITY, "(m_numXuids == 0)", "%s\n\t\"Trying to mix xuids and platformIds in one Resolver Task Data, the DW code won't know how to handle this.\"", "m_numXuids == 0") )
    __debugbreak();
  if ( this->m_userIdResolver.m_taskId && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\online\\online_userid_resolver.cpp", 84, ASSERT_TYPE_SANITY, "( !IsBusy() )", (const char *)&queryFormat, "!IsBusy()") )
    __debugbreak();
  p_m_userIdResolver->m_platformIds[p_m_userIdResolver->m_numPlatformIds] = this->m_commonInviteData.m_platformIdOfUserBeingJoinedOn;
  v5 = p_m_userIdResolver->m_numPlatformIds + 1;
  p_m_userIdResolver->m_numPlatformIds = v5;
  v15 = 0i64;
  v16 = 0i64;
  v12 = -1;
  v14 = 0i64;
  v18 = 0i64;
  v19 = 1;
  v20 = 0;
  v13 = this;
  m_pendingInvitationController = this->m_pendingInvitationController;
  v17 = staticUserIdResolved;
  request.m_controllerIndex = m_pendingInvitationController;
  request.m_appTaskType = -1;
  request.m_appData = this;
  request.m_appSecondaryCallback = NULL;
  __asm { vpxor   xmm0, xmm0, xmm0 }
  *(_OWORD *)&request.m_asyncInfo = _XMM0;
  request.m_onCompletionCallback = staticUserIdResolved;
  request.m_onUpdateCallback = NULL;
  request.m_cancelTaskOnSignoutEvent = 1;
  request.m_timeoutInSeconds = 0;
  if ( this->m_userIdResolver.m_taskId )
  {
    Com_PrintError(25, "Trying to send user id resolve request when one is already in flight.\n ");
LABEL_24:
    TaskCreateRequest::~TaskCreateRequest(&request);
LABEL_34:
    OnlineErrorManager::SetLastRecordedErrorCode(&g_onlineMgr.m_errorManager, COUNT, NULL);
    Com_SetErrorMessage((const char *)&stru_143DD5890);
    InvitationHSM_base::HSM_TriggerEvent(this, INVITE_GENERIC_ERROR_NO_MSG);
    InviteJoinHSM::CopyLocalizedErrorCodeFromErrorManager(this);
    this->m_lastStateBeforeError = InvitationHSM_base::HSM_GetCurrentState(this);
    this->m_lastEventTriggeredBeforeError = 1;
    return;
  }
  v7 = *p_m_numXuids;
  if ( *p_m_numXuids )
  {
    if ( v5 )
    {
      Com_PrintError(25, "UserIdResolver contains both xuids and platformids, we don't know which direction to resolve.\n");
      goto LABEL_24;
    }
  }
  else if ( !v5 )
  {
    goto LABEL_24;
  }
  result.m_localTaskId = 0;
  result.m_task = NULL;
  if ( v7 )
    v8 = dwUserIdMap_ResolvePlatformIds(&request, &result, this->m_userIdResolver.m_xuids, v7, this->m_userIdResolver.m_platformIds, &this->m_userIdResolver.m_numPlatformIds);
  else
    v8 = dwUserIdMap_ResolveUniversalIds(&request, &result, this->m_userIdResolver.m_platformIds, v5, this->m_userIdResolver.m_xuids, &this->m_userIdResolver.m_numXuids);
  this->m_userIdResolver.m_taskId = result.m_localTaskId;
  TaskCreateRequest::~TaskCreateRequest(&request);
  if ( !v8 )
    goto LABEL_34;
}

/*
==============
InviteJoinHSM::ResolveJoinerUniversalId
==============
*/
void InviteJoinHSM::ResolveJoinerUniversalId(InviteJoinHSM *this)
{
  const XUID *Xuid; 
  int m_pendingInvitationController; 
  int v4; 
  XUID result; 

  if ( this->m_pendingInvitationController >= 8u )
  {
    v4 = 8;
    m_pendingInvitationController = this->m_pendingInvitationController;
    if ( CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\online\\invitejoinhsm_common.cpp", 2032, ASSERT_TYPE_ASSERT, "(unsigned)( m_pendingInvitationController ) < (unsigned)( 8 )", "m_pendingInvitationController doesn't index MAX_GPAD_COUNT\n\t%i not in [0, %i)", m_pendingInvitationController, v4) )
      __debugbreak();
  }
  if ( !Live_IsUserSignedInToDemonware(this->m_pendingInvitationController) && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\online\\invitejoinhsm_common.cpp", 2033, ASSERT_TYPE_ASSERT, "(Live_IsUserSignedInToDemonware( m_pendingInvitationController ))", (const char *)&queryFormat, "Live_IsUserSignedInToDemonware( m_pendingInvitationController )") )
    __debugbreak();
  if ( XUID::IsNull(&this->m_commonInviteData.m_xuidOfUserJoining) )
  {
    Xuid = Live_GetXuid(&result, this->m_pendingInvitationController);
    XUID::operator=(&this->m_commonInviteData.m_xuidOfUserJoining, Xuid);
  }
  InvitationHSM_base::HSM_TriggerEvent(this, JOINER_UNIVERSAL_ID_RESOLVED);
  this->m_lastStateBeforeError = InvitationHSM_base::HSM_GetCurrentState(this);
  this->m_lastEventTriggeredBeforeError = 30;
}

/*
==============
SendJoinInfoRequestComplete
==============
*/
void SendJoinInfoRequestComplete(GenericTask *pTask, eTaskManagerTaskState taskState)
{
  InviteJoinHSM *m_appData; 
  bdLobbyErrorCode ErrorCode; 
  bdLobbyErrorCode v6; 
  char _Buffer[256]; 

  m_appData = (InviteJoinHSM *)pTask->m_appData;
  if ( !m_appData && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\online\\invitejoinhsm_common.cpp", 1058, ASSERT_TYPE_ASSERT, "(hsm)", (const char *)&queryFormat, "hsm") )
    __debugbreak();
  if ( taskState )
  {
    ErrorCode = bdRemoteTask::getErrorCode(pTask->m_remoteDemonwareTask.m_ptr);
    Com_PrintError(25, "SendJoinInfoRequestComplete: Invitatin sent failed with error code %d\n", (unsigned int)ErrorCode);
    Com_SetErrorMessage("MENU/JOIN_SESSION_INVALID");
    v6 = bdRemoteTask::getErrorCode(pTask->m_remoteDemonwareTask.m_ptr);
    j_sprintf_s(_Buffer, 0x100ui64, "%d", (unsigned int)v6);
    OnlineErrorManager::SetLastRecordedErrorCode(&g_onlineMgr.m_errorManager, MOVEMENT, _Buffer);
    InviteJoinHSM::CopyLocalizedErrorCodeFromErrorManager(m_appData);
    InvitationHSM_base::HSM_TriggerEvent(m_appData, INVITE_GENERIC_ERROR_NO_MSG);
    m_appData->m_lastStateBeforeError = InvitationHSM_base::HSM_GetCurrentState(m_appData);
    m_appData->m_lastEventTriggeredBeforeError = 1;
  }
  else
  {
    Com_Printf(25, "SendJoinInfoRequestComplete: Join info request sent successfully\n");
    if ( Online_Telemetry_IsOnlineCommunicationTelemetryEnabled() )
      Online_Telemetry_SendCommunicationEvent(m_appData->m_pendingInvitationController, m_appData->m_commonInviteData.m_xuidOfUserBeingJoinedOn, INVITE_JOIN_REQUEST_JOIN_INFO, NULL);
  }
}

/*
==============
InviteJoinHSM::SendJoinInfoRequestFailed
==============
*/
void InviteJoinHSM::SendJoinInfoRequestFailed(InviteJoinHSM *this)
{
  InvitationHSM_base::HSM_TriggerEvent(this, INVITE_GENERIC_ERROR_NO_MSG);
  this->m_lastStateBeforeError = InvitationHSM_base::HSM_GetCurrentState(this);
  this->m_lastEventTriggeredBeforeError = 1;
}

/*
==============
InviteJoinHSM::SendJoinInfoRequestSuccess
==============
*/
void InviteJoinHSM::SendJoinInfoRequestSuccess(InviteJoinHSM *this)
{
  if ( Online_Telemetry_IsOnlineCommunicationTelemetryEnabled() )
    Online_Telemetry_SendCommunicationEvent(this->m_pendingInvitationController, this->m_commonInviteData.m_xuidOfUserBeingJoinedOn, INVITE_JOIN_REQUEST_JOIN_INFO, NULL);
}

/*
==============
InviteJoinHSM::SetAcceptingInviteInitialized
==============
*/
void InviteJoinHSM::SetAcceptingInviteInitialized(InviteJoinHSM *this)
{
  this->m_commonInviteData.acceptingInviteInitialized = 1;
}

/*
==============
InviteJoinHSM::SetIsInviteOnline
==============
*/
void InviteJoinHSM::SetIsInviteOnline(InviteJoinHSM *this, bool isInviteOnline)
{
  this->m_commonInviteData.acceptingInviteOnline = isInviteOnline;
}

/*
==============
InviteJoinHSM::SetMatchmakerStartBackOffRequested
==============
*/
void InviteJoinHSM::SetMatchmakerStartBackOffRequested(InviteJoinHSM *this)
{
  if ( InvitationHSM_base::HSM_IsInState(this, st_match_maker_lobby_search) )
    this->m_matchmakerStartBackOffRequested = 1;
  else
    Com_Printf(25, "InvitationHSM_ps4::SetMatchmakerStartBackOffRequested called, but we are not in a session search state\n");
}

/*
==============
InviteJoinHSM::SetUIReadyToProcessInviteJoins
==============
*/
void InviteJoinHSM::SetUIReadyToProcessInviteJoins(InviteJoinHSM *this, bool value)
{
  this->m_uiReadyToProcessInviteJoins = value;
}

/*
==============
InviteJoinHSM::ShouldShowCancelButtonOnJoiningGameSessionPopup
==============
*/
_BOOL8 InviteJoinHSM::ShouldShowCancelButtonOnJoiningGameSessionPopup(InviteJoinHSM *this)
{
  const dvar_t *v2; 

  if ( !InvitationHSM_base::HSM_IsInState(this, st_processing_invite) && !InvitationHSM_base::HSM_IsInState(this, st_preparing_users_for_processing_invite) || !InvitationHSM_base::HSM_IsInState(this, st_processing_invite) && !InvitationHSM_base::HSM_IsInState(this, st_preparing_users_for_processing_invite) || InvitationHSM_base::HSM_IsInState(this, waiting_for_eula) || InvitationHSM_base::HSM_IsInState(this, st_waiting_for_warning_dialog) || InvitationHSM_base::HSM_IsInState(this, waiting_for_user_decision_on_invitable_privilege) )
    return 1i64;
  v2 = DVARBOOL_online_invite_join_supports_popup_without_cancel;
  if ( !DVARBOOL_online_invite_join_supports_popup_without_cancel && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\universal\\dvar.h", 692, ASSERT_TYPE_ASSERT, "(dvar)", "%s\n\tDvar %s accessed after deregistration", "dvar", "online_invite_join_supports_popup_without_cancel") )
    __debugbreak();
  Dvar_CheckFrontendServerThread(v2);
  return !v2->current.enabled || !InvitationHSM_base::HSM_IsInState(this, st_match_maker_lobby_search);
}

/*
==============
InviteJoinHSM::ShouldShowJoiningGameSessionPopup
==============
*/
_BOOL8 InviteJoinHSM::ShouldShowJoiningGameSessionPopup(InviteJoinHSM *this)
{
  return (InvitationHSM_base::HSM_IsInState(this, st_processing_invite) || InvitationHSM_base::HSM_IsInState(this, st_preparing_users_for_processing_invite)) && !InvitationHSM_base::HSM_IsInState(this, waiting_for_eula) && !InvitationHSM_base::HSM_IsInState(this, st_waiting_for_warning_dialog) && !InvitationHSM_base::HSM_IsInState(this, waiting_for_user_decision_on_invitable_privilege);
}

/*
==============
InviteJoinHSM::ShouldShowLeavePartyConfirmationWarningPopup
==============
*/
bool InviteJoinHSM::ShouldShowLeavePartyConfirmationWarningPopup(InviteJoinHSM *this)
{
  bool result; 

  result = Com_FrontEnd_IsInFrontEnd();
  if ( result )
    return PartyUI_ShouldShowInviteWarning(&g_partyData);
  return result;
}

/*
==============
InviteJoinHSM::StartAcceptFriendJoin
==============
*/
void InviteJoinHSM::StartAcceptFriendJoin(InviteJoinHSM *this)
{
  this->StartJoinAccept(this);
}

/*
==============
InviteJoinHSM::StartAcceptInviteJoin
==============
*/
void InviteJoinHSM::StartAcceptInviteJoin(InviteJoinHSM *this)
{
  this->StartJoinAccept(this);
}

/*
==============
InviteJoinHSM::StartAtomicPartyJoin
==============
*/
void InviteJoinHSM::StartAtomicPartyJoin(InviteJoinHSM *this)
{
  if ( !XSESSION_INFO::IsValidSessionId(&this->m_joinInfoOfTheCurrentInviteJoinInProgress.communicationInfo.session) && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\online\\invitejoinhsm_common.cpp", 1952, ASSERT_TYPE_ASSERT, "(m_joinInfoOfTheCurrentInviteJoinInProgress.communicationInfo.session.IsValidSessionId())", (const char *)&queryFormat, "m_joinInfoOfTheCurrentInviteJoinInProgress.communicationInfo.session.IsValidSessionId()") )
    __debugbreak();
  PartyAtomic_AcceptInviteMP(this->m_pendingInvitationController, &this->m_joinInfoOfTheCurrentInviteJoinInProgress.communicationInfo.session, this->m_commonInviteData.lobbyid, this->m_commonInviteData.fromGameInvite, this->m_commonInviteData.acceptingInviteOnline);
  if ( Online_Telemetry_IsOnlineCommunicationTelemetryEnabled() )
    Online_Telemetry_SendCommunicationEvent(this->m_pendingInvitationController, this->m_commonInviteData.m_xuidOfUserBeingJoinedOn, INVITE_JOIN_START_PARTY_JOIN_FROM_HSM, NULL);
  this->m_inviteJoinResult = COUNT|DODGE;
}

/*
==============
InviteJoinHSM::StartCrossLaunchJoin
==============
*/
void InviteJoinHSM::StartCrossLaunchJoin(InviteJoinHSM *this, int controllerIndex, const OnlineJoinInfo *joinInfo)
{
  ;
}

/*
==============
InviteJoinHSM::StartJoinAccept
==============
*/
void InviteJoinHSM::StartJoinAccept(InviteJoinHSM *this)
{
  const XUID *Xuid; 
  int m_pendingInvitationController; 
  int v4; 
  XUID result; 

  if ( this->m_pendingInvitationController >= 8u )
  {
    v4 = 8;
    m_pendingInvitationController = this->m_pendingInvitationController;
    if ( CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\online\\invitejoinhsm_common.cpp", 796, ASSERT_TYPE_ASSERT, "(unsigned)( m_pendingInvitationController ) < (unsigned)( 8 )", "m_pendingInvitationController doesn't index MAX_GPAD_COUNT\n\t%i not in [0, %i)", m_pendingInvitationController, v4) )
      __debugbreak();
  }
  if ( this->m_initialDataTypeForJoining )
  {
    this->m_commonInviteData.acceptingInviteInitialized = 0;
    InvitationHSM_base::HSM_TriggerEvent(this, INVITE_JOIN_ACCEPTED_START_FENCE);
    this->m_lastStateBeforeError = InvitationHSM_base::HSM_GetCurrentState(this);
    this->m_lastEventTriggeredBeforeError = 57;
  }
  else if ( XSESSION_INFO::IsValidSessionId(&this->m_joinInfoOfTheCurrentInviteJoinInProgress.communicationInfo.session) )
  {
    if ( Live_IsCurrentlyInAGameServerSession(this->m_pendingInvitationController) && Live_DoesSessionMatchGameServerSession(&this->m_joinInfoOfTheCurrentInviteJoinInProgress.communicationInfo.session) )
    {
      InvitationHSM_base::HSM_TriggerEvent(this, INVITE_ALREADY_IN_GAME_SERVER_SESSION_THAT_IS_BEING_JOINED_ON);
      this->m_lastStateBeforeError = InvitationHSM_base::HSM_GetCurrentState(this);
      this->m_lastEventTriggeredBeforeError = 60;
    }
    else if ( g_partyData.inParty && Party_CompareSession(&g_partyData, &this->m_joinInfoOfTheCurrentInviteJoinInProgress.communicationInfo.session) )
    {
      InvitationHSM_base::HSM_TriggerEvent(this, INVITE_ALREADY_IN_PARTY_SESSION_THAT_IS_BEING_JOINED_ON);
      this->m_lastStateBeforeError = InvitationHSM_base::HSM_GetCurrentState(this);
      this->m_lastEventTriggeredBeforeError = 61;
    }
    else
    {
      Xuid = Live_GetXuid(&result, this->m_pendingInvitationController);
      XUID::operator=(&g_launchData.invitedXUID, Xuid);
      g_launchData.aliensMode = this->m_joinInfoOfTheCurrentInviteJoinInProgress.gameMode[0] == 3;
      if ( Com_FrontEnd_IsInFrontEnd() && PartyUI_ShouldShowInviteWarning(&g_partyData) )
      {
        UI_ShowAcceptInviteWarningForLeavingParty(LOCAL_CLIENT_0);
        if ( InvitationHSM_base::HSM_IsInState(this, st_waiting_for_warning_dialog) && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\online\\invitejoinhsm_common.cpp", 855, ASSERT_TYPE_ASSERT, "(!IsWaitingForConfirmationDialogCurrently())", (const char *)&queryFormat, "!IsWaitingForConfirmationDialogCurrently()") )
          __debugbreak();
        InvitationHSM_base::HSM_TriggerEvent(this, INVITE_JOIN_WAITING_FOR_WARNING_DIALOG);
        this->m_lastStateBeforeError = InvitationHSM_base::HSM_GetCurrentState(this);
        this->m_lastEventTriggeredBeforeError = 58;
      }
      else
      {
        this->m_commonInviteData.acceptingInviteInitialized = 0;
        InviteJoinHSM::Handle_StartConfirmAcceptInvitation(this);
      }
    }
  }
  else
  {
    InvitationHSM_base::HSM_TriggerEvent(this, INVITE_SESSION_INFO_INVALID);
    this->m_lastStateBeforeError = InvitationHSM_base::HSM_GetCurrentState(this);
    this->m_lastEventTriggeredBeforeError = 59;
  }
}

/*
==============
InviteJoinHSM::StartJoiningLobby
==============
*/
bool InviteJoinHSM::StartJoiningLobby(InviteJoinHSM *this, int controllerIndex, const unsigned __int64 lobbyId)
{
  bool result; 
  int v8; 
  char *errorString; 
  char *devErrorString; 

  if ( (unsigned int)controllerIndex >= 8 )
  {
    v8 = 8;
    if ( CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\online\\invitejoinhsm_common.cpp", 1179, ASSERT_TYPE_ASSERT, "(unsigned)( controllerIndex ) < (unsigned)( 8 )", "controllerIndex doesn't index MAX_GPAD_COUNT\n\t%i not in [0, %i)", controllerIndex, v8) )
      __debugbreak();
  }
  if ( !Live_HasOnlineServicesAndRequirementsToInvite(controllerIndex, (const char **)&errorString, (const char **)&devErrorString, 0) && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\online\\invitejoinhsm_common.cpp", 1180, ASSERT_TYPE_ASSERT, "(Live_HasOnlineServicesAndRequirementsToInvite( controllerIndex, &errorString, &devErrorString, false ))", (const char *)&queryFormat, "Live_HasOnlineServicesAndRequirementsToInvite( controllerIndex, &errorString, &devErrorString, false )") )
    __debugbreak();
  if ( InvitationHSM_base::HSM_IsInState(this, st_processing_invite) || InvitationHSM_base::HSM_IsInState(this, st_preparing_users_for_processing_invite) )
  {
    Com_Printf(25, "InviteJoinHSM::StartJoiningLobby, ignoring because are already joining somebody\n");
    return 0;
  }
  else
  {
    this->m_initialDataTypeForJoining = LOBBY_ID;
    this->m_commonInviteData.lobbyid = lobbyId;
    this->m_joinInfoOfTheCurrentInviteJoinInProgress.isInMatchmakingArea = 1;
    this->m_pendingInvitationController = controllerIndex;
    this->m_commonInviteData.fromGameInvite = 0;
    InvitationHSM_base::HSM_TriggerEvent(this, START_JOINING_LOBBY);
    this->m_lastStateBeforeError = InvitationHSM_base::HSM_GetCurrentState(this);
    result = 1;
    this->m_lastEventTriggeredBeforeError = 5;
  }
  return result;
}

/*
==============
InviteJoinHSM::StartJoiningUser
==============
*/
bool InviteJoinHSM::StartJoiningUser(InviteJoinHSM *this, const int controllerIndex, XUID xuid, unsigned __int64 platformId)
{
  const XUID *v7; 
  int v8; 
  bool v9; 
  int v11; 
  char *devErrorString; 
  char *errorString; 
  XUID result; 
  XUID xuida; 

  xuida.m_id = xuid.m_id;
  if ( (unsigned int)controllerIndex >= 8 )
  {
    v11 = 8;
    if ( CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\online\\invitejoinhsm_common.cpp", 1132, ASSERT_TYPE_ASSERT, "(unsigned)( controllerIndex ) < (unsigned)( 8 )", "controllerIndex doesn't index MAX_GPAD_COUNT\n\t%i not in [0, %i)", controllerIndex, v11) )
      __debugbreak();
  }
  if ( !Live_HasOnlineServicesAndRequirementsToInvite(controllerIndex, (const char **)&errorString, (const char **)&devErrorString, 0) && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\online\\invitejoinhsm_common.cpp", 1133, ASSERT_TYPE_ASSERT, "(Live_HasOnlineServicesAndRequirementsToInvite( controllerIndex, &errorString, &devErrorString, false ))", (const char *)&queryFormat, "Live_HasOnlineServicesAndRequirementsToInvite( controllerIndex, &errorString, &devErrorString, false )") )
    __debugbreak();
  if ( InvitationHSM_base::HSM_IsInState(this, st_processing_invite) || InvitationHSM_base::HSM_IsInState(this, st_preparing_users_for_processing_invite) )
  {
    Com_Printf(25, "InviteJoinHSM::StartJoiningUser, ignoring because are already joining somebody\n");
    return 0;
  }
  else
  {
    if ( this->m_initialDataTypeForJoining )
    {
      if ( CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\online\\invitejoinhsm_common.cpp", 1142, ASSERT_TYPE_ASSERT, "(m_initialDataTypeForJoining == InitialDataTypeForJoining::UNIVERSAL_ID)", (const char *)&queryFormat, "m_initialDataTypeForJoining == InitialDataTypeForJoining::UNIVERSAL_ID") )
        __debugbreak();
    }
    XUID::operator=(&this->m_commonInviteData.m_xuidOfUserBeingJoinedOn, &xuida);
    v7 = Live_GetXuid(&result, controllerIndex);
    XUID::operator=(&this->m_commonInviteData.m_xuidOfUserJoining, v7);
    this->m_commonInviteData.m_platformIdOfUserBeingJoinedOn = platformId;
    this->m_pendingInvitationController = controllerIndex;
    this->m_commonInviteData.fromGameInvite = 0;
    v8 = XUID::IsValid(&xuida) + 3;
    InvitationHSM_base::HSM_TriggerEvent(this, (InvitationHSM_base::eHSMEvents)v8);
    this->m_lastStateBeforeError = InvitationHSM_base::HSM_GetCurrentState(this);
    v9 = 1;
    this->m_lastEventTriggeredBeforeError = v8;
  }
  return v9;
}

/*
==============
InviteJoinHSM::StartMainMenuFence
==============
*/
void InviteJoinHSM::StartMainMenuFence(InviteJoinHSM *this)
{
  LocalClientNum_t outLocalClientNum; 

  if ( this->m_pendingInvitationController == -1 && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\online\\invitejoinhsm_common.cpp", 693, ASSERT_TYPE_ASSERT, "(m_pendingInvitationController != (-1))", (const char *)&queryFormat, "m_pendingInvitationController != INVALID_CONTROLLER_PORT") )
    __debugbreak();
  if ( CL_Mgr_GetMode() == CLIENT_MANAGER_MODE_NO_CLIENTS )
    CL_Mgr_ActivateClient(LOCAL_CLIENT_0, this->m_pendingInvitationController);
  if ( !Live_HasCompletedFirstBootFlow() )
  {
    if ( CL_Mgr_IsControllerMappedToClient(this->m_pendingInvitationController, &outLocalClientNum) )
    {
      PartyUI_OpenMenu(outLocalClientNum, AERIAL, 1);
    }
    else if ( CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\online\\invitejoinhsm_common.cpp", 710, ASSERT_TYPE_ASSERT, (const char *)&queryFormat.fmt + 3, "Could not find a client num for pending invitation controller") )
    {
      __debugbreak();
    }
  }
}

/*
==============
InviteJoinHSM::StartMatchMakerSessionSearch
==============
*/
void InviteJoinHSM::StartMatchMakerSessionSearch(InviteJoinHSM *this)
{
  InitialDataTypeForJoining m_initialDataTypeForJoining; 

  Com_Printf(25, "StartMatchMakerSessionSearch - beginning invite matchmaking search.\n");
  ++this->m_sessionSearchAttemptCount;
  m_initialDataTypeForJoining = this->m_initialDataTypeForJoining;
  if ( m_initialDataTypeForJoining == UNIVERSAL_ID )
  {
    if ( !Session_JoinInProgress_ByXUID(this->m_pendingInvitationController, this->m_commonInviteData.m_xuidOfUserBeingJoinedOn) )
    {
LABEL_3:
      Com_Printf(25, "\tSession_JoinInProgress failed.\n");
      InvitationHSM_base::HSM_TriggerEvent(this, INVITE_GENERIC_COM_ERROR);
      InviteJoinHSM::CopyLocalizedErrorCodeFromErrorManager(this);
      this->m_lastStateBeforeError = InvitationHSM_base::HSM_GetCurrentState(this);
      this->m_lastEventTriggeredBeforeError = 0;
      this->m_inviteJoinResult = COUNT;
      return;
    }
    goto LABEL_6;
  }
  if ( m_initialDataTypeForJoining == LOBBY_ID )
  {
    if ( !Session_JoinInProgress_ByLobbyId(this->m_pendingInvitationController, this->m_commonInviteData.lobbyid) )
      goto LABEL_3;
LABEL_6:
    Com_Printf(25, "\tSession_JoinInProgress called, waiting for result.\n");
  }
  this->m_inviteJoinResult = COUNT;
}

/*
==============
InviteJoinHSM::StoreLastEventTriggered
==============
*/
void InviteJoinHSM::StoreLastEventTriggered(InviteJoinHSM *this, InvitationHSM_base::eHSMEvents event)
{
  this->m_lastEventTriggeredBeforeError = event;
}

/*
==============
InviteJoinHSM::UserIdResolved
==============
*/
void InviteJoinHSM::UserIdResolved(InviteJoinHSM *this, GenericTask *task, eTaskManagerTaskState taskState)
{
  int v4; 
  __int64 v5; 
  XUID xuid; 

  if ( taskState )
  {
    v4 = 36;
  }
  else
  {
    if ( this->m_userIdResolver.m_numXuids != 1 && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\online\\invitejoinhsm_common.cpp", 2059, ASSERT_TYPE_ASSERT, "(m_userIdResolver.XuidCount() == 1)", (const char *)&queryFormat, "m_userIdResolver.XuidCount() == 1") )
      __debugbreak();
    if ( !this->m_userIdResolver.m_numXuids )
    {
      LODWORD(v5) = 0;
      if ( CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\online\\online_userid_resolver.cpp", 136, ASSERT_TYPE_ASSERT, "(unsigned)( index ) < (unsigned)( m_numXuids )", "index doesn't index m_numXuids\n\t%i not in [0, %i)", v5, 0) )
        __debugbreak();
    }
    xuid.m_id = this->m_userIdResolver.m_xuids[0].m_id;
    XUID::operator=(&this->m_commonInviteData.m_xuidOfUserBeingJoinedOn, &xuid);
    v4 = 38;
  }
  InvitationHSM_base::HSM_TriggerEvent(this, (InvitationHSM_base::eHSMEvents)v4);
  this->m_lastStateBeforeError = InvitationHSM_base::HSM_GetCurrentState(this);
  this->m_lastEventTriggeredBeforeError = v4;
}

/*
==============
InviteJoinHSM::VerifyEULAAccepted
==============
*/
void InviteJoinHSM::VerifyEULAAccepted(InviteJoinHSM *this)
{
  int v2; 

  if ( !Live_CanCheckGamerProfileContents() || !Live_HasAcceptedEULA() || (v2 = 9, !Live_HasEverPlayedMainMenu()) )
    v2 = 23;
  InvitationHSM_base::HSM_TriggerEvent(this, (InvitationHSM_base::eHSMEvents)v2);
  this->m_lastEventTriggeredBeforeError = v2;
  this->m_lastStateBeforeError = InvitationHSM_base::HSM_GetCurrentState(this);
}

/*
==============
InviteJoinHSM::VerifyInvitationController
==============
*/
void InviteJoinHSM::VerifyInvitationController(InviteJoinHSM *this)
{
  if ( this->m_pendingInvitationController == -1 && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\online\\invitejoinhsm_common.cpp", 637, ASSERT_TYPE_ASSERT, "(m_pendingInvitationController != (-1))", (const char *)&queryFormat, "m_pendingInvitationController != INVALID_CONTROLLER_PORT") )
    __debugbreak();
  InvitationHSM_base::HSM_TriggerEvent(this, INVITE_CHECK_PERMISSIONS);
  this->m_lastStateBeforeError = InvitationHSM_base::HSM_GetCurrentState(this);
  this->m_lastEventTriggeredBeforeError = 8;
}

/*
==============
InviteJoinHSM::VerifyJoinability
==============
*/
void InviteJoinHSM::VerifyJoinability(InviteJoinHSM *this)
{
  const char *v2; 
  const char *v3; 
  bool v4; 
  unsigned __int64 m_platformIdOfUserBeingJoinedOn; 
  bool v6; 
  int CurrentState; 
  PartyType typeOfPartyTheUserIsIn; 

  if ( !XUID::IsValid(&this->m_commonInviteData.m_xuidOfUserBeingJoinedOn) && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\online\\invitejoinhsm_common.cpp", 2124, ASSERT_TYPE_ASSERT, "(m_commonInviteData.m_xuidOfUserBeingJoinedOn.IsValid())", (const char *)&queryFormat, "m_commonInviteData.m_xuidOfUserBeingJoinedOn.IsValid()") )
    __debugbreak();
  if ( !XUID::IsValid(&this->m_commonInviteData.m_xuidOfUserJoining) && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\online\\invitejoinhsm_common.cpp", 2125, ASSERT_TYPE_ASSERT, "(m_commonInviteData.m_xuidOfUserJoining.IsValid())", (const char *)&queryFormat, "m_commonInviteData.m_xuidOfUserJoining.IsValid()") )
    __debugbreak();
  if ( XUID::operator==(&this->m_commonInviteData.m_xuidOfUserBeingJoinedOn, &this->m_commonInviteData.m_xuidOfUserJoining) )
  {
    v2 = XUID::ToDevString(&this->m_commonInviteData.m_xuidOfUserJoining);
    v3 = XUID::ToDevString(&this->m_commonInviteData.m_xuidOfUserBeingJoinedOn);
    Com_Printf(16, "VerifyJoinability controller %d is trying to join themselves %s == %s!\n", (unsigned int)this->m_pendingInvitationController, v3, v2);
LABEL_9:
    Com_SetErrorMessage("XBOXLIVE/CANTJOINOWNSESSION");
    OnlineErrorManager::SetLastRecordedErrorCode(&g_onlineMgr.m_errorManager, (Online_Error_CAT_INVITE_t)0x8000000, NULL);
LABEL_30:
    InvitationHSM_base::HSM_TriggerEvent(this, INVITE_GENERIC_ERROR_NO_MSG);
    InviteJoinHSM::CopyLocalizedErrorCodeFromErrorManager(this);
    CurrentState = InvitationHSM_base::HSM_GetCurrentState(this);
    this->m_lastEventTriggeredBeforeError = 1;
    goto LABEL_31;
  }
  if ( Live_XUIDIsLocalPlayer(this->m_commonInviteData.m_xuidOfUserBeingJoinedOn) )
  {
    Com_Printf(16, "VerifyJoinability controller %d is trying to join local player!\n", (unsigned int)this->m_pendingInvitationController);
    goto LABEL_9;
  }
  if ( !XUID::IsValid(&this->m_commonInviteData.m_xuidOfUserBeingJoinedOn) && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\online\\invitejoinhsm_common.cpp", 553, ASSERT_TYPE_ASSERT, "(m_commonInviteData.m_xuidOfUserBeingJoinedOn.IsValid())", (const char *)&queryFormat, "m_commonInviteData.m_xuidOfUserBeingJoinedOn.IsValid()") )
    __debugbreak();
  if ( !XUID::IsValid(&this->m_commonInviteData.m_xuidOfUserJoining) && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\online\\invitejoinhsm_common.cpp", 554, ASSERT_TYPE_ASSERT, "(m_commonInviteData.m_xuidOfUserJoining.IsValid())", (const char *)&queryFormat, "m_commonInviteData.m_xuidOfUserJoining.IsValid()") )
    __debugbreak();
  v4 = XUID::IsValid(&this->m_commonInviteData.m_xuidOfUserBeingJoinedOn) && Party_IsPlayerInAnyParty(this->m_commonInviteData.m_xuidOfUserBeingJoinedOn, &typeOfPartyTheUserIsIn);
  m_platformIdOfUserBeingJoinedOn = this->m_commonInviteData.m_platformIdOfUserBeingJoinedOn;
  v6 = m_platformIdOfUserBeingJoinedOn && Party_IsPlatformIdInAnyParty(m_platformIdOfUserBeingJoinedOn, &typeOfPartyTheUserIsIn);
  if ( v4 || v6 )
  {
    OnlineErrorManager::SetLastRecordedErrorCode(&g_onlineMgr.m_errorManager, MOVEMENT, NULL);
    Com_SetErrorMessage("MPUI/CANTJOINALREADYINPARTY");
    goto LABEL_30;
  }
  InvitationHSM_base::HSM_TriggerEvent(this, JOINABILITY_VERIFIED);
  CurrentState = InvitationHSM_base::HSM_GetCurrentState(this);
  this->m_lastEventTriggeredBeforeError = 39;
LABEL_31:
  this->m_lastStateBeforeError = CurrentState;
}

/*
==============
InviteJoinHSM::WaitForDemonwareAuthenticationUpdate
==============
*/
void InviteJoinHSM::WaitForDemonwareAuthenticationUpdate(InviteJoinHSM *this)
{
  PublisherVariableManager *v2; 
  DWServicesAccess *Instance; 
  PublisherVariableManager *v4; 
  bool HasRetrievedVariables; 
  int v6; 

  if ( this->m_pendingInvitationController == -1 && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\online\\invitejoinhsm_common.cpp", 476, ASSERT_TYPE_ASSERT, "(m_pendingInvitationController != (-1))", (const char *)&queryFormat, "m_pendingInvitationController != INVALID_CONTROLLER_PORT") )
    __debugbreak();
  if ( Live_IsUserSignedInToDemonware(this->m_pendingInvitationController) && (v2 = PublisherVariableManager::GetInstance(), PublisherVariableManager::HasRetrievedVariables(v2)) )
  {
    InvitationHSM_base::HSM_TriggerEvent(this, INVITE_AUTHENTICATED);
    this->m_lastStateSpecificErrorCode = -1;
    this->m_lastStateBeforeError = InvitationHSM_base::HSM_GetCurrentState(this);
    this->m_lastEventTriggeredBeforeError = 29;
  }
  else
  {
    Instance = DWServicesAccess::GetInstance();
    if ( DWServicesAccess::isReady(Instance, this->m_pendingInvitationController) )
    {
      if ( Live_IsUserSignedInToLive(this->m_pendingInvitationController) )
      {
        if ( Live_IsConnectedToDemonware(this->m_pendingInvitationController) )
        {
          v4 = PublisherVariableManager::GetInstance();
          HasRetrievedVariables = PublisherVariableManager::HasRetrievedVariables(v4);
          v6 = 0;
          if ( !HasRetrievedVariables )
            v6 = 4;
          this->m_lastStateSpecificErrorCode = v6;
        }
        else
        {
          this->m_lastStateSpecificErrorCode = 3;
        }
      }
      else
      {
        this->m_lastStateSpecificErrorCode = 2;
      }
    }
    else
    {
      this->m_lastStateSpecificErrorCode = 1;
    }
  }
}

/*
==============
staticUserIdResolved
==============
*/
void staticUserIdResolved(GenericTask *task, eTaskManagerTaskState taskState)
{
  void *m_appData; 
  InvitationHSM_base::eHSMEvents v3; 
  __int64 v4; 
  XUID xuid; 

  m_appData = task->m_appData;
  if ( taskState )
  {
    v3 = INVITE_RESOLVE_INVITER_UNIVERSAL_ID_FAILED;
  }
  else
  {
    if ( *((_DWORD *)m_appData + 174) != 1 && CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\online\\invitejoinhsm_common.cpp", 2059, ASSERT_TYPE_ASSERT, "(m_userIdResolver.XuidCount() == 1)", (const char *)&queryFormat, "m_userIdResolver.XuidCount() == 1") )
      __debugbreak();
    if ( !*((_DWORD *)m_appData + 174) )
    {
      LODWORD(v4) = 0;
      if ( CoreAssert_Handler("c:\\workspace\\iw8\\code_source\\src\\online\\online_userid_resolver.cpp", 136, ASSERT_TYPE_ASSERT, "(unsigned)( index ) < (unsigned)( m_numXuids )", "index doesn't index m_numXuids\n\t%i not in [0, %i)", v4, 0) )
        __debugbreak();
    }
    xuid.m_id = *((_QWORD *)m_appData + 88);
    XUID::operator=((XUID *)m_appData + 27, &xuid);
    v3 = INVITER_UNIVERSAL_ID_RESOLVED;
  }
  InvitationHSM_base::HSM_TriggerEvent((InvitationHSM_base *)m_appData, v3);
  *((_DWORD *)m_appData + 164) = InvitationHSM_base::HSM_GetCurrentState((InvitationHSM_base *)m_appData);
  *((_DWORD *)m_appData + 165) = v3;
}

